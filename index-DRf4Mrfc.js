(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))O(T);new MutationObserver(T=>{for(const _ of T)if(_.type==="childList")for(const E of _.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&O(E)}).observe(document,{childList:!0,subtree:!0});function C(T){const _={};return T.integrity&&(_.integrity=T.integrity),T.referrerPolicy&&(_.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?_.credentials="include":T.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function O(T){if(T.ep)return;T.ep=!0;const _=C(T);fetch(T.href,_)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var te=Symbol.for("react.transitional.element"),j=Symbol.for("react.fragment");function C(O,T,_){var E=null;if(_!==void 0&&(E=""+_),T.key!==void 0&&(E=""+T.key),"key"in T){_={};for(var g in T)g!=="key"&&(_[g]=T[g])}else _=T;return T=_.ref,{$$typeof:te,type:O,key:E,ref:T!==void 0?T:null,props:_}}return reactJsxRuntime_production.Fragment=j,reactJsxRuntime_production.jsx=C,reactJsxRuntime_production.jsxs=C,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var te=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function c(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s=Object.assign,r={};function i(q,B,Y){this.props=q,this.context=B,this.refs=r,this.updater=Y||u}i.prototype.isReactComponent={},i.prototype.setState=function(q,B){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,B,"setState")},i.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function a(){}a.prototype=i.prototype;function o(q,B,Y){this.props=q,this.context=B,this.refs=r,this.updater=Y||u}var l=o.prototype=new a;l.constructor=o,s(l,i.prototype),l.isPureReactComponent=!0;var h=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function d(q,B,Y,K,ee,oe){return Y=oe.ref,{$$typeof:te,type:q,key:B,ref:Y!==void 0?Y:null,props:oe}}function D(q,B){return d(q.type,B,void 0,void 0,void 0,q.props)}function S(q){return typeof q=="object"&&q!==null&&q.$$typeof===te}function y(q){var B={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Y){return B[Y]})}var k=/\/+/g;function b(q,B){return typeof q=="object"&&q!==null&&q.key!=null?y(""+q.key):B.toString(36)}function U(){}function z(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(B){q.status==="pending"&&(q.status="fulfilled",q.value=B)},function(B){q.status==="pending"&&(q.status="rejected",q.reason=B)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function P(q,B,Y,K,ee){var oe=typeof q;(oe==="undefined"||oe==="boolean")&&(q=null);var ae=!1;if(q===null)ae=!0;else switch(oe){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(q.$$typeof){case te:case j:ae=!0;break;case m:return ae=q._init,P(ae(q._payload),B,Y,K,ee)}}if(ae)return ee=ee(q),ae=K===""?"."+b(q,0):K,h(ee)?(Y="",ae!=null&&(Y=ae.replace(k,"$&/")+"/"),P(ee,B,Y,"",function(ie){return ie})):ee!=null&&(S(ee)&&(ee=D(ee,Y+(ee.key==null||q&&q.key===ee.key?"":(""+ee.key).replace(k,"$&/")+"/")+ae)),B.push(ee)),1;ae=0;var X=K===""?".":K+":";if(h(q))for(var re=0;re<q.length;re++)K=q[re],oe=X+b(K,re),ae+=P(K,B,Y,oe,ee);else if(re=c(q),typeof re=="function")for(q=re.call(q),re=0;!(K=q.next()).done;)K=K.value,oe=X+b(K,re++),ae+=P(K,B,Y,oe,ee);else if(oe==="object"){if(typeof q.then=="function")return P(z(q),B,Y,K,ee);throw B=String(q),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ae}function H(q,B,Y){if(q==null)return q;var K=[],ee=0;return P(q,K,"","",function(oe){return B.call(Y,oe,ee++)}),K}function Q(q){if(q._status===-1){var B=q._result;B=B(),B.then(function(Y){(q._status===0||q._status===-1)&&(q._status=1,q._result=Y)},function(Y){(q._status===0||q._status===-1)&&(q._status=2,q._result=Y)}),q._status===-1&&(q._status=0,q._result=B)}if(q._status===1)return q._result.default;throw q._result}var J=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function L(){}return react_production.Children={map:H,forEach:function(q,B,Y){H(q,function(){B.apply(this,arguments)},Y)},count:function(q){var B=0;return H(q,function(){B++}),B},toArray:function(q){return H(q,function(B){return B})||[]},only:function(q){if(!S(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},react_production.Component=i,react_production.Fragment=C,react_production.Profiler=T,react_production.PureComponent=o,react_production.StrictMode=O,react_production.Suspense=x,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},react_production.cache=function(q){return function(){return q.apply(null,arguments)}},react_production.cloneElement=function(q,B,Y){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var K=s({},q.props),ee=q.key,oe=void 0;if(B!=null)for(ae in B.ref!==void 0&&(oe=void 0),B.key!==void 0&&(ee=""+B.key),B)!w.call(B,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&B.ref===void 0||(K[ae]=B[ae]);var ae=arguments.length-2;if(ae===1)K.children=Y;else if(1<ae){for(var X=Array(ae),re=0;re<ae;re++)X[re]=arguments[re+2];K.children=X}return d(q.type,ee,void 0,void 0,oe,K)},react_production.createContext=function(q){return q={$$typeof:E,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:_,_context:q},q},react_production.createElement=function(q,B,Y){var K,ee={},oe=null;if(B!=null)for(K in B.key!==void 0&&(oe=""+B.key),B)w.call(B,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ee[K]=B[K]);var ae=arguments.length-2;if(ae===1)ee.children=Y;else if(1<ae){for(var X=Array(ae),re=0;re<ae;re++)X[re]=arguments[re+2];ee.children=X}if(q&&q.defaultProps)for(K in ae=q.defaultProps,ae)ee[K]===void 0&&(ee[K]=ae[K]);return d(q,oe,void 0,void 0,null,ee)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(q){return{$$typeof:g,render:q}},react_production.isValidElement=S,react_production.lazy=function(q){return{$$typeof:m,_payload:{_status:-1,_result:q},_init:Q}},react_production.memo=function(q,B){return{$$typeof:A,type:q,compare:B===void 0?null:B}},react_production.startTransition=function(q){var B=R.T,Y={};R.T=Y;try{var K=q(),ee=R.S;ee!==null&&ee(Y,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(L,J)}catch(oe){J(oe)}finally{R.T=B}},react_production.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},react_production.use=function(q){return R.H.use(q)},react_production.useActionState=function(q,B,Y){return R.H.useActionState(q,B,Y)},react_production.useCallback=function(q,B){return R.H.useCallback(q,B)},react_production.useContext=function(q){return R.H.useContext(q)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(q,B){return R.H.useDeferredValue(q,B)},react_production.useEffect=function(q,B,Y){var K=R.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(q,B)},react_production.useId=function(){return R.H.useId()},react_production.useImperativeHandle=function(q,B,Y){return R.H.useImperativeHandle(q,B,Y)},react_production.useInsertionEffect=function(q,B){return R.H.useInsertionEffect(q,B)},react_production.useLayoutEffect=function(q,B){return R.H.useLayoutEffect(q,B)},react_production.useMemo=function(q,B){return R.H.useMemo(q,B)},react_production.useOptimistic=function(q,B){return R.H.useOptimistic(q,B)},react_production.useReducer=function(q,B,Y){return R.H.useReducer(q,B,Y)},react_production.useRef=function(q){return R.H.useRef(q)},react_production.useState=function(q){return R.H.useState(q)},react_production.useSyncExternalStore=function(q,B,Y){return R.H.useSyncExternalStore(q,B,Y)},react_production.useTransition=function(){return R.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(te){function j(H,Q){var J=H.length;H.push(Q);e:for(;0<J;){var L=J-1>>>1,q=H[L];if(0<T(q,Q))H[L]=Q,H[J]=q,J=L;else break e}}function C(H){return H.length===0?null:H[0]}function O(H){if(H.length===0)return null;var Q=H[0],J=H.pop();if(J!==Q){H[0]=J;e:for(var L=0,q=H.length,B=q>>>1;L<B;){var Y=2*(L+1)-1,K=H[Y],ee=Y+1,oe=H[ee];if(0>T(K,J))ee<q&&0>T(oe,K)?(H[L]=oe,H[ee]=J,L=ee):(H[L]=K,H[Y]=J,L=Y);else if(ee<q&&0>T(oe,J))H[L]=oe,H[ee]=J,L=ee;else break e}}return Q}function T(H,Q){var J=H.sortIndex-Q.sortIndex;return J!==0?J:H.id-Q.id}if(te.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var _=performance;te.unstable_now=function(){return _.now()}}else{var E=Date,g=E.now();te.unstable_now=function(){return E.now()-g}}var x=[],A=[],m=1,f=null,c=3,u=!1,s=!1,r=!1,i=!1,a=typeof setTimeout=="function"?setTimeout:null,o=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;function h(H){for(var Q=C(A);Q!==null;){if(Q.callback===null)O(A);else if(Q.startTime<=H)O(A),Q.sortIndex=Q.expirationTime,j(x,Q);else break;Q=C(A)}}function R(H){if(r=!1,h(H),!s)if(C(x)!==null)s=!0,w||(w=!0,b());else{var Q=C(A);Q!==null&&P(R,Q.startTime-H)}}var w=!1,d=-1,D=5,S=-1;function y(){return i?!0:!(te.unstable_now()-S<D)}function k(){if(i=!1,w){var H=te.unstable_now();S=H;var Q=!0;try{e:{s=!1,r&&(r=!1,o(d),d=-1),u=!0;var J=c;try{t:{for(h(H),f=C(x);f!==null&&!(f.expirationTime>H&&y());){var L=f.callback;if(typeof L=="function"){f.callback=null,c=f.priorityLevel;var q=L(f.expirationTime<=H);if(H=te.unstable_now(),typeof q=="function"){f.callback=q,h(H),Q=!0;break t}f===C(x)&&O(x),h(H)}else O(x);f=C(x)}if(f!==null)Q=!0;else{var B=C(A);B!==null&&P(R,B.startTime-H),Q=!1}}break e}finally{f=null,c=J,u=!1}Q=void 0}}finally{Q?b():w=!1}}}var b;if(typeof l=="function")b=function(){l(k)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,z=U.port2;U.port1.onmessage=k,b=function(){z.postMessage(null)}}else b=function(){a(k,0)};function P(H,Q){d=a(function(){H(te.unstable_now())},Q)}te.unstable_IdlePriority=5,te.unstable_ImmediatePriority=1,te.unstable_LowPriority=4,te.unstable_NormalPriority=3,te.unstable_Profiling=null,te.unstable_UserBlockingPriority=2,te.unstable_cancelCallback=function(H){H.callback=null},te.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},te.unstable_getCurrentPriorityLevel=function(){return c},te.unstable_next=function(H){switch(c){case 1:case 2:case 3:var Q=3;break;default:Q=c}var J=c;c=Q;try{return H()}finally{c=J}},te.unstable_requestPaint=function(){i=!0},te.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=c;c=H;try{return Q()}finally{c=J}},te.unstable_scheduleCallback=function(H,Q,J){var L=te.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?L+J:L):J=L,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=J+q,H={id:m++,callback:Q,priorityLevel:H,startTime:J,expirationTime:q,sortIndex:-1},J>L?(H.sortIndex=J,j(A,H),C(x)===null&&H===C(A)&&(r?(o(d),d=-1):r=!0,P(R,J-L))):(H.sortIndex=q,j(x,H),s||u||(s=!0,w||(w=!0,b()))),H},te.unstable_shouldYield=y,te.unstable_wrapCallback=function(H){var Q=c;return function(){var J=c;c=Q;try{return H.apply(this,arguments)}finally{c=J}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var te=requireReact();function j(x){var A="https://react.dev/errors/"+x;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)A+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+x+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C(){}var O={d:{f:C,r:function(){throw Error(j(522))},D:C,C,L:C,m:C,X:C,S:C,M:C},p:0,findDOMNode:null},T=Symbol.for("react.portal");function _(x,A,m){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:x,containerInfo:A,implementation:m}}var E=te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,A){if(x==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,reactDom_production.createPortal=function(x,A){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(j(299));return _(x,A,null,m)},reactDom_production.flushSync=function(x){var A=E.T,m=O.p;try{if(E.T=null,O.p=2,x)return x()}finally{E.T=A,O.p=m,O.d.f()}},reactDom_production.preconnect=function(x,A){typeof x=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,O.d.C(x,A))},reactDom_production.prefetchDNS=function(x){typeof x=="string"&&O.d.D(x)},reactDom_production.preinit=function(x,A){if(typeof x=="string"&&A&&typeof A.as=="string"){var m=A.as,f=g(m,A.crossOrigin),c=typeof A.integrity=="string"?A.integrity:void 0,u=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;m==="style"?O.d.S(x,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:f,integrity:c,fetchPriority:u}):m==="script"&&O.d.X(x,{crossOrigin:f,integrity:c,fetchPriority:u,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},reactDom_production.preinitModule=function(x,A){if(typeof x=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var m=g(A.as,A.crossOrigin);O.d.M(x,{crossOrigin:m,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&O.d.M(x)},reactDom_production.preload=function(x,A){if(typeof x=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var m=A.as,f=g(m,A.crossOrigin);O.d.L(x,m,{crossOrigin:f,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},reactDom_production.preloadModule=function(x,A){if(typeof x=="string")if(A){var m=g(A.as,A.crossOrigin);O.d.m(x,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:m,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else O.d.m(x)},reactDom_production.requestFormReset=function(x){O.d.r(x)},reactDom_production.unstable_batchedUpdates=function(x,A){return x(A)},reactDom_production.useFormState=function(x,A,m){return E.H.useFormState(x,A,m)},reactDom_production.useFormStatus=function(){return E.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function te(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(te)}catch(j){console.error(j)}}return te(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var te=requireScheduler(),j=requireReact(),C=requireReactDom();function O(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)n+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _(t){var n=t,p=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(p=n.return),t=n.return;while(t)}return n.tag===3?p:null}function E(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(_(t)!==t)throw Error(O(188))}function x(t){var n=t.alternate;if(!n){if(n=_(t),n===null)throw Error(O(188));return n!==t?null:t}for(var p=t,I=n;;){var G=p.return;if(G===null)break;var F=G.alternate;if(F===null){if(I=G.return,I!==null){p=I;continue}break}if(G.child===F.child){for(F=G.child;F;){if(F===p)return g(G),t;if(F===I)return g(G),n;F=F.sibling}throw Error(O(188))}if(p.return!==I.return)p=G,I=F;else{for(var W=!1,se=G.child;se;){if(se===p){W=!0,p=G,I=F;break}if(se===I){W=!0,I=G,p=F;break}se=se.sibling}if(!W){for(se=F.child;se;){if(se===p){W=!0,p=F,I=G;break}if(se===I){W=!0,I=F,p=G;break}se=se.sibling}if(!W)throw Error(O(189))}}if(p.alternate!==I)throw Error(O(190))}if(p.tag!==3)throw Error(O(188));return p.stateNode.current===p?t:n}function A(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=A(t),n!==null)return n;t=t.sibling}return null}var m=Object.assign,f=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),y=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function b(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var U=Symbol.for("react.client.reference");function z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===U?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case s:return"Fragment";case i:return"Profiler";case r:return"StrictMode";case R:return"Suspense";case w:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case u:return"Portal";case l:return(t.displayName||"Context")+".Provider";case o:return(t._context.displayName||"Context")+".Consumer";case h:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d:return n=t.displayName||null,n!==null?n:z(t.type)||"Memo";case D:n=t._payload,t=t._init;try{return z(t(n))}catch{}}return null}var P=Array.isArray,H=j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=C.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},L=[],q=-1;function B(t){return{current:t}}function Y(t){0>q||(t.current=L[q],L[q]=null,q--)}function K(t,n){q++,L[q]=t.current,t.current=n}var ee=B(null),oe=B(null),ae=B(null),X=B(null);function re(t,n){switch(K(ae,n),K(oe,t),K(ee,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Cp(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Cp(n),t=Dp(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(ee),K(ee,t)}function ie(){Y(ee),Y(oe),Y(ae)}function ge(t){t.memoizedState!==null&&K(X,t);var n=ee.current,p=Dp(n,t.type);n!==p&&(K(oe,t),K(ee,p))}function _e(t){oe.current===t&&(Y(ee),Y(oe)),X.current===t&&(Y(X),oa._currentValue=J)}var ke=Object.prototype.hasOwnProperty,De=te.unstable_scheduleCallback,Re=te.unstable_cancelCallback,we=te.unstable_shouldYield,Oe=te.unstable_requestPaint,Ae=te.unstable_now,Pe=te.unstable_getCurrentPriorityLevel,Ue=te.unstable_ImmediatePriority,Ne=te.unstable_UserBlockingPriority,mt=te.unstable_NormalPriority,gt=te.unstable_LowPriority,Rt=te.unstable_IdlePriority,ps=te.log,hr=te.unstable_setDisableYieldValue,fs=null,St=null;function Gt(t){if(typeof ps=="function"&&hr(t),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(fs,t)}catch{}}var ot=Math.clz32?Math.clz32:qs,Ht=Math.log,Ye=Math.LN2;function qs(t){return t>>>=0,t===0?32:31-(Ht(t)/Ye|0)|0}var Xt=256,Wt=4194304;function hs(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kt(t,n,p){var I=t.pendingLanes;if(I===0)return 0;var G=0,F=t.suspendedLanes,W=t.pingedLanes;t=t.warmLanes;var se=I&134217727;return se!==0?(I=se&~F,I!==0?G=hs(I):(W&=se,W!==0?G=hs(W):p||(p=se&~t,p!==0&&(G=hs(p))))):(se=I&~F,se!==0?G=hs(se):W!==0?G=hs(W):p||(p=I&~t,p!==0&&(G=hs(p)))),G===0?0:n!==0&&n!==G&&(n&F)===0&&(F=G&-G,p=n&-n,F>=p||F===32&&(p&4194048)!==0)?n:G}function Js(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ms(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(){var t=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),t}function qt(){var t=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),t}function He(t){for(var n=[],p=0;31>p;p++)n.push(t);return n}function rs(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Or(t,n,p,I,G,F){var W=t.pendingLanes;t.pendingLanes=p,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=p,t.entangledLanes&=p,t.errorRecoveryDisabledLanes&=p,t.shellSuspendCounter=0;var se=t.entanglements,ue=t.expirationTimes,me=t.hiddenUpdates;for(p=W&~p;0<p;){var Se=31-ot(p),qe=1<<Se;se[Se]=0,ue[Se]=-1;var ve=me[Se];if(ve!==null)for(me[Se]=null,Se=0;Se<ve.length;Se++){var be=ve[Se];be!==null&&(be.lane&=-536870913)}p&=~qe}I!==0&&Lr(t,I,0),F!==0&&G===0&&t.tag!==0&&(t.suspendedLanes|=F&~(W&~n))}function Lr(t,n,p){t.pendingLanes|=n,t.suspendedLanes&=~n;var I=31-ot(n);t.entangledLanes|=n,t.entanglements[I]=t.entanglements[I]|1073741824|p&4194090}function Is(t,n){var p=t.entangledLanes|=n;for(t=t.entanglements;p;){var I=31-ot(p),G=1<<I;G&n|t[I]&n&&(t[I]|=n),p&=~G}}function mr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function gs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qt(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:Hp(t.type))}function Xs(t,n){var p=Q.p;try{return Q.p=t,n()}finally{Q.p=p}}var _s=Math.random().toString(36).slice(2),dt="__reactFiber$"+_s,It="__reactProps$"+_s,Ps="__reactContainer$"+_s,vn="__reactEvents$"+_s,Wn="__reactListeners$"+_s,$n="__reactHandles$"+_s,bn="__reactResources$"+_s,Ws="__reactMarker$"+_s;function Gr(t){delete t[dt],delete t[It],delete t[vn],delete t[Wn],delete t[$n]}function vs(t){var n=t[dt];if(n)return n;for(var p=t.parentNode;p;){if(n=p[Ps]||p[dt]){if(p=n.alternate,n.child!==null||p!==null&&p.child!==null)for(t=wp(t);t!==null;){if(p=t[dt])return p;t=wp(t)}return n}t=p,p=t.parentNode}return null}function As(t){if(t=t[dt]||t[Ps]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function $s(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(O(33))}function ws(t){var n=t[bn];return n||(n=t[bn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _t(t){t[Ws]=!0}var yn=new Set,Mn={};function Rs(t,n){ns(t,n),ns(t+"Capture",n)}function ns(t,n){for(Mn[t]=n,t=0;t<n.length;t++)yn.add(n[t])}var ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sn={},kn={};function ti(t){return ke.call(kn,t)?!0:ke.call(Sn,t)?!1:ei.test(t)?kn[t]=!0:(Sn[t]=!0,!1)}function Ts(t,n,p){if(ti(n))if(p===null)t.removeAttribute(n);else{switch(typeof p){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var I=n.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+p)}}function gr(t,n,p){if(p===null)t.removeAttribute(n);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+p)}}function is(t,n,p,I){if(I===null)t.removeAttribute(p);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(p);return}t.setAttributeNS(n,p,""+I)}}var Cn,Dn;function er(t){if(Cn===void 0)try{throw Error()}catch(p){var n=p.stack.trim().match(/\n( *(at )?)/);Cn=n&&n[1]||"",Dn=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+t+Dn}var qn=!1;function In(t,n){if(!t||qn)return"";qn=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(n){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(be){var ve=be}Reflect.construct(t,[],qe)}else{try{qe.call()}catch(be){ve=be}t.call(qe.prototype)}}else{try{throw Error()}catch(be){ve=be}(qe=t())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(be){if(be&&ve&&typeof be.stack=="string")return[be.stack,ve.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=I.DetermineComponentFrameRoot(),W=F[0],se=F[1];if(W&&se){var ue=W.split(`
`),me=se.split(`
`);for(G=I=0;I<ue.length&&!ue[I].includes("DetermineComponentFrameRoot");)I++;for(;G<me.length&&!me[G].includes("DetermineComponentFrameRoot");)G++;if(I===ue.length||G===me.length)for(I=ue.length-1,G=me.length-1;1<=I&&0<=G&&ue[I]!==me[G];)G--;for(;1<=I&&0<=G;I--,G--)if(ue[I]!==me[G]){if(I!==1||G!==1)do if(I--,G--,0>G||ue[I]!==me[G]){var Se=`
`+ue[I].replace(" at new "," at ");return t.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",t.displayName)),Se}while(1<=I&&0<=G);break}}}finally{qn=!1,Error.prepareStackTrace=p}return(p=t?t.displayName||t.name:"")?er(p):""}function Ji(t){switch(t.tag){case 26:case 27:case 5:return er(t.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 15:return In(t.type,!1);case 11:return In(t.type.render,!1);case 1:return In(t.type,!0);case 31:return er("Activity");default:return""}}function si(t){try{var n="";do n+=Ji(t),t=t.return;while(t);return n}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ri(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Xi(t){var n=ri(t)?"checked":"value",p=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),I=""+t[n];if(!t.hasOwnProperty(n)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var G=p.get,F=p.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return G.call(this)},set:function(W){I=""+W,F.call(this,W)}}),Object.defineProperty(t,n,{enumerable:p.enumerable}),{getValue:function(){return I},setValue:function(W){I=""+W},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function jr(t){t._valueTracker||(t._valueTracker=Xi(t))}function ni(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var p=n.getValue(),I="";return t&&(I=ri(t)?t.checked?"true":"false":t.value),t=I,t!==p?(n.setValue(t),!0):!1}function zr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Wi=/[\n"\\]/g;function Vt(t){return t.replace(Wi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function An(t,n,p,I,G,F,W,se){t.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?t.type=W:t.removeAttribute("type"),n!=null?W==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Zt(n)):t.value!==""+Zt(n)&&(t.value=""+Zt(n)):W!=="submit"&&W!=="reset"||t.removeAttribute("value"),n!=null?wn(t,W,Zt(n)):p!=null?wn(t,W,Zt(p)):I!=null&&t.removeAttribute("value"),G==null&&F!=null&&(t.defaultChecked=!!F),G!=null&&(t.checked=G&&typeof G!="function"&&typeof G!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?t.name=""+Zt(se):t.removeAttribute("name")}function ii(t,n,p,I,G,F,W,se){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(t.type=F),n!=null||p!=null){if(!(F!=="submit"&&F!=="reset"||n!=null))return;p=p!=null?""+Zt(p):"",n=n!=null?""+Zt(n):p,se||n===t.value||(t.value=n),t.defaultValue=n}I=I??G,I=typeof I!="function"&&typeof I!="symbol"&&!!I,t.checked=se?t.checked:!!I,t.defaultChecked=!!I,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(t.name=W)}function wn(t,n,p){n==="number"&&zr(t.ownerDocument)===t||t.defaultValue===""+p||(t.defaultValue=""+p)}function tr(t,n,p,I){if(t=t.options,n){n={};for(var G=0;G<p.length;G++)n["$"+p[G]]=!0;for(p=0;p<t.length;p++)G=n.hasOwnProperty("$"+t[p].value),t[p].selected!==G&&(t[p].selected=G),G&&I&&(t[p].defaultSelected=!0)}else{for(p=""+Zt(p),n=null,G=0;G<t.length;G++){if(t[G].value===p){t[G].selected=!0,I&&(t[G].defaultSelected=!0);return}n!==null||t[G].disabled||(n=t[G])}n!==null&&(n.selected=!0)}}function Rn(t,n,p){if(n!=null&&(n=""+Zt(n),n!==t.value&&(t.value=n),p==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=p!=null?""+Zt(p):""}function N(t,n,p,I){if(n==null){if(I!=null){if(p!=null)throw Error(O(92));if(P(I)){if(1<I.length)throw Error(O(93));I=I[0]}p=I}p==null&&(p=""),n=p}p=Zt(n),t.defaultValue=p,I=t.textContent,I===p&&I!==""&&I!==null&&(t.value=I)}function ne(t,n){if(n){var p=t.firstChild;if(p&&p===t.lastChild&&p.nodeType===3){p.nodeValue=n;return}}t.textContent=n}var $=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pe(t,n,p){var I=n.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?I?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":I?t.setProperty(n,p):typeof p!="number"||p===0||$.has(n)?n==="float"?t.cssFloat=p:t[n]=(""+p).trim():t[n]=p+"px"}function le(t,n,p){if(n!=null&&typeof n!="object")throw Error(O(62));if(t=t.style,p!=null){for(var I in p)!p.hasOwnProperty(I)||n!=null&&n.hasOwnProperty(I)||(I.indexOf("--")===0?t.setProperty(I,""):I==="float"?t.cssFloat="":t[I]="");for(var G in n)I=n[G],n.hasOwnProperty(G)&&p[G]!==I&&pe(t,G,I)}else for(var F in n)n.hasOwnProperty(F)&&pe(t,F,n[F])}function de(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Me=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xe(t){return Me.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Te=null;function We(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qe=null,jt=null;function Tt(t){var n=As(t);if(n&&(t=n.stateNode)){var p=t[It]||null;e:switch(t=n.stateNode,n.type){case"input":if(An(t,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),n=p.name,p.type==="radio"&&n!=null){for(p=t;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Vt(""+n)+'"][type="radio"]'),n=0;n<p.length;n++){var I=p[n];if(I!==t&&I.form===t.form){var G=I[It]||null;if(!G)throw Error(O(90));An(I,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(n=0;n<p.length;n++)I=p[n],I.form===t.form&&ni(I)}break e;case"textarea":Rn(t,p.value,p.defaultValue);break e;case"select":n=p.value,n!=null&&tr(t,!!p.multiple,n,!1)}}}var xs=!1;function Tn(t,n,p){if(xs)return t(n,p);xs=!0;try{var I=t(n);return I}finally{if(xs=!1,(Qe!==null||jt!==null)&&(Mu(),Qe&&(n=Qe,t=jt,jt=Qe=null,Tt(n),t)))for(n=0;n<t.length;n++)Tt(t[n])}}function sr(t,n){var p=t.stateNode;if(p===null)return null;var I=p[It]||null;if(I===null)return null;p=I[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(t=t.type,I=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!I;break e;default:t=!1}if(t)return null;if(p&&typeof p!="function")throw Error(O(231,n,typeof p));return p}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_r=!1;if(os)try{var as={};Object.defineProperty(as,"passive",{get:function(){_r=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{_r=!1}var zt=null,xt=null,bs=null;function at(){if(bs)return bs;var t,n=xt,p=n.length,I,G="value"in zt?zt.value:zt.textContent,F=G.length;for(t=0;t<p&&n[t]===G[t];t++);var W=p-t;for(I=1;I<=W&&n[p-I]===G[F-I];I++);return bs=G.slice(t,1<I?1-I:void 0)}function Es(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Fs(){return!0}function $i(){return!1}function Bt(t){function n(p,I,G,F,W){this._reactName=p,this._targetInst=G,this.type=I,this.nativeEvent=F,this.target=W,this.currentTarget=null;for(var se in t)t.hasOwnProperty(se)&&(p=t[se],this[se]=p?p(F):F[se]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Fs:$i,this.isPropagationStopped=$i,this}return m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),n}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=Bt(rr),Br=m({},rr,{view:0,detail:0}),da=Bt(Br),oi,ai,Nr,En=m({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:li,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(oi=t.screenX-Nr.screenX,ai=t.screenY-Nr.screenY):ai=oi=0,Nr=t),oi)},movementY:function(t){return"movementY"in t?t.movementY:ai}}),eo=Bt(En),pa=m({},En,{dataTransfer:0}),fa=Bt(pa),ha=m({},Br,{relatedTarget:0}),ui=Bt(ha),ma=m({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),ga=Bt(ma),_a=m({},rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),va=Bt(_a),ba=m({},rr,{data:0}),ci=Bt(ba),ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ma={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ka(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Sa[t])?!!n[t]:!1}function li(){return ka}var Ca=m({},Br,{key:function(t){if(t.key){var n=ya[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Es(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ma[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:li,charCode:function(t){return t.type==="keypress"?Es(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Es(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Da=Bt(Ca),qa=m({},En,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),di=Bt(qa),Ia=m({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:li}),Aa=Bt(Ia),wa=m({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ra=Bt(wa),Ta=m({},En,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xa=Bt(Ta),Ea=m({},rr,{newState:0,oldState:0}),Ua=Bt(Ea),Oa=[9,13,27,32],pi=os&&"CompositionEvent"in window,Pr=null;os&&"documentMode"in document&&(Pr=document.documentMode);var to=os&&"TextEvent"in window&&!Pr,so=os&&(!pi||Pr&&8<Pr&&11>=Pr),ro=" ",no=!1;function io(t,n){switch(t){case"keyup":return Oa.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function La(t,n){switch(t){case"compositionend":return oo(n);case"keypress":return n.which!==32?null:(no=!0,ro);case"textInput":return t=n.data,t===ro&&no?null:t;default:return null}}function Ga(t,n){if(vr)return t==="compositionend"||!pi&&io(t,n)?(t=at(),bs=xt=zt=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return so&&n.locale!=="ko"?null:n.data;default:return null}}var ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ao(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!ja[t.type]:n==="textarea"}function uo(t,n,p,I){Qe?jt?jt.push(I):jt=[I]:Qe=I,n=Iu(n,"onChange"),0<n.length&&(p=new xn("onChange","change",null,p,I),t.push({event:p,listeners:n}))}var Fr=null,Hr=null;function za(t){bp(t,0)}function Un(t){var n=$s(t);if(ni(n))return t}function co(t,n){if(t==="change")return n}var lo=!1;if(os){var fi;if(os){var hi="oninput"in document;if(!hi){var po=document.createElement("div");po.setAttribute("oninput","return;"),hi=typeof po.oninput=="function"}fi=hi}else fi=!1;lo=fi&&(!document.documentMode||9<document.documentMode)}function fo(){Fr&&(Fr.detachEvent("onpropertychange",ho),Hr=Fr=null)}function ho(t){if(t.propertyName==="value"&&Un(Hr)){var n=[];uo(n,Hr,t,We(t)),Tn(za,n)}}function Ba(t,n,p){t==="focusin"?(fo(),Fr=n,Hr=p,Fr.attachEvent("onpropertychange",ho)):t==="focusout"&&fo()}function Na(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Un(Hr)}function Pa(t,n){if(t==="click")return Un(n)}function Fa(t,n){if(t==="input"||t==="change")return Un(n)}function Ha(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Yt=typeof Object.is=="function"?Object.is:Ha;function Kr(t,n){if(Yt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var p=Object.keys(t),I=Object.keys(n);if(p.length!==I.length)return!1;for(I=0;I<p.length;I++){var G=p[I];if(!ke.call(n,G)||!Yt(t[G],n[G]))return!1}return!0}function mo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mi(t,n){var p=mo(t);t=0;for(var I;p;){if(p.nodeType===3){if(I=t+p.textContent.length,t<=n&&I>=n)return{node:p,offset:n-t};t=I}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=mo(p)}}function go(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?go(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function _o(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=zr(t.document);n instanceof t.HTMLIFrameElement;){try{var p=typeof n.contentWindow.location.href=="string"}catch{p=!1}if(p)t=n.contentWindow;else break;n=zr(t.document)}return n}function On(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var vo=os&&"documentMode"in document&&11>=document.documentMode,br=null,Ln=null,Qr=null,gi=!1;function bo(t,n,p){var I=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;gi||br==null||br!==zr(I)||(I=br,"selectionStart"in I&&On(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Qr&&Kr(Qr,I)||(Qr=I,I=Iu(Ln,"onSelect"),0<I.length&&(n=new xn("onSelect","select",null,n,p),t.push({event:n,listeners:I}),n.target=br)))}function Hs(t,n){var p={};return p[t.toLowerCase()]=n.toLowerCase(),p["Webkit"+t]="webkit"+n,p["Moz"+t]="moz"+n,p}var yr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Gn={},yo={};os&&(yo=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Ks(t){if(Gn[t])return Gn[t];if(!yr[t])return t;var n=yr[t],p;for(p in n)if(n.hasOwnProperty(p)&&p in yo)return Gn[t]=n[p];return t}var Mo=Ks("animationend"),So=Ks("animationiteration"),ko=Ks("animationstart"),Ka=Ks("transitionrun"),Qa=Ks("transitionstart"),Co=Ks("transitioncancel"),Do=Ks("transitionend"),qo=new Map,_i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_i.push("scrollEnd");function us(t,n){qo.set(t,n),Rs(n,[t])}var Io=new WeakMap;function $t(t,n){if(typeof t=="object"&&t!==null){var p=Io.get(t);return p!==void 0?p:(n={value:t,source:n,stack:si(n)},Io.set(t,n),n)}return{value:t,source:n,stack:si(n)}}var es=[],Mr=0,jn=0;function zn(){for(var t=Mr,n=jn=Mr=0;n<t;){var p=es[n];es[n++]=null;var I=es[n];es[n++]=null;var G=es[n];es[n++]=null;var F=es[n];if(es[n++]=null,I!==null&&G!==null){var W=I.pending;W===null?G.next=G:(G.next=W.next,W.next=G),I.pending=G}F!==0&&Ao(p,G,F)}}function Bn(t,n,p,I){es[Mr++]=t,es[Mr++]=n,es[Mr++]=p,es[Mr++]=I,jn|=I,t.lanes|=I,t=t.alternate,t!==null&&(t.lanes|=I)}function vi(t,n,p,I){return Bn(t,n,p,I),Nn(t)}function Sr(t,n){return Bn(t,null,null,n),Nn(t)}function Ao(t,n,p){t.lanes|=p;var I=t.alternate;I!==null&&(I.lanes|=p);for(var G=!1,F=t.return;F!==null;)F.childLanes|=p,I=F.alternate,I!==null&&(I.childLanes|=p),F.tag===22&&(t=F.stateNode,t===null||t._visibility&1||(G=!0)),t=F,F=F.return;return t.tag===3?(F=t.stateNode,G&&n!==null&&(G=31-ot(p),t=F.hiddenUpdates,I=t[G],I===null?t[G]=[n]:I.push(n),n.lane=p|536870912),F):null}function Nn(t){if(50<Wo)throw Wo=0,Lc=null,Error(O(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var kr={};function Za(t,n,p,I){this.tag=t,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,n,p,I){return new Za(t,n,p,I)}function bi(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Us(t,n){var p=t.alternate;return p===null?(p=Jt(t.tag,n,t.key,t.mode),p.elementType=t.elementType,p.type=t.type,p.stateNode=t.stateNode,p.alternate=t,t.alternate=p):(p.pendingProps=n,p.type=t.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=t.flags&65011712,p.childLanes=t.childLanes,p.lanes=t.lanes,p.child=t.child,p.memoizedProps=t.memoizedProps,p.memoizedState=t.memoizedState,p.updateQueue=t.updateQueue,n=t.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},p.sibling=t.sibling,p.index=t.index,p.ref=t.ref,p.refCleanup=t.refCleanup,p}function yi(t,n){t.flags&=65011714;var p=t.alternate;return p===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=p.childLanes,t.lanes=p.lanes,t.child=p.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=p.memoizedProps,t.memoizedState=p.memoizedState,t.updateQueue=p.updateQueue,t.type=p.type,n=p.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Pn(t,n,p,I,G,F){var W=0;if(I=t,typeof t=="function")bi(t)&&(W=1);else if(typeof t=="string")W=Zf(t,p,ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Jt(31,p,n,G),t.elementType=S,t.lanes=F,t;case s:return Qs(p.children,G,F,n);case r:W=8,G|=24;break;case i:return t=Jt(12,p,n,G|2),t.elementType=i,t.lanes=F,t;case R:return t=Jt(13,p,n,G),t.elementType=R,t.lanes=F,t;case w:return t=Jt(19,p,n,G),t.elementType=w,t.lanes=F,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a:case l:W=10;break e;case o:W=9;break e;case h:W=11;break e;case d:W=14;break e;case D:W=16,I=null;break e}W=29,p=Error(O(130,t===null?"null":typeof t,"")),I=null}return n=Jt(W,p,n,G),n.elementType=t,n.type=I,n.lanes=F,n}function Qs(t,n,p,I){return t=Jt(7,t,I,n),t.lanes=p,t}function Mi(t,n,p){return t=Jt(6,t,null,n),t.lanes=p,t}function Si(t,n,p){return n=Jt(4,t.children!==null?t.children:[],t.key,n),n.lanes=p,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Cr=[],Dr=0,Zr=null,Fn=0,ts=[],ss=0,nr=null,Os=1,Ls="";function ir(t,n){Cr[Dr++]=Fn,Cr[Dr++]=Zr,Zr=t,Fn=n}function ki(t,n,p){ts[ss++]=Os,ts[ss++]=Ls,ts[ss++]=nr,nr=t;var I=Os;t=Ls;var G=32-ot(I)-1;I&=~(1<<G),p+=1;var F=32-ot(n)+G;if(30<F){var W=G-G%5;F=(I&(1<<W)-1).toString(32),I>>=W,G-=W,Os=1<<32-ot(n)+G|p<<G|I,Ls=F+t}else Os=1<<F|p<<G|I,Ls=t}function Ci(t){t.return!==null&&(ir(t,1),ki(t,1,0))}function Di(t){for(;t===Zr;)Zr=Cr[--Dr],Cr[Dr]=null,Fn=Cr[--Dr],Cr[Dr]=null;for(;t===nr;)nr=ts[--ss],ts[ss]=null,Ls=ts[--ss],ts[ss]=null,Os=ts[--ss],ts[ss]=null}var Et=null,pt=null,Je=!1,or=null,ys=!1,qi=Error(O(519));function ar(t){var n=Error(O(418,""));throw Jr($t(n,t)),qi}function wo(t){var n=t.stateNode,p=t.type,I=t.memoizedProps;switch(n[dt]=t,n[It]=I,p){case"dialog":Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":case"embed":Ve("load",n);break;case"video":case"audio":for(p=0;p<ea.length;p++)Ve(ea[p],n);break;case"source":Ve("error",n);break;case"img":case"image":case"link":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"input":Ve("invalid",n),ii(n,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0),jr(n);break;case"select":Ve("invalid",n);break;case"textarea":Ve("invalid",n),N(n,I.value,I.defaultValue,I.children),jr(n)}p=I.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||n.textContent===""+p||I.suppressHydrationWarning===!0||kp(n.textContent,p)?(I.popover!=null&&(Ve("beforetoggle",n),Ve("toggle",n)),I.onScroll!=null&&Ve("scroll",n),I.onScrollEnd!=null&&Ve("scrollend",n),I.onClick!=null&&(n.onclick=Au),n=!0):n=!1,n||ar(t)}function Ro(t){for(Et=t.return;Et;)switch(Et.tag){case 5:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:Et=Et.return}}function Vr(t){if(t!==Et)return!1;if(!Je)return Ro(t),Je=!0,!1;var n=t.tag,p;if((p=n!==3&&n!==27)&&((p=n===5)&&(p=t.type,p=!(p!=="form"&&p!=="button")||Wc(t.type,t.memoizedProps)),p=!p),p&&pt&&ar(t),Ro(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(p=t.data,p==="/$"){if(n===0){pt=Ys(t.nextSibling);break e}n--}else p!=="$"&&p!=="$!"&&p!=="$?"||n++;t=t.nextSibling}pt=null}}else n===27?(n=pt,pn(t.type)?(t=sl,sl=null,pt=t):pt=n):pt=Et?Ys(t.stateNode.nextSibling):null;return!0}function Yr(){pt=Et=null,Je=!1}function To(){var t=or;return t!==null&&(ds===null?ds=t:ds.push.apply(ds,t),or=null),t}function Jr(t){or===null?or=[t]:or.push(t)}var Ii=B(null),ur=null,Gs=null;function Zs(t,n,p){K(Ii,n._currentValue),n._currentValue=p}function js(t){t._currentValue=Ii.current,Y(Ii)}function Ai(t,n,p){for(;t!==null;){var I=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,I!==null&&(I.childLanes|=n)):I!==null&&(I.childLanes&n)!==n&&(I.childLanes|=n),t===p)break;t=t.return}}function wi(t,n,p,I){var G=t.child;for(G!==null&&(G.return=t);G!==null;){var F=G.dependencies;if(F!==null){var W=G.child;F=F.firstContext;e:for(;F!==null;){var se=F;F=G;for(var ue=0;ue<n.length;ue++)if(se.context===n[ue]){F.lanes|=p,se=F.alternate,se!==null&&(se.lanes|=p),Ai(F.return,p,t),I||(W=null);break e}F=se.next}}else if(G.tag===18){if(W=G.return,W===null)throw Error(O(341));W.lanes|=p,F=W.alternate,F!==null&&(F.lanes|=p),Ai(W,p,t),W=null}else W=G.child;if(W!==null)W.return=G;else for(W=G;W!==null;){if(W===t){W=null;break}if(G=W.sibling,G!==null){G.return=W.return,W=G;break}W=W.return}G=W}}function qr(t,n,p,I){t=null;for(var G=n,F=!1;G!==null;){if(!F){if((G.flags&524288)!==0)F=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var W=G.alternate;if(W===null)throw Error(O(387));if(W=W.memoizedProps,W!==null){var se=G.type;Yt(G.pendingProps.value,W.value)||(t!==null?t.push(se):t=[se])}}else if(G===X.current){if(W=G.alternate,W===null)throw Error(O(387));W.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(t!==null?t.push(oa):t=[oa])}G=G.return}t!==null&&wi(n,t,p,I),n.flags|=262144}function Hn(t){for(t=t.firstContext;t!==null;){if(!Yt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function cr(t){ur=t,Gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function At(t){return xo(ur,t)}function Kn(t,n){return ur===null&&cr(t),xo(t,n)}function xo(t,n){var p=n._currentValue;if(n={context:n,memoizedValue:p,next:null},Gs===null){if(t===null)throw Error(O(308));Gs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Gs=Gs.next=n;return p}var Va=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(p,I){t.push(I)}};this.abort=function(){n.aborted=!0,t.forEach(function(p){return p()})}},Ya=te.unstable_scheduleCallback,Ja=te.unstable_NormalPriority,e={$$typeof:l,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function M(){return{controller:new Va,data:new Map,refCount:0}}function V(t){t.refCount--,t.refCount===0&&Ya(Ja,function(){t.controller.abort()})}var v=null,Z=0,Ie=0,ze=null;function ct(t,n){if(v===null){var p=v=[];Z=0,Ie=Fc(),ze={status:"pending",value:void 0,then:function(I){p.push(I)}}}return Z++,n.then(ft,ft),n}function ft(){if(--Z===0&&v!==null){ze!==null&&(ze.status="fulfilled");var t=v;v=null,Ie=0,ze=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Ri(t,n){var p=[],I={status:"pending",value:null,reason:null,then:function(G){p.push(G)}};return t.then(function(){I.status="fulfilled",I.value=n;for(var G=0;G<p.length;G++)(0,p[G])(n)},function(G){for(I.status="rejected",I.reason=G,G=0;G<p.length;G++)(0,p[G])(void 0)}),I}var Eo=H.S;H.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&ct(t,n),Eo!==null&&Eo(t,n)};var Qn=B(null);function Pu(){var t=Qn.current;return t!==null?t:lt.pooledCache}function Xa(t,n){n===null?K(Qn,Qn.current):K(Qn,n.pool)}function pl(){var t=Pu();return t===null?null:{parent:e._currentValue,pool:t}}var Uo=Error(O(460)),fl=Error(O(474)),Wa=Error(O(542)),Fu={then:function(){}};function hl(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $a(){}function ml(t,n,p){switch(p=t[p],p===void 0?t.push(n):p!==n&&(n.then($a,$a),n=p),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,_l(t),t;default:if(typeof n.status=="string")n.then($a,$a);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(O(482));t=n,t.status="pending",t.then(function(I){if(n.status==="pending"){var G=n;G.status="fulfilled",G.value=I}},function(I){if(n.status==="pending"){var G=n;G.status="rejected",G.reason=I}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,_l(t),t}throw Oo=n,Uo}}var Oo=null;function gl(){if(Oo===null)throw Error(O(459));var t=Oo;return Oo=null,t}function _l(t){if(t===Uo||t===Wa)throw Error(O(483))}var Xr=!1;function Hu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Wr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,n,p){var I=t.updateQueue;if(I===null)return null;if(I=I.shared,(et&2)!==0){var G=I.pending;return G===null?n.next=n:(n.next=G.next,G.next=n),I.pending=n,n=Nn(t),Ao(t,null,p),n}return Bn(t,I,n,p),Nn(t)}function Lo(t,n,p){if(n=n.updateQueue,n!==null&&(n=n.shared,(p&4194048)!==0)){var I=n.lanes;I&=t.pendingLanes,p|=I,n.lanes=p,Is(t,p)}}function Qu(t,n){var p=t.updateQueue,I=t.alternate;if(I!==null&&(I=I.updateQueue,p===I)){var G=null,F=null;if(p=p.firstBaseUpdate,p!==null){do{var W={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};F===null?G=F=W:F=F.next=W,p=p.next}while(p!==null);F===null?G=F=n:F=F.next=n}else G=F=n;p={baseState:I.baseState,firstBaseUpdate:G,lastBaseUpdate:F,shared:I.shared,callbacks:I.callbacks},t.updateQueue=p;return}t=p.lastBaseUpdate,t===null?p.firstBaseUpdate=n:t.next=n,p.lastBaseUpdate=n}var Zu=!1;function Go(){if(Zu){var t=ze;if(t!==null)throw t}}function jo(t,n,p,I){Zu=!1;var G=t.updateQueue;Xr=!1;var F=G.firstBaseUpdate,W=G.lastBaseUpdate,se=G.shared.pending;if(se!==null){G.shared.pending=null;var ue=se,me=ue.next;ue.next=null,W===null?F=me:W.next=me,W=ue;var Se=t.alternate;Se!==null&&(Se=Se.updateQueue,se=Se.lastBaseUpdate,se!==W&&(se===null?Se.firstBaseUpdate=me:se.next=me,Se.lastBaseUpdate=ue))}if(F!==null){var qe=G.baseState;W=0,Se=me=ue=null,se=F;do{var ve=se.lane&-536870913,be=ve!==se.lane;if(be?(Xe&ve)===ve:(I&ve)===ve){ve!==0&&ve===Ie&&(Zu=!0),Se!==null&&(Se=Se.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var Be=t,Ge=se;ve=n;var it=p;switch(Ge.tag){case 1:if(Be=Ge.payload,typeof Be=="function"){qe=Be.call(it,qe,ve);break e}qe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ge.payload,ve=typeof Be=="function"?Be.call(it,qe,ve):Be,ve==null)break e;qe=m({},qe,ve);break e;case 2:Xr=!0}}ve=se.callback,ve!==null&&(t.flags|=64,be&&(t.flags|=8192),be=G.callbacks,be===null?G.callbacks=[ve]:be.push(ve))}else be={lane:ve,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Se===null?(me=Se=be,ue=qe):Se=Se.next=be,W|=ve;if(se=se.next,se===null){if(se=G.shared.pending,se===null)break;be=se,se=be.next,be.next=null,G.lastBaseUpdate=be,G.shared.pending=null}}while(!0);Se===null&&(ue=qe),G.baseState=ue,G.firstBaseUpdate=me,G.lastBaseUpdate=Se,F===null&&(G.shared.lanes=0),un|=W,t.lanes=W,t.memoizedState=qe}}function vl(t,n){if(typeof t!="function")throw Error(O(191,t));t.call(n)}function bl(t,n){var p=t.callbacks;if(p!==null)for(t.callbacks=null,t=0;t<p.length;t++)vl(p[t],n)}var Ti=B(null),eu=B(0);function yl(t,n){t=Er,K(eu,t),K(Ti,n),Er=t|n.baseLanes}function Vu(){K(eu,Er),K(Ti,Ti.current)}function Yu(){Er=eu.current,Y(Ti),Y(eu)}var en=0,Fe=null,rt=null,kt=null,tu=!1,xi=!1,Zn=!1,su=0,zo=0,Ei=null,Jp=0;function yt(){throw Error(O(321))}function Ju(t,n){if(n===null)return!1;for(var p=0;p<n.length&&p<t.length;p++)if(!Yt(t[p],n[p]))return!1;return!0}function Xu(t,n,p,I,G,F){return en=F,Fe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=t===null||t.memoizedState===null?rd:nd,Zn=!1,F=p(I,G),Zn=!1,xi&&(F=Sl(n,p,I,G)),Ml(t),F}function Ml(t){H.H=uu;var n=rt!==null&&rt.next!==null;if(en=0,kt=rt=Fe=null,tu=!1,zo=0,Ei=null,n)throw Error(O(300));t===null||Ut||(t=t.dependencies,t!==null&&Hn(t)&&(Ut=!0))}function Sl(t,n,p,I){Fe=t;var G=0;do{if(xi&&(Ei=null),zo=0,xi=!1,25<=G)throw Error(O(301));if(G+=1,kt=rt=null,t.updateQueue!=null){var F=t.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}H.H=rf,F=n(p,I)}while(xi);return F}function Xp(){var t=H.H,n=t.useState()[0];return n=typeof n.then=="function"?Bo(n):n,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Fe.flags|=1024),n}function Wu(){var t=su!==0;return su=0,t}function $u(t,n,p){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~p}function ec(t){if(tu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}tu=!1}en=0,kt=rt=Fe=null,xi=!1,zo=su=0,Ei=null}function cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Fe.memoizedState=kt=t:kt=kt.next=t,kt}function Ct(){if(rt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var n=kt===null?Fe.memoizedState:kt.next;if(n!==null)kt=n,rt=t;else{if(t===null)throw Fe.alternate===null?Error(O(467)):Error(O(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},kt===null?Fe.memoizedState=kt=t:kt=kt.next=t}return kt}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bo(t){var n=zo;return zo+=1,Ei===null&&(Ei=[]),t=ml(Ei,t,n),n=Fe,(kt===null?n.memoizedState:kt.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?rd:nd),t}function ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bo(t);if(t.$$typeof===l)return At(t)}throw Error(O(438,String(t)))}function sc(t){var n=null,p=Fe.updateQueue;if(p!==null&&(n=p.memoCache),n==null){var I=Fe.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(n={data:I.data.map(function(G){return G.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),p===null&&(p=tc(),Fe.updateQueue=p),p.memoCache=n,p=n.data[n.index],p===void 0)for(p=n.data[n.index]=Array(t),I=0;I<t;I++)p[I]=y;return n.index++,p}function Ir(t,n){return typeof n=="function"?n(t):n}function nu(t){var n=Ct();return rc(n,rt,t)}function rc(t,n,p){var I=t.queue;if(I===null)throw Error(O(311));I.lastRenderedReducer=p;var G=t.baseQueue,F=I.pending;if(F!==null){if(G!==null){var W=G.next;G.next=F.next,F.next=W}n.baseQueue=G=F,I.pending=null}if(F=t.baseState,G===null)t.memoizedState=F;else{n=G.next;var se=W=null,ue=null,me=n,Se=!1;do{var qe=me.lane&-536870913;if(qe!==me.lane?(Xe&qe)===qe:(en&qe)===qe){var ve=me.revertLane;if(ve===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),qe===Ie&&(Se=!0);else if((en&ve)===ve){me=me.next,ve===Ie&&(Se=!0);continue}else qe={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ue===null?(se=ue=qe,W=F):ue=ue.next=qe,Fe.lanes|=ve,un|=ve;qe=me.action,Zn&&p(F,qe),F=me.hasEagerState?me.eagerState:p(F,qe)}else ve={lane:qe,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ue===null?(se=ue=ve,W=F):ue=ue.next=ve,Fe.lanes|=qe,un|=qe;me=me.next}while(me!==null&&me!==n);if(ue===null?W=F:ue.next=se,!Yt(F,t.memoizedState)&&(Ut=!0,Se&&(p=ze,p!==null)))throw p;t.memoizedState=F,t.baseState=W,t.baseQueue=ue,I.lastRenderedState=F}return G===null&&(I.lanes=0),[t.memoizedState,I.dispatch]}function nc(t){var n=Ct(),p=n.queue;if(p===null)throw Error(O(311));p.lastRenderedReducer=t;var I=p.dispatch,G=p.pending,F=n.memoizedState;if(G!==null){p.pending=null;var W=G=G.next;do F=t(F,W.action),W=W.next;while(W!==G);Yt(F,n.memoizedState)||(Ut=!0),n.memoizedState=F,n.baseQueue===null&&(n.baseState=F),p.lastRenderedState=F}return[F,I]}function kl(t,n,p){var I=Fe,G=Ct(),F=Je;if(F){if(p===void 0)throw Error(O(407));p=p()}else p=n();var W=!Yt((rt||G).memoizedState,p);W&&(G.memoizedState=p,Ut=!0),G=G.queue;var se=ql.bind(null,I,G,t);if(No(2048,8,se,[t]),G.getSnapshot!==n||W||kt!==null&&kt.memoizedState.tag&1){if(I.flags|=2048,Ui(9,iu(),Dl.bind(null,I,G,p,n),null),lt===null)throw Error(O(349));F||(en&124)!==0||Cl(I,n,p)}return p}function Cl(t,n,p){t.flags|=16384,t={getSnapshot:n,value:p},n=Fe.updateQueue,n===null?(n=tc(),Fe.updateQueue=n,n.stores=[t]):(p=n.stores,p===null?n.stores=[t]:p.push(t))}function Dl(t,n,p,I){n.value=p,n.getSnapshot=I,Il(n)&&Al(t)}function ql(t,n,p){return p(function(){Il(n)&&Al(t)})}function Il(t){var n=t.getSnapshot;t=t.value;try{var p=n();return!Yt(t,p)}catch{return!0}}function Al(t){var n=Sr(t,2);n!==null&&Ds(n,t,2)}function ic(t){var n=cs();if(typeof t=="function"){var p=t;if(t=p(),Zn){Gt(!0);try{p()}finally{Gt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:t},n}function wl(t,n,p,I){return t.baseState=p,rc(t,rt,typeof I=="function"?I:Ir)}function Wp(t,n,p,I,G){if(au(t))throw Error(O(485));if(t=n.action,t!==null){var F={payload:G,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){F.listeners.push(W)}};H.T!==null?p(!0):F.isTransition=!1,I(F),p=n.pending,p===null?(F.next=n.pending=F,Rl(n,F)):(F.next=p.next,n.pending=p.next=F)}}function Rl(t,n){var p=n.action,I=n.payload,G=t.state;if(n.isTransition){var F=H.T,W={};H.T=W;try{var se=p(G,I),ue=H.S;ue!==null&&ue(W,se),Tl(t,n,se)}catch(me){oc(t,n,me)}finally{H.T=F}}else try{F=p(G,I),Tl(t,n,F)}catch(me){oc(t,n,me)}}function Tl(t,n,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(I){xl(t,n,I)},function(I){return oc(t,n,I)}):xl(t,n,p)}function xl(t,n,p){n.status="fulfilled",n.value=p,El(n),t.state=p,n=t.pending,n!==null&&(p=n.next,p===n?t.pending=null:(p=p.next,n.next=p,Rl(t,p)))}function oc(t,n,p){var I=t.pending;if(t.pending=null,I!==null){I=I.next;do n.status="rejected",n.reason=p,El(n),n=n.next;while(n!==I)}t.action=null}function El(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Ul(t,n){return n}function Ol(t,n){if(Je){var p=lt.formState;if(p!==null){e:{var I=Fe;if(Je){if(pt){t:{for(var G=pt,F=ys;G.nodeType!==8;){if(!F){G=null;break t}if(G=Ys(G.nextSibling),G===null){G=null;break t}}F=G.data,G=F==="F!"||F==="F"?G:null}if(G){pt=Ys(G.nextSibling),I=G.data==="F!";break e}}ar(I)}I=!1}I&&(n=p[0])}}return p=cs(),p.memoizedState=p.baseState=n,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:n},p.queue=I,p=ed.bind(null,Fe,I),I.dispatch=p,I=ic(!1),F=dc.bind(null,Fe,!1,I.queue),I=cs(),G={state:n,dispatch:null,action:t,pending:null},I.queue=G,p=Wp.bind(null,Fe,G,F,p),G.dispatch=p,I.memoizedState=t,[n,p,!1]}function Ll(t){var n=Ct();return Gl(n,rt,t)}function Gl(t,n,p){if(n=rc(t,n,Ul)[0],t=nu(Ir)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var I=Bo(n)}catch(W){throw W===Uo?Wa:W}else I=n;n=Ct();var G=n.queue,F=G.dispatch;return p!==n.memoizedState&&(Fe.flags|=2048,Ui(9,iu(),$p.bind(null,G,p),null)),[I,F,t]}function $p(t,n){t.action=n}function jl(t){var n=Ct(),p=rt;if(p!==null)return Gl(n,p,t);Ct(),n=n.memoizedState,p=Ct();var I=p.queue.dispatch;return p.memoizedState=t,[n,I,!1]}function Ui(t,n,p,I){return t={tag:t,create:p,deps:I,inst:n,next:null},n=Fe.updateQueue,n===null&&(n=tc(),Fe.updateQueue=n),p=n.lastEffect,p===null?n.lastEffect=t.next=t:(I=p.next,p.next=t,t.next=I,n.lastEffect=t),t}function iu(){return{destroy:void 0,resource:void 0}}function zl(){return Ct().memoizedState}function ou(t,n,p,I){var G=cs();I=I===void 0?null:I,Fe.flags|=t,G.memoizedState=Ui(1|n,iu(),p,I)}function No(t,n,p,I){var G=Ct();I=I===void 0?null:I;var F=G.memoizedState.inst;rt!==null&&I!==null&&Ju(I,rt.memoizedState.deps)?G.memoizedState=Ui(n,F,p,I):(Fe.flags|=t,G.memoizedState=Ui(1|n,F,p,I))}function Bl(t,n){ou(8390656,8,t,n)}function Nl(t,n){No(2048,8,t,n)}function Pl(t,n){return No(4,2,t,n)}function Fl(t,n){return No(4,4,t,n)}function Hl(t,n){if(typeof n=="function"){t=t();var p=n(t);return function(){typeof p=="function"?p():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Kl(t,n,p){p=p!=null?p.concat([t]):null,No(4,4,Hl.bind(null,n,t),p)}function ac(){}function Ql(t,n){var p=Ct();n=n===void 0?null:n;var I=p.memoizedState;return n!==null&&Ju(n,I[1])?I[0]:(p.memoizedState=[t,n],t)}function Zl(t,n){var p=Ct();n=n===void 0?null:n;var I=p.memoizedState;if(n!==null&&Ju(n,I[1]))return I[0];if(I=t(),Zn){Gt(!0);try{t()}finally{Gt(!1)}}return p.memoizedState=[I,n],I}function uc(t,n,p){return p===void 0||(en&1073741824)!==0?t.memoizedState=n:(t.memoizedState=p,t=Jd(),Fe.lanes|=t,un|=t,p)}function Vl(t,n,p,I){return Yt(p,n)?p:Ti.current!==null?(t=uc(t,p,I),Yt(t,n)||(Ut=!0),t):(en&42)===0?(Ut=!0,t.memoizedState=p):(t=Jd(),Fe.lanes|=t,un|=t,n)}function Yl(t,n,p,I,G){var F=Q.p;Q.p=F!==0&&8>F?F:8;var W=H.T,se={};H.T=se,dc(t,!1,n,p);try{var ue=G(),me=H.S;if(me!==null&&me(se,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Se=Ri(ue,I);Po(t,n,Se,Cs(t))}else Po(t,n,I,Cs(t))}catch(qe){Po(t,n,{then:function(){},status:"rejected",reason:qe},Cs())}finally{Q.p=F,H.T=W}}function ef(){}function cc(t,n,p,I){if(t.tag!==5)throw Error(O(476));var G=Jl(t).queue;Yl(t,G,n,J,p===null?ef:function(){return Xl(t),p(I)})}function Jl(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:J},next:null};var p={};return n.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:p},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Xl(t){var n=Jl(t).next.queue;Po(t,n,{},Cs())}function lc(){return At(oa)}function Wl(){return Ct().memoizedState}function $l(){return Ct().memoizedState}function tf(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var p=Cs();t=Wr(p);var I=$r(n,t,p);I!==null&&(Ds(I,n,p),Lo(I,n,p)),n={cache:M()},t.payload=n;return}n=n.return}}function sf(t,n,p){var I=Cs();p={lane:I,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},au(t)?td(n,p):(p=vi(t,n,p,I),p!==null&&(Ds(p,t,I),sd(p,n,I)))}function ed(t,n,p){var I=Cs();Po(t,n,p,I)}function Po(t,n,p,I){var G={lane:I,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(au(t))td(n,G);else{var F=t.alternate;if(t.lanes===0&&(F===null||F.lanes===0)&&(F=n.lastRenderedReducer,F!==null))try{var W=n.lastRenderedState,se=F(W,p);if(G.hasEagerState=!0,G.eagerState=se,Yt(se,W))return Bn(t,n,G,0),lt===null&&zn(),!1}catch{}finally{}if(p=vi(t,n,G,I),p!==null)return Ds(p,t,I),sd(p,n,I),!0}return!1}function dc(t,n,p,I){if(I={lane:2,revertLane:Fc(),action:I,hasEagerState:!1,eagerState:null,next:null},au(t)){if(n)throw Error(O(479))}else n=vi(t,p,I,2),n!==null&&Ds(n,t,2)}function au(t){var n=t.alternate;return t===Fe||n!==null&&n===Fe}function td(t,n){xi=tu=!0;var p=t.pending;p===null?n.next=n:(n.next=p.next,p.next=n),t.pending=n}function sd(t,n,p){if((p&4194048)!==0){var I=n.lanes;I&=t.pendingLanes,p|=I,n.lanes=p,Is(t,p)}}var uu={readContext:At,use:ru,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},rd={readContext:At,use:ru,useCallback:function(t,n){return cs().memoizedState=[t,n===void 0?null:n],t},useContext:At,useEffect:Bl,useImperativeHandle:function(t,n,p){p=p!=null?p.concat([t]):null,ou(4194308,4,Hl.bind(null,n,t),p)},useLayoutEffect:function(t,n){return ou(4194308,4,t,n)},useInsertionEffect:function(t,n){ou(4,2,t,n)},useMemo:function(t,n){var p=cs();n=n===void 0?null:n;var I=t();if(Zn){Gt(!0);try{t()}finally{Gt(!1)}}return p.memoizedState=[I,n],I},useReducer:function(t,n,p){var I=cs();if(p!==void 0){var G=p(n);if(Zn){Gt(!0);try{p(n)}finally{Gt(!1)}}}else G=n;return I.memoizedState=I.baseState=G,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:G},I.queue=t,t=t.dispatch=sf.bind(null,Fe,t),[I.memoizedState,t]},useRef:function(t){var n=cs();return t={current:t},n.memoizedState=t},useState:function(t){t=ic(t);var n=t.queue,p=ed.bind(null,Fe,n);return n.dispatch=p,[t.memoizedState,p]},useDebugValue:ac,useDeferredValue:function(t,n){var p=cs();return uc(p,t,n)},useTransition:function(){var t=ic(!1);return t=Yl.bind(null,Fe,t.queue,!0,!1),cs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,p){var I=Fe,G=cs();if(Je){if(p===void 0)throw Error(O(407));p=p()}else{if(p=n(),lt===null)throw Error(O(349));(Xe&124)!==0||Cl(I,n,p)}G.memoizedState=p;var F={value:p,getSnapshot:n};return G.queue=F,Bl(ql.bind(null,I,F,t),[t]),I.flags|=2048,Ui(9,iu(),Dl.bind(null,I,F,p,n),null),p},useId:function(){var t=cs(),n=lt.identifierPrefix;if(Je){var p=Ls,I=Os;p=(I&~(1<<32-ot(I)-1)).toString(32)+p,n=""+n+"R"+p,p=su++,0<p&&(n+="H"+p.toString(32)),n+=""}else p=Jp++,n=""+n+"r"+p.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:lc,useFormState:Ol,useActionState:Ol,useOptimistic:function(t){var n=cs();n.memoizedState=n.baseState=t;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=p,n=dc.bind(null,Fe,!0,p),p.dispatch=n,[t,n]},useMemoCache:sc,useCacheRefresh:function(){return cs().memoizedState=tf.bind(null,Fe)}},nd={readContext:At,use:ru,useCallback:Ql,useContext:At,useEffect:Nl,useImperativeHandle:Kl,useInsertionEffect:Pl,useLayoutEffect:Fl,useMemo:Zl,useReducer:nu,useRef:zl,useState:function(){return nu(Ir)},useDebugValue:ac,useDeferredValue:function(t,n){var p=Ct();return Vl(p,rt.memoizedState,t,n)},useTransition:function(){var t=nu(Ir)[0],n=Ct().memoizedState;return[typeof t=="boolean"?t:Bo(t),n]},useSyncExternalStore:kl,useId:Wl,useHostTransitionStatus:lc,useFormState:Ll,useActionState:Ll,useOptimistic:function(t,n){var p=Ct();return wl(p,rt,t,n)},useMemoCache:sc,useCacheRefresh:$l},rf={readContext:At,use:ru,useCallback:Ql,useContext:At,useEffect:Nl,useImperativeHandle:Kl,useInsertionEffect:Pl,useLayoutEffect:Fl,useMemo:Zl,useReducer:nc,useRef:zl,useState:function(){return nc(Ir)},useDebugValue:ac,useDeferredValue:function(t,n){var p=Ct();return rt===null?uc(p,t,n):Vl(p,rt.memoizedState,t,n)},useTransition:function(){var t=nc(Ir)[0],n=Ct().memoizedState;return[typeof t=="boolean"?t:Bo(t),n]},useSyncExternalStore:kl,useId:Wl,useHostTransitionStatus:lc,useFormState:jl,useActionState:jl,useOptimistic:function(t,n){var p=Ct();return rt!==null?wl(p,rt,t,n):(p.baseState=t,[t,p.queue.dispatch])},useMemoCache:sc,useCacheRefresh:$l},Oi=null,Fo=0;function cu(t){var n=Fo;return Fo+=1,Oi===null&&(Oi=[]),ml(Oi,t,n)}function Ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lu(t,n){throw n.$$typeof===f?Error(O(525)):(t=Object.prototype.toString.call(n),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function id(t){var n=t._init;return n(t._payload)}function od(t){function n(fe,ce){if(t){var he=fe.deletions;he===null?(fe.deletions=[ce],fe.flags|=16):he.push(ce)}}function p(fe,ce){if(!t)return null;for(;ce!==null;)n(fe,ce),ce=ce.sibling;return null}function I(fe){for(var ce=new Map;fe!==null;)fe.key!==null?ce.set(fe.key,fe):ce.set(fe.index,fe),fe=fe.sibling;return ce}function G(fe,ce){return fe=Us(fe,ce),fe.index=0,fe.sibling=null,fe}function F(fe,ce,he){return fe.index=he,t?(he=fe.alternate,he!==null?(he=he.index,he<ce?(fe.flags|=67108866,ce):he):(fe.flags|=67108866,ce)):(fe.flags|=1048576,ce)}function W(fe){return t&&fe.alternate===null&&(fe.flags|=67108866),fe}function se(fe,ce,he,Ce){return ce===null||ce.tag!==6?(ce=Mi(he,fe.mode,Ce),ce.return=fe,ce):(ce=G(ce,he),ce.return=fe,ce)}function ue(fe,ce,he,Ce){var Ee=he.type;return Ee===s?Se(fe,ce,he.props.children,Ce,he.key):ce!==null&&(ce.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&id(Ee)===ce.type)?(ce=G(ce,he.props),Ho(ce,he),ce.return=fe,ce):(ce=Pn(he.type,he.key,he.props,null,fe.mode,Ce),Ho(ce,he),ce.return=fe,ce)}function me(fe,ce,he,Ce){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==he.containerInfo||ce.stateNode.implementation!==he.implementation?(ce=Si(he,fe.mode,Ce),ce.return=fe,ce):(ce=G(ce,he.children||[]),ce.return=fe,ce)}function Se(fe,ce,he,Ce,Ee){return ce===null||ce.tag!==7?(ce=Qs(he,fe.mode,Ce,Ee),ce.return=fe,ce):(ce=G(ce,he),ce.return=fe,ce)}function qe(fe,ce,he){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=Mi(""+ce,fe.mode,he),ce.return=fe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case c:return he=Pn(ce.type,ce.key,ce.props,null,fe.mode,he),Ho(he,ce),he.return=fe,he;case u:return ce=Si(ce,fe.mode,he),ce.return=fe,ce;case D:var Ce=ce._init;return ce=Ce(ce._payload),qe(fe,ce,he)}if(P(ce)||b(ce))return ce=Qs(ce,fe.mode,he,null),ce.return=fe,ce;if(typeof ce.then=="function")return qe(fe,cu(ce),he);if(ce.$$typeof===l)return qe(fe,Kn(fe,ce),he);lu(fe,ce)}return null}function ve(fe,ce,he,Ce){var Ee=ce!==null?ce.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ee!==null?null:se(fe,ce,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case c:return he.key===Ee?ue(fe,ce,he,Ce):null;case u:return he.key===Ee?me(fe,ce,he,Ce):null;case D:return Ee=he._init,he=Ee(he._payload),ve(fe,ce,he,Ce)}if(P(he)||b(he))return Ee!==null?null:Se(fe,ce,he,Ce,null);if(typeof he.then=="function")return ve(fe,ce,cu(he),Ce);if(he.$$typeof===l)return ve(fe,ce,Kn(fe,he),Ce);lu(fe,he)}return null}function be(fe,ce,he,Ce,Ee){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return fe=fe.get(he)||null,se(ce,fe,""+Ce,Ee);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case c:return fe=fe.get(Ce.key===null?he:Ce.key)||null,ue(ce,fe,Ce,Ee);case u:return fe=fe.get(Ce.key===null?he:Ce.key)||null,me(ce,fe,Ce,Ee);case D:var Ke=Ce._init;return Ce=Ke(Ce._payload),be(fe,ce,he,Ce,Ee)}if(P(Ce)||b(Ce))return fe=fe.get(he)||null,Se(ce,fe,Ce,Ee,null);if(typeof Ce.then=="function")return be(fe,ce,he,cu(Ce),Ee);if(Ce.$$typeof===l)return be(fe,ce,he,Kn(ce,Ce),Ee);lu(ce,Ce)}return null}function Be(fe,ce,he,Ce){for(var Ee=null,Ke=null,Le=ce,je=ce=0,Lt=null;Le!==null&&je<he.length;je++){Le.index>je?(Lt=Le,Le=null):Lt=Le.sibling;var $e=ve(fe,Le,he[je],Ce);if($e===null){Le===null&&(Le=Lt);break}t&&Le&&$e.alternate===null&&n(fe,Le),ce=F($e,ce,je),Ke===null?Ee=$e:Ke.sibling=$e,Ke=$e,Le=Lt}if(je===he.length)return p(fe,Le),Je&&ir(fe,je),Ee;if(Le===null){for(;je<he.length;je++)Le=qe(fe,he[je],Ce),Le!==null&&(ce=F(Le,ce,je),Ke===null?Ee=Le:Ke.sibling=Le,Ke=Le);return Je&&ir(fe,je),Ee}for(Le=I(Le);je<he.length;je++)Lt=be(Le,fe,je,he[je],Ce),Lt!==null&&(t&&Lt.alternate!==null&&Le.delete(Lt.key===null?je:Lt.key),ce=F(Lt,ce,je),Ke===null?Ee=Lt:Ke.sibling=Lt,Ke=Lt);return t&&Le.forEach(function(_n){return n(fe,_n)}),Je&&ir(fe,je),Ee}function Ge(fe,ce,he,Ce){if(he==null)throw Error(O(151));for(var Ee=null,Ke=null,Le=ce,je=ce=0,Lt=null,$e=he.next();Le!==null&&!$e.done;je++,$e=he.next()){Le.index>je?(Lt=Le,Le=null):Lt=Le.sibling;var _n=ve(fe,Le,$e.value,Ce);if(_n===null){Le===null&&(Le=Lt);break}t&&Le&&_n.alternate===null&&n(fe,Le),ce=F(_n,ce,je),Ke===null?Ee=_n:Ke.sibling=_n,Ke=_n,Le=Lt}if($e.done)return p(fe,Le),Je&&ir(fe,je),Ee;if(Le===null){for(;!$e.done;je++,$e=he.next())$e=qe(fe,$e.value,Ce),$e!==null&&(ce=F($e,ce,je),Ke===null?Ee=$e:Ke.sibling=$e,Ke=$e);return Je&&ir(fe,je),Ee}for(Le=I(Le);!$e.done;je++,$e=he.next())$e=be(Le,fe,je,$e.value,Ce),$e!==null&&(t&&$e.alternate!==null&&Le.delete($e.key===null?je:$e.key),ce=F($e,ce,je),Ke===null?Ee=$e:Ke.sibling=$e,Ke=$e);return t&&Le.forEach(function(ih){return n(fe,ih)}),Je&&ir(fe,je),Ee}function it(fe,ce,he,Ce){if(typeof he=="object"&&he!==null&&he.type===s&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case c:e:{for(var Ee=he.key;ce!==null;){if(ce.key===Ee){if(Ee=he.type,Ee===s){if(ce.tag===7){p(fe,ce.sibling),Ce=G(ce,he.props.children),Ce.return=fe,fe=Ce;break e}}else if(ce.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&id(Ee)===ce.type){p(fe,ce.sibling),Ce=G(ce,he.props),Ho(Ce,he),Ce.return=fe,fe=Ce;break e}p(fe,ce);break}else n(fe,ce);ce=ce.sibling}he.type===s?(Ce=Qs(he.props.children,fe.mode,Ce,he.key),Ce.return=fe,fe=Ce):(Ce=Pn(he.type,he.key,he.props,null,fe.mode,Ce),Ho(Ce,he),Ce.return=fe,fe=Ce)}return W(fe);case u:e:{for(Ee=he.key;ce!==null;){if(ce.key===Ee)if(ce.tag===4&&ce.stateNode.containerInfo===he.containerInfo&&ce.stateNode.implementation===he.implementation){p(fe,ce.sibling),Ce=G(ce,he.children||[]),Ce.return=fe,fe=Ce;break e}else{p(fe,ce);break}else n(fe,ce);ce=ce.sibling}Ce=Si(he,fe.mode,Ce),Ce.return=fe,fe=Ce}return W(fe);case D:return Ee=he._init,he=Ee(he._payload),it(fe,ce,he,Ce)}if(P(he))return Be(fe,ce,he,Ce);if(b(he)){if(Ee=b(he),typeof Ee!="function")throw Error(O(150));return he=Ee.call(he),Ge(fe,ce,he,Ce)}if(typeof he.then=="function")return it(fe,ce,cu(he),Ce);if(he.$$typeof===l)return it(fe,ce,Kn(fe,he),Ce);lu(fe,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ce!==null&&ce.tag===6?(p(fe,ce.sibling),Ce=G(ce,he),Ce.return=fe,fe=Ce):(p(fe,ce),Ce=Mi(he,fe.mode,Ce),Ce.return=fe,fe=Ce),W(fe)):p(fe,ce)}return function(fe,ce,he,Ce){try{Fo=0;var Ee=it(fe,ce,he,Ce);return Oi=null,Ee}catch(Le){if(Le===Uo||Le===Wa)throw Le;var Ke=Jt(29,Le,null,fe.mode);return Ke.lanes=Ce,Ke.return=fe,Ke}finally{}}}var Li=od(!0),ad=od(!1),zs=B(null),lr=null;function tn(t){var n=t.alternate;K(wt,wt.current&1),K(zs,t),lr===null&&(n===null||Ti.current!==null||n.memoizedState!==null)&&(lr=t)}function ud(t){if(t.tag===22){if(K(wt,wt.current),K(zs,t),lr===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(lr=t)}}else sn()}function sn(){K(wt,wt.current),K(zs,zs.current)}function Ar(t){Y(zs),lr===t&&(lr=null),Y(wt)}var wt=B(0);function du(t){for(var n=t;n!==null;){if(n.tag===13){var p=n.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||tl(p)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function pc(t,n,p,I){n=t.memoizedState,p=p(I,n),p=p==null?n:m({},n,p),t.memoizedState=p,t.lanes===0&&(t.updateQueue.baseState=p)}var fc={enqueueSetState:function(t,n,p){t=t._reactInternals;var I=Cs(),G=Wr(I);G.payload=n,p!=null&&(G.callback=p),n=$r(t,G,I),n!==null&&(Ds(n,t,I),Lo(n,t,I))},enqueueReplaceState:function(t,n,p){t=t._reactInternals;var I=Cs(),G=Wr(I);G.tag=1,G.payload=n,p!=null&&(G.callback=p),n=$r(t,G,I),n!==null&&(Ds(n,t,I),Lo(n,t,I))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var p=Cs(),I=Wr(p);I.tag=2,n!=null&&(I.callback=n),n=$r(t,I,p),n!==null&&(Ds(n,t,p),Lo(n,t,p))}};function cd(t,n,p,I,G,F,W){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(I,F,W):n.prototype&&n.prototype.isPureReactComponent?!Kr(p,I)||!Kr(G,F):!0}function ld(t,n,p,I){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(p,I),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(p,I),n.state!==t&&fc.enqueueReplaceState(n,n.state,null)}function Vn(t,n){var p=n;if("ref"in n){p={};for(var I in n)I!=="ref"&&(p[I]=n[I])}if(t=t.defaultProps){p===n&&(p=m({},p));for(var G in t)p[G]===void 0&&(p[G]=t[G])}return p}var pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function dd(t){pu(t)}function pd(t){console.error(t)}function fd(t){pu(t)}function fu(t,n){try{var p=t.onUncaughtError;p(n.value,{componentStack:n.stack})}catch(I){setTimeout(function(){throw I})}}function hd(t,n,p){try{var I=t.onCaughtError;I(p.value,{componentStack:p.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function hc(t,n,p){return p=Wr(p),p.tag=3,p.payload={element:null},p.callback=function(){fu(t,n)},p}function md(t){return t=Wr(t),t.tag=3,t}function gd(t,n,p,I){var G=p.type.getDerivedStateFromError;if(typeof G=="function"){var F=I.value;t.payload=function(){return G(F)},t.callback=function(){hd(n,p,I)}}var W=p.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(t.callback=function(){hd(n,p,I),typeof G!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var se=I.stack;this.componentDidCatch(I.value,{componentStack:se!==null?se:""})})}function nf(t,n,p,I,G){if(p.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(n=p.alternate,n!==null&&qr(n,p,G,!0),p=zs.current,p!==null){switch(p.tag){case 13:return lr===null?jc():p.alternate===null&&bt===0&&(bt=3),p.flags&=-257,p.flags|=65536,p.lanes=G,I===Fu?p.flags|=16384:(n=p.updateQueue,n===null?p.updateQueue=new Set([I]):n.add(I),Bc(t,I,G)),!1;case 22:return p.flags|=65536,I===Fu?p.flags|=16384:(n=p.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([I])},p.updateQueue=n):(p=n.retryQueue,p===null?n.retryQueue=new Set([I]):p.add(I)),Bc(t,I,G)),!1}throw Error(O(435,p.tag))}return Bc(t,I,G),jc(),!1}if(Je)return n=zs.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=G,I!==qi&&(t=Error(O(422),{cause:I}),Jr($t(t,p)))):(I!==qi&&(n=Error(O(423),{cause:I}),Jr($t(n,p))),t=t.current.alternate,t.flags|=65536,G&=-G,t.lanes|=G,I=$t(I,p),G=hc(t.stateNode,I,G),Qu(t,G),bt!==4&&(bt=2)),!1;var F=Error(O(520),{cause:I});if(F=$t(F,p),Xo===null?Xo=[F]:Xo.push(F),bt!==4&&(bt=2),n===null)return!0;I=$t(I,p),p=n;do{switch(p.tag){case 3:return p.flags|=65536,t=G&-G,p.lanes|=t,t=hc(p.stateNode,I,t),Qu(p,t),!1;case 1:if(n=p.type,F=p.stateNode,(p.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(cn===null||!cn.has(F))))return p.flags|=65536,G&=-G,p.lanes|=G,G=md(G),gd(G,t,p,I),Qu(p,G),!1}p=p.return}while(p!==null);return!1}var _d=Error(O(461)),Ut=!1;function Nt(t,n,p,I){n.child=t===null?ad(n,null,p,I):Li(n,t.child,p,I)}function vd(t,n,p,I,G){p=p.render;var F=n.ref;if("ref"in I){var W={};for(var se in I)se!=="ref"&&(W[se]=I[se])}else W=I;return cr(n),I=Xu(t,n,p,W,F,G),se=Wu(),t!==null&&!Ut?($u(t,n,G),wr(t,n,G)):(Je&&se&&Ci(n),n.flags|=1,Nt(t,n,I,G),n.child)}function bd(t,n,p,I,G){if(t===null){var F=p.type;return typeof F=="function"&&!bi(F)&&F.defaultProps===void 0&&p.compare===null?(n.tag=15,n.type=F,yd(t,n,F,I,G)):(t=Pn(p.type,null,I,n,n.mode,G),t.ref=n.ref,t.return=n,n.child=t)}if(F=t.child,!Sc(t,G)){var W=F.memoizedProps;if(p=p.compare,p=p!==null?p:Kr,p(W,I)&&t.ref===n.ref)return wr(t,n,G)}return n.flags|=1,t=Us(F,I),t.ref=n.ref,t.return=n,n.child=t}function yd(t,n,p,I,G){if(t!==null){var F=t.memoizedProps;if(Kr(F,I)&&t.ref===n.ref)if(Ut=!1,n.pendingProps=I=F,Sc(t,G))(t.flags&131072)!==0&&(Ut=!0);else return n.lanes=t.lanes,wr(t,n,G)}return mc(t,n,p,I,G)}function Md(t,n,p){var I=n.pendingProps,G=I.children,F=t!==null?t.memoizedState:null;if(I.mode==="hidden"){if((n.flags&128)!==0){if(I=F!==null?F.baseLanes|p:p,t!==null){for(G=n.child=t.child,F=0;G!==null;)F=F|G.lanes|G.childLanes,G=G.sibling;n.childLanes=F&~I}else n.childLanes=0,n.child=null;return Sd(t,n,I,p)}if((p&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xa(n,F!==null?F.cachePool:null),F!==null?yl(n,F):Vu(),ud(n);else return n.lanes=n.childLanes=536870912,Sd(t,n,F!==null?F.baseLanes|p:p,p)}else F!==null?(Xa(n,F.cachePool),yl(n,F),sn(),n.memoizedState=null):(t!==null&&Xa(n,null),Vu(),sn());return Nt(t,n,G,p),n.child}function Sd(t,n,p,I){var G=Pu();return G=G===null?null:{parent:e._currentValue,pool:G},n.memoizedState={baseLanes:p,cachePool:G},t!==null&&Xa(n,null),Vu(),ud(n),t!==null&&qr(t,n,I,!0),null}function hu(t,n){var p=n.ref;if(p===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(O(284));(t===null||t.ref!==p)&&(n.flags|=4194816)}}function mc(t,n,p,I,G){return cr(n),p=Xu(t,n,p,I,void 0,G),I=Wu(),t!==null&&!Ut?($u(t,n,G),wr(t,n,G)):(Je&&I&&Ci(n),n.flags|=1,Nt(t,n,p,G),n.child)}function kd(t,n,p,I,G,F){return cr(n),n.updateQueue=null,p=Sl(n,I,p,G),Ml(t),I=Wu(),t!==null&&!Ut?($u(t,n,F),wr(t,n,F)):(Je&&I&&Ci(n),n.flags|=1,Nt(t,n,p,F),n.child)}function Cd(t,n,p,I,G){if(cr(n),n.stateNode===null){var F=kr,W=p.contextType;typeof W=="object"&&W!==null&&(F=At(W)),F=new p(I,F),n.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=fc,n.stateNode=F,F._reactInternals=n,F=n.stateNode,F.props=I,F.state=n.memoizedState,F.refs={},Hu(n),W=p.contextType,F.context=typeof W=="object"&&W!==null?At(W):kr,F.state=n.memoizedState,W=p.getDerivedStateFromProps,typeof W=="function"&&(pc(n,p,W,I),F.state=n.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(W=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),W!==F.state&&fc.enqueueReplaceState(F,F.state,null),jo(n,I,F,G),Go(),F.state=n.memoizedState),typeof F.componentDidMount=="function"&&(n.flags|=4194308),I=!0}else if(t===null){F=n.stateNode;var se=n.memoizedProps,ue=Vn(p,se);F.props=ue;var me=F.context,Se=p.contextType;W=kr,typeof Se=="object"&&Se!==null&&(W=At(Se));var qe=p.getDerivedStateFromProps;Se=typeof qe=="function"||typeof F.getSnapshotBeforeUpdate=="function",se=n.pendingProps!==se,Se||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(se||me!==W)&&ld(n,F,I,W),Xr=!1;var ve=n.memoizedState;F.state=ve,jo(n,I,F,G),Go(),me=n.memoizedState,se||ve!==me||Xr?(typeof qe=="function"&&(pc(n,p,qe,I),me=n.memoizedState),(ue=Xr||cd(n,p,ue,I,ve,me,W))?(Se||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(n.flags|=4194308)):(typeof F.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=I,n.memoizedState=me),F.props=I,F.state=me,F.context=W,I=ue):(typeof F.componentDidMount=="function"&&(n.flags|=4194308),I=!1)}else{F=n.stateNode,Ku(t,n),W=n.memoizedProps,Se=Vn(p,W),F.props=Se,qe=n.pendingProps,ve=F.context,me=p.contextType,ue=kr,typeof me=="object"&&me!==null&&(ue=At(me)),se=p.getDerivedStateFromProps,(me=typeof se=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==qe||ve!==ue)&&ld(n,F,I,ue),Xr=!1,ve=n.memoizedState,F.state=ve,jo(n,I,F,G),Go();var be=n.memoizedState;W!==qe||ve!==be||Xr||t!==null&&t.dependencies!==null&&Hn(t.dependencies)?(typeof se=="function"&&(pc(n,p,se,I),be=n.memoizedState),(Se=Xr||cd(n,p,Se,I,ve,be,ue)||t!==null&&t.dependencies!==null&&Hn(t.dependencies))?(me||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(I,be,ue),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(I,be,ue)),typeof F.componentDidUpdate=="function"&&(n.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof F.componentDidUpdate!="function"||W===t.memoizedProps&&ve===t.memoizedState||(n.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&ve===t.memoizedState||(n.flags|=1024),n.memoizedProps=I,n.memoizedState=be),F.props=I,F.state=be,F.context=ue,I=Se):(typeof F.componentDidUpdate!="function"||W===t.memoizedProps&&ve===t.memoizedState||(n.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===t.memoizedProps&&ve===t.memoizedState||(n.flags|=1024),I=!1)}return F=I,hu(t,n),I=(n.flags&128)!==0,F||I?(F=n.stateNode,p=I&&typeof p.getDerivedStateFromError!="function"?null:F.render(),n.flags|=1,t!==null&&I?(n.child=Li(n,t.child,null,G),n.child=Li(n,null,p,G)):Nt(t,n,p,G),n.memoizedState=F.state,t=n.child):t=wr(t,n,G),t}function Dd(t,n,p,I){return Yr(),n.flags|=256,Nt(t,n,p,I),n.child}var gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _c(t){return{baseLanes:t,cachePool:pl()}}function vc(t,n,p){return t=t!==null?t.childLanes&~p:0,n&&(t|=Bs),t}function qd(t,n,p){var I=n.pendingProps,G=!1,F=(n.flags&128)!==0,W;if((W=F)||(W=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),W&&(G=!0,n.flags&=-129),W=(n.flags&32)!==0,n.flags&=-33,t===null){if(Je){if(G?tn(n):sn(),Je){var se=pt,ue;if(ue=se){e:{for(ue=se,se=ys;ue.nodeType!==8;){if(!se){se=null;break e}if(ue=Ys(ue.nextSibling),ue===null){se=null;break e}}se=ue}se!==null?(n.memoizedState={dehydrated:se,treeContext:nr!==null?{id:Os,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},ue=Jt(18,null,null,0),ue.stateNode=se,ue.return=n,n.child=ue,Et=n,pt=null,ue=!0):ue=!1}ue||ar(n)}if(se=n.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return tl(se)?n.lanes=32:n.lanes=536870912,null;Ar(n)}return se=I.children,I=I.fallback,G?(sn(),G=n.mode,se=mu({mode:"hidden",children:se},G),I=Qs(I,G,p,null),se.return=n,I.return=n,se.sibling=I,n.child=se,G=n.child,G.memoizedState=_c(p),G.childLanes=vc(t,W,p),n.memoizedState=gc,I):(tn(n),bc(n,se))}if(ue=t.memoizedState,ue!==null&&(se=ue.dehydrated,se!==null)){if(F)n.flags&256?(tn(n),n.flags&=-257,n=yc(t,n,p)):n.memoizedState!==null?(sn(),n.child=t.child,n.flags|=128,n=null):(sn(),G=I.fallback,se=n.mode,I=mu({mode:"visible",children:I.children},se),G=Qs(G,se,p,null),G.flags|=2,I.return=n,G.return=n,I.sibling=G,n.child=I,Li(n,t.child,null,p),I=n.child,I.memoizedState=_c(p),I.childLanes=vc(t,W,p),n.memoizedState=gc,n=G);else if(tn(n),tl(se)){if(W=se.nextSibling&&se.nextSibling.dataset,W)var me=W.dgst;W=me,I=Error(O(419)),I.stack="",I.digest=W,Jr({value:I,source:null,stack:null}),n=yc(t,n,p)}else if(Ut||qr(t,n,p,!1),W=(p&t.childLanes)!==0,Ut||W){if(W=lt,W!==null&&(I=p&-p,I=(I&42)!==0?1:mr(I),I=(I&(W.suspendedLanes|p))!==0?0:I,I!==0&&I!==ue.retryLane))throw ue.retryLane=I,Sr(t,I),Ds(W,t,I),_d;se.data==="$?"||jc(),n=yc(t,n,p)}else se.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=ue.treeContext,pt=Ys(se.nextSibling),Et=n,Je=!0,or=null,ys=!1,t!==null&&(ts[ss++]=Os,ts[ss++]=Ls,ts[ss++]=nr,Os=t.id,Ls=t.overflow,nr=n),n=bc(n,I.children),n.flags|=4096);return n}return G?(sn(),G=I.fallback,se=n.mode,ue=t.child,me=ue.sibling,I=Us(ue,{mode:"hidden",children:I.children}),I.subtreeFlags=ue.subtreeFlags&65011712,me!==null?G=Us(me,G):(G=Qs(G,se,p,null),G.flags|=2),G.return=n,I.return=n,I.sibling=G,n.child=I,I=G,G=n.child,se=t.child.memoizedState,se===null?se=_c(p):(ue=se.cachePool,ue!==null?(me=e._currentValue,ue=ue.parent!==me?{parent:me,pool:me}:ue):ue=pl(),se={baseLanes:se.baseLanes|p,cachePool:ue}),G.memoizedState=se,G.childLanes=vc(t,W,p),n.memoizedState=gc,I):(tn(n),p=t.child,t=p.sibling,p=Us(p,{mode:"visible",children:I.children}),p.return=n,p.sibling=null,t!==null&&(W=n.deletions,W===null?(n.deletions=[t],n.flags|=16):W.push(t)),n.child=p,n.memoizedState=null,p)}function bc(t,n){return n=mu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function mu(t,n){return t=Jt(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function yc(t,n,p){return Li(n,t.child,null,p),t=bc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Id(t,n,p){t.lanes|=n;var I=t.alternate;I!==null&&(I.lanes|=n),Ai(t.return,n,p)}function Mc(t,n,p,I,G){var F=t.memoizedState;F===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:I,tail:p,tailMode:G}:(F.isBackwards=n,F.rendering=null,F.renderingStartTime=0,F.last=I,F.tail=p,F.tailMode=G)}function Ad(t,n,p){var I=n.pendingProps,G=I.revealOrder,F=I.tail;if(Nt(t,n,I.children,p),I=wt.current,(I&2)!==0)I=I&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Id(t,p,n);else if(t.tag===19)Id(t,p,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}I&=1}switch(K(wt,I),G){case"forwards":for(p=n.child,G=null;p!==null;)t=p.alternate,t!==null&&du(t)===null&&(G=p),p=p.sibling;p=G,p===null?(G=n.child,n.child=null):(G=p.sibling,p.sibling=null),Mc(n,!1,G,p,F);break;case"backwards":for(p=null,G=n.child,n.child=null;G!==null;){if(t=G.alternate,t!==null&&du(t)===null){n.child=G;break}t=G.sibling,G.sibling=p,p=G,G=t}Mc(n,!0,p,null,F);break;case"together":Mc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function wr(t,n,p){if(t!==null&&(n.dependencies=t.dependencies),un|=n.lanes,(p&n.childLanes)===0)if(t!==null){if(qr(t,n,p,!1),(p&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(O(153));if(n.child!==null){for(t=n.child,p=Us(t,t.pendingProps),n.child=p,p.return=n;t.sibling!==null;)t=t.sibling,p=p.sibling=Us(t,t.pendingProps),p.return=n;p.sibling=null}return n.child}function Sc(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Hn(t)))}function of(t,n,p){switch(n.tag){case 3:re(n,n.stateNode.containerInfo),Zs(n,e,t.memoizedState.cache),Yr();break;case 27:case 5:ge(n);break;case 4:re(n,n.stateNode.containerInfo);break;case 10:Zs(n,n.type,n.memoizedProps.value);break;case 13:var I=n.memoizedState;if(I!==null)return I.dehydrated!==null?(tn(n),n.flags|=128,null):(p&n.child.childLanes)!==0?qd(t,n,p):(tn(n),t=wr(t,n,p),t!==null?t.sibling:null);tn(n);break;case 19:var G=(t.flags&128)!==0;if(I=(p&n.childLanes)!==0,I||(qr(t,n,p,!1),I=(p&n.childLanes)!==0),G){if(I)return Ad(t,n,p);n.flags|=128}if(G=n.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),K(wt,wt.current),I)break;return null;case 22:case 23:return n.lanes=0,Md(t,n,p);case 24:Zs(n,e,t.memoizedState.cache)}return wr(t,n,p)}function wd(t,n,p){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ut=!0;else{if(!Sc(t,p)&&(n.flags&128)===0)return Ut=!1,of(t,n,p);Ut=(t.flags&131072)!==0}else Ut=!1,Je&&(n.flags&1048576)!==0&&ki(n,Fn,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var I=n.elementType,G=I._init;if(I=G(I._payload),n.type=I,typeof I=="function")bi(I)?(t=Vn(I,t),n.tag=1,n=Cd(null,n,I,t,p)):(n.tag=0,n=mc(null,n,I,t,p));else{if(I!=null){if(G=I.$$typeof,G===h){n.tag=11,n=vd(null,n,I,t,p);break e}else if(G===d){n.tag=14,n=bd(null,n,I,t,p);break e}}throw n=z(I)||I,Error(O(306,n,""))}}return n;case 0:return mc(t,n,n.type,n.pendingProps,p);case 1:return I=n.type,G=Vn(I,n.pendingProps),Cd(t,n,I,G,p);case 3:e:{if(re(n,n.stateNode.containerInfo),t===null)throw Error(O(387));I=n.pendingProps;var F=n.memoizedState;G=F.element,Ku(t,n),jo(n,I,null,p);var W=n.memoizedState;if(I=W.cache,Zs(n,e,I),I!==F.cache&&wi(n,[e],p,!0),Go(),I=W.element,F.isDehydrated)if(F={element:I,isDehydrated:!1,cache:W.cache},n.updateQueue.baseState=F,n.memoizedState=F,n.flags&256){n=Dd(t,n,I,p);break e}else if(I!==G){G=$t(Error(O(424)),n),Jr(G),n=Dd(t,n,I,p);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=Ys(t.firstChild),Et=n,Je=!0,or=null,ys=!0,p=ad(n,null,I,p),n.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Yr(),I===G){n=wr(t,n,p);break e}Nt(t,n,I,p)}n=n.child}return n;case 26:return hu(t,n),t===null?(p=Ep(n.type,null,n.pendingProps,null))?n.memoizedState=p:Je||(p=n.type,t=n.pendingProps,I=wu(ae.current).createElement(p),I[dt]=n,I[It]=t,Ft(I,p,t),_t(I),n.stateNode=I):n.memoizedState=Ep(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ge(n),t===null&&Je&&(I=n.stateNode=Rp(n.type,n.pendingProps,ae.current),Et=n,ys=!0,G=pt,pn(n.type)?(sl=G,pt=Ys(I.firstChild)):pt=G),Nt(t,n,n.pendingProps.children,p),hu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Je&&((G=I=pt)&&(I=Uf(I,n.type,n.pendingProps,ys),I!==null?(n.stateNode=I,Et=n,pt=Ys(I.firstChild),ys=!1,G=!0):G=!1),G||ar(n)),ge(n),G=n.type,F=n.pendingProps,W=t!==null?t.memoizedProps:null,I=F.children,Wc(G,F)?I=null:W!==null&&Wc(G,W)&&(n.flags|=32),n.memoizedState!==null&&(G=Xu(t,n,Xp,null,null,p),oa._currentValue=G),hu(t,n),Nt(t,n,I,p),n.child;case 6:return t===null&&Je&&((t=p=pt)&&(p=Of(p,n.pendingProps,ys),p!==null?(n.stateNode=p,Et=n,pt=null,t=!0):t=!1),t||ar(n)),null;case 13:return qd(t,n,p);case 4:return re(n,n.stateNode.containerInfo),I=n.pendingProps,t===null?n.child=Li(n,null,I,p):Nt(t,n,I,p),n.child;case 11:return vd(t,n,n.type,n.pendingProps,p);case 7:return Nt(t,n,n.pendingProps,p),n.child;case 8:return Nt(t,n,n.pendingProps.children,p),n.child;case 12:return Nt(t,n,n.pendingProps.children,p),n.child;case 10:return I=n.pendingProps,Zs(n,n.type,I.value),Nt(t,n,I.children,p),n.child;case 9:return G=n.type._context,I=n.pendingProps.children,cr(n),G=At(G),I=I(G),n.flags|=1,Nt(t,n,I,p),n.child;case 14:return bd(t,n,n.type,n.pendingProps,p);case 15:return yd(t,n,n.type,n.pendingProps,p);case 19:return Ad(t,n,p);case 31:return I=n.pendingProps,p=n.mode,I={mode:I.mode,children:I.children},t===null?(p=mu(I,p),p.ref=n.ref,n.child=p,p.return=n,n=p):(p=Us(t.child,I),p.ref=n.ref,n.child=p,p.return=n,n=p),n;case 22:return Md(t,n,p);case 24:return cr(n),I=At(e),t===null?(G=Pu(),G===null&&(G=lt,F=M(),G.pooledCache=F,F.refCount++,F!==null&&(G.pooledCacheLanes|=p),G=F),n.memoizedState={parent:I,cache:G},Hu(n),Zs(n,e,G)):((t.lanes&p)!==0&&(Ku(t,n),jo(n,null,null,p),Go()),G=t.memoizedState,F=n.memoizedState,G.parent!==I?(G={parent:I,cache:I},n.memoizedState=G,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=G),Zs(n,e,I)):(I=F.cache,Zs(n,e,I),I!==G.cache&&wi(n,[e],p,!0))),Nt(t,n,n.pendingProps.children,p),n.child;case 29:throw n.pendingProps}throw Error(O(156,n.tag))}function Rr(t){t.flags|=4}function Rd(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!jp(n)){if(n=zs.current,n!==null&&((Xe&4194048)===Xe?lr!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||n!==lr))throw Oo=Fu,fl;t.flags|=8192}}function gu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?qt():536870912,t.lanes|=n,Bi|=n)}function Ko(t,n){if(!Je)switch(t.tailMode){case"hidden":n=t.tail;for(var p=null;n!==null;)n.alternate!==null&&(p=n),n=n.sibling;p===null?t.tail=null:p.sibling=null;break;case"collapsed":p=t.tail;for(var I=null;p!==null;)p.alternate!==null&&(I=p),p=p.sibling;I===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:I.sibling=null}}function vt(t){var n=t.alternate!==null&&t.alternate.child===t.child,p=0,I=0;if(n)for(var G=t.child;G!==null;)p|=G.lanes|G.childLanes,I|=G.subtreeFlags&65011712,I|=G.flags&65011712,G.return=t,G=G.sibling;else for(G=t.child;G!==null;)p|=G.lanes|G.childLanes,I|=G.subtreeFlags,I|=G.flags,G.return=t,G=G.sibling;return t.subtreeFlags|=I,t.childLanes=p,n}function af(t,n,p){var I=n.pendingProps;switch(Di(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(n),null;case 1:return vt(n),null;case 3:return p=n.stateNode,I=null,t!==null&&(I=t.memoizedState.cache),n.memoizedState.cache!==I&&(n.flags|=2048),js(e),ie(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(Vr(n)?Rr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,To())),vt(n),null;case 26:return p=n.memoizedState,t===null?(Rr(n),p!==null?(vt(n),Rd(n,p)):(vt(n),n.flags&=-16777217)):p?p!==t.memoizedState?(Rr(n),vt(n),Rd(n,p)):(vt(n),n.flags&=-16777217):(t.memoizedProps!==I&&Rr(n),vt(n),n.flags&=-16777217),null;case 27:_e(n),p=ae.current;var G=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==I&&Rr(n);else{if(!I){if(n.stateNode===null)throw Error(O(166));return vt(n),null}t=ee.current,Vr(n)?wo(n):(t=Rp(G,I,p),n.stateNode=t,Rr(n))}return vt(n),null;case 5:if(_e(n),p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==I&&Rr(n);else{if(!I){if(n.stateNode===null)throw Error(O(166));return vt(n),null}if(t=ee.current,Vr(n))wo(n);else{switch(G=wu(ae.current),t){case 1:t=G.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:t=G.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":t=G.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":t=G.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":t=G.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof I.is=="string"?G.createElement("select",{is:I.is}):G.createElement("select"),I.multiple?t.multiple=!0:I.size&&(t.size=I.size);break;default:t=typeof I.is=="string"?G.createElement(p,{is:I.is}):G.createElement(p)}}t[dt]=n,t[It]=I;e:for(G=n.child;G!==null;){if(G.tag===5||G.tag===6)t.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===n)break e;for(;G.sibling===null;){if(G.return===null||G.return===n)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}n.stateNode=t;e:switch(Ft(t,p,I),p){case"button":case"input":case"select":case"textarea":t=!!I.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Rr(n)}}return vt(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==I&&Rr(n);else{if(typeof I!="string"&&n.stateNode===null)throw Error(O(166));if(t=ae.current,Vr(n)){if(t=n.stateNode,p=n.memoizedProps,I=null,G=Et,G!==null)switch(G.tag){case 27:case 5:I=G.memoizedProps}t[dt]=n,t=!!(t.nodeValue===p||I!==null&&I.suppressHydrationWarning===!0||kp(t.nodeValue,p)),t||ar(n)}else t=wu(t).createTextNode(I),t[dt]=n,n.stateNode=t}return vt(n),null;case 13:if(I=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(G=Vr(n),I!==null&&I.dehydrated!==null){if(t===null){if(!G)throw Error(O(318));if(G=n.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(O(317));G[dt]=n}else Yr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vt(n),G=!1}else G=To(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=G),G=!0;if(!G)return n.flags&256?(Ar(n),n):(Ar(n),null)}if(Ar(n),(n.flags&128)!==0)return n.lanes=p,n;if(p=I!==null,t=t!==null&&t.memoizedState!==null,p){I=n.child,G=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(G=I.alternate.memoizedState.cachePool.pool);var F=null;I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(F=I.memoizedState.cachePool.pool),F!==G&&(I.flags|=2048)}return p!==t&&p&&(n.child.flags|=8192),gu(n,n.updateQueue),vt(n),null;case 4:return ie(),t===null&&Zc(n.stateNode.containerInfo),vt(n),null;case 10:return js(n.type),vt(n),null;case 19:if(Y(wt),G=n.memoizedState,G===null)return vt(n),null;if(I=(n.flags&128)!==0,F=G.rendering,F===null)if(I)Ko(G,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(F=du(t),F!==null){for(n.flags|=128,Ko(G,!1),t=F.updateQueue,n.updateQueue=t,gu(n,t),n.subtreeFlags=0,t=p,p=n.child;p!==null;)yi(p,t),p=p.sibling;return K(wt,wt.current&1|2),n.child}t=t.sibling}G.tail!==null&&Ae()>bu&&(n.flags|=128,I=!0,Ko(G,!1),n.lanes=4194304)}else{if(!I)if(t=du(F),t!==null){if(n.flags|=128,I=!0,t=t.updateQueue,n.updateQueue=t,gu(n,t),Ko(G,!0),G.tail===null&&G.tailMode==="hidden"&&!F.alternate&&!Je)return vt(n),null}else 2*Ae()-G.renderingStartTime>bu&&p!==536870912&&(n.flags|=128,I=!0,Ko(G,!1),n.lanes=4194304);G.isBackwards?(F.sibling=n.child,n.child=F):(t=G.last,t!==null?t.sibling=F:n.child=F,G.last=F)}return G.tail!==null?(n=G.tail,G.rendering=n,G.tail=n.sibling,G.renderingStartTime=Ae(),n.sibling=null,t=wt.current,K(wt,I?t&1|2:t&1),n):(vt(n),null);case 22:case 23:return Ar(n),Yu(),I=n.memoizedState!==null,t!==null?t.memoizedState!==null!==I&&(n.flags|=8192):I&&(n.flags|=8192),I?(p&536870912)!==0&&(n.flags&128)===0&&(vt(n),n.subtreeFlags&6&&(n.flags|=8192)):vt(n),p=n.updateQueue,p!==null&&gu(n,p.retryQueue),p=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(p=t.memoizedState.cachePool.pool),I=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(I=n.memoizedState.cachePool.pool),I!==p&&(n.flags|=2048),t!==null&&Y(Qn),null;case 24:return p=null,t!==null&&(p=t.memoizedState.cache),n.memoizedState.cache!==p&&(n.flags|=2048),js(e),vt(n),null;case 25:return null;case 30:return null}throw Error(O(156,n.tag))}function uf(t,n){switch(Di(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return js(e),ie(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return _e(n),null;case 13:if(Ar(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(O(340));Yr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Y(wt),null;case 4:return ie(),null;case 10:return js(n.type),null;case 22:case 23:return Ar(n),Yu(),t!==null&&Y(Qn),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return js(e),null;case 25:return null;default:return null}}function Td(t,n){switch(Di(n),n.tag){case 3:js(e),ie();break;case 26:case 27:case 5:_e(n);break;case 4:ie();break;case 13:Ar(n);break;case 19:Y(wt);break;case 10:js(n.type);break;case 22:case 23:Ar(n),Yu(),t!==null&&Y(Qn);break;case 24:js(e)}}function Qo(t,n){try{var p=n.updateQueue,I=p!==null?p.lastEffect:null;if(I!==null){var G=I.next;p=G;do{if((p.tag&t)===t){I=void 0;var F=p.create,W=p.inst;I=F(),W.destroy=I}p=p.next}while(p!==G)}}catch(se){ut(n,n.return,se)}}function rn(t,n,p){try{var I=n.updateQueue,G=I!==null?I.lastEffect:null;if(G!==null){var F=G.next;I=F;do{if((I.tag&t)===t){var W=I.inst,se=W.destroy;if(se!==void 0){W.destroy=void 0,G=n;var ue=p,me=se;try{me()}catch(Se){ut(G,ue,Se)}}}I=I.next}while(I!==F)}}catch(Se){ut(n,n.return,Se)}}function xd(t){var n=t.updateQueue;if(n!==null){var p=t.stateNode;try{bl(n,p)}catch(I){ut(t,t.return,I)}}}function Ed(t,n,p){p.props=Vn(t.type,t.memoizedProps),p.state=t.memoizedState;try{p.componentWillUnmount()}catch(I){ut(t,n,I)}}function Zo(t,n){try{var p=t.ref;if(p!==null){switch(t.tag){case 26:case 27:case 5:var I=t.stateNode;break;case 30:I=t.stateNode;break;default:I=t.stateNode}typeof p=="function"?t.refCleanup=p(I):p.current=I}}catch(G){ut(t,n,G)}}function dr(t,n){var p=t.ref,I=t.refCleanup;if(p!==null)if(typeof I=="function")try{I()}catch(G){ut(t,n,G)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(G){ut(t,n,G)}else p.current=null}function Ud(t){var n=t.type,p=t.memoizedProps,I=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":p.autoFocus&&I.focus();break e;case"img":p.src?I.src=p.src:p.srcSet&&(I.srcset=p.srcSet)}}catch(G){ut(t,t.return,G)}}function kc(t,n,p){try{var I=t.stateNode;wf(I,t.type,p,n),I[It]=n}catch(G){ut(t,t.return,G)}}function Od(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pn(t.type)||t.tag===4}function Cc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Od(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dc(t,n,p){var I=t.tag;if(I===5||I===6)t=t.stateNode,n?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(t,n):(n=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,n.appendChild(t),p=p._reactRootContainer,p!=null||n.onclick!==null||(n.onclick=Au));else if(I!==4&&(I===27&&pn(t.type)&&(p=t.stateNode,n=null),t=t.child,t!==null))for(Dc(t,n,p),t=t.sibling;t!==null;)Dc(t,n,p),t=t.sibling}function _u(t,n,p){var I=t.tag;if(I===5||I===6)t=t.stateNode,n?p.insertBefore(t,n):p.appendChild(t);else if(I!==4&&(I===27&&pn(t.type)&&(p=t.stateNode),t=t.child,t!==null))for(_u(t,n,p),t=t.sibling;t!==null;)_u(t,n,p),t=t.sibling}function Ld(t){var n=t.stateNode,p=t.memoizedProps;try{for(var I=t.type,G=n.attributes;G.length;)n.removeAttributeNode(G[0]);Ft(n,I,p),n[dt]=t,n[It]=p}catch(F){ut(t,t.return,F)}}var Tr=!1,Mt=!1,qc=!1,Gd=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function cf(t,n){if(t=t.containerInfo,Jc=Ou,t=_o(t),On(t)){if("selectionStart"in t)var p={start:t.selectionStart,end:t.selectionEnd};else e:{p=(p=t.ownerDocument)&&p.defaultView||window;var I=p.getSelection&&p.getSelection();if(I&&I.rangeCount!==0){p=I.anchorNode;var G=I.anchorOffset,F=I.focusNode;I=I.focusOffset;try{p.nodeType,F.nodeType}catch{p=null;break e}var W=0,se=-1,ue=-1,me=0,Se=0,qe=t,ve=null;t:for(;;){for(var be;qe!==p||G!==0&&qe.nodeType!==3||(se=W+G),qe!==F||I!==0&&qe.nodeType!==3||(ue=W+I),qe.nodeType===3&&(W+=qe.nodeValue.length),(be=qe.firstChild)!==null;)ve=qe,qe=be;for(;;){if(qe===t)break t;if(ve===p&&++me===G&&(se=W),ve===F&&++Se===I&&(ue=W),(be=qe.nextSibling)!==null)break;qe=ve,ve=qe.parentNode}qe=be}p=se===-1||ue===-1?null:{start:se,end:ue}}else p=null}p=p||{start:0,end:0}}else p=null;for(Xc={focusedElem:t,selectionRange:p},Ou=!1,Ot=n;Ot!==null;)if(n=Ot,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Ot=t;else for(;Ot!==null;){switch(n=Ot,F=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&F!==null){t=void 0,p=n,G=F.memoizedProps,F=F.memoizedState,I=p.stateNode;try{var Be=Vn(p.type,G,p.elementType===p.type);t=I.getSnapshotBeforeUpdate(Be,F),I.__reactInternalSnapshotBeforeUpdate=t}catch(Ge){ut(p,p.return,Ge)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,p=t.nodeType,p===9)el(t);else if(p===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":el(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(O(163))}if(t=n.sibling,t!==null){t.return=n.return,Ot=t;break}Ot=n.return}}function jd(t,n,p){var I=p.flags;switch(p.tag){case 0:case 11:case 15:nn(t,p),I&4&&Qo(5,p);break;case 1:if(nn(t,p),I&4)if(t=p.stateNode,n===null)try{t.componentDidMount()}catch(W){ut(p,p.return,W)}else{var G=Vn(p.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(G,n,t.__reactInternalSnapshotBeforeUpdate)}catch(W){ut(p,p.return,W)}}I&64&&xd(p),I&512&&Zo(p,p.return);break;case 3:if(nn(t,p),I&64&&(t=p.updateQueue,t!==null)){if(n=null,p.child!==null)switch(p.child.tag){case 27:case 5:n=p.child.stateNode;break;case 1:n=p.child.stateNode}try{bl(t,n)}catch(W){ut(p,p.return,W)}}break;case 27:n===null&&I&4&&Ld(p);case 26:case 5:nn(t,p),n===null&&I&4&&Ud(p),I&512&&Zo(p,p.return);break;case 12:nn(t,p);break;case 13:nn(t,p),I&4&&Nd(t,p),I&64&&(t=p.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(p=vf.bind(null,p),Lf(t,p))));break;case 22:if(I=p.memoizedState!==null||Tr,!I){n=n!==null&&n.memoizedState!==null||Mt,G=Tr;var F=Mt;Tr=I,(Mt=n)&&!F?on(t,p,(p.subtreeFlags&8772)!==0):nn(t,p),Tr=G,Mt=F}break;case 30:break;default:nn(t,p)}}function zd(t){var n=t.alternate;n!==null&&(t.alternate=null,zd(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Gr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,ls=!1;function xr(t,n,p){for(p=p.child;p!==null;)Bd(t,n,p),p=p.sibling}function Bd(t,n,p){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(fs,p)}catch{}switch(p.tag){case 26:Mt||dr(p,n),xr(t,n,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Mt||dr(p,n);var I=ht,G=ls;pn(p.type)&&(ht=p.stateNode,ls=!1),xr(t,n,p),sa(p.stateNode),ht=I,ls=G;break;case 5:Mt||dr(p,n);case 6:if(I=ht,G=ls,ht=null,xr(t,n,p),ht=I,ls=G,ht!==null)if(ls)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(p.stateNode)}catch(F){ut(p,n,F)}else try{ht.removeChild(p.stateNode)}catch(F){ut(p,n,F)}break;case 18:ht!==null&&(ls?(t=ht,Ap(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,p.stateNode),la(t)):Ap(ht,p.stateNode));break;case 4:I=ht,G=ls,ht=p.stateNode.containerInfo,ls=!0,xr(t,n,p),ht=I,ls=G;break;case 0:case 11:case 14:case 15:Mt||rn(2,p,n),Mt||rn(4,p,n),xr(t,n,p);break;case 1:Mt||(dr(p,n),I=p.stateNode,typeof I.componentWillUnmount=="function"&&Ed(p,n,I)),xr(t,n,p);break;case 21:xr(t,n,p);break;case 22:Mt=(I=Mt)||p.memoizedState!==null,xr(t,n,p),Mt=I;break;default:xr(t,n,p)}}function Nd(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{la(t)}catch(p){ut(n,n.return,p)}}function lf(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Gd),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Gd),n;default:throw Error(O(435,t.tag))}}function Ic(t,n){var p=lf(t);n.forEach(function(I){var G=bf.bind(null,t,I);p.has(I)||(p.add(I),I.then(G,G))})}function Ms(t,n){var p=n.deletions;if(p!==null)for(var I=0;I<p.length;I++){var G=p[I],F=t,W=n,se=W;e:for(;se!==null;){switch(se.tag){case 27:if(pn(se.type)){ht=se.stateNode,ls=!1;break e}break;case 5:ht=se.stateNode,ls=!1;break e;case 3:case 4:ht=se.stateNode.containerInfo,ls=!0;break e}se=se.return}if(ht===null)throw Error(O(160));Bd(F,W,G),ht=null,ls=!1,F=G.alternate,F!==null&&(F.return=null),G.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Pd(n,t),n=n.sibling}var Vs=null;function Pd(t,n){var p=t.alternate,I=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ms(n,t),Ss(t),I&4&&(rn(3,t,t.return),Qo(3,t),rn(5,t,t.return));break;case 1:Ms(n,t),Ss(t),I&512&&(Mt||p===null||dr(p,p.return)),I&64&&Tr&&(t=t.updateQueue,t!==null&&(I=t.callbacks,I!==null&&(p=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=p===null?I:p.concat(I))));break;case 26:var G=Vs;if(Ms(n,t),Ss(t),I&512&&(Mt||p===null||dr(p,p.return)),I&4){var F=p!==null?p.memoizedState:null;if(I=t.memoizedState,p===null)if(I===null)if(t.stateNode===null){e:{I=t.type,p=t.memoizedProps,G=G.ownerDocument||G;t:switch(I){case"title":F=G.getElementsByTagName("title")[0],(!F||F[Ws]||F[dt]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=G.createElement(I),G.head.insertBefore(F,G.querySelector("head > title"))),Ft(F,I,p),F[dt]=t,_t(F),I=F;break e;case"link":var W=Lp("link","href",G).get(I+(p.href||""));if(W){for(var se=0;se<W.length;se++)if(F=W[se],F.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&F.getAttribute("rel")===(p.rel==null?null:p.rel)&&F.getAttribute("title")===(p.title==null?null:p.title)&&F.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){W.splice(se,1);break t}}F=G.createElement(I),Ft(F,I,p),G.head.appendChild(F);break;case"meta":if(W=Lp("meta","content",G).get(I+(p.content||""))){for(se=0;se<W.length;se++)if(F=W[se],F.getAttribute("content")===(p.content==null?null:""+p.content)&&F.getAttribute("name")===(p.name==null?null:p.name)&&F.getAttribute("property")===(p.property==null?null:p.property)&&F.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&F.getAttribute("charset")===(p.charSet==null?null:p.charSet)){W.splice(se,1);break t}}F=G.createElement(I),Ft(F,I,p),G.head.appendChild(F);break;default:throw Error(O(468,I))}F[dt]=t,_t(F),I=F}t.stateNode=I}else Gp(G,t.type,t.stateNode);else t.stateNode=Op(G,I,t.memoizedProps);else F!==I?(F===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):F.count--,I===null?Gp(G,t.type,t.stateNode):Op(G,I,t.memoizedProps)):I===null&&t.stateNode!==null&&kc(t,t.memoizedProps,p.memoizedProps)}break;case 27:Ms(n,t),Ss(t),I&512&&(Mt||p===null||dr(p,p.return)),p!==null&&I&4&&kc(t,t.memoizedProps,p.memoizedProps);break;case 5:if(Ms(n,t),Ss(t),I&512&&(Mt||p===null||dr(p,p.return)),t.flags&32){G=t.stateNode;try{ne(G,"")}catch(be){ut(t,t.return,be)}}I&4&&t.stateNode!=null&&(G=t.memoizedProps,kc(t,G,p!==null?p.memoizedProps:G)),I&1024&&(qc=!0);break;case 6:if(Ms(n,t),Ss(t),I&4){if(t.stateNode===null)throw Error(O(162));I=t.memoizedProps,p=t.stateNode;try{p.nodeValue=I}catch(be){ut(t,t.return,be)}}break;case 3:if(xu=null,G=Vs,Vs=Ru(n.containerInfo),Ms(n,t),Vs=G,Ss(t),I&4&&p!==null&&p.memoizedState.isDehydrated)try{la(n.containerInfo)}catch(be){ut(t,t.return,be)}qc&&(qc=!1,Fd(t));break;case 4:I=Vs,Vs=Ru(t.stateNode.containerInfo),Ms(n,t),Ss(t),Vs=I;break;case 12:Ms(n,t),Ss(t);break;case 13:Ms(n,t),Ss(t),t.child.flags&8192&&t.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Ec=Ae()),I&4&&(I=t.updateQueue,I!==null&&(t.updateQueue=null,Ic(t,I)));break;case 22:G=t.memoizedState!==null;var ue=p!==null&&p.memoizedState!==null,me=Tr,Se=Mt;if(Tr=me||G,Mt=Se||ue,Ms(n,t),Mt=Se,Tr=me,Ss(t),I&8192)e:for(n=t.stateNode,n._visibility=G?n._visibility&-2:n._visibility|1,G&&(p===null||ue||Tr||Mt||Yn(t)),p=null,n=t;;){if(n.tag===5||n.tag===26){if(p===null){ue=p=n;try{if(F=ue.stateNode,G)W=F.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{se=ue.stateNode;var qe=ue.memoizedProps.style,ve=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;se.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(be){ut(ue,ue.return,be)}}}else if(n.tag===6){if(p===null){ue=n;try{ue.stateNode.nodeValue=G?"":ue.memoizedProps}catch(be){ut(ue,ue.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;p===n&&(p=null),n=n.return}p===n&&(p=null),n.sibling.return=n.return,n=n.sibling}I&4&&(I=t.updateQueue,I!==null&&(p=I.retryQueue,p!==null&&(I.retryQueue=null,Ic(t,p))));break;case 19:Ms(n,t),Ss(t),I&4&&(I=t.updateQueue,I!==null&&(t.updateQueue=null,Ic(t,I)));break;case 30:break;case 21:break;default:Ms(n,t),Ss(t)}}function Ss(t){var n=t.flags;if(n&2){try{for(var p,I=t.return;I!==null;){if(Od(I)){p=I;break}I=I.return}if(p==null)throw Error(O(160));switch(p.tag){case 27:var G=p.stateNode,F=Cc(t);_u(t,F,G);break;case 5:var W=p.stateNode;p.flags&32&&(ne(W,""),p.flags&=-33);var se=Cc(t);_u(t,se,W);break;case 3:case 4:var ue=p.stateNode.containerInfo,me=Cc(t);Dc(t,me,ue);break;default:throw Error(O(161))}}catch(Se){ut(t,t.return,Se)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Fd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Fd(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function nn(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)jd(t,n.alternate,n),n=n.sibling}function Yn(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:rn(4,n,n.return),Yn(n);break;case 1:dr(n,n.return);var p=n.stateNode;typeof p.componentWillUnmount=="function"&&Ed(n,n.return,p),Yn(n);break;case 27:sa(n.stateNode);case 26:case 5:dr(n,n.return),Yn(n);break;case 22:n.memoizedState===null&&Yn(n);break;case 30:Yn(n);break;default:Yn(n)}t=t.sibling}}function on(t,n,p){for(p=p&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var I=n.alternate,G=t,F=n,W=F.flags;switch(F.tag){case 0:case 11:case 15:on(G,F,p),Qo(4,F);break;case 1:if(on(G,F,p),I=F,G=I.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(me){ut(I,I.return,me)}if(I=F,G=I.updateQueue,G!==null){var se=I.stateNode;try{var ue=G.shared.hiddenCallbacks;if(ue!==null)for(G.shared.hiddenCallbacks=null,G=0;G<ue.length;G++)vl(ue[G],se)}catch(me){ut(I,I.return,me)}}p&&W&64&&xd(F),Zo(F,F.return);break;case 27:Ld(F);case 26:case 5:on(G,F,p),p&&I===null&&W&4&&Ud(F),Zo(F,F.return);break;case 12:on(G,F,p);break;case 13:on(G,F,p),p&&W&4&&Nd(G,F);break;case 22:F.memoizedState===null&&on(G,F,p),Zo(F,F.return);break;case 30:break;default:on(G,F,p)}n=n.sibling}}function Ac(t,n){var p=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(p=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==p&&(t!=null&&t.refCount++,p!=null&&V(p))}function wc(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&V(t))}function pr(t,n,p,I){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Hd(t,n,p,I),n=n.sibling}function Hd(t,n,p,I){var G=n.flags;switch(n.tag){case 0:case 11:case 15:pr(t,n,p,I),G&2048&&Qo(9,n);break;case 1:pr(t,n,p,I);break;case 3:pr(t,n,p,I),G&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&V(t)));break;case 12:if(G&2048){pr(t,n,p,I),t=n.stateNode;try{var F=n.memoizedProps,W=F.id,se=F.onPostCommit;typeof se=="function"&&se(W,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ue){ut(n,n.return,ue)}}else pr(t,n,p,I);break;case 13:pr(t,n,p,I);break;case 23:break;case 22:F=n.stateNode,W=n.alternate,n.memoizedState!==null?F._visibility&2?pr(t,n,p,I):Vo(t,n):F._visibility&2?pr(t,n,p,I):(F._visibility|=2,Gi(t,n,p,I,(n.subtreeFlags&10256)!==0)),G&2048&&Ac(W,n);break;case 24:pr(t,n,p,I),G&2048&&wc(n.alternate,n);break;default:pr(t,n,p,I)}}function Gi(t,n,p,I,G){for(G=G&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var F=t,W=n,se=p,ue=I,me=W.flags;switch(W.tag){case 0:case 11:case 15:Gi(F,W,se,ue,G),Qo(8,W);break;case 23:break;case 22:var Se=W.stateNode;W.memoizedState!==null?Se._visibility&2?Gi(F,W,se,ue,G):Vo(F,W):(Se._visibility|=2,Gi(F,W,se,ue,G)),G&&me&2048&&Ac(W.alternate,W);break;case 24:Gi(F,W,se,ue,G),G&&me&2048&&wc(W.alternate,W);break;default:Gi(F,W,se,ue,G)}n=n.sibling}}function Vo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var p=t,I=n,G=I.flags;switch(I.tag){case 22:Vo(p,I),G&2048&&Ac(I.alternate,I);break;case 24:Vo(p,I),G&2048&&wc(I.alternate,I);break;default:Vo(p,I)}n=n.sibling}}var Yo=8192;function ji(t){if(t.subtreeFlags&Yo)for(t=t.child;t!==null;)Kd(t),t=t.sibling}function Kd(t){switch(t.tag){case 26:ji(t),t.flags&Yo&&t.memoizedState!==null&&Yf(Vs,t.memoizedState,t.memoizedProps);break;case 5:ji(t);break;case 3:case 4:var n=Vs;Vs=Ru(t.stateNode.containerInfo),ji(t),Vs=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=Yo,Yo=16777216,ji(t),Yo=n):ji(t));break;default:ji(t)}}function Qd(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Jo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var p=0;p<n.length;p++){var I=n[p];Ot=I,Vd(I,t)}Qd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zd(t),t=t.sibling}function Zd(t){switch(t.tag){case 0:case 11:case 15:Jo(t),t.flags&2048&&rn(9,t,t.return);break;case 3:Jo(t);break;case 12:Jo(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,vu(t)):Jo(t);break;default:Jo(t)}}function vu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var p=0;p<n.length;p++){var I=n[p];Ot=I,Vd(I,t)}Qd(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:rn(8,n,n.return),vu(n);break;case 22:p=n.stateNode,p._visibility&2&&(p._visibility&=-3,vu(n));break;default:vu(n)}t=t.sibling}}function Vd(t,n){for(;Ot!==null;){var p=Ot;switch(p.tag){case 0:case 11:case 15:rn(8,p,n);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var I=p.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:V(p.memoizedState.cache)}if(I=p.child,I!==null)I.return=p,Ot=I;else e:for(p=t;Ot!==null;){I=Ot;var G=I.sibling,F=I.return;if(zd(I),I===p){Ot=null;break e}if(G!==null){G.return=F,Ot=G;break e}Ot=F}}}var df={getCacheForType:function(t){var n=At(e),p=n.data.get(t);return p===void 0&&(p=t(),n.data.set(t,p)),p}},pf=typeof WeakMap=="function"?WeakMap:Map,et=0,lt=null,Ze=null,Xe=0,st=0,ks=null,an=!1,zi=!1,Rc=!1,Er=0,bt=0,un=0,Jn=0,Tc=0,Bs=0,Bi=0,Xo=null,ds=null,xc=!1,Ec=0,bu=1/0,yu=null,cn=null,Pt=0,ln=null,Ni=null,Pi=0,Uc=0,Oc=null,Yd=null,Wo=0,Lc=null;function Cs(){if((et&2)!==0&&Xe!==0)return Xe&-Xe;if(H.T!==null){var t=Ie;return t!==0?t:Fc()}return Qt()}function Jd(){Bs===0&&(Bs=(Xe&536870912)===0||Je?Dt():536870912);var t=zs.current;return t!==null&&(t.flags|=32),Bs}function Ds(t,n,p){(t===lt&&(st===2||st===9)||t.cancelPendingCommit!==null)&&(Fi(t,0),dn(t,Xe,Bs,!1)),rs(t,p),((et&2)===0||t!==lt)&&(t===lt&&((et&2)===0&&(Jn|=p),bt===4&&dn(t,Xe,Bs,!1)),fr(t))}function Xd(t,n,p){if((et&6)!==0)throw Error(O(327));var I=!p&&(n&124)===0&&(n&t.expiredLanes)===0||Js(t,n),G=I?mf(t,n):zc(t,n,!0),F=I;do{if(G===0){zi&&!I&&dn(t,n,0,!1);break}else{if(p=t.current.alternate,F&&!ff(p)){G=zc(t,n,!1),F=!1;continue}if(G===2){if(F=n,t.errorRecoveryDisabledLanes&F)var W=0;else W=t.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){n=W;e:{var se=t;G=Xo;var ue=se.current.memoizedState.isDehydrated;if(ue&&(Fi(se,W).flags|=256),W=zc(se,W,!1),W!==2){if(Rc&&!ue){se.errorRecoveryDisabledLanes|=F,Jn|=F,G=4;break e}F=ds,ds=G,F!==null&&(ds===null?ds=F:ds.push.apply(ds,F))}G=W}if(F=!1,G!==2)continue}}if(G===1){Fi(t,0),dn(t,n,0,!0);break}e:{switch(I=t,F=G,F){case 0:case 1:throw Error(O(345));case 4:if((n&4194048)!==n)break;case 6:dn(I,n,Bs,!an);break e;case 2:ds=null;break;case 3:case 5:break;default:throw Error(O(329))}if((n&62914560)===n&&(G=Ec+300-Ae(),10<G)){if(dn(I,n,Bs,!an),Kt(I,0,!0)!==0)break e;I.timeoutHandle=qp(Wd.bind(null,I,p,ds,yu,xc,n,Bs,Jn,Bi,an,F,2,-0,0),G);break e}Wd(I,p,ds,yu,xc,n,Bs,Jn,Bi,an,F,0,-0,0)}}break}while(!0);fr(t)}function Wd(t,n,p,I,G,F,W,se,ue,me,Se,qe,ve,be){if(t.timeoutHandle=-1,qe=n.subtreeFlags,(qe&8192||(qe&16785408)===16785408)&&(ia={stylesheets:null,count:0,unsuspend:Vf},Kd(n),qe=Jf(),qe!==null)){t.cancelPendingCommit=qe(ip.bind(null,t,n,F,p,I,G,W,se,ue,Se,1,ve,be)),dn(t,F,W,!me);return}ip(t,n,F,p,I,G,W,se,ue)}function ff(t){for(var n=t;;){var p=n.tag;if((p===0||p===11||p===15)&&n.flags&16384&&(p=n.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var I=0;I<p.length;I++){var G=p[I],F=G.getSnapshot;G=G.value;try{if(!Yt(F(),G))return!1}catch{return!1}}if(p=n.child,n.subtreeFlags&16384&&p!==null)p.return=n,n=p;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dn(t,n,p,I){n&=~Tc,n&=~Jn,t.suspendedLanes|=n,t.pingedLanes&=~n,I&&(t.warmLanes|=n),I=t.expirationTimes;for(var G=n;0<G;){var F=31-ot(G),W=1<<F;I[F]=-1,G&=~W}p!==0&&Lr(t,p,n)}function Mu(){return(et&6)===0?($o(0),!1):!0}function Gc(){if(Ze!==null){if(st===0)var t=Ze.return;else t=Ze,Gs=ur=null,ec(t),Oi=null,Fo=0,t=Ze;for(;t!==null;)Td(t.alternate,t),t=t.return;Ze=null}}function Fi(t,n){var p=t.timeoutHandle;p!==-1&&(t.timeoutHandle=-1,Tf(p)),p=t.cancelPendingCommit,p!==null&&(t.cancelPendingCommit=null,p()),Gc(),lt=t,Ze=p=Us(t.current,null),Xe=n,st=0,ks=null,an=!1,zi=Js(t,n),Rc=!1,Bi=Bs=Tc=Jn=un=bt=0,ds=Xo=null,xc=!1,(n&8)!==0&&(n|=n&32);var I=t.entangledLanes;if(I!==0)for(t=t.entanglements,I&=n;0<I;){var G=31-ot(I),F=1<<G;n|=t[G],I&=~F}return Er=n,zn(),p}function $d(t,n){Fe=null,H.H=uu,n===Uo||n===Wa?(n=gl(),st=3):n===fl?(n=gl(),st=4):st=n===_d?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ks=n,Ze===null&&(bt=1,fu(t,$t(n,t.current)))}function ep(){var t=H.H;return H.H=uu,t===null?uu:t}function tp(){var t=H.A;return H.A=df,t}function jc(){bt=4,an||(Xe&4194048)!==Xe&&zs.current!==null||(zi=!0),(un&134217727)===0&&(Jn&134217727)===0||lt===null||dn(lt,Xe,Bs,!1)}function zc(t,n,p){var I=et;et|=2;var G=ep(),F=tp();(lt!==t||Xe!==n)&&(yu=null,Fi(t,n)),n=!1;var W=bt;e:do try{if(st!==0&&Ze!==null){var se=Ze,ue=ks;switch(st){case 8:Gc(),W=6;break e;case 3:case 2:case 9:case 6:zs.current===null&&(n=!0);var me=st;if(st=0,ks=null,Hi(t,se,ue,me),p&&zi){W=0;break e}break;default:me=st,st=0,ks=null,Hi(t,se,ue,me)}}hf(),W=bt;break}catch(Se){$d(t,Se)}while(!0);return n&&t.shellSuspendCounter++,Gs=ur=null,et=I,H.H=G,H.A=F,Ze===null&&(lt=null,Xe=0,zn()),W}function hf(){for(;Ze!==null;)sp(Ze)}function mf(t,n){var p=et;et|=2;var I=ep(),G=tp();lt!==t||Xe!==n?(yu=null,bu=Ae()+500,Fi(t,n)):zi=Js(t,n);e:do try{if(st!==0&&Ze!==null){n=Ze;var F=ks;t:switch(st){case 1:st=0,ks=null,Hi(t,n,F,1);break;case 2:case 9:if(hl(F)){st=0,ks=null,rp(n);break}n=function(){st!==2&&st!==9||lt!==t||(st=7),fr(t)},F.then(n,n);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:hl(F)?(st=0,ks=null,rp(n)):(st=0,ks=null,Hi(t,n,F,7));break;case 5:var W=null;switch(Ze.tag){case 26:W=Ze.memoizedState;case 5:case 27:var se=Ze;if(!W||jp(W)){st=0,ks=null;var ue=se.sibling;if(ue!==null)Ze=ue;else{var me=se.return;me!==null?(Ze=me,Su(me)):Ze=null}break t}}st=0,ks=null,Hi(t,n,F,5);break;case 6:st=0,ks=null,Hi(t,n,F,6);break;case 8:Gc(),bt=6;break e;default:throw Error(O(462))}}gf();break}catch(Se){$d(t,Se)}while(!0);return Gs=ur=null,H.H=I,H.A=G,et=p,Ze!==null?0:(lt=null,Xe=0,zn(),bt)}function gf(){for(;Ze!==null&&!we();)sp(Ze)}function sp(t){var n=wd(t.alternate,t,Er);t.memoizedProps=t.pendingProps,n===null?Su(t):Ze=n}function rp(t){var n=t,p=n.alternate;switch(n.tag){case 15:case 0:n=kd(p,n,n.pendingProps,n.type,void 0,Xe);break;case 11:n=kd(p,n,n.pendingProps,n.type.render,n.ref,Xe);break;case 5:ec(n);default:Td(p,n),n=Ze=yi(n,Er),n=wd(p,n,Er)}t.memoizedProps=t.pendingProps,n===null?Su(t):Ze=n}function Hi(t,n,p,I){Gs=ur=null,ec(n),Oi=null,Fo=0;var G=n.return;try{if(nf(t,G,n,p,Xe)){bt=1,fu(t,$t(p,t.current)),Ze=null;return}}catch(F){if(G!==null)throw Ze=G,F;bt=1,fu(t,$t(p,t.current)),Ze=null;return}n.flags&32768?(Je||I===1?t=!0:zi||(Xe&536870912)!==0?t=!1:(an=t=!0,(I===2||I===9||I===3||I===6)&&(I=zs.current,I!==null&&I.tag===13&&(I.flags|=16384))),np(n,t)):Su(n)}function Su(t){var n=t;do{if((n.flags&32768)!==0){np(n,an);return}t=n.return;var p=af(n.alternate,n,Er);if(p!==null){Ze=p;return}if(n=n.sibling,n!==null){Ze=n;return}Ze=n=t}while(n!==null);bt===0&&(bt=5)}function np(t,n){do{var p=uf(t.alternate,t);if(p!==null){p.flags&=32767,Ze=p;return}if(p=t.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!n&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=p}while(t!==null);bt=6,Ze=null}function ip(t,n,p,I,G,F,W,se,ue){t.cancelPendingCommit=null;do ku();while(Pt!==0);if((et&6)!==0)throw Error(O(327));if(n!==null){if(n===t.current)throw Error(O(177));if(F=n.lanes|n.childLanes,F|=jn,Or(t,p,F,W,se,ue),t===lt&&(Ze=lt=null,Xe=0),Ni=n,ln=t,Pi=p,Uc=F,Oc=G,Yd=I,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yf(mt,function(){return lp(),null})):(t.callbackNode=null,t.callbackPriority=0),I=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||I){I=H.T,H.T=null,G=Q.p,Q.p=2,W=et,et|=4;try{cf(t,n,p)}finally{et=W,Q.p=G,H.T=I}}Pt=1,op(),ap(),up()}}function op(){if(Pt===1){Pt=0;var t=ln,n=Ni,p=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var I=Q.p;Q.p=2;var G=et;et|=4;try{Pd(n,t);var F=Xc,W=_o(t.containerInfo),se=F.focusedElem,ue=F.selectionRange;if(W!==se&&se&&se.ownerDocument&&go(se.ownerDocument.documentElement,se)){if(ue!==null&&On(se)){var me=ue.start,Se=ue.end;if(Se===void 0&&(Se=me),"selectionStart"in se)se.selectionStart=me,se.selectionEnd=Math.min(Se,se.value.length);else{var qe=se.ownerDocument||document,ve=qe&&qe.defaultView||window;if(ve.getSelection){var be=ve.getSelection(),Be=se.textContent.length,Ge=Math.min(ue.start,Be),it=ue.end===void 0?Ge:Math.min(ue.end,Be);!be.extend&&Ge>it&&(W=it,it=Ge,Ge=W);var fe=mi(se,Ge),ce=mi(se,it);if(fe&&ce&&(be.rangeCount!==1||be.anchorNode!==fe.node||be.anchorOffset!==fe.offset||be.focusNode!==ce.node||be.focusOffset!==ce.offset)){var he=qe.createRange();he.setStart(fe.node,fe.offset),be.removeAllRanges(),Ge>it?(be.addRange(he),be.extend(ce.node,ce.offset)):(he.setEnd(ce.node,ce.offset),be.addRange(he))}}}}for(qe=[],be=se;be=be.parentNode;)be.nodeType===1&&qe.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<qe.length;se++){var Ce=qe[se];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Ou=!!Jc,Xc=Jc=null}finally{et=G,Q.p=I,H.T=p}}t.current=n,Pt=2}}function ap(){if(Pt===2){Pt=0;var t=ln,n=Ni,p=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var I=Q.p;Q.p=2;var G=et;et|=4;try{jd(t,n.alternate,n)}finally{et=G,Q.p=I,H.T=p}}Pt=3}}function up(){if(Pt===4||Pt===3){Pt=0,Oe();var t=ln,n=Ni,p=Pi,I=Yd;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Pt=5:(Pt=0,Ni=ln=null,cp(t,t.pendingLanes));var G=t.pendingLanes;if(G===0&&(cn=null),gs(p),n=n.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(fs,n,void 0,(n.current.flags&128)===128)}catch{}if(I!==null){n=H.T,G=Q.p,Q.p=2,H.T=null;try{for(var F=t.onRecoverableError,W=0;W<I.length;W++){var se=I[W];F(se.value,{componentStack:se.stack})}}finally{H.T=n,Q.p=G}}(Pi&3)!==0&&ku(),fr(t),G=t.pendingLanes,(p&4194090)!==0&&(G&42)!==0?t===Lc?Wo++:(Wo=0,Lc=t):Wo=0,$o(0)}}function cp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,V(n)))}function ku(t){return op(),ap(),up(),lp()}function lp(){if(Pt!==5)return!1;var t=ln,n=Uc;Uc=0;var p=gs(Pi),I=H.T,G=Q.p;try{Q.p=32>p?32:p,H.T=null,p=Oc,Oc=null;var F=ln,W=Pi;if(Pt=0,Ni=ln=null,Pi=0,(et&6)!==0)throw Error(O(331));var se=et;if(et|=4,Zd(F.current),Hd(F,F.current,W,p),et=se,$o(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(fs,F)}catch{}return!0}finally{Q.p=G,H.T=I,cp(t,n)}}function dp(t,n,p){n=$t(p,n),n=hc(t.stateNode,n,2),t=$r(t,n,2),t!==null&&(rs(t,2),fr(t))}function ut(t,n,p){if(t.tag===3)dp(t,t,p);else for(;n!==null;){if(n.tag===3){dp(n,t,p);break}else if(n.tag===1){var I=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(cn===null||!cn.has(I))){t=$t(p,t),p=md(2),I=$r(n,p,2),I!==null&&(gd(p,I,n,t),rs(I,2),fr(I));break}}n=n.return}}function Bc(t,n,p){var I=t.pingCache;if(I===null){I=t.pingCache=new pf;var G=new Set;I.set(n,G)}else G=I.get(n),G===void 0&&(G=new Set,I.set(n,G));G.has(p)||(Rc=!0,G.add(p),t=_f.bind(null,t,n,p),n.then(t,t))}function _f(t,n,p){var I=t.pingCache;I!==null&&I.delete(n),t.pingedLanes|=t.suspendedLanes&p,t.warmLanes&=~p,lt===t&&(Xe&p)===p&&(bt===4||bt===3&&(Xe&62914560)===Xe&&300>Ae()-Ec?(et&2)===0&&Fi(t,0):Tc|=p,Bi===Xe&&(Bi=0)),fr(t)}function pp(t,n){n===0&&(n=qt()),t=Sr(t,n),t!==null&&(rs(t,n),fr(t))}function vf(t){var n=t.memoizedState,p=0;n!==null&&(p=n.retryLane),pp(t,p)}function bf(t,n){var p=0;switch(t.tag){case 13:var I=t.stateNode,G=t.memoizedState;G!==null&&(p=G.retryLane);break;case 19:I=t.stateNode;break;case 22:I=t.stateNode._retryCache;break;default:throw Error(O(314))}I!==null&&I.delete(n),pp(t,p)}function yf(t,n){return De(t,n)}var Cu=null,Ki=null,Nc=!1,Du=!1,Pc=!1,Xn=0;function fr(t){t!==Ki&&t.next===null&&(Ki===null?Cu=Ki=t:Ki=Ki.next=t),Du=!0,Nc||(Nc=!0,Sf())}function $o(t,n){if(!Pc&&Du){Pc=!0;do for(var p=!1,I=Cu;I!==null;){if(t!==0){var G=I.pendingLanes;if(G===0)var F=0;else{var W=I.suspendedLanes,se=I.pingedLanes;F=(1<<31-ot(42|t)+1)-1,F&=G&~(W&~se),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(p=!0,gp(I,F))}else F=Xe,F=Kt(I,I===lt?F:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(F&3)===0||Js(I,F)||(p=!0,gp(I,F));I=I.next}while(p);Pc=!1}}function Mf(){fp()}function fp(){Du=Nc=!1;var t=0;Xn!==0&&(Rf()&&(t=Xn),Xn=0);for(var n=Ae(),p=null,I=Cu;I!==null;){var G=I.next,F=hp(I,n);F===0?(I.next=null,p===null?Cu=G:p.next=G,G===null&&(Ki=p)):(p=I,(t!==0||(F&3)!==0)&&(Du=!0)),I=G}$o(t)}function hp(t,n){for(var p=t.suspendedLanes,I=t.pingedLanes,G=t.expirationTimes,F=t.pendingLanes&-62914561;0<F;){var W=31-ot(F),se=1<<W,ue=G[W];ue===-1?((se&p)===0||(se&I)!==0)&&(G[W]=ms(se,n)):ue<=n&&(t.expiredLanes|=se),F&=~se}if(n=lt,p=Xe,p=Kt(t,t===n?p:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),I=t.callbackNode,p===0||t===n&&(st===2||st===9)||t.cancelPendingCommit!==null)return I!==null&&I!==null&&Re(I),t.callbackNode=null,t.callbackPriority=0;if((p&3)===0||Js(t,p)){if(n=p&-p,n===t.callbackPriority)return n;switch(I!==null&&Re(I),gs(p)){case 2:case 8:p=Ne;break;case 32:p=mt;break;case 268435456:p=Rt;break;default:p=mt}return I=mp.bind(null,t),p=De(p,I),t.callbackPriority=n,t.callbackNode=p,n}return I!==null&&I!==null&&Re(I),t.callbackPriority=2,t.callbackNode=null,2}function mp(t,n){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var p=t.callbackNode;if(ku()&&t.callbackNode!==p)return null;var I=Xe;return I=Kt(t,t===lt?I:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),I===0?null:(Xd(t,I,n),hp(t,Ae()),t.callbackNode!=null&&t.callbackNode===p?mp.bind(null,t):null)}function gp(t,n){if(ku())return null;Xd(t,n,!0)}function Sf(){xf(function(){(et&6)!==0?De(Ue,Mf):fp()})}function Fc(){return Xn===0&&(Xn=Dt()),Xn}function _p(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xe(""+t)}function vp(t,n){var p=n.ownerDocument.createElement("input");return p.name=n.name,p.value=n.value,t.id&&p.setAttribute("form",t.id),n.parentNode.insertBefore(p,n),t=new FormData(t),p.parentNode.removeChild(p),t}function kf(t,n,p,I,G){if(n==="submit"&&p&&p.stateNode===G){var F=_p((G[It]||null).action),W=I.submitter;W&&(n=(n=W[It]||null)?_p(n.formAction):W.getAttribute("formAction"),n!==null&&(F=n,W=null));var se=new xn("action","action",null,I,G);t.push({event:se,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(Xn!==0){var ue=W?vp(G,W):new FormData(G);cc(p,{pending:!0,data:ue,method:G.method,action:F},null,ue)}}else typeof F=="function"&&(se.preventDefault(),ue=W?vp(G,W):new FormData(G),cc(p,{pending:!0,data:ue,method:G.method,action:F},F,ue))},currentTarget:G}]})}}for(var Hc=0;Hc<_i.length;Hc++){var Kc=_i[Hc],Cf=Kc.toLowerCase(),Df=Kc[0].toUpperCase()+Kc.slice(1);us(Cf,"on"+Df)}us(Mo,"onAnimationEnd"),us(So,"onAnimationIteration"),us(ko,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(Ka,"onTransitionRun"),us(Qa,"onTransitionStart"),us(Co,"onTransitionCancel"),us(Do,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ea));function bp(t,n){n=(n&4)!==0;for(var p=0;p<t.length;p++){var I=t[p],G=I.event;I=I.listeners;e:{var F=void 0;if(n)for(var W=I.length-1;0<=W;W--){var se=I[W],ue=se.instance,me=se.currentTarget;if(se=se.listener,ue!==F&&G.isPropagationStopped())break e;F=se,G.currentTarget=me;try{F(G)}catch(Se){pu(Se)}G.currentTarget=null,F=ue}else for(W=0;W<I.length;W++){if(se=I[W],ue=se.instance,me=se.currentTarget,se=se.listener,ue!==F&&G.isPropagationStopped())break e;F=se,G.currentTarget=me;try{F(G)}catch(Se){pu(Se)}G.currentTarget=null,F=ue}}}}function Ve(t,n){var p=n[vn];p===void 0&&(p=n[vn]=new Set);var I=t+"__bubble";p.has(I)||(yp(n,t,2,!1),p.add(I))}function Qc(t,n,p){var I=0;n&&(I|=4),yp(p,t,I,n)}var qu="_reactListening"+Math.random().toString(36).slice(2);function Zc(t){if(!t[qu]){t[qu]=!0,yn.forEach(function(p){p!=="selectionchange"&&(qf.has(p)||Qc(p,!1,t),Qc(p,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[qu]||(n[qu]=!0,Qc("selectionchange",!1,n))}}function yp(t,n,p,I){switch(Hp(n)){case 2:var G=$f;break;case 8:G=eh;break;default:G=al}p=G.bind(null,n,p,t),G=void 0,!_r||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(G=!0),I?G!==void 0?t.addEventListener(n,p,{capture:!0,passive:G}):t.addEventListener(n,p,!0):G!==void 0?t.addEventListener(n,p,{passive:G}):t.addEventListener(n,p,!1)}function Vc(t,n,p,I,G){var F=I;if((n&1)===0&&(n&2)===0&&I!==null)e:for(;;){if(I===null)return;var W=I.tag;if(W===3||W===4){var se=I.stateNode.containerInfo;if(se===G)break;if(W===4)for(W=I.return;W!==null;){var ue=W.tag;if((ue===3||ue===4)&&W.stateNode.containerInfo===G)return;W=W.return}for(;se!==null;){if(W=vs(se),W===null)return;if(ue=W.tag,ue===5||ue===6||ue===26||ue===27){I=F=W;continue e}se=se.parentNode}}I=I.return}Tn(function(){var me=F,Se=We(p),qe=[];e:{var ve=qo.get(t);if(ve!==void 0){var be=xn,Be=t;switch(t){case"keypress":if(Es(p)===0)break e;case"keydown":case"keyup":be=Da;break;case"focusin":Be="focus",be=ui;break;case"focusout":Be="blur",be=ui;break;case"beforeblur":case"afterblur":be=ui;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=fa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Aa;break;case Mo:case So:case ko:be=ga;break;case Do:be=Ra;break;case"scroll":case"scrollend":be=da;break;case"wheel":be=xa;break;case"copy":case"cut":case"paste":be=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=di;break;case"toggle":case"beforetoggle":be=Ua}var Ge=(n&4)!==0,it=!Ge&&(t==="scroll"||t==="scrollend"),fe=Ge?ve!==null?ve+"Capture":null:ve;Ge=[];for(var ce=me,he;ce!==null;){var Ce=ce;if(he=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||he===null||fe===null||(Ce=sr(ce,fe),Ce!=null&&Ge.push(ta(ce,Ce,he))),it)break;ce=ce.return}0<Ge.length&&(ve=new be(ve,Be,null,p,Se),qe.push({event:ve,listeners:Ge}))}}if((n&7)===0){e:{if(ve=t==="mouseover"||t==="pointerover",be=t==="mouseout"||t==="pointerout",ve&&p!==Te&&(Be=p.relatedTarget||p.fromElement)&&(vs(Be)||Be[Ps]))break e;if((be||ve)&&(ve=Se.window===Se?Se:(ve=Se.ownerDocument)?ve.defaultView||ve.parentWindow:window,be?(Be=p.relatedTarget||p.toElement,be=me,Be=Be?vs(Be):null,Be!==null&&(it=_(Be),Ge=Be.tag,Be!==it||Ge!==5&&Ge!==27&&Ge!==6)&&(Be=null)):(be=null,Be=me),be!==Be)){if(Ge=eo,Ce="onMouseLeave",fe="onMouseEnter",ce="mouse",(t==="pointerout"||t==="pointerover")&&(Ge=di,Ce="onPointerLeave",fe="onPointerEnter",ce="pointer"),it=be==null?ve:$s(be),he=Be==null?ve:$s(Be),ve=new Ge(Ce,ce+"leave",be,p,Se),ve.target=it,ve.relatedTarget=he,Ce=null,vs(Se)===me&&(Ge=new Ge(fe,ce+"enter",Be,p,Se),Ge.target=he,Ge.relatedTarget=it,Ce=Ge),it=Ce,be&&Be)t:{for(Ge=be,fe=Be,ce=0,he=Ge;he;he=Qi(he))ce++;for(he=0,Ce=fe;Ce;Ce=Qi(Ce))he++;for(;0<ce-he;)Ge=Qi(Ge),ce--;for(;0<he-ce;)fe=Qi(fe),he--;for(;ce--;){if(Ge===fe||fe!==null&&Ge===fe.alternate)break t;Ge=Qi(Ge),fe=Qi(fe)}Ge=null}else Ge=null;be!==null&&Mp(qe,ve,be,Ge,!1),Be!==null&&it!==null&&Mp(qe,it,Be,Ge,!0)}}e:{if(ve=me?$s(me):window,be=ve.nodeName&&ve.nodeName.toLowerCase(),be==="select"||be==="input"&&ve.type==="file")var Ee=co;else if(ao(ve))if(lo)Ee=Fa;else{Ee=Na;var Ke=Ba}else be=ve.nodeName,!be||be.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?me&&de(me.elementType)&&(Ee=co):Ee=Pa;if(Ee&&(Ee=Ee(t,me))){uo(qe,Ee,p,Se);break e}Ke&&Ke(t,ve,me),t==="focusout"&&me&&ve.type==="number"&&me.memoizedProps.value!=null&&wn(ve,"number",ve.value)}switch(Ke=me?$s(me):window,t){case"focusin":(ao(Ke)||Ke.contentEditable==="true")&&(br=Ke,Ln=me,Qr=null);break;case"focusout":Qr=Ln=br=null;break;case"mousedown":gi=!0;break;case"contextmenu":case"mouseup":case"dragend":gi=!1,bo(qe,p,Se);break;case"selectionchange":if(vo)break;case"keydown":case"keyup":bo(qe,p,Se)}var Le;if(pi)e:{switch(t){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else vr?io(t,p)&&(je="onCompositionEnd"):t==="keydown"&&p.keyCode===229&&(je="onCompositionStart");je&&(so&&p.locale!=="ko"&&(vr||je!=="onCompositionStart"?je==="onCompositionEnd"&&vr&&(Le=at()):(zt=Se,xt="value"in zt?zt.value:zt.textContent,vr=!0)),Ke=Iu(me,je),0<Ke.length&&(je=new ci(je,t,null,p,Se),qe.push({event:je,listeners:Ke}),Le?je.data=Le:(Le=oo(p),Le!==null&&(je.data=Le)))),(Le=to?La(t,p):Ga(t,p))&&(je=Iu(me,"onBeforeInput"),0<je.length&&(Ke=new ci("onBeforeInput","beforeinput",null,p,Se),qe.push({event:Ke,listeners:je}),Ke.data=Le)),kf(qe,t,me,p,Se)}bp(qe,n)})}function ta(t,n,p){return{instance:t,listener:n,currentTarget:p}}function Iu(t,n){for(var p=n+"Capture",I=[];t!==null;){var G=t,F=G.stateNode;if(G=G.tag,G!==5&&G!==26&&G!==27||F===null||(G=sr(t,p),G!=null&&I.unshift(ta(t,G,F)),G=sr(t,n),G!=null&&I.push(ta(t,G,F))),t.tag===3)return I;t=t.return}return[]}function Qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Mp(t,n,p,I,G){for(var F=n._reactName,W=[];p!==null&&p!==I;){var se=p,ue=se.alternate,me=se.stateNode;if(se=se.tag,ue!==null&&ue===I)break;se!==5&&se!==26&&se!==27||me===null||(ue=me,G?(me=sr(p,F),me!=null&&W.unshift(ta(p,me,ue))):G||(me=sr(p,F),me!=null&&W.push(ta(p,me,ue)))),p=p.return}W.length!==0&&t.push({event:n,listeners:W})}var If=/\r\n?/g,Af=/\u0000|\uFFFD/g;function Sp(t){return(typeof t=="string"?t:""+t).replace(If,`
`).replace(Af,"")}function kp(t,n){return n=Sp(n),Sp(t)===n}function Au(){}function nt(t,n,p,I,G,F){switch(p){case"children":typeof I=="string"?n==="body"||n==="textarea"&&I===""||ne(t,I):(typeof I=="number"||typeof I=="bigint")&&n!=="body"&&ne(t,""+I);break;case"className":gr(t,"class",I);break;case"tabIndex":gr(t,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":gr(t,p,I);break;case"style":le(t,I,F);break;case"data":if(n!=="object"){gr(t,"data",I);break}case"src":case"href":if(I===""&&(n!=="a"||p!=="href")){t.removeAttribute(p);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){t.removeAttribute(p);break}I=xe(""+I),t.setAttribute(p,I);break;case"action":case"formAction":if(typeof I=="function"){t.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(p==="formAction"?(n!=="input"&&nt(t,n,"name",G.name,G,null),nt(t,n,"formEncType",G.formEncType,G,null),nt(t,n,"formMethod",G.formMethod,G,null),nt(t,n,"formTarget",G.formTarget,G,null)):(nt(t,n,"encType",G.encType,G,null),nt(t,n,"method",G.method,G,null),nt(t,n,"target",G.target,G,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){t.removeAttribute(p);break}I=xe(""+I),t.setAttribute(p,I);break;case"onClick":I!=null&&(t.onclick=Au);break;case"onScroll":I!=null&&Ve("scroll",t);break;case"onScrollEnd":I!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(O(61));if(p=I.__html,p!=null){if(G.children!=null)throw Error(O(60));t.innerHTML=p}}break;case"multiple":t.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":t.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){t.removeAttribute("xlink:href");break}p=xe(""+I),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?t.setAttribute(p,""+I):t.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?t.setAttribute(p,""):t.removeAttribute(p);break;case"capture":case"download":I===!0?t.setAttribute(p,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?t.setAttribute(p,I):t.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?t.setAttribute(p,I):t.removeAttribute(p);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?t.removeAttribute(p):t.setAttribute(p,I);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),Ts(t,"popover",I);break;case"xlinkActuate":is(t,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":is(t,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":is(t,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":is(t,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":is(t,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":is(t,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":is(t,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":is(t,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":is(t,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":Ts(t,"is",I);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ye.get(p)||p,Ts(t,p,I))}}function Yc(t,n,p,I,G,F){switch(p){case"style":le(t,I,F);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(O(61));if(p=I.__html,p!=null){if(G.children!=null)throw Error(O(60));t.innerHTML=p}}break;case"children":typeof I=="string"?ne(t,I):(typeof I=="number"||typeof I=="bigint")&&ne(t,""+I);break;case"onScroll":I!=null&&Ve("scroll",t);break;case"onScrollEnd":I!=null&&Ve("scrollend",t);break;case"onClick":I!=null&&(t.onclick=Au);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mn.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(G=p.endsWith("Capture"),n=p.slice(2,G?p.length-7:void 0),F=t[It]||null,F=F!=null?F[p]:null,typeof F=="function"&&t.removeEventListener(n,F,G),typeof I=="function")){typeof F!="function"&&F!==null&&(p in t?t[p]=null:t.hasAttribute(p)&&t.removeAttribute(p)),t.addEventListener(n,I,G);break e}p in t?t[p]=I:I===!0?t.setAttribute(p,""):Ts(t,p,I)}}}function Ft(t,n,p){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var I=!1,G=!1,F;for(F in p)if(p.hasOwnProperty(F)){var W=p[F];if(W!=null)switch(F){case"src":I=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,n));default:nt(t,n,F,W,p,null)}}G&&nt(t,n,"srcSet",p.srcSet,p,null),I&&nt(t,n,"src",p.src,p,null);return;case"input":Ve("invalid",t);var se=F=W=G=null,ue=null,me=null;for(I in p)if(p.hasOwnProperty(I)){var Se=p[I];if(Se!=null)switch(I){case"name":G=Se;break;case"type":W=Se;break;case"checked":ue=Se;break;case"defaultChecked":me=Se;break;case"value":F=Se;break;case"defaultValue":se=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(O(137,n));break;default:nt(t,n,I,Se,p,null)}}ii(t,F,se,ue,me,W,G,!1),jr(t);return;case"select":Ve("invalid",t),I=W=F=null;for(G in p)if(p.hasOwnProperty(G)&&(se=p[G],se!=null))switch(G){case"value":F=se;break;case"defaultValue":W=se;break;case"multiple":I=se;default:nt(t,n,G,se,p,null)}n=F,p=W,t.multiple=!!I,n!=null?tr(t,!!I,n,!1):p!=null&&tr(t,!!I,p,!0);return;case"textarea":Ve("invalid",t),F=G=I=null;for(W in p)if(p.hasOwnProperty(W)&&(se=p[W],se!=null))switch(W){case"value":I=se;break;case"defaultValue":G=se;break;case"children":F=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(O(91));break;default:nt(t,n,W,se,p,null)}N(t,I,G,F),jr(t);return;case"option":for(ue in p)if(p.hasOwnProperty(ue)&&(I=p[ue],I!=null))switch(ue){case"selected":t.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:nt(t,n,ue,I,p,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(I=0;I<ea.length;I++)Ve(ea[I],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in p)if(p.hasOwnProperty(me)&&(I=p[me],I!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,n));default:nt(t,n,me,I,p,null)}return;default:if(de(n)){for(Se in p)p.hasOwnProperty(Se)&&(I=p[Se],I!==void 0&&Yc(t,n,Se,I,p,void 0));return}}for(se in p)p.hasOwnProperty(se)&&(I=p[se],I!=null&&nt(t,n,se,I,p,null))}function wf(t,n,p,I){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,F=null,W=null,se=null,ue=null,me=null,Se=null;for(be in p){var qe=p[be];if(p.hasOwnProperty(be)&&qe!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":ue=qe;default:I.hasOwnProperty(be)||nt(t,n,be,null,I,qe)}}for(var ve in I){var be=I[ve];if(qe=p[ve],I.hasOwnProperty(ve)&&(be!=null||qe!=null))switch(ve){case"type":F=be;break;case"name":G=be;break;case"checked":me=be;break;case"defaultChecked":Se=be;break;case"value":W=be;break;case"defaultValue":se=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(O(137,n));break;default:be!==qe&&nt(t,n,ve,be,I,qe)}}An(t,W,se,ue,me,Se,F,G);return;case"select":be=W=se=ve=null;for(F in p)if(ue=p[F],p.hasOwnProperty(F)&&ue!=null)switch(F){case"value":break;case"multiple":be=ue;default:I.hasOwnProperty(F)||nt(t,n,F,null,I,ue)}for(G in I)if(F=I[G],ue=p[G],I.hasOwnProperty(G)&&(F!=null||ue!=null))switch(G){case"value":ve=F;break;case"defaultValue":se=F;break;case"multiple":W=F;default:F!==ue&&nt(t,n,G,F,I,ue)}n=se,p=W,I=be,ve!=null?tr(t,!!p,ve,!1):!!I!=!!p&&(n!=null?tr(t,!!p,n,!0):tr(t,!!p,p?[]:"",!1));return;case"textarea":be=ve=null;for(se in p)if(G=p[se],p.hasOwnProperty(se)&&G!=null&&!I.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:nt(t,n,se,null,I,G)}for(W in I)if(G=I[W],F=p[W],I.hasOwnProperty(W)&&(G!=null||F!=null))switch(W){case"value":ve=G;break;case"defaultValue":be=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(O(91));break;default:G!==F&&nt(t,n,W,G,I,F)}Rn(t,ve,be);return;case"option":for(var Be in p)if(ve=p[Be],p.hasOwnProperty(Be)&&ve!=null&&!I.hasOwnProperty(Be))switch(Be){case"selected":t.selected=!1;break;default:nt(t,n,Be,null,I,ve)}for(ue in I)if(ve=I[ue],be=p[ue],I.hasOwnProperty(ue)&&ve!==be&&(ve!=null||be!=null))switch(ue){case"selected":t.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:nt(t,n,ue,ve,I,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in p)ve=p[Ge],p.hasOwnProperty(Ge)&&ve!=null&&!I.hasOwnProperty(Ge)&&nt(t,n,Ge,null,I,ve);for(me in I)if(ve=I[me],be=p[me],I.hasOwnProperty(me)&&ve!==be&&(ve!=null||be!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(O(137,n));break;default:nt(t,n,me,ve,I,be)}return;default:if(de(n)){for(var it in p)ve=p[it],p.hasOwnProperty(it)&&ve!==void 0&&!I.hasOwnProperty(it)&&Yc(t,n,it,void 0,I,ve);for(Se in I)ve=I[Se],be=p[Se],!I.hasOwnProperty(Se)||ve===be||ve===void 0&&be===void 0||Yc(t,n,Se,ve,I,be);return}}for(var fe in p)ve=p[fe],p.hasOwnProperty(fe)&&ve!=null&&!I.hasOwnProperty(fe)&&nt(t,n,fe,null,I,ve);for(qe in I)ve=I[qe],be=p[qe],!I.hasOwnProperty(qe)||ve===be||ve==null&&be==null||nt(t,n,qe,ve,I,be)}var Jc=null,Xc=null;function wu(t){return t.nodeType===9?t:t.ownerDocument}function Cp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dp(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Wc(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $c=null;function Rf(){var t=window.event;return t&&t.type==="popstate"?t===$c?!1:($c=t,!0):($c=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,Tf=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,xf=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(t){return Ip.resolve(null).then(t).catch(Ef)}:qp;function Ef(t){setTimeout(function(){throw t})}function pn(t){return t==="head"}function Ap(t,n){var p=n,I=0,G=0;do{var F=p.nextSibling;if(t.removeChild(p),F&&F.nodeType===8)if(p=F.data,p==="/$"){if(0<I&&8>I){p=I;var W=t.ownerDocument;if(p&1&&sa(W.documentElement),p&2&&sa(W.body),p&4)for(p=W.head,sa(p),W=p.firstChild;W;){var se=W.nextSibling,ue=W.nodeName;W[Ws]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&W.rel.toLowerCase()==="stylesheet"||p.removeChild(W),W=se}}if(G===0){t.removeChild(F),la(n);return}G--}else p==="$"||p==="$?"||p==="$!"?G++:I=p.charCodeAt(0)-48;else I=0;p=F}while(p);la(n)}function el(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var p=n;switch(n=n.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":el(p),Gr(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}t.removeChild(p)}}function Uf(t,n,p,I){for(;t.nodeType===1;){var G=p;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!I&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(I){if(!t[Ws])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(F=t.getAttribute("rel"),F==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(F!==G.rel||t.getAttribute("href")!==(G.href==null||G.href===""?null:G.href)||t.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||t.getAttribute("title")!==(G.title==null?null:G.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(F=t.getAttribute("src"),(F!==(G.src==null?null:G.src)||t.getAttribute("type")!==(G.type==null?null:G.type)||t.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&F&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var F=G.name==null?null:""+G.name;if(G.type==="hidden"&&t.getAttribute("name")===F)return t}else return t;if(t=Ys(t.nextSibling),t===null)break}return null}function Of(t,n,p){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!p||(t=Ys(t.nextSibling),t===null))return null;return t}function tl(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Lf(t,n){var p=t.ownerDocument;if(t.data!=="$?"||p.readyState==="complete")n();else{var I=function(){n(),p.removeEventListener("DOMContentLoaded",I)};p.addEventListener("DOMContentLoaded",I),t._reactRetry=I}}function Ys(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var sl=null;function wp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var p=t.data;if(p==="$"||p==="$!"||p==="$?"){if(n===0)return t;n--}else p==="/$"&&n++}t=t.previousSibling}return null}function Rp(t,n,p){switch(n=wu(p),t){case"html":if(t=n.documentElement,!t)throw Error(O(452));return t;case"head":if(t=n.head,!t)throw Error(O(453));return t;case"body":if(t=n.body,!t)throw Error(O(454));return t;default:throw Error(O(451))}}function sa(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Gr(t)}var Ns=new Map,Tp=new Set;function Ru(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ur=Q.d;Q.d={f:Gf,r:jf,D:zf,C:Bf,L:Nf,m:Pf,X:Hf,S:Ff,M:Kf};function Gf(){var t=Ur.f(),n=Mu();return t||n}function jf(t){var n=As(t);n!==null&&n.tag===5&&n.type==="form"?Xl(n):Ur.r(t)}var Zi=typeof document>"u"?null:document;function xp(t,n,p){var I=Zi;if(I&&typeof n=="string"&&n){var G=Vt(n);G='link[rel="'+t+'"][href="'+G+'"]',typeof p=="string"&&(G+='[crossorigin="'+p+'"]'),Tp.has(G)||(Tp.add(G),t={rel:t,crossOrigin:p,href:n},I.querySelector(G)===null&&(n=I.createElement("link"),Ft(n,"link",t),_t(n),I.head.appendChild(n)))}}function zf(t){Ur.D(t),xp("dns-prefetch",t,null)}function Bf(t,n){Ur.C(t,n),xp("preconnect",t,n)}function Nf(t,n,p){Ur.L(t,n,p);var I=Zi;if(I&&t&&n){var G='link[rel="preload"][as="'+Vt(n)+'"]';n==="image"&&p&&p.imageSrcSet?(G+='[imagesrcset="'+Vt(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(G+='[imagesizes="'+Vt(p.imageSizes)+'"]')):G+='[href="'+Vt(t)+'"]';var F=G;switch(n){case"style":F=Vi(t);break;case"script":F=Yi(t)}Ns.has(F)||(t=m({rel:"preload",href:n==="image"&&p&&p.imageSrcSet?void 0:t,as:n},p),Ns.set(F,t),I.querySelector(G)!==null||n==="style"&&I.querySelector(ra(F))||n==="script"&&I.querySelector(na(F))||(n=I.createElement("link"),Ft(n,"link",t),_t(n),I.head.appendChild(n)))}}function Pf(t,n){Ur.m(t,n);var p=Zi;if(p&&t){var I=n&&typeof n.as=="string"?n.as:"script",G='link[rel="modulepreload"][as="'+Vt(I)+'"][href="'+Vt(t)+'"]',F=G;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=Yi(t)}if(!Ns.has(F)&&(t=m({rel:"modulepreload",href:t},n),Ns.set(F,t),p.querySelector(G)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(na(F)))return}I=p.createElement("link"),Ft(I,"link",t),_t(I),p.head.appendChild(I)}}}function Ff(t,n,p){Ur.S(t,n,p);var I=Zi;if(I&&t){var G=ws(I).hoistableStyles,F=Vi(t);n=n||"default";var W=G.get(F);if(!W){var se={loading:0,preload:null};if(W=I.querySelector(ra(F)))se.loading=5;else{t=m({rel:"stylesheet",href:t,"data-precedence":n},p),(p=Ns.get(F))&&rl(t,p);var ue=W=I.createElement("link");_t(ue),Ft(ue,"link",t),ue._p=new Promise(function(me,Se){ue.onload=me,ue.onerror=Se}),ue.addEventListener("load",function(){se.loading|=1}),ue.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Tu(W,n,I)}W={type:"stylesheet",instance:W,count:1,state:se},G.set(F,W)}}}function Hf(t,n){Ur.X(t,n);var p=Zi;if(p&&t){var I=ws(p).hoistableScripts,G=Yi(t),F=I.get(G);F||(F=p.querySelector(na(G)),F||(t=m({src:t,async:!0},n),(n=Ns.get(G))&&nl(t,n),F=p.createElement("script"),_t(F),Ft(F,"link",t),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},I.set(G,F))}}function Kf(t,n){Ur.M(t,n);var p=Zi;if(p&&t){var I=ws(p).hoistableScripts,G=Yi(t),F=I.get(G);F||(F=p.querySelector(na(G)),F||(t=m({src:t,async:!0,type:"module"},n),(n=Ns.get(G))&&nl(t,n),F=p.createElement("script"),_t(F),Ft(F,"link",t),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},I.set(G,F))}}function Ep(t,n,p,I){var G=(G=ae.current)?Ru(G):null;if(!G)throw Error(O(446));switch(t){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(n=Vi(p.href),p=ws(G).hoistableStyles,I=p.get(n),I||(I={type:"style",instance:null,count:0,state:null},p.set(n,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){t=Vi(p.href);var F=ws(G).hoistableStyles,W=F.get(t);if(W||(G=G.ownerDocument||G,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(t,W),(F=G.querySelector(ra(t)))&&!F._p&&(W.instance=F,W.state.loading=5),Ns.has(t)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ns.set(t,p),F||Qf(G,t,p,W.state))),n&&I===null)throw Error(O(528,""));return W}if(n&&I!==null)throw Error(O(529,""));return null;case"script":return n=p.async,p=p.src,typeof p=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Yi(p),p=ws(G).hoistableScripts,I=p.get(n),I||(I={type:"script",instance:null,count:0,state:null},p.set(n,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,t))}}function Vi(t){return'href="'+Vt(t)+'"'}function ra(t){return'link[rel="stylesheet"]['+t+"]"}function Up(t){return m({},t,{"data-precedence":t.precedence,precedence:null})}function Qf(t,n,p,I){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?I.loading=1:(n=t.createElement("link"),I.preload=n,n.addEventListener("load",function(){return I.loading|=1}),n.addEventListener("error",function(){return I.loading|=2}),Ft(n,"link",p),_t(n),t.head.appendChild(n))}function Yi(t){return'[src="'+Vt(t)+'"]'}function na(t){return"script[async]"+t}function Op(t,n,p){if(n.count++,n.instance===null)switch(n.type){case"style":var I=t.querySelector('style[data-href~="'+Vt(p.href)+'"]');if(I)return n.instance=I,_t(I),I;var G=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return I=(t.ownerDocument||t).createElement("style"),_t(I),Ft(I,"style",G),Tu(I,p.precedence,t),n.instance=I;case"stylesheet":G=Vi(p.href);var F=t.querySelector(ra(G));if(F)return n.state.loading|=4,n.instance=F,_t(F),F;I=Up(p),(G=Ns.get(G))&&rl(I,G),F=(t.ownerDocument||t).createElement("link"),_t(F);var W=F;return W._p=new Promise(function(se,ue){W.onload=se,W.onerror=ue}),Ft(F,"link",I),n.state.loading|=4,Tu(F,p.precedence,t),n.instance=F;case"script":return F=Yi(p.src),(G=t.querySelector(na(F)))?(n.instance=G,_t(G),G):(I=p,(G=Ns.get(F))&&(I=m({},p),nl(I,G)),t=t.ownerDocument||t,G=t.createElement("script"),_t(G),Ft(G,"link",I),t.head.appendChild(G),n.instance=G);case"void":return null;default:throw Error(O(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(I=n.instance,n.state.loading|=4,Tu(I,p.precedence,t));return n.instance}function Tu(t,n,p){for(var I=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=I.length?I[I.length-1]:null,F=G,W=0;W<I.length;W++){var se=I[W];if(se.dataset.precedence===n)F=se;else if(F!==G)break}F?F.parentNode.insertBefore(t,F.nextSibling):(n=p.nodeType===9?p.head:p,n.insertBefore(t,n.firstChild))}function rl(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function nl(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var xu=null;function Lp(t,n,p){if(xu===null){var I=new Map,G=xu=new Map;G.set(p,I)}else G=xu,I=G.get(p),I||(I=new Map,G.set(p,I));if(I.has(t))return I;for(I.set(t,null),p=p.getElementsByTagName(t),G=0;G<p.length;G++){var F=p[G];if(!(F[Ws]||F[dt]||t==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var W=F.getAttribute(n)||"";W=t+W;var se=I.get(W);se?se.push(F):I.set(W,[F])}}return I}function Gp(t,n,p){t=t.ownerDocument||t,t.head.insertBefore(p,n==="title"?t.querySelector("head > title"):null)}function Zf(t,n,p){if(p===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function jp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ia=null;function Vf(){}function Yf(t,n,p){if(ia===null)throw Error(O(475));var I=ia;if(n.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var G=Vi(p.href),F=t.querySelector(ra(G));if(F){t=F._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(I.count++,I=Eu.bind(I),t.then(I,I)),n.state.loading|=4,n.instance=F,_t(F);return}F=t.ownerDocument||t,p=Up(p),(G=Ns.get(G))&&rl(p,G),F=F.createElement("link"),_t(F);var W=F;W._p=new Promise(function(se,ue){W.onload=se,W.onerror=ue}),Ft(F,"link",p),n.instance=F}I.stylesheets===null&&(I.stylesheets=new Map),I.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(I.count++,n=Eu.bind(I),t.addEventListener("load",n),t.addEventListener("error",n))}}function Jf(){if(ia===null)throw Error(O(475));var t=ia;return t.stylesheets&&t.count===0&&il(t,t.stylesheets),0<t.count?function(n){var p=setTimeout(function(){if(t.stylesheets&&il(t,t.stylesheets),t.unsuspend){var I=t.unsuspend;t.unsuspend=null,I()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(p)}}:null}function Eu(){if(this.count--,this.count===0){if(this.stylesheets)il(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function il(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,n.forEach(Xf,t),Uu=null,Eu.call(t))}function Xf(t,n){if(!(n.state.loading&4)){var p=Uu.get(t);if(p)var I=p.get(null);else{p=new Map,Uu.set(t,p);for(var G=t.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<G.length;F++){var W=G[F];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(p.set(W.dataset.precedence,W),I=W)}I&&p.set(null,I)}G=n.instance,W=G.getAttribute("data-precedence"),F=p.get(W)||I,F===I&&p.set(null,G),p.set(W,G),this.count++,I=Eu.bind(this),G.addEventListener("load",I),G.addEventListener("error",I),F?F.parentNode.insertBefore(G,F.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(G,t.firstChild)),n.state.loading|=4}}var oa={$$typeof:l,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Wf(t,n,p,I,G,F,W,se){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=I,this.onUncaughtError=G,this.onCaughtError=F,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function zp(t,n,p,I,G,F,W,se,ue,me,Se,qe){return t=new Wf(t,n,p,W,se,ue,me,qe),n=1,F===!0&&(n|=24),F=Jt(3,null,null,n),t.current=F,F.stateNode=t,n=M(),n.refCount++,t.pooledCache=n,n.refCount++,F.memoizedState={element:I,isDehydrated:p,cache:n},Hu(F),t}function Bp(t){return t?(t=kr,t):kr}function Np(t,n,p,I,G,F){G=Bp(G),I.context===null?I.context=G:I.pendingContext=G,I=Wr(n),I.payload={element:p},F=F===void 0?null:F,F!==null&&(I.callback=F),p=$r(t,I,n),p!==null&&(Ds(p,t,n),Lo(p,t,n))}function Pp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var p=t.retryLane;t.retryLane=p!==0&&p<n?p:n}}function ol(t,n){Pp(t,n),(t=t.alternate)&&Pp(t,n)}function Fp(t){if(t.tag===13){var n=Sr(t,67108864);n!==null&&Ds(n,t,67108864),ol(t,67108864)}}var Ou=!0;function $f(t,n,p,I){var G=H.T;H.T=null;var F=Q.p;try{Q.p=2,al(t,n,p,I)}finally{Q.p=F,H.T=G}}function eh(t,n,p,I){var G=H.T;H.T=null;var F=Q.p;try{Q.p=8,al(t,n,p,I)}finally{Q.p=F,H.T=G}}function al(t,n,p,I){if(Ou){var G=ul(I);if(G===null)Vc(t,n,I,Lu,p),Kp(t,I);else if(sh(G,t,n,p,I))I.stopPropagation();else if(Kp(t,I),n&4&&-1<th.indexOf(t)){for(;G!==null;){var F=As(G);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var W=hs(F.pendingLanes);if(W!==0){var se=F;for(se.pendingLanes|=2,se.entangledLanes|=2;W;){var ue=1<<31-ot(W);se.entanglements[1]|=ue,W&=~ue}fr(F),(et&6)===0&&(bu=Ae()+500,$o(0))}}break;case 13:se=Sr(F,2),se!==null&&Ds(se,F,2),Mu(),ol(F,2)}if(F=ul(I),F===null&&Vc(t,n,I,Lu,p),F===G)break;G=F}G!==null&&I.stopPropagation()}else Vc(t,n,I,null,p)}}function ul(t){return t=We(t),cl(t)}var Lu=null;function cl(t){if(Lu=null,t=vs(t),t!==null){var n=_(t);if(n===null)t=null;else{var p=n.tag;if(p===13){if(t=E(n),t!==null)return t;t=null}else if(p===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Lu=t,null}function Hp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ue:return 2;case Ne:return 8;case mt:case gt:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var ll=!1,fn=null,hn=null,mn=null,aa=new Map,ua=new Map,gn=[],th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kp(t,n){switch(t){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":aa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(n.pointerId)}}function ca(t,n,p,I,G,F){return t===null||t.nativeEvent!==F?(t={blockedOn:n,domEventName:p,eventSystemFlags:I,nativeEvent:F,targetContainers:[G]},n!==null&&(n=As(n),n!==null&&Fp(n)),t):(t.eventSystemFlags|=I,n=t.targetContainers,G!==null&&n.indexOf(G)===-1&&n.push(G),t)}function sh(t,n,p,I,G){switch(n){case"focusin":return fn=ca(fn,t,n,p,I,G),!0;case"dragenter":return hn=ca(hn,t,n,p,I,G),!0;case"mouseover":return mn=ca(mn,t,n,p,I,G),!0;case"pointerover":var F=G.pointerId;return aa.set(F,ca(aa.get(F)||null,t,n,p,I,G)),!0;case"gotpointercapture":return F=G.pointerId,ua.set(F,ca(ua.get(F)||null,t,n,p,I,G)),!0}return!1}function Qp(t){var n=vs(t.target);if(n!==null){var p=_(n);if(p!==null){if(n=p.tag,n===13){if(n=E(p),n!==null){t.blockedOn=n,Xs(t.priority,function(){if(p.tag===13){var I=Cs();I=mr(I);var G=Sr(p,I);G!==null&&Ds(G,p,I),ol(p,I)}});return}}else if(n===3&&p.stateNode.current.memoizedState.isDehydrated){t.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var p=ul(t.nativeEvent);if(p===null){p=t.nativeEvent;var I=new p.constructor(p.type,p);Te=I,p.target.dispatchEvent(I),Te=null}else return n=As(p),n!==null&&Fp(n),t.blockedOn=p,!1;n.shift()}return!0}function Zp(t,n,p){Gu(t)&&p.delete(n)}function rh(){ll=!1,fn!==null&&Gu(fn)&&(fn=null),hn!==null&&Gu(hn)&&(hn=null),mn!==null&&Gu(mn)&&(mn=null),aa.forEach(Zp),ua.forEach(Zp)}function ju(t,n){t.blockedOn===n&&(t.blockedOn=null,ll||(ll=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,rh)))}var zu=null;function Vp(t){zu!==t&&(zu=t,te.unstable_scheduleCallback(te.unstable_NormalPriority,function(){zu===t&&(zu=null);for(var n=0;n<t.length;n+=3){var p=t[n],I=t[n+1],G=t[n+2];if(typeof I!="function"){if(cl(I||p)===null)continue;break}var F=As(p);F!==null&&(t.splice(n,3),n-=3,cc(F,{pending:!0,data:G,method:p.method,action:I},I,G))}}))}function la(t){function n(ue){return ju(ue,t)}fn!==null&&ju(fn,t),hn!==null&&ju(hn,t),mn!==null&&ju(mn,t),aa.forEach(n),ua.forEach(n);for(var p=0;p<gn.length;p++){var I=gn[p];I.blockedOn===t&&(I.blockedOn=null)}for(;0<gn.length&&(p=gn[0],p.blockedOn===null);)Qp(p),p.blockedOn===null&&gn.shift();if(p=(t.ownerDocument||t).$$reactFormReplay,p!=null)for(I=0;I<p.length;I+=3){var G=p[I],F=p[I+1],W=G[It]||null;if(typeof F=="function")W||Vp(p);else if(W){var se=null;if(F&&F.hasAttribute("formAction")){if(G=F,W=F[It]||null)se=W.formAction;else if(cl(G)!==null)continue}else se=W.action;typeof se=="function"?p[I+1]=se:(p.splice(I,3),I-=3),Vp(p)}}}function dl(t){this._internalRoot=t}Bu.prototype.render=dl.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(O(409));var p=n.current,I=Cs();Np(p,I,t,n,null,null)},Bu.prototype.unmount=dl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Np(t.current,2,null,t,null,null),Mu(),n[Ps]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Qt();t={blockedOn:null,target:t,priority:n};for(var p=0;p<gn.length&&n!==0&&n<gn[p].priority;p++);gn.splice(p,0,t),p===0&&Qp(t)}};var Yp=j.version;if(Yp!=="19.1.0")throw Error(O(527,Yp,"19.1.0"));Q.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=x(n),t=t!==null?A(t):null,t=t===null?null:t.stateNode,t};var nh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{fs=Nu.inject(nh),St=Nu}catch{}}return reactDomClient_production.createRoot=function(t,n){if(!T(t))throw Error(O(299));var p=!1,I="",G=dd,F=pd,W=fd,se=null;return n!=null&&(n.unstable_strictMode===!0&&(p=!0),n.identifierPrefix!==void 0&&(I=n.identifierPrefix),n.onUncaughtError!==void 0&&(G=n.onUncaughtError),n.onCaughtError!==void 0&&(F=n.onCaughtError),n.onRecoverableError!==void 0&&(W=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(se=n.unstable_transitionCallbacks)),n=zp(t,1,!1,null,null,p,I,G,F,W,se,null),t[Ps]=n.current,Zc(t),new dl(n)},reactDomClient_production.hydrateRoot=function(t,n,p){if(!T(t))throw Error(O(299));var I=!1,G="",F=dd,W=pd,se=fd,ue=null,me=null;return p!=null&&(p.unstable_strictMode===!0&&(I=!0),p.identifierPrefix!==void 0&&(G=p.identifierPrefix),p.onUncaughtError!==void 0&&(F=p.onUncaughtError),p.onCaughtError!==void 0&&(W=p.onCaughtError),p.onRecoverableError!==void 0&&(se=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ue=p.unstable_transitionCallbacks),p.formState!==void 0&&(me=p.formState)),n=zp(t,1,!0,n,p??null,I,G,F,W,se,ue,me),n.context=Bp(null),p=n.current,I=Cs(),I=mr(I),G=Wr(I),G.callback=null,$r(p,G,I),p=I,n.current.lanes=p,rs(n,p),fr(n),t[Ps]=n.current,Zc(t),new Bu(n)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function te(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(te)}catch(j){console.error(j)}}return te(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),zegoZimWeb$1={exports:{}},zegoZimWeb=zegoZimWeb$1.exports,hasRequiredZegoZimWeb;function requireZegoZimWeb(){return hasRequiredZegoZimWeb||(hasRequiredZegoZimWeb=1,function(module,exports){((te,j)=>{module.exports=j()})(typeof self<"u"?self:zegoZimWeb,function(){return(te=>{var j={};function C(O){var T;return(j[O]||(T=j[O]={i:O,l:!1,exports:{}},te[O].call(T.exports,T,T.exports,C),T.l=!0,T)).exports}return C.m=te,C.c=j,C.d=function(O,T,_){C.o(O,T)||Object.defineProperty(O,T,{enumerable:!0,get:_})},C.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},C.t=function(O,T){if(1&T&&(O=C(O)),8&T||4&T&&typeof O=="object"&&O&&O.__esModule)return O;var _=Object.create(null);if(C.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:O}),2&T&&typeof O!="string")for(var E in O)C.d(_,E,(function(g){return O[g]}).bind(null,E));return _},C.n=function(O){var T=O&&O.__esModule?function(){return O.default}:function(){return O};return C.d(T,"a",T),T},C.o=function(O,T){return Object.prototype.hasOwnProperty.call(O,T)},C.p="",C(C.s=20)})([function(te,j,C){var O=C(12),T=(C.d(j,"c",function(){return O.a}),C(27)),_=(C.d(j,"a",function(){return T.a}),C.d(j,"b",function(){return T.b}),C.d(j,"f",function(){return T.c}),C.d(j,"i",function(){return T.d}),C.d(j,"j",function(){return T.e}),C.d(j,"n",function(){return T.f}),C.d(j,"o",function(){return T.g}),C.d(j,"p",function(){return T.h}),C.d(j,"q",function(){return T.i}),C.d(j,"r",function(){return T.j}),C.d(j,"s",function(){return T.k}),C.d(j,"t",function(){return T.l}),C.d(j,"w",function(){return T.m}),C.d(j,"x",function(){return T.n}),C.d(j,"y",function(){return T.o}),C.d(j,"z",function(){return T.p}),C(28)),E=(C.d(j,"d",function(){return _.a}),C.d(j,"e",function(){return _.b}),C.d(j,"g",function(){return _.c}),C.d(j,"A",function(){return _.d}),C(29)),g=(C.d(j,"h",function(){return E.a}),C.d(j,"m",function(){return E.b}),C(30)),x=(C.d(j,"k",function(){return g.a}),C.d(j,"l",function(){return g.b}),C(31));C.d(j,"u",function(){return x.a}),C.d(j,"v",function(){return x.b})},function(te,j,C){var O=C(25),T=(C.d(j,"o",function(){return O.a}),C.d(j,"q",function(){return O.b}),C.d(j,"r",function(){return O.c}),C(15)),_=(C.d(j,"m",function(){return T.a}),C.d(j,"y",function(){return T.b}),C(26));C.d(j,"a",function(){return _.a}),C.d(j,"b",function(){return _.b}),C.d(j,"c",function(){return _.c}),C.d(j,"d",function(){return _.d}),C.d(j,"e",function(){return _.e}),C.d(j,"f",function(){return _.f}),C.d(j,"g",function(){return _.g}),C.d(j,"h",function(){return _.h}),C.d(j,"i",function(){return _.i}),C.d(j,"j",function(){return _.j}),C.d(j,"k",function(){return _.k}),C.d(j,"l",function(){return _.l}),C.d(j,"n",function(){return _.m}),C.d(j,"p",function(){return _.n}),C.d(j,"s",function(){return _.o}),C.d(j,"t",function(){return _.p}),C.d(j,"u",function(){return _.q}),C.d(j,"v",function(){return _.r}),C.d(j,"w",function(){return _.s}),C.d(j,"x",function(){return _.t})},function(te,j,C){C.d(j,"a",function(){return f});var O=C(54),T=C(62),_=C(79),E=C(81),g=C(89),x=C(93),A=C(0),m=A.v.Manager,f=(c.getInstance=function(){return this.instance||(this.instance=new c)},c.prototype.getVersion=function(){return"2.20.0"},c.prototype.createEngine=function(u){var s={appID:u,version:"2.20.0 3/21 17:15"},r=this.handle;return this.enginMap.get(r)?(s.msg="had created",this.lg.i(m,A.u.Create,s),null):(u=new T.a(r,u),this.enginMap.set(r,u),this.lg.i(m,A.u.Create,s),u)},c.prototype.destroyEngine=function(u){this.lg.i(m,A.u.Destroy),u&&(this.enginMap.delete(u.econf.handle),u.destroy())},c.prototype.setLogConfig=function(u){this.lg.i(m,A.u.SetLogConfig,u),this.lg.setLogConfig(Object.assign({logLevel:"info"},u))},c.prototype.setAdvancedConfig=function(u,s){this.st.advancedConfig[u]=s},c.prototype.setGeofencingConfig=function(u,s){var r,i,a=this;return(s==A.c.GeofencingType.Include||s==A.c.GeofencingType.Exclude)&&u&&0<u.length&&u.every(function(o){return 2<=o&&o<=7})?(u=u.map(function(o){return 0|o}),this.st.advancedConfig.geoFence.type=s,this.st.advancedConfig.geoFence.areas=u,s==A.c.GeofencingType.Include?(i=1<u.length?(Math.random()*u.length|0)%u.length:0,this.st.setHost(u[i])):((r=new Set(Object.keys(this.st.advancedConfig.geoFence.hostMap).map(function(o){return+o}))).delete(1),u.forEach(function(o){r.delete(o),a.st.advancedConfig.geoFence.hostMap[o].relatives.forEach(function(l){return r.delete(l)})}),i=1<(u=Array.from(r)).length?(Math.random()*u.length|0)%u.length:0,this.st.setHost(u[i]||1)),this.lg.i(m,A.u.SetGeoFence,this.st.advancedConfig.geoFence),this.st.advancedConfig.geoFence.id!=1):(this.lg.i(m,A.u.SetGeoFence,{type:s,areas:u}),!1)},c);function c(){if(this.handle=Symbol(),this.enginMap=new Map,c.instance)return c.instance;this.lg=new g.a(this.getVersion()),this.st=new x.a(this.getVersion()),this.dr=new E.a(this.st,this.getVersion()),this.crypto=new O.a,this.pb=new _.a(this.crypto,this.st),c.instance=this}},function(te,j,C){C.d(j,"b",function(){return T}),C.d(j,"a",function(){return _}),C.d(j,"g",function(){return E}),C.d(j,"d",function(){return g}),C.d(j,"f",function(){return A}),C.d(j,"e",function(){return m}),C.d(j,"c",function(){return u});var O,T={importantLevel:0,reportSize:2e3,reportNum:20,bps:16e3,netTimeout:3},_={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},E=(O=1,function(){return O++}),g=(x.prototype.isEmpty=function(){return this.items.length==0},x.prototype.enqueue=function(r){this.items.push(r)},x.prototype.dequeue=function(){return this.items.shift()},x.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},x.prototype.size=function(){return this.items.length},x.prototype.clear=function(){this.items=[]},x);function x(){this.items=[],this.items=[]}var A={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"}},m=-1,f=(Object.defineProperty(c.prototype,"id",{get:function(){return this._id||null},set:function(r){this._id=r},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"data",{get:function(){return this._data},set:function(r){this._data=r},enumerable:!1,configurable:!0}),c.prototype.hasNext=function(){return this.next&&this.next.id},c.prototype.hasPrev=function(){return this.prev&&this.prev.id},c);function c(r,i){r===void 0&&(r=null),i===void 0&&(i=null),this.next=null,this.prev=null,this._id=r,this._data=i}s.prototype.insertBefore=function(r,i){return(i=new f(this._idCounter,i)).next=r,i.prev=r.prev,r.prev&&(r.prev.next=i),r.prev=i,++this._idCounter,++this._numNodes,i},s.prototype.addLast=function(r){return this.insertBefore(this.end,r)},s.prototype.add=function(r){return this.addLast(r)},s.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},s.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},s.prototype.size=function(){return this._numNodes},s.prototype.getFromFirst=function(r){var i=0,a=this.start.next;if(0<=r)for(;i<r&&a!==null;)a=a.next,++i;else a=null;if(a===null)throw"Index out of bounds.";return a},s.prototype.get=function(r){return r===0?this.getFirst():r===this._numNodes-1?this.getLast():this.getFromFirst(r)},s.prototype.remove=function(r){return r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),--this._numNodes,r},s.prototype.removeFirst=function(){var r=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):r},s.prototype.removeLast=function(){var r=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):r},s.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},s.prototype.each=function(r){for(var i=this.start;i.hasNext();)r(i=i.next)},s.prototype.find=function(r){for(var i=this.start,a=!1,o=null;i.hasNext()&&!a;)r(i=i.next)&&(o=i,a=!0);return o},s.prototype.map=function(r){for(var i=this.start,a=[];i.hasNext();)r(i=i.next)&&a.push(i);return a},s.prototype.push=function(r){return this.addLast(r)},s.prototype.unshift=function(r){0<this._numNodes?this.insertBefore(this.start.next,r):this.insertBefore(this.end,r)},s.prototype.pop=function(){return this.removeLast()},s.prototype.shift=function(){return this.removeFirst()};var u=s;function s(){this.start=new f,this.end=new f,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}},function(te,j){te.exports=O;var C=null;try{C=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function O(S,y,k){this.low=0|S,this.high=0|y,this.unsigned=!!k}function T(S){return(S&&S.__isLong__)===!0}Object.defineProperty(O.prototype,"__isLong__",{value:!0}),O.isLong=T;var _={},E={};function g(S,y){var k,b,U;return y?(U=0<=(S>>>=0)&&S<256)&&(b=E[S])?b:(k=A(S,(0|S)<0?-1:0,!0),U&&(E[S]=k),k):(U=-128<=(S|=0)&&S<128)&&(b=_[S])?b:(k=A(S,S<0?-1:0,!1),U&&(_[S]=k),k)}function x(S,y){if(isNaN(S))return y?o:a;if(y){if(S<0)return o;if(s<=S)return d}else{if(S<=-9223372036854776e3)return D;if(r<=S+1)return w}return S<0?x(-S,y).neg():A(S%u|0,S/u|0,y)}function A(S,y,k){return new O(S,y,k)}O.fromInt=g,O.fromNumber=x,O.fromBits=A;var m=Math.pow;function f(S,y,k){if(S.length===0)throw Error("empty string");if(S==="NaN"||S==="Infinity"||S==="+Infinity"||S==="-Infinity")return a;if(y=typeof y=="number"?(k=y,!1):!!y,(k=k||10)<2||36<k)throw RangeError("radix");var b;if(0<(b=S.indexOf("-")))throw Error("interior hyphen");if(b===0)return f(S.substring(1),y,k).neg();for(var U=x(m(k,8)),z=a,P=0;P<S.length;P+=8){var H=Math.min(8,S.length-P),Q=parseInt(S.substring(P,P+H),k);z=(H<8?(H=x(m(k,H)),z.mul(H)):z=z.mul(U)).add(x(Q))}return z.unsigned=y,z}function c(S,y){return typeof S=="number"?x(S,y):typeof S=="string"?f(S,y):A(S.low,S.high,typeof y=="boolean"?y:S.unsigned)}O.fromString=f,O.fromValue=c;var u=4294967296,s=u*u,r=s/2,i=g(1<<24),a=g(0),o=(O.ZERO=a,g(0,!0)),l=(O.UZERO=o,g(1)),h=(O.ONE=l,g(1,!0)),R=(O.UONE=h,g(-1)),w=(O.NEG_ONE=R,A(-1,2147483647,!1)),d=(O.MAX_VALUE=w,A(-1,-1,!0)),D=(O.MAX_UNSIGNED_VALUE=d,A(0,-2147483648,!1));(te=(O.MIN_VALUE=D,O.prototype)).toInt=function(){return this.unsigned?this.low>>>0:this.low},te.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},te.toString=function(S){if((S=S||10)<2||36<S)throw RangeError("radix");if(this.isZero())return"0";var y,k;if(this.isNegative())return this.eq(D)?(k=x(S),k=(y=this.div(k)).mul(k).sub(this),y.toString(S)+k.toInt().toString(S)):"-"+this.neg().toString(S);for(var b=x(m(S,6),this.unsigned),U=this,z="";;){var P=U.div(b),H=(U.sub(P.mul(b)).toInt()>>>0).toString(S);if((U=P).isZero())return H+z;for(;H.length<6;)H="0"+H;z=""+H+z}},te.getHighBits=function(){return this.high},te.getHighBitsUnsigned=function(){return this.high>>>0},te.getLowBits=function(){return this.low},te.getLowBitsUnsigned=function(){return this.low>>>0},te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(D)?64:this.neg().getNumBitsAbs();for(var S=this.high!=0?this.high:this.low,y=31;0<y&&(S&1<<y)==0;y--);return this.high!=0?y+33:y+1},te.isZero=function(){return this.high===0&&this.low===0},te.eqz=te.isZero,te.isNegative=function(){return!this.unsigned&&this.high<0},te.isPositive=function(){return this.unsigned||0<=this.high},te.isOdd=function(){return(1&this.low)==1},te.isEven=function(){return(1&this.low)==0},te.equals=function(S){return T(S)||(S=c(S)),(this.unsigned===S.unsigned||this.high>>>31!=1||S.high>>>31!=1)&&this.high===S.high&&this.low===S.low},te.eq=te.equals,te.notEquals=function(S){return!this.eq(S)},te.neq=te.notEquals,te.ne=te.notEquals,te.lessThan=function(S){return this.comp(S)<0},te.lt=te.lessThan,te.lessThanOrEqual=function(S){return this.comp(S)<=0},te.lte=te.lessThanOrEqual,te.le=te.lessThanOrEqual,te.greaterThan=function(S){return 0<this.comp(S)},te.gt=te.greaterThan,te.greaterThanOrEqual=function(S){return 0<=this.comp(S)},te.gte=te.greaterThanOrEqual,te.ge=te.greaterThanOrEqual,te.compare=function(S){var y,k;return T(S)||(S=c(S)),this.eq(S)?0:(y=this.isNegative(),k=S.isNegative(),y&&!k?-1:!y&&k?1:this.unsigned?S.high>>>0>this.high>>>0||S.high===this.high&&S.low>>>0>this.low>>>0?-1:1:this.sub(S).isNegative()?-1:1)},te.comp=te.compare,te.negate=function(){return!this.unsigned&&this.eq(D)?D:this.not().add(l)},te.neg=te.negate,te.add=function(S){T(S)||(S=c(S));var y=this.high>>>16,k=65535&this.high,b=this.low>>>16,U=65535&this.low,z=S.high>>>16,P=65535&S.high,H=S.low>>>16,Q=0,J=0,L=0,q=0;return J+=(L=L+((q+=U+(65535&S.low))>>>16)+(b+H))>>>16,A((L&=65535)<<16|(q&=65535),((Q+=(J+=k+P)>>>16)+(y+z)&65535)<<16|(J&=65535),this.unsigned)},te.subtract=function(S){return T(S)||(S=c(S)),this.add(S.neg())},te.sub=te.subtract,te.multiply=function(S){var y,k,b,U,z,P,H,Q,J,L,q;return this.isZero()?a:(T(S)||(S=c(S)),C?A(C.mul(this.low,this.high,S.low,S.high),C.get_high(),this.unsigned):S.isZero()?a:this.eq(D)?S.isOdd()?D:a:S.eq(D)?this.isOdd()?D:a:this.isNegative()?S.isNegative()?this.neg().mul(S.neg()):this.neg().mul(S).neg():S.isNegative()?this.mul(S.neg()).neg():this.lt(i)&&S.lt(i)?x(this.toNumber()*S.toNumber(),this.unsigned):(y=this.high>>>16,k=65535&this.high,b=this.low>>>16,U=65535&this.low,z=S.high>>>16,P=65535&S.high,H=S.low>>>16,q=(q=L=J=Q=0)+((J=J+((L+=U*(S=65535&S.low))>>>16)+b*S)>>>16)+((J=(65535&J)+U*H)>>>16),A((J&=65535)<<16|(L&=65535),(Q=(Q=(Q+=(q+=k*S)>>>16)+((q=(65535&q)+b*H)>>>16)+((q=(65535&q)+U*P)>>>16))+(y*S+k*H+b*P+U*z)&65535)<<16|(q&=65535),this.unsigned)))},te.mul=te.multiply,te.divide=function(S){if((S=T(S)?S:c(S)).isZero())throw Error("division by zero");var y,k,b;if(C)return this.unsigned||this.high!==-2147483648||S.low!==-1||S.high!==-1?A((this.unsigned?C.div_u:C.div_s)(this.low,this.high,S.low,S.high),C.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?o:a;if(this.unsigned){if((S=S.unsigned?S:S.toUnsigned()).gt(this))return o;if(S.gt(this.shru(1)))return h;k=o}else{if(this.eq(D))return S.eq(l)||S.eq(R)?D:S.eq(D)?l:(b=this.shr(1).div(S).shl(1)).eq(a)?S.isNegative()?l:R:(y=this.sub(S.mul(b)),b.add(y.div(S)));if(S.eq(D))return this.unsigned?o:a;if(this.isNegative())return S.isNegative()?this.neg().div(S.neg()):this.neg().div(S).neg();if(S.isNegative())return this.div(S.neg()).neg();k=a}for(y=this;y.gte(S);){b=Math.max(1,Math.floor(y.toNumber()/S.toNumber()));for(var U=Math.ceil(Math.log(b)/Math.LN2),z=U<=48?1:m(2,U-48),P=x(b),H=P.mul(S);H.isNegative()||H.gt(y);)H=(P=x(b-=z,this.unsigned)).mul(S);P.isZero()&&(P=l),k=k.add(P),y=y.sub(H)}return k},te.div=te.divide,te.modulo=function(S){return T(S)||(S=c(S)),C?A((this.unsigned?C.rem_u:C.rem_s)(this.low,this.high,S.low,S.high),C.get_high(),this.unsigned):this.sub(this.div(S).mul(S))},te.mod=te.modulo,te.rem=te.modulo,te.not=function(){return A(~this.low,~this.high,this.unsigned)},te.and=function(S){return T(S)||(S=c(S)),A(this.low&S.low,this.high&S.high,this.unsigned)},te.or=function(S){return T(S)||(S=c(S)),A(this.low|S.low,this.high|S.high,this.unsigned)},te.xor=function(S){return T(S)||(S=c(S)),A(this.low^S.low,this.high^S.high,this.unsigned)},te.shiftLeft=function(S){return T(S)&&(S=S.toInt()),(S&=63)==0?this:S<32?A(this.low<<S,this.high<<S|this.low>>>32-S,this.unsigned):A(0,this.low<<S-32,this.unsigned)},te.shl=te.shiftLeft,te.shiftRight=function(S){return T(S)&&(S=S.toInt()),(S&=63)==0?this:S<32?A(this.low>>>S|this.high<<32-S,this.high>>S,this.unsigned):A(this.high>>S-32,0<=this.high?0:-1,this.unsigned)},te.shr=te.shiftRight,te.shiftRightUnsigned=function(S){var y;return T(S)&&(S=S.toInt()),(S&=63)==0?this:(y=this.high,S<32?A(this.low>>>S|y<<32-S,y>>>S,this.unsigned):A(S===32?y:y>>>S-32,0,this.unsigned))},te.shru=te.shiftRightUnsigned,te.shr_u=te.shiftRightUnsigned,te.toSigned=function(){return this.unsigned?A(this.low,this.high,!1):this},te.toUnsigned=function(){return this.unsigned?this:A(this.low,this.high,!0)},te.toBytes=function(S){return S?this.toBytesLE():this.toBytesBE()},te.toBytesLE=function(){var S=this.high,y=this.low;return[255&y,y>>>8&255,y>>>16&255,y>>>24,255&S,S>>>8&255,S>>>16&255,S>>>24]},te.toBytesBE=function(){var S=this.high,y=this.low;return[S>>>24,S>>>16&255,S>>>8&255,255&S,y>>>24,y>>>16&255,y>>>8&255,255&y]},O.fromBytes=function(S,y,k){return k?O.fromBytesLE(S,y):O.fromBytesBE(S,y)},O.fromBytesLE=function(S,y){return new O(S[0]|S[1]<<8|S[2]<<16|S[3]<<24,S[4]|S[5]<<8|S[6]<<16|S[7]<<24,y)},O.fromBytesBE=function(S,y){return new O(S[4]<<24|S[5]<<16|S[6]<<8|S[7],S[0]<<24|S[1]<<16|S[2]<<8|S[3],y)}},function(te,j,C){(function(O){te.exports=(T=>{var _;if(typeof window<"u"&&window.crypto&&(_=window.crypto),typeof self<"u"&&self.crypto&&(_=self.crypto),!(_=!(_=!(_=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:_)&&typeof window<"u"&&window.msCrypto?window.msCrypto:_)&&O!==void 0&&O.crypto?O.crypto:_))try{_=C(94)}catch{}var E=Object.create||function(o){return g.prototype=o,o=new g,g.prototype=null,o};function g(){}var x={},A=x.lib={},m=A.Base={extend:function(o){var l=E(this);return o&&l.mixIn(o),l.hasOwnProperty("init")&&this.init!==l.init||(l.init=function(){l.$super.init.apply(this,arguments)}),(l.init.prototype=l).$super=this,l},create:function(){var o=this.extend();return o.init.apply(o,arguments),o},init:function(){},mixIn:function(o){for(var l in o)o.hasOwnProperty(l)&&(this[l]=o[l]);o.hasOwnProperty("toString")&&(this.toString=o.toString)},clone:function(){return this.init.prototype.extend(this)}},f=A.WordArray=m.extend({init:function(o,l){o=this.words=o||[],this.sigBytes=l??4*o.length},toString:function(o){return(o||u).stringify(this)},concat:function(o){var l=this.words,h=o.words,R=this.sigBytes,w=o.sigBytes;if(this.clamp(),R%4)for(var d=0;d<w;d++){var D=h[d>>>2]>>>24-d%4*8&255;l[R+d>>>2]|=D<<24-(R+d)%4*8}else for(var S=0;S<w;S+=4)l[R+S>>>2]=h[S>>>2];return this.sigBytes+=w,this},clamp:function(){var o=this.words,l=this.sigBytes;o[l>>>2]&=4294967295<<32-l%4*8,o.length=T.ceil(l/4)},clone:function(){var o=m.clone.call(this);return o.words=this.words.slice(0),o},random:function(o){for(var l=[],h=0;h<o;h+=4)l.push((()=>{if(_){if(typeof _.getRandomValues=="function")try{return _.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof _.randomBytes=="function")try{return _.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")})());return new f.init(l,o)}}),c=x.enc={},u=c.Hex={stringify:function(o){for(var l=o.words,h=o.sigBytes,R=[],w=0;w<h;w++){var d=l[w>>>2]>>>24-w%4*8&255;R.push((d>>>4).toString(16)),R.push((15&d).toString(16))}return R.join("")},parse:function(o){for(var l=o.length,h=[],R=0;R<l;R+=2)h[R>>>3]|=parseInt(o.substr(R,2),16)<<24-R%8*4;return new f.init(h,l/2)}},s=c.Latin1={stringify:function(o){for(var l=o.words,h=o.sigBytes,R=[],w=0;w<h;w++){var d=l[w>>>2]>>>24-w%4*8&255;R.push(String.fromCharCode(d))}return R.join("")},parse:function(o){for(var l=o.length,h=[],R=0;R<l;R++)h[R>>>2]|=(255&o.charCodeAt(R))<<24-R%4*8;return new f.init(h,l)}},r=c.Utf8={stringify:function(o){try{return decodeURIComponent(escape(s.stringify(o)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(o){return s.parse(unescape(encodeURIComponent(o)))}},i=A.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(o){typeof o=="string"&&(o=r.parse(o)),this._data.concat(o),this._nDataBytes+=o.sigBytes},_process:function(o){var l,h=this._data,R=h.words,w=h.sigBytes,d=this.blockSize,D=w/(4*d),S=(D=o?T.ceil(D):T.max((0|D)-this._minBufferSize,0))*d;if(o=T.min(4*S,w),S){for(var y=0;y<S;y+=d)this._doProcessBlock(R,y);l=R.splice(0,S),h.sigBytes-=o}return new f.init(l,o)},clone:function(){var o=m.clone.call(this);return o._data=this._data.clone(),o},_minBufferSize:0}),a=(A.Hasher=i.extend({cfg:m.extend(),init:function(o){this.cfg=this.cfg.extend(o),this.reset()},reset:function(){i.reset.call(this),this._doReset()},update:function(o){return this._append(o),this._process(),this},finalize:function(o){return o&&this._append(o),this._doFinalize()},blockSize:16,_createHelper:function(o){return function(l,h){return new o.init(h).finalize(l)}},_createHmacHelper:function(o){return function(l,h){return new a.HMAC.init(o,h).finalize(l)}}}),x.algo={});return x})(Math)}).call(this,C(11))},function(te,j,C){C.d(j,"a",function(){return J}),C=typeof Buffer=="function";let O=typeof TextDecoder=="function"?new TextDecoder:void 0,T=typeof TextEncoder=="function"?new TextEncoder:void 0,_=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),E=(L=>{let q={};return L.forEach((B,Y)=>q[B]=Y),q})(_),g=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,x=String.fromCharCode.bind(String),A=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):L=>new Uint8Array(Array.prototype.slice.call(L,0)),m=L=>L.replace(/=/g,"").replace(/[+\/]/g,q=>q=="+"?"-":"_"),f=L=>L.replace(/[^A-Za-z0-9\+\/]/g,"");j=L=>{let q,B,Y,K,ee="";var oe=L.length%3;for(let ae=0;ae<L.length;){if(255<(B=L.charCodeAt(ae++))||255<(Y=L.charCodeAt(ae++))||255<(K=L.charCodeAt(ae++)))throw new TypeError("invalid character found");q=B<<16|Y<<8|K,ee+=_[q>>18&63]+_[q>>12&63]+_[q>>6&63]+_[63&q]}return oe?ee.slice(0,oe-3)+"===".substring(oe):ee};let c=typeof btoa=="function"?L=>btoa(L):C?L=>Buffer.from(L,"binary").toString("base64"):j,u=C?L=>Buffer.from(L).toString("base64"):L=>{var q=[];for(let B=0,Y=L.length;B<Y;B+=4096)q.push(x.apply(null,L.subarray(B,B+4096)));return c(q.join(""))},s=(L,q=!1)=>q?m(u(L)):u(L),r=L=>{var q;return L.length<2?(q=L.charCodeAt(0))<128?L:q<2048?x(192|q>>>6)+x(128|63&q):x(224|q>>>12&15)+x(128|q>>>6&63)+x(128|63&q):(q=65536+1024*(L.charCodeAt(0)-55296)+(L.charCodeAt(1)-56320),x(240|q>>>18&7)+x(128|q>>>12&63)+x(128|q>>>6&63)+x(128|63&q))},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,a=L=>L.replace(i,r),o=C?L=>Buffer.from(L,"utf8").toString("base64"):T?L=>u(T.encode(L)):L=>c(a(L)),l=(L,q=!1)=>q?m(o(L)):o(L);var h=L=>l(L,!0);let R=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=L=>{switch(L.length){case 4:var q=((7&L.charCodeAt(0))<<18|(63&L.charCodeAt(1))<<12|(63&L.charCodeAt(2))<<6|63&L.charCodeAt(3))-65536;return x(55296+(q>>>10))+x(56320+(1023&q));case 3:return x((15&L.charCodeAt(0))<<12|(63&L.charCodeAt(1))<<6|63&L.charCodeAt(2));default:return x((31&L.charCodeAt(0))<<6|63&L.charCodeAt(1))}},d=L=>L.replace(R,w);var D=L=>{if(L=L.replace(/\s+/g,""),!g.test(L))throw new TypeError("malformed base64.");L+="==".slice(2-(3&L.length));let q,B,Y,K="";for(let ee=0;ee<L.length;)q=E[L.charAt(ee++)]<<18|E[L.charAt(ee++)]<<12|(B=E[L.charAt(ee++)])<<6|(Y=E[L.charAt(ee++)]),K+=B===64?x(q>>16&255):Y===64?x(q>>16&255,q>>8&255):x(q>>16&255,q>>8&255,255&q);return K};let S=typeof atob=="function"?L=>atob(f(L)):C?L=>Buffer.from(L,"base64").toString("binary"):D,y=C?L=>A(Buffer.from(L,"base64")):L=>A(S(L).split("").map(q=>q.charCodeAt(0))),k=L=>y(U(L)),b=C?L=>Buffer.from(L,"base64").toString("utf8"):O?L=>O.decode(y(L)):L=>d(S(L)),U=L=>f(L.replace(/[-_]/g,q=>q=="-"?"+":"/")),z=L=>b(U(L));function P(){var L=(q,B)=>Object.defineProperty(String.prototype,q,Q(B));L("fromBase64",function(){return z(this)}),L("toBase64",function(q){return l(this,q)}),L("toBase64URI",function(){return l(this,!0)}),L("toBase64URL",function(){return l(this,!0)}),L("toUint8Array",function(){return k(this)})}function H(){var L=(q,B)=>Object.defineProperty(Uint8Array.prototype,q,Q(B));L("toBase64",function(q){return s(this,q)}),L("toBase64URI",function(){return s(this,!0)}),L("toBase64URL",function(){return s(this,!0)})}let Q=L=>({value:L,enumerable:!1,writable:!0,configurable:!0}),J={version:"3.7.7",VERSION:"3.7.7",atob:S,atobPolyfill:D,btoa:c,btoaPolyfill:j,fromBase64:z,toBase64:l,encode:l,encodeURI:h,encodeURL:h,utob:a,btou:d,decode:z,isValid:L=>typeof L=="string"&&(L=L.replace(/\s+/g,"").replace(/={0,2}$/,""),!/[^\s0-9a-zA-Z\+/]/.test(L)||!/[^\s0-9a-zA-Z\-_]/.test(L)),fromUint8Array:s,toUint8Array:k,extendString:P,extendUint8Array:H,extendBuiltins:()=>{P(),H()}}},function(te,j,C){te.exports=(O=>{for(var T=Math,_=O,E=(x=_.lib).WordArray,g=x.Hasher,x=_.algo,A=[],m=0;m<64;m++)A[m]=4294967296*T.abs(T.sin(m+1))|0;function f(r,i,a,o,l,h,R){return((r=r+(i&a|~i&o)+l+R)<<h|r>>>32-h)+i}function c(r,i,a,o,l,h,R){return((r=r+(i&o|a&~o)+l+R)<<h|r>>>32-h)+i}function u(r,i,a,o,l,h,R){return((r=r+(i^a^o)+l+R)<<h|r>>>32-h)+i}function s(r,i,a,o,l,h,R){return((r=r+(a^(i|~o))+l+R)<<h|r>>>32-h)+i}return x=x.MD5=g.extend({_doReset:function(){this._hash=new E.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(r,i){for(var a=0;a<16;a++){var o=i+a,l=r[o];r[o]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var h=this._hash.words,R=r[i+0],w=r[i+1],d=r[i+2],D=r[i+3],S=r[i+4],y=r[i+5],k=r[i+6],b=r[i+7],U=r[i+8],z=r[i+9],P=r[i+10],H=r[i+11],Q=r[i+12],J=r[i+13],L=r[i+14],q=r[i+15],B=f(h[0],ee=h[1],K=h[2],Y=h[3],R,7,A[0]),Y=f(Y,B,ee,K,w,12,A[1]),K=f(K,Y,B,ee,d,17,A[2]),ee=f(ee,K,Y,B,D,22,A[3]);B=f(B,ee,K,Y,S,7,A[4]),Y=f(Y,B,ee,K,y,12,A[5]),K=f(K,Y,B,ee,k,17,A[6]),ee=f(ee,K,Y,B,b,22,A[7]),B=f(B,ee,K,Y,U,7,A[8]),Y=f(Y,B,ee,K,z,12,A[9]),K=f(K,Y,B,ee,P,17,A[10]),ee=f(ee,K,Y,B,H,22,A[11]),B=f(B,ee,K,Y,Q,7,A[12]),Y=f(Y,B,ee,K,J,12,A[13]),K=f(K,Y,B,ee,L,17,A[14]),B=c(B,ee=f(ee,K,Y,B,q,22,A[15]),K,Y,w,5,A[16]),Y=c(Y,B,ee,K,k,9,A[17]),K=c(K,Y,B,ee,H,14,A[18]),ee=c(ee,K,Y,B,R,20,A[19]),B=c(B,ee,K,Y,y,5,A[20]),Y=c(Y,B,ee,K,P,9,A[21]),K=c(K,Y,B,ee,q,14,A[22]),ee=c(ee,K,Y,B,S,20,A[23]),B=c(B,ee,K,Y,z,5,A[24]),Y=c(Y,B,ee,K,L,9,A[25]),K=c(K,Y,B,ee,D,14,A[26]),ee=c(ee,K,Y,B,U,20,A[27]),B=c(B,ee,K,Y,J,5,A[28]),Y=c(Y,B,ee,K,d,9,A[29]),K=c(K,Y,B,ee,b,14,A[30]),B=u(B,ee=c(ee,K,Y,B,Q,20,A[31]),K,Y,y,4,A[32]),Y=u(Y,B,ee,K,U,11,A[33]),K=u(K,Y,B,ee,H,16,A[34]),ee=u(ee,K,Y,B,L,23,A[35]),B=u(B,ee,K,Y,w,4,A[36]),Y=u(Y,B,ee,K,S,11,A[37]),K=u(K,Y,B,ee,b,16,A[38]),ee=u(ee,K,Y,B,P,23,A[39]),B=u(B,ee,K,Y,J,4,A[40]),Y=u(Y,B,ee,K,R,11,A[41]),K=u(K,Y,B,ee,D,16,A[42]),ee=u(ee,K,Y,B,k,23,A[43]),B=u(B,ee,K,Y,z,4,A[44]),Y=u(Y,B,ee,K,Q,11,A[45]),K=u(K,Y,B,ee,q,16,A[46]),B=s(B,ee=u(ee,K,Y,B,d,23,A[47]),K,Y,R,6,A[48]),Y=s(Y,B,ee,K,b,10,A[49]),K=s(K,Y,B,ee,L,15,A[50]),ee=s(ee,K,Y,B,y,21,A[51]),B=s(B,ee,K,Y,Q,6,A[52]),Y=s(Y,B,ee,K,D,10,A[53]),K=s(K,Y,B,ee,P,15,A[54]),ee=s(ee,K,Y,B,w,21,A[55]),B=s(B,ee,K,Y,U,6,A[56]),Y=s(Y,B,ee,K,q,10,A[57]),K=s(K,Y,B,ee,k,15,A[58]),ee=s(ee,K,Y,B,J,21,A[59]),B=s(B,ee,K,Y,S,6,A[60]),Y=s(Y,B,ee,K,H,10,A[61]),K=s(K,Y,B,ee,d,15,A[62]),ee=s(ee,K,Y,B,z,21,A[63]),h[0]=h[0]+B|0,h[1]=h[1]+ee|0,h[2]=h[2]+K|0,h[3]=h[3]+Y|0},_doFinalize:function(){for(var r=this._data,i=r.words,a=8*this._nDataBytes,o=8*r.sigBytes,l=(i[o>>>5]|=128<<24-o%32,T.floor(a/4294967296)),h=(l=(i[15+(64+o>>>9<<4)]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),i[14+(64+o>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r.sigBytes=4*(i.length+1),this._process(),this._hash)).words,R=0;R<4;R++){var w=h[R];h[R]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8)}return l},clone:function(){var r=g.clone.call(this);return r._hash=this._hash.clone(),r}}),_.MD5=g._createHelper(x),_.HmacMD5=g._createHmacHelper(x),O.MD5})(C(5))},function(te,j,C){C.d(j,"a",function(){return T}),C.d(j,"b",function(){return _});var O,T={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},_=(O=1,function(){return O++})},function(te,j,C){(function(O){var T=j;function _(g,x,A){for(var m=Object.keys(x),f=0;f<m.length;++f)g[m[f]]!==void 0&&A||(g[m[f]]=x[m[f]]);return g}function E(g){function x(A,m){if(!(this instanceof x))return new x(A,m);Object.defineProperty(this,"message",{get:function(){return A}}),Error.captureStackTrace?Error.captureStackTrace(this,x):Object.defineProperty(this,"stack",{value:new Error().stack||""}),m&&_(this,m)}return(x.prototype=Object.create(Error.prototype)).constructor=x,Object.defineProperty(x.prototype,"name",{get:function(){return g}}),x.prototype.toString=function(){return this.name+": "+this.message},x}T.asPromise=C(101),T.base64=C(102),T.EventEmitter=C(103),T.float=C(104),T.inquire=C(105),T.utf8=C(106),T.pool=C(107),T.LongBits=C(108),T.isNode=!!(O!==void 0&&O&&O.process&&O.process.versions&&O.process.versions.node),T.global=T.isNode&&O||typeof window<"u"&&window||typeof self<"u"&&self||this,T.emptyArray=Object.freeze?Object.freeze([]):[],T.emptyObject=Object.freeze?Object.freeze({}):{},T.isInteger=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g},T.isString=function(g){return typeof g=="string"||g instanceof String},T.isObject=function(g){return g&&typeof g=="object"},T.isset=T.isSet=function(g,x){var A=g[x];return!(A==null||!g.hasOwnProperty(x))&&(typeof A!="object"||0<(Array.isArray(A)?A:Object.keys(A)).length)},T.Buffer=(()=>{try{var g=T.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}})(),T._Buffer_from=null,T._Buffer_allocUnsafe=null,T.newBuffer=function(g){return typeof g=="number"?T.Buffer?T._Buffer_allocUnsafe(g):new T.Array(g):T.Buffer?T._Buffer_from(g):typeof Uint8Array>"u"?g:new Uint8Array(g)},T.Array=typeof Uint8Array<"u"?Uint8Array:Array,T.Long=T.global.dcodeIO&&T.global.dcodeIO.Long||T.global.Long||T.inquire("long"),T.key2Re=/^true|false|0|1$/,T.key32Re=/^-?(?:0|[1-9][0-9]*)$/,T.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,T.longToHash=function(g){return g?T.LongBits.from(g).toHash():T.LongBits.zeroHash},T.longFromHash=function(g,x){return g=T.LongBits.fromHash(g),T.Long?T.Long.fromBits(g.lo,g.hi,x):g.toNumber(!!x)},T.merge=_,T.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},T.newError=E,T.ProtocolError=E("ProtocolError"),T.oneOfGetter=function(g){for(var x={},A=0;A<g.length;++A)x[g[A]]=1;return function(){for(var m=Object.keys(this),f=m.length-1;-1<f;--f)if(x[m[f]]===1&&this[m[f]]!=null)return m[f]}},T.oneOfSetter=function(g){return function(x){for(var A=0;A<g.length;++A)g[A]!==x&&delete this[g[A]]}},T.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},T._configure=function(){var g=T.Buffer;g?(T._Buffer_from=g.from!==Uint8Array.from&&g.from||function(x,A){return new g(x,A)},T._Buffer_allocUnsafe=g.allocUnsafe||function(x){return new g(x)}):T._Buffer_from=T._Buffer_allocUnsafe=null}}).call(this,C(11))},function(te,j,C){te.exports=C(100)},function(te,j){var C=function(){return this}();try{C=C||new Function("return this")()}catch{typeof window=="object"&&(C=window)}te.exports=C},function(te,j,C){var O=C(23),T=(C.d(j,"b",function(){return O.a}),C(20));C.d(j,"a",function(){return T.ZIM}),C(46),C(47),C(48),C(49),C(50),C(51),C(52),C(53)},function(te,j,C){C.d(j,"a",function(){return u});var O=C(2),T=C(1),_=C(0),E=function(){return(E=Object.assign||function(r){for(var i,a=1,o=arguments.length;a<o;a++)for(var l in i=arguments[a])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r}).apply(this,arguments)},g=function(r,i){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var o,l,h=a.call(r),R=[];try{for(;(i===void 0||0<i--)&&!(o=h.next()).done;)R.push(o.value)}catch(w){l={error:w}}finally{try{o&&!o.done&&(a=h.return)&&a.call(h)}finally{if(l)throw l.error}}return R},x=function(r,i,a){if(arguments.length===2)for(var o,l=0,h=i.length;l<h;l++)!o&&l in i||((o=o||Array.prototype.slice.call(i,0,l))[l]=i[l]);return r.concat(o||Array.prototype.slice.call(i))},A={11:"jpeg",12:"txt",13:"mp3",14:"mp4"},m=_.v.Conversation,f=6000121,c=6000212,u=(s.prototype.destroy=function(){this.dbMgr=null,this.cnMgr=null,this.bus=null,this.lg=null,this.econf=null},s.prototype.sendCommand=function(r,i,a){var o,l,h,R,w=this;return this.dbMgr&&this.cnMgr&&this.econf?(h=new Date,R=(o=h.getTime())-this.lastSendTime,l={time:h,delay:R,convID:this.convID,onattach:void 0,message:E({},r)},this.initSendingMessage(r,i),r.orderKey=(this.dbConv.msgSeq||0)*_.h.MESSAGE_SEQ_MULTIPLIER+1,r.receiptStatus=_.c.MessageReceiptStatus.None,r.isMentionAll=!1,r.mentionedUserIDs=[],r.type==_.c.MessageType.Command&&R<this.econf.cloudSetting.qps.send_msg?(r.sentStatus=_.c.MessageSentStatus.Failed,l.error=Object(T.y)(6000004),this.lg.w(m,_.u.SendMsg,l),Promise.reject(l.error)):(a&&typeof a.onMessageAttached=="function"&&setTimeout(function(){var d=r.localMessageID;try{a.onMessageAttached(r)}catch(D){throw D}finally{l.onattach=d}},0),this.lastSendTime=o,r.type==_.c.MessageType.Barrage&&R<this.econf.cloudSetting.qps.send_barrage_msg?new Promise(function(d){setTimeout(function(){r.sentStatus=_.c.MessageSentStatus.Success,r.timestamp=w.st.getRealClientTimestamp(o),w.emitMsgSentStatus(r,""),w.lg.i(m,_.u.SendMsg,l),d({message:r})},80*Math.random()+50)}):(R={msg_type:r.type,priority_type:i.priority,msg:typeof(h=r.message)=="string"?Object(T.j)(h):h,conv_id:this.convID,payload:Object(T.j)(r.extendedData)},i=E(E({},this.getAssociatedReqBody()),{conv_id:this.convID,command_msg_info:R}),this.cnMgr.send(_.d["msg_cmd_"+this.convType],i).then(function(d){var D;return d.code?(r.sentStatus=_.c.MessageSentStatus.Failed,r.timestamp=w.st.getRealClientTimestamp(),w.emitMsgSentStatus(r,""),l.error=w.withSendMessageErrorCode(d.code,d.message),w.lg.w(m,_.u.SendMsg,l),Promise.reject(l.error)):(D=d.msg_id,d=d.command_svr_info,r.sentStatus=_.c.MessageSentStatus.Success,r.messageID=d?d.msg_id:D,r.timestamp=d?d.msg_time:w.st.getRealClientTimestamp(),w.emitMsgSentStatus(r,""),w.lg.i(m,_.u.SendMsg,l),{message:r})})))):Promise.reject(Object(T.y)(f,_.u.SendMsg))},s.prototype.sendMessage=function(r,i,a,o){var l,h,R,w,d,D,S=this;return this.dbMgr&&this.cnMgr&&this.econf?(l=this.copyMsgObj(r),h=!!i.isRetrySend,w=(R=(D=new Date).getTime())-this.lastSendTime,d={time:D,seq:0,delay:w,convID:this.convID,onattach:h,message:l},D=this.initSendingMessage(l,i),Object.assign(r,l),D&&h||!(w<this.econf.cloudSetting.qps.send_msg)?(D&&h||(this.lastSendTime=R),this.emitSendingMessage(r,l,d,o,h?void 0:a),new Promise(function(y,k){S.saveLocalMessage(r,l,_.c.MessageSentStatus.Sending),S.innerSendText(r,l,i,!1,d,o).then(y).catch(function(b){S.isRetrySend(b)?S.addTextSendTask(r,l,i,d,y,k,o):k(S.handleSendMsgFail(r,l,d,b))})})):(l.sentStatus=_.c.MessageSentStatus.Failed,r.sentStatus=l.sentStatus,d.error=Object(T.y)(6000004),delete d.message,d.msgType=l.type,this.lg.w(m,_.u.SendMsg,d),Promise.reject(d.error))):Promise.reject(Object(T.y)(f,_.u.SendMsg))},s.prototype.sendMediaMessage=function(r,i,a,o){var l,h,R,w,d,D,S,y=this;return this.dbMgr&&this.cnMgr&&this.econf?(l=this.copyMsgObj(r),R=!!i.isRetrySend,h={time:new Date,seq:0,convID:this.convID,onattach:R,message:l},l.type>=_.c.MessageType.Image&&l.type<=_.c.MessageType.Video&&(l.isServerMessage||l.sentStatus!=_.c.MessageSentStatus.Success)&&(l.fileUID="",r.fileUID=""),this.initSendingMessage(l,i),Object.assign(r,l),this.emitSendingMessage(r,l,h,o,R?void 0:a),l.type==_.c.MessageType.Combine&&(l.aesKey=l.aesKey||O.a.getInstance().crypto.generateNonce(),R=l.conversationType,w=l.localMessageID,d=l.conversationID,D=l.aesKey,l.combineID="0-"+R+"_"+w+"_"+D+"-"+d,r.aesKey=l.aesKey,r.combineID=l.combineID),l.fileDownloadUrl||l.fileUID?new Promise(function(k,b){y.saveLocalMessage(r,l,_.c.MessageSentStatus.Sending),y.innerSendText(r,l,i,!1,h,o).then(k).catch(function(U){y.isRetrySend(U)?y.addTextSendTask(r,l,i,h,k,b,o):b(y.handleSendMsgFail(r,l,h,U))})}):(S=l.type==_.c.MessageType.Combine?this.getCombineMessageFile(l):l.fileLocalPath,this.dbMgr.getFileInfo(S).then(function(k){return l.fileUID=k.md5,l.fileSize=k.size||1,(!l.fileName||l.fileName.indexOf(".")<1)&&(l.fileName=k.name),y.saveLocalMessage(r,l,_.c.MessageSentStatus.Sending),new Promise(function(b,U){y.innerSendMedia(r,l,i,a,S,h,o).then(b).catch(function(z){var P;y.isRetrySend(z)?(P={convID:y.convID,convType:y.convType,retryTime:Date.now(),type:_.c.MessageType.Image,oMessage:r,sMessage:l,config:i,notification:a,file:S,originMessage:o,log:h,resolve:b,reject:U},y.econf.msgRetrySendTasks.push(P)):U(y.handleSendMsgFail(r,l,h,z))})})}))):Promise.reject(Object(T.y)(f,_.u.SendMsg))},s.prototype.sendMultipleMessage=function(r,i,a,o){var l,h,R,w,d,D,S=this;return this.dbMgr&&this.cnMgr&&this.econf?(l=this.copyMsgObj(r),D=!!i.isRetrySend,h={time:new Date,seq:0,convID:this.convID,onattach:D,message:l},R=this.initSendingMessage(l,i),Object.assign(r,l),this.emitSendingMessage(r,l,h,o,D?void 0:a),w={},d=new Map,l.messageInfoList.forEach(function(y,k){w[y.type]=(w[y.type]||0)+1,y.type>=_.c.MessageType.Image&&y.type<=_.c.MessageType.Video&&(y.fileLocalPath?(d.set(k,y),y.fileName||typeof y.fileLocalPath!="object"||(y.fileName=y.fileLocalPath.name)):R||(y.fileUID=""))}),D="",(20<l.messageInfoList.length?D="messageInfoList length exceeds 20.":(1<w[_.c.MessageType.Custom]||1<w[_.c.MessageType.File]||1<w[_.c.MessageType.Audio]||1<w[_.c.MessageType.Video]||10<w[_.c.MessageType.Image])&&(D="Item exceeds its limit: "+JSON.stringify(w)))?(l.sentStatus=_.c.MessageSentStatus.Failed,r.sentStatus=l.sentStatus,this.saveLocalMessage(r,l,_.c.MessageSentStatus.Failed),h.error=Object(T.y)(6000001,D),this.lg.w(m,_.u.SendMsg,h),Promise.reject(h.error)):R||!d.size?new Promise(function(y,k){S.saveLocalMessage(r,l,_.c.MessageSentStatus.Sending),S.innerSendText(r,l,i,!1,h,o).then(y).catch(function(b){S.isRetrySend(b)?S.addTextSendTask(r,l,i,h,y,k,o):k(S.handleSendMsgFail(r,l,h,b))})}):this.getMultipleMsgFileInfos(d,h).then(function(y){var k=y.file_list,b=y.totalUploadData;return S.saveLocalMessage(r,l,_.c.MessageSentStatus.Sending),new Promise(function(U,z){var P={file_list:Object.values(k)};S.uploadMultipleMsg(l,a,P,d,b).then(function(){return S.innerSendText(r,l,i,!0,h,o).then(U)}).catch(function(H){var Q;S.isRetrySend(H)?(Q={convID:S.convID,convType:S.convType,retryTime:Date.now(),type:_.c.MessageType.Multiple,oMessage:r,sMessage:l,config:i,notification:a,reqBody:P,uploadLiteMap:d,totalUploadData:b,originMessage:o,log:h,resolve:U,reject:z},S.econf.msgRetrySendTasks.push(Q)):z(S.handleSendMsgFail(r,l,h,H))})})})):Promise.reject(Object(T.y)(f,_.u.SendMsg))},s.prototype.retrySendMsg=function(r,i,a){var o,l,h,R,w,d,D,S,y,k=this,b=r.oMessage,U=b.localMessageID;this.econf.msgRetrySendTasks.some(function(z){return z.oMessage.localMessageID==U})&&(a?r.reject(this.handleSendMsgFail(b,r.sMessage,r.log,a)):(o=this.convType==_.c.ConversationType.Room?this.econf.cloudSetting.retry.room_msg_max_degree:this.econf.cloudSetting.retry.msg_max_degree,r.log.retryCount||(r.log.retryCount=1),l=function(z){k.delRetrySendTask(U),r.resolve(z)},h=function(z){k.isRetrySend(z)&&r.log.retryCount<o?(r.log.retryCount++,k.retrySendMsg(r,!1)):(k.delRetrySendTask(U),r.reject(k.handleSendMsgFail(b,r.sMessage,r.log,z)))},r.type==_.c.MessageType.Text?(R=r.sMessage,w=r.config,d=r.originMessage,i?setTimeout(function(){k.innerSendText(b,R,w,!1,r.log,d).then(l).catch(h)},this.econf.cloudSetting.retry.msg_itvl):this.innerSendText(b,R,w,!1,r.log,d).then(l).catch(h)):r.type==_.c.MessageType.Image?(a=r.sMessage,this.innerSendMedia(b,a,r.config,r.notification,r.file,r.log,r.originMessage).then(l).catch(h)):r.type==_.c.MessageType.Multiple&&(D=r.sMessage,S=r.config,y=r.originMessage,this.uploadMultipleMsg(D,r.notification,r.reqBody,r.uploadLiteMap,r.totalUploadData).then(function(){return k.innerSendText(b,D,S,!0,r.log,y).then(l)}).catch(h))))},s.prototype.editMessage=function(r,i){var a,o,l=this;return this.dbMgr&&this.cnMgr&&this.econf?(a=r.messageSeq,o={time:new Date,type:r.type,seq:a},this.dbMgr.getMessageListBySeqs(this.convID,this.convType,[a]).then(function(h){var R=6000001,w=h.get(a);if(!w)return Promise.reject(Object(T.y)(R,"The message no found in DB."));if(w.type!=r.type)return Promise.reject(Object(T.y)(R,"Message type can not changed."));h=Promise.resolve(!1);var d={conv_id:l.convID,conv_msg_seq:w.messageSeq,msg_type:w.type,msg_id:w.messageID},D=0,S=((w.extendedData||"")!=(r.extendedData||"")&&(D|=2,d.payload=Object(T.j)(r.extendedData)),Array.isArray(w.mentionedUserIDs)?w.mentionedUserIDs:[]),y=Array.isArray(r.mentionedUserIDs)?r.mentionedUserIDs:[],k=(S=(o.oAtList=S,o.sAtList=y,(S.length!=y.length||S.some(function(z){return y.indexOf(z)==-1})||y.length)&&(D|=4,d.at_list=y),!!w.isMentionAll),!!r.isMentionAll);if((o.oAtAll=S)==(o.sAtAll=k)&&!k||(D|=8,d.is_at_all=k),w.type==_.c.MessageType.Custom&&(r.searchedContent=w.searchedContent,(w.subType||0)!=(r.subType||0))&&(D|=16,d.sub_msg_type=r.subType),w.type!=_.c.MessageType.Text&&w.type!=_.c.MessageType.Custom||w.message==r.message){if(w.type==_.c.MessageType.Multiple){D|=1;var b={},U=new Map;if(S=(r.messageInfoList.forEach(function(z,P){b[z.type]=(b[z.type]||0)+1,z.type>=_.c.MessageType.Image&&z.type<=_.c.MessageType.Video&&z.fileLocalPath&&(U.set(P,z),z.fileName||typeof z.fileLocalPath!="object"||(z.fileName=z.fileLocalPath.name))}),""),20<r.messageInfoList.length?S="messageInfoList length exceeds 20.":(1<b[_.c.MessageType.Custom]||1<b[_.c.MessageType.File]||1<b[_.c.MessageType.Audio]||1<b[_.c.MessageType.Video]||10<b[_.c.MessageType.Image])&&(S="Item exceeds its limit: "+JSON.stringify(b)))return Promise.reject(Object(T.y)(R,S));U.size&&(h=l.getMultipleMsgFileInfos(U,o).then(function(z){var P=z.file_list,H=(z=z.totalUploadData,0);return U.forEach(function(Q,J){var L,q,B=r.messageInfoList.find(function(Y,K){return Y.fileUID==Q.fileUID&&J!=K&&!!Y.fileDownloadUrl});B&&(H++,L=Q.fileName,q=Q.fileLocalPath,Object.assign(Q,B),Q.fileName=L,Q.fileLocalPath=q)}),!(H<U.size)||l.uploadMultipleMsg(r,i,{file_list:Object.values(P)},U,z)}))}}else D|=1,d.msg=Object(T.j)(r.message);return(d.edit_type=D)?(i&&typeof i.onMessageAttached=="function"&&setTimeout(function(){try{i.onMessageAttached(r)}catch{}},0),h.then(function(z){var P,H,Q;return r.type==_.c.MessageType.Multiple&&(P=r.messageInfoList,H=w.messageInfoList,o.oInfos=H,Q=[],(o.sInfos=P).forEach(function(J,L){return!(J.type!=_.c.MessageType.Text&&J.type!=_.c.MessageType.Custom||H.some(function(q){return J.type==q.type&&J.message==q.message}))||J.type>=_.c.MessageType.Image&&J.type<=_.c.MessageType.Video&&!H.some(function(q){return q=q,(B=J).fileUID?B.fileUID==q.fileUID:B.type==_.c.MessageType.Image?B.fileDownloadUrl==q.fileDownloadUrl||B.thumbnailDownloadUrl==q.thumbnailDownloadUrl||B.largeImageDownloadUrl==q.largeImageDownloadUrl:B.fileDownloadUrl==q.fileDownloadUrl;var B})?Q.push(L):void 0}),d.audit_list=Q,d.msg=l.encodeMsgBody(r,!1,!1)),l.cnMgr.send(_.d["msg_edit_"+l.convType],d).then(function(J){return J.code?(o.error=Object(T.y)(6000205,J.message,J.code),l.lg.w(m,_.u.EditMsg,o),Promise.reject(o.error)):(l.updateMsgStateSeq(J.state_msg_seq),l.clearMsgObjFile(r),z&&l.pb.decodeMsgBody(l.econf,r,J.msg_rsp),r.editSeq=J.edit_msg_seq,r.editedTime=J.edit_time,r.editorUserID=l.econf.user.userID,l.dbConv.lastMessage&&l.dbConv.lastMessage.messageID==r.messageID&&(l.dbConv.lastMessage=r,l.emitConvChanged(_.c.ConversationEvent.Updated),l.dbMgr.addConversationList([l.dbConv])),l.dbMgr.getReplyMessageListBySeqs(l.convID,l.convType,[r.messageSeq],2).then(function(L){L.length&&(L.forEach(function(q){return l.pb.handleReplyMsgInfo(q,r,!0)}),l.bus.emit(_.m.MsgRepliedInfo,{messageList:L})),l.updateMsgCacheList(L.concat(r))}),l.lg.i(m,_.u.EditMsg,o),{message:r})})})):Promise.reject(Object(T.y)(R,"No changed fields."))})):Promise.reject(Object(T.y)(f,_.u.EditMsg))},s.prototype.deleteMessages=function(r,i){var a=this,o={time:new Date,convID:this.convID,config:i};return i&&i.isAlsoDeleteServerMessage&&(i=r.filter(function(l){return!l.isUserInserted&&!l.isBroadcastMessage&&l.sentStatus==_.c.MessageSentStatus.Success})).length!=0?(i=this.convType==_.c.ConversationType.Peer?{conv_id:this.convID,conv_type:this.convType,msg_ids:i.map(function(l){return l.messageID})}:{conv_id:this.convID,conv_msg_seq:i.map(function(l){return l.messageSeq})},this.cnMgr.send(_.d["msg_del_"+this.convType],i).then(function(l){return l.code?(o.error=Object(T.y)(6000602,l.message,l.code),a.lg.w(m,_.u.DelMsg,o),Promise.reject(o.error)):a.deleteLocalMessages(r,o)})):this.deleteLocalMessages(r,o)},s.prototype.deleteAllMessage=function(r){var i=this,a={time:new Date,convID:this.convID,config:r};return r&&r.isAlsoDeleteServerMessage?(r={conv_id:this.convID,conv_type:this.convType},this.cnMgr.send(_.d["msg_del_all_"+this.convType],r).then(function(o){return o.code?(a.error=Object(T.y)(6000602,o.message,o.code),i.lg.w(m,_.u.DelAllMsg,a),Promise.reject(a.error)):i.deleteLocalAllMessage(a)})):this.deleteLocalAllMessage(a)},s.prototype.queryHistoryMessage=function(r){var i=this;return this.dbMgr&&this.cnMgr&&this.econf?new Promise(function(a,o){function l(Q){if(!i.dbMgr||!i.cnMgr||!i.econf)return o(Object(T.y)(f,_.u.QueryHistoryMsg));(L=Q.filter(function(re){return re.sentStatus==_.c.MessageSentStatus.Sending})).length&&i.queryMessageStatus(L);var J=[],L=i.convType==_.c.ConversationType.Peer,q=i.dbConv.maxSendReceiptMsgSeq||0,B=i.dbConv.maxRecvReceiptMsgSeq||0,Y=L?i.econf.mailHBConfig.history_c2c_msg_seq:i.dbConv.historyMsgSeq,K=L?i.econf.msgExtraMap.get(i.getMsgExtraKey(0)):void 0,ee=i.convType==_.c.ConversationType.Room?[]:Array.from(i.econf.msgExtraMap.values()).filter(function(re){return 0<re.rootRepliedCount&&re.conversationID==i.convID&&re.conversationType==i.convType}),oe=(Q=Q.map(function(re){return(i.mergeMessageExtra(re,ee,q,B,Y,K)||re.type==_.c.MessageType.Tips&&re.event==0)&&J.push(re),i.pb.handleDBMessage(i.econf,re)}),i.filterReceiptMemberMsg(Q)),ae=(w?Q.sort(function(re,ie){return ie.orderKey-re.orderKey}):Q.sort(function(re,ie){return re.orderKey-ie.orderKey}),!h&&w&&(X=Q[0],ae=i.dbConv.lastMessage,X&&(H.dbLastMsg=X.messageSeq+","+X.messageID),ae&&(H.convLastMsg=ae.messageSeq+","+ae.messageID),ae&&!X&&(J.push(JSON.parse(JSON.stringify(ae))),Q.unshift(X=ae)),X)&&(!ae||ae.orderKey<X.orderKey)&&(i.updateConvOrderKey(X.timestamp),i.dbConv.lastMessage=X,i.emitConvChanged(_.c.ConversationEvent.Updated,"checkLastMsg")),J.length&&i.updateMsgCacheList(J),0),X=(ae=h?Q.findIndex(function(re){return h===re.messageID})+1:ae)+R;Q=Q.slice(ae,X),w&&Q.sort(function(re,ie){return re.orderKey-ie.orderKey}),H.count=Q.length,H.historySeq=Y,L&&(H.sendSeq=q,H.recvSeq=B),z.seqs=[d,D,S,ae,R].join(),H.statusMap=z,i.lg.i(m,_.u.QueryHistoryMsg,H),a({list:Q,receiptMemberMsgs:oe})}var h=r.nextMessage?r.nextMessage.messageID:"",R=r.count,w=r.reverse,d=i.dbConv.msgSeq||0,D=i.dbConv.maxSeq||0,S=r.nextMessage?r.nextMessage.messageSeq:0,y=!S&&w,k=!1,b=0,U=0,z=(w?(U=S?S-1:d,b=Math.max(i.dbConv.deletedMsgMaxSeq||0,U-R)):(b=Math.max(i.dbConv.deletedMsgMaxSeq||0,S),U=Math.min(b+R,d)),{reverse:w,patch:0,seqs:""}),P=String(++i.st.queryMsgSeq),H={seq:P,time:new Date,convID:i.convID,smin:b,smax:U,lmin:0,lmax:0,dbCount:0,count:0};i.dbMgr.getMessageList(i.dbConv,r,P).then(function(Q){Q.length<=0&&(D=d=0);var J=i.econf.user.deleteAllMsgTime||0,L=i.dbConv.deletedMsgMaxSeq||0,q=i.dbConv.deletedMsgSeqs||[],B=Q.filter(function(Oe){return Oe.messageSeq&&Oe.sentStatus==_.c.MessageSentStatus.Success}).map(function(Oe){return Oe.messageSeq}),Y=(q.length&&B.push.apply(B,x([],g(q),!1)),B.sort(function(Oe,Ae){return Oe-Ae}),B[0]||0),K=B[B.length-1]||0,ee=(H.dbCount=Q.length,H.lmin=Y,(H.lmax=K)-Y<B.length&&Y<=b+1&&U<=K);if(!y&&ee)return l(Q);function oe(Oe){if(!i.dbMgr||!i.cnMgr||!i.econf)return o(Object(T.y)(f,_.u.QueryHistoryMsg));Oe.list.forEach(function(Ue){var Ne=Ue.msg_svr_info.conv_msg_seq,mt=Ue.msg_svr_info.msg_time;ke.push(Ne),ge.has(Ne)||ie&&!(q.indexOf(Ne)==-1&&L<Ne&&J<mt)||(X<Ne&&(X=Ne),(!ae||Ne<ae)&&(ae=Ne),ge.set(Ne,i.transform2Message(Ue,!0)))});var Ae,Pe=y?k:w;Oe.nextSeq&&(!Pe&&X<U||Pe&&b<ae)?i.fetchSvrMessage(Oe.nextSeq,++re,_e,Pe).then(oe):(z.patch=ge.size,(Ae=i.dbConv.state)!=_.j.Delete&&ge.size&&(i.dbConv.state=_.j.Normal),i.insertDeletedMsgSeqs(ke,H),ge.size?i.saveMsgRepliedInfo(ge,!0,!1).then(function(Ue){i.saveMessageList(Ue,X,Ae,_.w.Fetch),i.dbMgr.getMessageList(i.dbConv,r,P).then(l)}):(l(Q),y&&!Oe.code&&(i.dbConv.maxSeq=Oe.maxSeq||i.dbConv.msgSeq,i.dbMgr.addConversationList([i.dbConv]))))}var ae=0,X=0,re=1,ie=i.convType!=_.c.ConversationType.Room,ge=new Map,_e=_.n.B,ke=[];if(y)return D&&d<D?void i.fetchSvrMessage(d,re,_e,k).then(oe):D&&ee?l(Q):(k=!0,ee=Math.min(100,d-D),void i.fetchSvrMessage(-1,re,_e,k,ee).then(oe));var De=w?Y:K,Re=100;if(w)if(U<=K){for(var we=B.length-1;0<we;we--)if(1<B[we]-B[we-1]){De=B[we],Re=Math.min(100,B[we]-B[we-1]),z.seqs=B[we-1]+","+De;break}}else De=U+1,Re=Math.min(100,U+1-K);else if(De=K,Y<=b+1){for(we=1;we<B.length;we++)if(1<B[we]-B[we-1]){De=B[we-1],Re=Math.min(100,B[we]-B[we-1]),z.seqs=De+","+B[we];break}}else De=b,Re=Math.min(100,Y-b+1);i.fetchSvrMessage(De,re,_e,w,Re).then(oe)})}):Promise.reject(Object(T.y)(f,_.u.QueryHistoryMsg))},s.prototype.insertMsg=function(r){Object.isFrozen(r)&&(r=JSON.parse(JSON.stringify(r)));var i=this.dbConv.msgSeq||0,a=this.dbConv.maxOrderKey||0;return r.clientSid=this.econf.convSid,r.clientSeq=++this.econf.clientMsgSeq,r.localMessageID=this.convType+r.clientSid+r.clientSeq,r.messageID="",r.messageSeq=0,r.orderKey=a+1,r.conversationID=this.convID,r.conversationType=this.convType,r.direction=_.c.MessageDirection.Send,r.sentStatus=_.c.MessageSentStatus.Success,r.timestamp=this.st.getRealClientTimestamp(),r.isUserInserted=!0,r.receiptStatus=_.c.MessageReceiptStatus.None,this.saveMessageList([r],i,this.dbConv.state,_.w.Insert),this.lg.i(m,_.u.InsertMsg,{convID:this.convID,dbSeq:i,orderKey:a}),Promise.resolve({message:r})},s.prototype.queryReplyMsg=function(r,i){var a=this,o=r.messageSeq,l=r.repliedInfo?r.repliedInfo.rootMessageSeq:o,h=this.createMessageExtra(l,l==o?r.messageID:""),R=(r=h.rootRepliedMaxSeq||0,h.rootRepliedCount||0),w={time:new Date,convID:this.convID,config:i,rootSeq:l,msgSeq:o,oldMaxSeq:r,oldReplyCount:R};return(r<o?this.cnMgr.send(_.d["msg_reply_"+this.convType],{conv_id:this.convID,conv_msg_seq:l}).then(function(d){var D,S,y,k;return!d.code&&d.total_count&&d.conv_msg_seq.length?((D=d.conv_msg_seq).sort(function(b,U){return b-U}),D.find(function(b){return b==l})||D.unshift(l),h.rootRepliedMaxSeq=D[D.length-1],h.rootRepliedCount=d.total_count,d.root_info&&(S=(y=d.root_info).peer_user_id,y=y.mute_list_seq,S&&(h.rootRepliedSender=S),y&&(h.rootRepliedSentTime=y),!h.rootRepliedState)&&a.isMsgDel(+l,h.rootRepliedSentTime||0)&&(h.rootRepliedState=1),k=h.rootRepliedCount<=a.econf.mailHBConfig.reply_msg_seq_count,a.batchFetchMsgList(D,k,!0).then(function(b){return k?Array.from(b.values()):a.dbMgr.getReplyMessageListByRootSeq(a.convID,a.convType,l)})):(d.total_count&&(h.rootRepliedCount=d.total_count),a.dbMgr.getReplyMessageListByRootSeq(a.convID,a.convType,l))}):this.dbMgr.getReplyMessageListByRootSeq(this.convID,this.convType,l)).then(function(d){d.sort(function(q,B){return q.messageSeq-B.messageSeq}),d=d.map(function(q){return a.pb.handleDBMessage(a.econf,q)});var D=h.rootRepliedCount,S={messageSeq:l,state:_.c.MessageRepliedInfoState.Normal,senderUserID:"",sentTime:0,repliedCount:D};if(d[0]&&d[0].messageSeq==l){var y=d[0],k=(d.shift(),y.rootRepliedCount=D,h.reactions);if(k){var b,U=[];for(b in k){var z=k[b];U.push({conversationID:y.conversationID,conversationType:y.conversationType,messageID:y.messageID,userList:z.userList,totalCount:z.totalCount,reactionType:b,isSelfIncluded:z.isSelfIncluded})}y.reactions=U}S.senderUserID=y.senderUserID,S.sentTime=y.timestamp,h.messageID=(S.message=y).messageID,h.rootRepliedSender=y.senderUserID,h.rootRepliedSentTime=y.timestamp,R<D&&(P={conversationID:a.convID,conversationType:a.convType,count:D,messageID:y.messageID},a.bus.emit(_.m.MsgRepliedCount,{infos:[P]}))}else h.rootRepliedSender||d.some(function(q){if(q.repliedInfo&&q.repliedInfo.messageSeq==l)return h.rootRepliedSender=q.repliedInfo.senderUserID,h.rootRepliedSentTime=q.repliedInfo.sentTime,!0}),h.rootRepliedState||(h.rootRepliedState=a.isMsgDel(l,h.rootRepliedSentTime||0)?1:2),S.state=h.rootRepliedState,S.senderUserID=h.rootRepliedSender,S.sentTime=h.rootRepliedSentTime;var P=d.length,H=(J=i.nextFlag||0)?d.findIndex(function(q){return J===q.messageSeq}):0,Q=H+Math.min(_.h.MAX_QUERY_PAGE_COUNT,i.count),J=((L=d[Q])==null?void 0:L.messageSeq)||0,L=(d=d.slice(H,Q),h.rootRepliedMaxSeq);return Object.assign(w,{maxSeq:L,replyCount:D,total:P,count:d.length,start:H,end:Q,nextFlag:J}),a.lg.i(m,_.u.QueryReplyMsg,w),{nextFlag:J,rootRepliedInfo:S,messageList:d}})},s.prototype.queryMessages=function(r){var i=this,a={time:new Date,convID:this.convID,count:0,seqs:r.join()};return r=Array.from(new Set(r)),this.batchFetchMsgList(r).then(function(o){return a.count=o.size,i.lg.i(m,_.u.QueryMsgs,a),(o=Array.from(o.values())).sort(function(l,h){return l.messageSeq-h.messageSeq}),{conversationID:i.convID,conversationType:i.convType,messageList:o}})},s.prototype.onPushMessageList=function(r,i){var a,o=this,l=0,h=0,R=this.dbConv.readMsgSeq||0,w=[],d=r.map(function(S){var y,k,b=S.recv_msg_info.msg_info,U=S.recv_msg_info.msg_svr_info,z=((U=(b.msg_status=S.msg_status||0,b.msg_status&&(z=(z=o.econf.msgExtraMap.get(o.getMsgExtraKey(U.conv_msg_seq)))||o.convType!=_.c.ConversationType.Peer?z:o.econf.msgExtraMap.get(o.getMsgExtraKey(0)))&&(z.receiptStatus=Object(T.v)(b.msg_status).receipt,z.messageID||(z.messageID=U.msg_id),o.dbMgr.addMessageExtraList([z])),o.transform2Message(S.recv_msg_info,!1))).messageSeq>h&&(h=U.messageSeq),U.direction==_.c.MessageDirection.Receive&&U.messageSeq>R&&(U.noUnread||U.type==_.c.MessageType.Tips?o.dbConv.deletedMsgCount++:l++),o.econf.user.userID);return o.convType!=_.c.ConversationType.Room&&U.direction==_.c.MessageDirection.Receive&&(z=U.mentionedUserIDs.indexOf(z)!=-1?1:0,y=U.isMentionAll?2:0,z||y)&&((k=o.dbConv.mentionedInfoList||[]).push({type:z|y,messageID:U.messageID,fromUserID:U.senderUserID,messageSeq:U.messageSeq}),o.dbConv.mentionedInfoList=k),U.repliedInfo&&((z=U.repliedInfo.messageEditSeq&&U.repliedInfo.messageSeq)&&w.indexOf(z)==-1&&w.push(z),o.addRootReplyMsg(b.reply_info,S.reply_count),o.preFetchReplyMsg(((y={})[U.repliedInfo.rootMessageSeq]=U.messageSeq,y))),U}),D=!1;0<l&&this.convType!=_.c.ConversationType.Room&&(r=this.dbConv.sendMsgCount||0,a=this.dbConv.deletedMsgCount||0,(r=h-R-r-a)<1&&(this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=h-R-l,r=l),r!=this.dbConv.unreadMessageCount)&&(this.dbConv.unreadMessageCount=r,D=!0),this.fetchMsgListFromCache(w).then(function(S){d.forEach(function(b){var U;(U=(U=b.repliedInfo&&b.repliedInfo.messageEditSeq&&b.repliedInfo.messageSeq)?S.get(U):void 0)&&U.editSeq>b.repliedInfo.messageEditSeq&&o.pb.handleReplyMsgInfo(b,U,!0)});var y=o.dbConv.state,k=(y=(o.dbConv.state=_.j.Normal,o.saveMessageList(d,h,y,_.w.Push),D&&o.emitUnreadMessageCount(),o.convType==_.c.ConversationType.Peer?"Peer":o.convType==_.c.ConversationType.Group?"Group":"Room"),{messageList:d.map(function(b){return o.pb.handleDBMessage(o.econf,b)}),fromConversationID:o.convID,info:{isOfflineMessage:!1}});o.bus.emit(y.toLowerCase()+"MessageReceived",k),o.bus.emit("receive"+y+"Message",k)}),this.convType==_.c.ConversationType.Peer&&(d.length==1?this.dbMgr.updateUserSeq(d[0].c2cSeq,_.z.msg):((a=d.map(function(S){return S.c2cSeq})).sort(function(S,y){return S-y}),a[r=a.length-1]-a[0]==r&&this.dbMgr.updateUserSeq(a[0],_.z.msg))),this.convType==_.c.ConversationType.Group&&d.forEach(function(S){S.direction==_.c.MessageDirection.Send&&S.receiptStatus&&S.receiptStatus<_.c.MessageReceiptStatus.Expired&&i.queryReceiptMembers(S,S.conversationID,{count:100,nextFlag:0},!1,!1)})},s.prototype.onPushMsgDelete=function(r){var i,a,o=this,l=this.dbConv.deletedMsgSeqs||[];r.every(function(h){return l.indexOf(h)!=-1})||(i=this.dbConv.lastMessage?this.dbConv.lastMessage.messageSeq:0,a=this.dbConv.readMsgSeq||0,this.dbMgr.deleteMessageListFromRemote(this.convID,this.convType,r,a,function(h,R,w){0<h.length&&(h={conversationID:o.convID,conversationType:o.convType,isDeleteConversationAllMessage:!1,messageList:h,messageDeleteType:0},o.bus.emit(_.m.MsgDeleted,h)),o.afterDeleteLocalMessages(r,!!i&&r.indexOf(i)!=-1,R,!1,w),o.checkReplyMsgChange(r,!0,!0)}))},s.prototype.onPushAllMsgDelete=function(r,i){var a,o,l,h,R=this,w=this.dbConv.deletedMsgMaxSeq||0;r<=w||(a=Math.max(r,this.dbConv.readMsgSeq||0),this.dbConv.readMsgSeq=a,this.dbConv.deletedMsgMaxSeq=r,o=[],this.dbConv.deletedMsgSeqs&&this.dbConv.deletedMsgSeqs.length&&(this.dbConv.deletedMsgSeqs=this.dbConv.deletedMsgSeqs.filter(function(d){return a<d&&o.push(d),r<d})),this.filterMentionedInfoList(),l=this.dbConv.msgSeq||0,h=this.dbConv.sendMsgCount||0,this.dbMgr.deleteAllMessageFromRemote(this.convID,this.convType,r,o,function(d){o.length<1&&(d=R.dbConv.deletedMsgCount),(i||R.dbConv.msgSeq<=r)&&(S={conversationID:R.convID,conversationType:R.convType,isDeleteConversationAllMessage:!0,messageList:[],messageDeleteType:1},R.bus.emit(_.m.MsgDeleted,S)),R.dbConv.unreadMessageCount;var D,S=!1;(D=((D=(R.dbConv.deletedMsgCount=d,R.dbConv.lastMessage))&&!D.isUserInserted&&D.sentStatus==_.c.MessageSentStatus.Success&&D.messageSeq==r&&(S=!0,D.messageSeq,R.dbConv.lastMessage=void 0),Math.max(l-a-h-d,0)))!=R.dbConv.unreadMessageCount&&(S=!0,R.dbConv.unreadMessageCount=D,R.emitUnreadMessageCount()),S&&R.emitConvChanged(_.c.ConversationEvent.Updated),R.dbMgr.addConversationList([R.dbConv])}))},s.prototype.filterMentionedInfoList=function(){var r,i,a=this.dbConv.mentionedInfoList;a&&a.length&&(r=this.dbConv.deletedMsgSeqs||[],i=this.dbConv.readMsgSeq||0,this.dbConv.mentionedInfoList=a.filter(function(o){return o.messageSeq>i&&r.indexOf(o.messageSeq)==-1}))},s.prototype.insertDeletedMsgSeqs=function(r,i){r.sort(function(R,w){return R-w});for(var a=[],o=0;o<r.length-1;o++){var l=r[o+1]-r[o];if(1<l)for(var h=1;h<l;h++)a.push(r[o]+h)}a.length&&(i&&(i.delSeqs=a),(i=this.dbConv.deletedMsgSeqs)&&i.length&&a.push.apply(a,x([],g(i),!1)),this.dbConv.deletedMsgSeqs=Array.from(new Set(a)),this.filterMentionedInfoList())},s.prototype.deleteLocalMessages=function(r,i){var a=this,o=[],l=this.dbConv.lastMessage?this.dbConv.lastMessage.messageID:"",h=this.dbConv.readMsgSeq||0,R=[],w=!1,d=0;return r.forEach(function(D){var S;l&&D.messageID==l&&(w=!0,a.dbConv.lastMessage=void 0),D.isUserInserted||D.isBroadcastMessage||D.sentStatus!=_.c.MessageSentStatus.Success||(R.push(D.messageSeq),D.direction===_.c.MessageDirection.Receive&&D.messageSeq>h&&d++,(S=a.econf.msgExtraMap.get(a.getMsgExtraKey(D.messageSeq)))&&!S.rootRepliedSender&&(S.rootRepliedState=_.c.MessageRepliedInfoState.Deleted,S.rootRepliedSender=D.senderUserID,S.rootRepliedSentTime=D.timestamp,o.push(S)))}),this.dbMgr.deleteMessageList(this.convID,this.convType,r).then(function(D){return a.afterDeleteLocalMessages(R,w,d,!0,D),a.checkReplyMsgChange(R,!0,!1),o.length&&a.dbMgr.addMessageExtraList(o),i.seqs=R,a.lg.i(m,_.u.DelMsg,i),{conversationID:a.convID,conversationType:a.convType}})},s.prototype.afterDeleteLocalMessages=function(r,i,a,o,l){var h;this.dbConv.deletedMsgSeqs=r.concat(this.dbConv.deletedMsgSeqs||[]),this.filterMentionedInfoList(),this.dbConv.unreadMessageCount,i&&(this.dbConv.lastMessage=l)&&this.updateConvOrderKey(l.timestamp),0<a&&(a+=this.dbConv.deletedMsgCount||0,this.dbConv.deletedMsgCount=a,r=this.dbConv.readMsgSeq||0,l=this.dbConv.msgSeq||0,h=this.dbConv.sendMsgCount||0,r=Math.max(l-r-h-a,0),o&&r==0&&(this.dbConv.readMsgSeq=l,this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=0,this.updateServerReadMsgSeq(l)),this.dbConv.unreadMessageCount!=r)&&(i=!0,this.dbConv.unreadMessageCount=r,this.emitUnreadMessageCount()),i&&this.emitConvChanged(_.c.ConversationEvent.Updated),this.dbMgr.addConversationList([this.dbConv])},s.prototype.deleteLocalAllMessage=function(r){var i=this,a=(this.dbMgr.deleteAllMessage(this.convID,this.convType),this.dbConv.msgSeq||0),o=(this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=0,this.dbConv.unreadMessageCount=0,this.dbConv.readMsgSeq=a,this.dbConv.deletedMsgMaxSeq=a,this.dbConv.deletedMsgSeqs=[],this.dbConv.mentionedInfoList=[],this.dbConv.lastMessage=void 0,this.emitConvChanged(_.c.ConversationEvent.Updated),this.emitUnreadMessageCount(),this.updateServerReadMsgSeq(a),this.dbMgr.addConversationList([this.dbConv]),[]),l=this.econf.user.userID+this.convType+this.convID;return this.econf.msgExtraMap.forEach(function(h){h.conversationID==i.convID&&h.conversationType==i.convType&&o.push(l+h.conversationSeq)}),this.dbMgr.deleteMessageExtraList(o),this.lg.i(m,_.u.DelAllMsg,r),Promise.resolve({conversationID:this.convID,conversationType:this.convType})},s.prototype.updateServerReadMsgSeq=function(r){this.dbConv.state||(r={conv_id:this.convID,conv_type:this.convType,read_seq:r},this.cnMgr.send(_.d.conv_read_seq,r,_.g.S))},s.prototype.fetchSvrMessage=function(r,i,a,o,l){return l=this.getFetchMessageReqBody(r,a,o?1:0,l||100),this.convType!=_.c.ConversationType.Room||l?(l.degree=i,l.how=a,100<l.count&&(l.count=100),i=a==_.n.B?_.g.A:_.g.S,this.cnMgr.send(_.d["msglist_"+this.convType],l,i).then(function(h){var R,w,d;return h.code?(h.list=[],h):(d={fetch_end:h.fetch_end,next_seq:w=h.next_conv_msg_seq,maxSeq:R=h.max_conv_msg_seq,nextSeq:w,list:h.msgs},(a==_.n.L||h.fetch_end||!o&&(R?R<=r||R<=w:w<=r))&&(d.nextSeq=0),d)})):Promise.resolve({nextSeq:0,list:[]})},s.prototype.saveLocalMessage=function(r,i,a,o){i.sentStatus=a,i.messageSeq=0,i.orderKey||(i.orderKey=(this.dbConv.maxOrderKey||0)+1),a!=_.c.MessageSentStatus.Sending&&(i.timestamp=this.st.getRealClientTimestamp()),a==_.c.MessageSentStatus.Success&&this.clearMsgObjFile(i),Object.assign(r,i),a!=_.c.MessageSentStatus.Sending&&this.emitMsgSentStatus(r,o||""),r=a==_.c.MessageSentStatus.Sending?_.w.Sending:_.w.Sended,this.saveMessageList([i],this.dbConv.msgSeq||0,this.dbConv.state,r)},s.prototype.saveMessageList=function(r,i,a,o){var l,h,R,w,d,D;r.length!=0&&(this.convType==_.c.ConversationType.Room||o!=_.w.Sending&&o!=_.w.Sended||(l=this.econf.dbConvMap.get(this.econf.user.userID+this.convType+this.convID))&&l!==this.dbConv&&(this.dbConv=l),r.sort(function(S,y){return S.orderKey-y.orderKey}),h=(l={maxSeq:this.dbConv.maxSeq||0,msgSeq:this.dbConv.msgSeq||0,maxOrderKey:this.dbConv.maxOrderKey||0,lastMessage:this.dbConv.lastMessage||{localMessageID:"",sentStatus:_.c.MessageSentStatus.Sending}}).lastMessage.orderKey||0,R=r[r.length-1],this.dbConv.maxOrderKey=Math.max(l.maxOrderKey,R.orderKey),o!=_.w.Fetch&&l.maxSeq+1!=i||(this.dbConv.maxSeq=Math.max(l.maxSeq,i)),i=Math.max(l.msgSeq,i),this.dbConv.msgSeq=i,this.convType!=_.c.ConversationType.Room&&a==_.j.Delete&&o!=_.w.Fetch&&o!=_.w.Push&&(this.dbConv.state=_.j.Normal,this.dbConv.readMsgSeq=i,this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=0,this.dbConv.unreadMessageCount=0),this.convType!=_.c.ConversationType.Room&&o==_.w.Fetch&&(D=this.dbConv.readMsgSeq||0,w=this.dbConv.sendMsgCount||0,d=this.dbConv.deletedMsgCount||0,(i=Math.max(i-D-w-d,0))!=this.dbConv.unreadMessageCount)&&(this.dbConv.unreadMessageCount=i,this.emitUnreadMessageCount()),this.convType!=_.c.ConversationType.Room&&(l.lastMessage.localMessageID!=R.localMessageID?R.orderKey>=h||o==_.w.Push:l.lastMessage.sentStatus!=R.sentStatus)&&(this.dbConv.draft="",this.updateConvOrderKey(R.timestamp),this.dbConv.lastMessage=this.pb.handleDBMessage(this.econf,R),D=l.maxOrderKey&&a!=_.j.Delete?this.dbConv.state==_.j.Disable?_.c.ConversationEvent.Disabled:_.c.ConversationEvent.Updated:_.c.ConversationEvent.Added,this.emitConvChanged(D,"save"+o)),this.dbMgr.addConversationList([this.dbConv]),this.updateMsgCacheList(r))},s.prototype.transform2Message=function(r,i){var a=this.pb.decodeSvrMsg(this.econf,r,this.convID,this.convType,this.rootReplyMsgMap);return this.calculateMessageOrderKey(a),a.type!=_.c.MessageType.Revoke&&r.msg_info.msg_status&&this.convType!=_.c.ConversationType.Room&&(a.receiptStatus=Object(T.v)(r.msg_info.msg_status).receipt,i&&this.dbMgr.checkMessageStatus(a),r=this.convType==_.c.ConversationType.Peer?this.econf.mailHBConfig.history_c2c_msg_seq:this.dbConv.historyMsgSeq,i=this.convType==_.c.ConversationType.Peer?a.c2cSeq:a.messageSeq,a.receiptStatus==_.c.MessageReceiptStatus.Processing)&&r&&i&&i<=r&&(a.receiptStatus=_.c.MessageReceiptStatus.Expired),a.repliedInfo&&this.isMsgDel(a.repliedInfo.messageSeq,a.repliedInfo.sentTime)&&(a.repliedInfo.state=1),a},s.prototype.withSendMessageErrorCode=function(r,i){return i=Object(T.y)(6000203,i,r),this.convType==_.c.ConversationType.Group&&this.auditErrorCodes.indexOf(i.code)==-1&&(i.code=6000203),this.convType==_.c.ConversationType.Room&&i.code==6000321&&this.bus.exec(_.m.IConnectedRoom,this.convID,!0),i},s.prototype.calculateMessageOrderKey=function(r){var i,a,o,l,h,R,w,d=this.msgCaches[r.senderUserID],D=(d||(this.msgCaches[r.senderUserID]=d=[r]),d.find(function(S){return S.localMessageID==r.localMessageID}));D||d.push(r),D&&D.orderKey?r.orderKey=D.orderKey:r.orderKey||(D=_.h.MESSAGE_SEQ_MULTIPLIER,a=r.clientSid,(i=r.clientSeq)&&a?(R=h=l=o=0,d.forEach(function(S){var y=S.clientSeq;S.clientSid==a&&y&&(i<y&&(!l||y<l)?(l=y,R=S.orderKey):y<i&&(!o||o<y)&&(o=y,h=S.orderKey))}),w=r.messageSeq*D,o&&l?w=h+(Math.floor(Math.random()*(R-h))||1):w<h?w=h+i-o:R&&R<w&&(w=R+i-l),r.orderKey=w,100<d.length&&(d.sort(function(S,y){return S.orderKey-y.orderKey}),d.splice(0,90))):r.orderKey=r.messageSeq*D)},s.prototype.mergeSvrMessageList=function(r,i){var a,o,l,h,R,w,d,D,S,y,k,b=this;return!this.dbMgr||!this.isFetchMessageWhenLogin(r)||(a=Math.max(this.dbConv.maxSeq||0,this.dbConv.deletedMsgMaxSeq||0),(o=this.dbConv.msgSeq||0)<=a)?i&&i():(l=1,h=[],R=new Map,w=this.convType!=_.c.ConversationType.Room,d=this.econf.user.deleteAllMsgTime||0,D=this.dbConv.deletedMsgSeqs||[],S={time:new Date,convID:this.convID,how:r,dbSeq:a,msgSeq:o,emitSeq:0},y=function(U){if(!b.dbMgr)return i&&i();U.list.forEach(function(z){var P=z.msg_svr_info.conv_msg_seq,H=z.msg_svr_info.msg_time;h.push(P),!R.has(P)&&a<P&&(!w||D.indexOf(P)==-1&&d<H)&&R.set(P,b.transform2Message(z,!0))}),U.nextSeq?b.fetchSvrMessage(U.nextSeq,++l,r,!1).then(y):(R.size||U.code||(b.dbConv.maxSeq=U.maxSeq||o),b.afterMergeSvrMsg(h,R,S,i),b.lg.i(m,"mergeSvrMsgs"+R.size,S))},void(r==_.n.L?(k=this.dbConv.isDisabled?o+2:o+1,this.fetchSvrMessage(k,l,r,!0,k-a).then(y)):r==_.n.H&&this.fetchSvrMessage(a,l,r,!1).then(y)))},s.prototype.afterMergeSvrMsg=function(r,i,a,o){var l=this,h=this.dbConv.state;return h!=_.j.Delete&&i.size&&(this.dbConv.state=_.j.Normal),this.insertDeletedMsgSeqs(r,a),i.size?this.saveMsgRepliedInfo(i,!0,!0).then(function(R){var w,d,D,S=l.convType==_.c.ConversationType.Peer?l.dbMgr.filterSaveMessage(l.convID,l.convType,R):R;S.length&&(S=S.map(function(y){return l.pb.handleDBMessage(l.econf,y)}),w=0,l.convType==_.c.ConversationType.Peer?(w=l.econf.mailHBConfig.remember_c2c_msg_seq?l.econf.mailHBConfig.client_c2c_msg_seq||0:l.econf.mailHBConfig.history_c2c_msg_seq||0,D=S.filter(function(y){return y.c2cSeq>w})):l.convType==_.c.ConversationType.Group&&(w=l.dbConv.historyMsgSeq||0,D=S.filter(function(y){return y.messageSeq>w})),d=l.convType==_.c.ConversationType.Peer?"Peer":l.convType==_.c.ConversationType.Group?"Group":"Room",D&&D.length&&(D={messageList:D,fromConversationID:l.convID,info:{isOfflineMessage:!0}},l.bus.emit(d.toLowerCase()+"MessageReceived",D,"seq"+w)),l.bus.emit("receive"+d+"Message",{messageList:S,fromConversationID:l.convID})),l.saveMessageList(R,r[r.length-1],h,_.w.Fetch),o&&o()}):(this.dbMgr.addConversationList([this.dbConv]),o&&o())},s.prototype.fetchMsgListFromCache=function(r){var i=this;return new Promise(function(a){var o=new Map;return r.length&&(r.sort(function(l,h){return l-h}),Object.values(i.msgCaches).forEach(function(l){l&&l.length&&l.forEach(function(h){var R=h.messageSeq;r.indexOf(R)!=-1&&o.set(R,h)})}),o.size!=r.length)?void i.dbMgr.getMessageListBySeqs(i.convID,i.convType,r).then(a):a(o)})},s.prototype.updateMsgCacheList=function(r){var i=this;r.forEach(function(a){var o,l=i.msgCaches[a.senderUserID];l&&l.length&&(o=l.findIndex(function(h){return h.messageID==a.messageID}))!=-1&&(l[o]=a)}),this.dbMgr.addMessageList(this.convID,this.convType,r)},s.prototype.updateMsgStateSeq=function(r){var i,a;return this.convType==_.c.ConversationType.Peer?this.dbMgr.updateUserSeq(r,_.z.state):(i=!1,(a=+this.dbConv.maxStatemsgSeq||0)<r&&(this.dbConv.maxStatemsgSeq=r),r-1==(+this.dbConv.minStatemsgSeq||0)&&(this.dbConv.minStatemsgSeq=r,i=!0),(i||a<r)&&this.dbMgr.addConversationList([this.dbConv]),i)},s.prototype.fetchFileProcess=function(r,i,a,o,l,h){var R=this;return o={md5:i.fileUID,file_type:o,name:this.getMediaFileExt(i.type,i.fileName||"")},this.cnMgr.send(_.d.file_process,o).then(function(w){if(w.code)throw Object(T.y)(c,w.message,w.code);return R.innerSendText(r,i,a,!0,l,h)})},s.prototype.emitUnreadMessageCount=function(r){this.convType!=_.c.ConversationType.Room&&this.bus.exec(_.m.IUnreadMsgCount,r)},s.prototype.emitConvChanged=function(r,i,a){this.convType!=_.c.ConversationType.Room&&this.dbConv.state!=_.j.Delete&&(a&&(a=this.pb.handleDBMessage(this.econf,a),this.updateConvOrderKey(a.timestamp),this.dbConv.lastMessage=a),a=Object(T.s)(_.h.convKeys,this.dbConv),this.bus.emit(_.m.ConvChanged,{infoList:[{event:r,conversation:a}]},i))},s.prototype.initSendingMessage=function(r,i){var a=r.messageID&&r.messageSeq;return a?(r.extendedData="",r.localExtendedData="",r.isMentionAll=!1,r.mentionedUserIDs&&(r.mentionedUserIDs=[]),r.reactions&&(r.reactions=[])):r.mentionedUserIDs&&r.mentionedUserIDs.length&&(r.mentionedUserIDs=Array.from(new Set(r.mentionedUserIDs.filter(function(o){return o})))),r.messageID="",r.messageSeq=0,r.orderKey=0,r.clientSid=this.econf.convSid,r.clientSeq=++this.econf.clientMsgSeq,r.localMessageID||(r.localMessageID=this.convType+r.clientSid+r.clientSeq),r.conversationID=this.convID,r.conversationType=this.convType,r.senderUserID=this.econf.user.userID,r.direction=_.c.MessageDirection.Send,r.sentStatus=_.c.MessageSentStatus.Sending,r.timestamp=this.st.getRealClientTimestamp(),r.isUserInserted=!1,r.isBroadcastMessage=!1,r.isServerMessage=!1,r.receiptStatus=i.hasReceipt?_.c.MessageReceiptStatus.Processing:_.c.MessageReceiptStatus.None,r.rootRepliedCount=0,r.repliedInfo=void 0,!!a},s.prototype.emitSendingMessage=function(r,i,a,o,l){o&&(h=o.messageSeq,R=o.repliedInfo?o.repliedInfo.rootMessageSeq:o.messageSeq,w=o.repliedInfo?o.repliedInfo.rootMessageID:o.messageID,i.repliedInfo={rootMessageSeq:R,rootMessageID:w,state:0,messageSeq:h},this.pb.handleReplyMsgInfo(i,o,!1),r.repliedInfo=i.repliedInfo);var h,R,w,d=r.localMessageID!=i.localMessageID?r.localMessageID+","+i.localMessageID:r.localMessageID;l&&typeof l.onMessageAttached=="function"&&setTimeout(function(){try{l.onMessageAttached(r)}catch(D){throw D}finally{a.onattach=d}},0)},s.prototype.emitMsgSentStatus=function(r,i){i={status:r.sentStatus,reason:i,message:r},this.bus.emit(_.m.MsgSentStatus,{infos:[i]})},s.prototype.getMediaMessageDuration=function(r){var i=0;return r.type==_.c.MessageType.Audio?i=+r.audioDuration||1:r.type==_.c.MessageType.Video&&(i=+r.videoDuration||1),i},s.prototype.getMediaFileExt=function(r,i){var a=i.lastIndexOf(".");return a<1?A[r]:i.substring(a+1)},s.prototype.encodeMsgBody=function(r,i,a){var o,l,h,R,w,d,D,S=this,y=r.type;return y==_.c.MessageType.Multiple?(l=r.messageInfoList.map(function(k,b){return{index:b,is_upload:!!k.fileUID,msg_type:k.type==_.c.MessageType.Custom?k.type+(+k.subType||0):k.type,searched_content:k.type==_.c.MessageType.Custom?k.searchedContent:void 0,msg:S.encodeMsgBody(k,!1,!0)}}),this.pb.encodeMsgBody(y,{msgs:l})):y==_.c.MessageType.Combine||y>=_.c.MessageType.Image&&y<=_.c.MessageType.Video?(r.message&&(r.message=""),(l=y==_.c.MessageType.Combine)&&a?this.pb.encodeMsgBody(y,{title:r.title,summary:r.summary}):(a={version:"1",file_type:l?y:y-10,file_name:r.fileName||"",file_size:String(+r.fileSize||0),file_uid:r.fileUID||"",file_download_url:r.fileDownloadUrl||""},l?(a.media_duration=r.aesKey,this.pb.encodeMsgBody(y,{title:r.title,summary:r.summary,file_body:a})):(y!=_.c.MessageType.Image||i?y==_.c.MessageType.Audio?a.media_duration=String(r.audioDuration||0):y==_.c.MessageType.Video&&(a.media_duration=String(r.videoDuration||0),i||(o=r.videoFirstFrameDownloadUrl,l=r.videoFirstFrameWidth,i=r.videoFirstFrameHeight,o&&(a.video_first_frame_download_url=o),l&&(a.frame_width=l),i&&(a.frame_height=i))):(o=r.thumbnailDownloadUrl,l=r.largeImageDownloadUrl,i=r.originalImageWidth,h=r.originalImageHeight,R=r.thumbnailWidth,w=r.thumbnailHeight,d=r.largeImageWidth,D=r.largeImageHeight,o&&(a.thumbnail_download_url=o),l&&(a.large_image_download_url=l),i&&(a.origin_width=i),h&&(a.origin_height=h),R&&(a.small_width=R),w&&(a.small_height=w),d&&(a.big_width=d),D&&(a.big_height=D)),this.pb.encodeMsgBody(y,a)))):Object(T.j)(r.message)},s.prototype.queryMessageStatus=function(r,i){var a=this,o=r.map(function(l){return{conv_sid:l.clientSid,client_msg_seq:l.clientSeq}});return o=E(E({},this.getAssociatedReqBody()),{room_id:this.convID,client_infos:o}),this.cnMgr.send(_.d["msg_query_"+this.convType],o,_.g.S).then(function(l){var h;return l.code?[l,void 0]:(h=[],l.msgs.forEach(function(R){var w,d,D,S,y=R.msg_info,k=(R=R.msg_svr_info,y.msg_status),b=y.msg_client_info;(S=(S=r.find(function(U){return U.clientSeq==b.client_msg_seq&&U.clientSid==b.conv_sid}))?a.copyMsgObj(S,!0):null)&&S.sentStatus!==_.c.MessageSentStatus.Success&&(w=R.conv_msg_seq,d=R.c2c_msg_seq,D=R.msg_id,R=R.msg_time,S.sentStatus=_.c.MessageSentStatus.Success,S.messageID=D,S.timestamp=R,S.messageSeq=w,S.c2cSeq=d,k&&S.receiptStatus==_.c.MessageReceiptStatus.Processing&&(S.receiptStatus=Object(T.v)(k).receipt),!S.fileUID&&S.type!=_.c.MessageType.Combine&&S.type!=_.c.MessageType.Multiple||a.pb.decodeMsgBody(a.econf,S,y.msg),a.calculateMessageOrderKey(S),h.push(S))}),l.fail_list.forEach(function(R){var w,d=R.client_info;R=R.reason,(w=(w=r.find(function(D){return D.clientSeq==d.client_msg_seq&&D.clientSid==d.conv_sid}))?a.copyMsgObj(w):null)&&R==1&&(w.sentStatus=_.c.MessageSentStatus.Failed,h.push(w))}),0<h.length&&(i||a.updateMsgCacheList(h),a.bus.emit(_.m.MsgSentStatus,{infos:h.map(function(R){return{status:R.sentStatus,reason:"",message:a.pb.handleDBMessage(a.econf,R)}})})),[l,h[0]])})},s.prototype.updateConvWhenSendedMessage=function(r){r.peer_user_name&&(this.dbConv.conversationName=Object(T.g)(r.peer_user_name)),r.peer_user_avatar&&(this.dbConv.conversationAvatarUrl=Object(T.g)(r.peer_user_avatar)),r.send_count_after_read&&(this.dbConv.sendMsgCount=r.send_count_after_read)},s.prototype.getAuditInfo=function(r){var i=r.audit_info,a=r.audit_message_info;if(i)return[i];var o="",l=[];if(a&&a.audit_info)for(var h=0;h<a.audit_info.length;h++){var R,w=(R=a.audit_info[h]).enable_push;(R=R.content)&&!o&&(o=R),l.push(w||0)}return[o,l.length?JSON.stringify(l):""]},s.prototype.handleSendMsgFail=function(r,i,a,o){this.dbConv.state=(o=o||{}).conv_disable&&this.convType==_.c.ConversationType.Peer?_.j.Disable:_.j.Normal;var l=(h=g(this.getAuditInfo(o),2))[0],h=h[1],R=o._isText&&o.code==6000105?_.c.MessageSentStatus.Sending:_.c.MessageSentStatus.Failed;return this.saveLocalMessage(r,i,R,l),!o._isText&&a.isUpload&&(r=o?o.code:0,i=o?o.stack||o.message||o.errMsg:r,r&&String(r).indexOf("6000")!=-1||(R=T.p?T.p._zim_env:"",this.dr.reportSDKEvent("/sdk/log",{error_message:"API.sendMessage:"+R+i}))),a.error=this.withSendMessageErrorCode(o.code,o.message),h&&(a.error.message+=", index: "+h),this.lg.w(m,_.u.SendMsg,a),a.error},s.prototype.handleSendMsgSucc=function(r,i,a,o){var l,h;return this.updateConvWhenSendedMessage(a),this.calculateMessageOrderKey(i),this.saveMessageList([i],i.messageSeq,this.dbConv.state,_.w.Sended),this.convType==_.c.ConversationType.Group&&a.receipt_seq&&(l=this.econf.dbGroupMap.get(this.convID),(h=this.createMessageExtra(i.messageSeq,i.messageID)).receiptStatus=i.receiptStatus,h.receiptSeq=a.receipt_seq,h.unreadMemberCount=a.unread_count||0,h.memberAllSeq=(l==null?void 0:l.memberSeq)||0,this.dbMgr.addMessageExtraList([h]),this.dbMgr.updateUserSeq(h.receiptSeq,_.z.ext)),this.addRootReplyMsg(o,a.reply_count),i=this.pb.handleDBMessage(this.econf,i),Object.assign(r,i),this.emitMsgSentStatus(r,""),{message:r}},s.prototype.isRetrySend=function(r){return r=!!r&&(r.code==6000104||r.code==50012||!r._isText&&r.code==6000105),!(this.convType==_.c.ConversationType.Room&&this.econf.cloudSetting.retry.room_msg_max_timeout<=0)&&r},s.prototype.delRetrySendTask=function(r){var i=this.econf.msgRetrySendTasks.findIndex(function(a){return a.oMessage.localMessageID==r});i!=-1&&this.econf.msgRetrySendTasks.splice(i,1)},s.prototype.addTextSendTask=function(r,i,a,o,l,h,R){r={convID:this.convID,convType:this.convType,retryTime:Date.now(),type:_.c.MessageType.Text,oMessage:r,sMessage:i,config:a,originMessage:R,log:o,resolve:l,reject:h},this.econf.msgRetrySendTasks.push(r)},s.prototype.innerSendText=function(r,i,a,o,l,h){var R,w,d=this,D=_.u.SendMsg,S=(o&&(i.clientSeq=++this.econf.clientMsgSeq,r.clientSeq=i.clientSeq,l.isUpload=o),{msg_type:i.type,priority_type:a.priority,msg:this.encodeMsgBody(i,o,!1),payload:Object(T.j)(i.extendedData||""),has_receipt:a.hasReceipt&&this.convType!==_.c.ConversationType.Room?1:void 0,conv_id:this.convID,msg_client_info:{conv_sid:i.clientSid,client_msg_seq:i.clientSeq,local_msg_id:i.localMessageID.substring(1)}}),y=E(E({},this.getAssociatedReqBody()),{conv_id:this.convID,fetch_peer_user_info:this.convType!=_.c.ConversationType.Peer||this.dbConv.conversationName?void 0:1,msg_info:S});return l.retryCount&&(y.sdk_action=l.retryCount+i.localMessageID),i.type==_.c.MessageType.Custom&&(S.sub_msg_type=i.subType,S.searched_content=i.searchedContent),i.isMentionAll&&(S.at_all=!0),i.mentionedUserIDs&&i.mentionedUserIDs.length&&(S.at=i.mentionedUserIDs),i.repliedInfo&&h&&(R=h.type,w=i.repliedInfo.rootMessageSeq,S.reply_info={root_msg_seq:w,root_msg_id:i.repliedInfo.rootMessageID,msg_seq:h.messageSeq,msg_edit_seq:h.editSeq,msg_type:R+(h.subType||0),msg_id:h.messageID,msg_time:h.timestamp,sender_user_id:h.senderUserID,is_server:h.isServerMessage,msg:this.encodeMsgBody(h,!1,!0),reply_count:w==h.messageSeq?0:(R=this.econf.msgExtraMap.get(this.getMsgExtraKey(w)))==null?void 0:R.rootRepliedCount}),this.convType!=_.c.ConversationType.Room&&(S.offline_push=Object(T.f)(a.pushConfig,a.isNotifyMentionedUsers)),h=this.econf.cloudSetting.req_to.send_msg,this.cnMgr.send(_.d["msg_text_"+this.convType],y,_.g.A,h).then(function(k){if(k.code==111100)return d.dbConv.state=k.conv_disable&&d.convType==_.c.ConversationType.Peer?_.j.Disable:_.j.Normal,d.updateConvWhenSendedMessage(k),d.saveLocalMessage(r,i,_.c.MessageSentStatus.Success,d.getAuditInfo(k)[0]),d.lg.i(m,D,l),{message:r};if(k.code==6000105)return d.queryMessageStatus([i],!0).then(function(Q){var J,L=(Q=g(Q,2))[0];if((Q=Q[1])&&Q.sentStatus==_.c.MessageSentStatus.Success)return J=Q.messageSeq,d.saveMessageList([Q],J,d.dbConv.state,_.w.Sended),l.seq=J,d.lg.i(m,D,l),Object.assign(i,Q),Object.assign(r,i),{message:r};throw L._isText=!0,L});if(k.code)throw k;var b=(H=k.msg_svr_info).conv_msg_seq,U=H.c2c_msg_seq,z=H.msg_id,P=H.msg_time,H=H.msg_rsp;return(P=((z=(i.sentStatus=_.c.MessageSentStatus.Success,i.messageID=z,i.timestamp=P,i.messageSeq=b,i.c2cSeq=U,k.msg_status))&&i.receiptStatus==_.c.MessageReceiptStatus.Processing&&(i.receiptStatus=Object(T.v)(z).receipt),d.convType==_.c.ConversationType.Peer&&d.dbMgr.updateUserSeq(i.c2cSeq,_.z.msg),o&&(i.orderKey=0),(o||i.fileUID)&&(d.clearMsgObjFile(i),d.pb.decodeMsgBody(d.econf,i,H)),k.audit_message_info))&&(P.filtered_text&&(i.message=P.filtered_text),i.type==_.c.MessageType.Multiple)&&i.messageInfoList&&P.audit_info.length&&P.audit_info.forEach(function(Q){Q.title&&(i.messageInfoList[Q.enable_push].message=Q.title)}),l.seq=i.messageSeq,d.lg.i(m,D,l),d.handleSendMsgSucc(r,i,k,S.reply_info)})},s.prototype.innerSendMedia=function(r,i,a,o,l,h,R){var w=this,d=i.type>=_.c.MessageType.Image&&i.type<=_.c.MessageType.Video,D=i.type==_.c.MessageType.Combine?i.type:i.type-10,S={md5:i.fileUID,name:i.fileName,size:i.fileSize,file_type:D,duration:this.getMediaMessageDuration(i)};return this.cnMgr.send(_.d.file_upload,S).then(function(y){if(y.code)throw Object(T.y)(c,y.message,y.code);function k(z){if(o&&typeof o.onMediaUploadingProgress=="function"&&d){var P=z.loaded||z.totalBytesSent||z.totalBytesWritten||0;z=z.total||z.totalBytesExpectedToSend||z.totalBytesExpectedToWrite||1;try{o.onMediaUploadingProgress(r,P,z)}catch{}}}var b,U;return k({loaded:0,total:i.fileSize}),y.state==1?(k({loaded:i.fileSize,total:i.fileSize}),w.fetchFileProcess(r,i,a,D,h,R)):(b=Date.now(),U={file_size:i.fileSize,file_type:i.type,file_env:T.p?T.p._zim_env:""},w.dbMgr.uploadFile(y.upload_req,l,k).then(function(){return U.time_consumed=Date.now()-b,w.dr.reportSDKEvent("/sdk/file/upload_msg",U),h.uploadTime=U.time_consumed,w.fetchFileProcess(r,i,a,D,h,R)},function(z){throw U.time_consumed=Date.now()-b,U.error=z.code,U.error_message=z.message,w.dr.reportSDKEvent("/sdk/file/upload_msg",U),z}))})},s.prototype.getMultipleMsgFileInfos=function(r,i){var a=this,o={time_consumed:0,file_env:T.p?T.p._zim_env:"",file_size:0,files:{}},l=(i.uploadTimes=o,[]);return r.forEach(function(h,R){return l.push(a.dbMgr.getFileInfo(h.fileLocalPath,{index:R}))}),Promise.all(l).then(function(h){var R={};return h.forEach(function(w){var d=w.md5,D=w.name,S=w.size,y=(w=w.index,r.get(w));(S=(y.fileUID=d,y.fileSize=S||1,(!y.fileName||y.fileName.indexOf(".")<1)&&(y.fileName=D),o.files[d]))?(S.indexList.push(w),S.indexList.sort(function(k,b){return k-b})):(o.file_size+=y.fileSize,o.files[d]={indexList:[w],file_name:y.fileName,file_size:y.fileSize,file_type:y.type},R[d]={md5:d,name:y.fileName,size:y.fileSize,file_type:y.type-10,duration:a.getMediaMessageDuration(y)})}),{file_list:R,totalUploadData:o}})},s.prototype.uploadMultipleMsg=function(r,i,a,o,l){var h=this,R=0;return this.cnMgr.send(_.d.file_upload_list,a).then(function(w){if(w.code)throw Object(T.y)(c,w.message,w.code);var d=Date.now(),D=(l.time_consumed=d,Object.keys(l.files).map(function(S){var y=w.rsp_list[S];if(!y||y.code)throw b=y?y.message:"Upload list error with "+S,Object(T.y)(c,b,y&&y.code);function k(J){H.forEach(function(L,q){var B=J.loaded||J.totalBytesSent||J.totalBytesWritten||0;if(q==0&&(R+=B),q=L,B=J,i&&typeof i.onMultipleMediaUploadingProgress=="function")try{i.onMultipleMediaUploadingProgress(r,R,l.file_size,q,B.loaded||B.totalBytesSent||B.totalBytesWritten||0,o.get(q).fileSize)}catch{}})}var b=l.files[S],U=b.file_name,z=b.file_size,P=b.file_type,H=b.indexList,Q={md5:S,file_type:P-10,name:h.getMediaFileExt(P,U||"")};return y.state==1?(k({loaded:z}),Q):(b=o.get(H[0]).fileLocalPath,h.dbMgr.uploadFile(y.upload_req,b,k).then(function(){var J=l.files[S];return J&&(J.time_consumed=Date.now()-d),Q},function(J){var L=l.files[S];throw L&&(L.time_consumed=Date.now()-d,L.error=J.code,L.error_message=J.message),J}))}));return Promise.all(D).then(function(S){return l.time_consumed=Date.now()-l.time_consumed,h.dr.reportSDKEvent("/sdk/file/upload_msg",l),S},function(S){throw l.time_consumed=Date.now()-l.time_consumed,h.dr.reportSDKEvent("/sdk/file/upload_msg",l),S})}).then(function(w){return h.cnMgr.send(_.d.file_process_list,{file_list:w}).then(function(d){if(d.code)throw Object(T.y)(c,d.message,d.code);return Object.keys(l.files).forEach(function(D){var S=d.rsp_list[D];if(!S||S.code)throw D=S?S.message:"Process list error with "+D,Object(T.y)(c,D,S&&S.code)}),!0})})},s.prototype.getMsgExtraKey=function(r){return this.econf.user.userID+this.convType+this.convID+(r||"")},s.prototype.createMessageExtra=function(r,i){var a=this.getMsgExtraKey(r),o=this.econf.msgExtraMap.get(a);return o||(o={id:a,ownerID:this.econf.user.userID,conversationID:this.convID,conversationType:this.convType,conversationSeq:r,messageID:i,convReceipt:0,receiptStatus:_.c.MessageReceiptStatus.Processing,receiptSeq:0,receiptMemberListSeq:0,readMemberCount:0,unreadMemberCount:0,memberSeqs:{},reactionSeq:0,reactions:{}},this.econf.msgExtraMap.set(a,o)),i&&!o.messageID&&(o.messageID=i),o.reactions||(o.reactions={}),o},s.prototype.addRootReplyMsg=function(r,i){var a,o,l;r&&r.root_msg_seq&&(a=r.root_msg_seq,(o=this.createMessageExtra(a,r.root_msg_id)).messageID&&(!o.rootRepliedCount||o.rootRepliedCount<i)&&this.isMsgExist(a)&&(l={conversationID:this.convID,conversationType:this.convType,count:i,messageID:o.messageID},this.bus.emit(_.m.MsgRepliedCount,{infos:[l]})),o.rootRepliedCount=i,o.rootRepliedSender||a!=r.msg_seq||(o.rootRepliedSender=r.sender_user_id,o.rootRepliedSentTime=r.msg_time),this.dbMgr.addMessageExtraList([o]))},s.prototype.preFetchReplyMsg=function(r){var i=this,a=[],o=this.econf.mailHBConfig.reply_msg_seq_count;Object.keys(r).forEach(function(l){var h=i.createMessageExtra(+l,""),R=h.rootRepliedCount||0,w=r[+l];(!h.rootRepliedMaxSeq||o<R&&h.rootRepliedMaxSeq<w)&&i.cnMgr.send(_.d["msg_reply_"+i.convType],{conv_id:i.convID,conv_msg_seq:l},_.g.S).then(function(d){var D,S,y;!d.code&&d.total_count&&d.conv_msg_seq.length&&((D=d.conv_msg_seq).sort(function(k,b){return k-b}),D.find(function(k){return k==+l})||D.unshift(+l),S=d.total_count,R<S&&h.messageID&&i.isMsgExist(+l)&&(y={conversationID:i.convID,conversationType:i.convType,count:S,messageID:h.messageID},a.push(y)),h.rootRepliedMaxSeq=D[D.length-1],h.rootRepliedCount=S,d.root_info&&(d=(y=d.root_info).peer_user_id,y=y.mute_list_seq,d&&(h.rootRepliedSender=d),y&&(h.rootRepliedSentTime=y),!h.rootRepliedState)&&i.isMsgDel(+l,h.rootRepliedSentTime||0)&&(h.rootRepliedState=1),i.dbMgr.addMessageExtraList([h]),(d=D.indexOf(w))!=-1&&D.splice(d,1),i.batchFetchMsgList(D,S<=o,!1))})}),a.length&&this.bus.emit(_.m.MsgRepliedCount,{infos:a})},s.prototype.saveMsgRepliedInfo=function(r,i,a){var o,l,h,R,w,d=this;return this.rootReplyMsgMap&&this.rootReplyMsgMap.size&&(o=[],l=[],this.rootReplyMsgMap.forEach(function(D,S){var y,k,b=(b=(b=r.get(S))==null?void 0:b.messageID)||((y=d.econf.msgExtraMap.get(d.getMsgExtraKey(S)))==null?void 0:y.messageID);b&&(y=d.createMessageExtra(S,b),a&&(!y.rootRepliedCount||y.rootRepliedCount<D)&&d.isMsgExist(S)&&l.push({conversationID:d.convID,conversationType:d.convType,count:D,messageID:b}),b=y.rootRepliedCount!=D,y.rootRepliedCount=D,y.rootRepliedSender||((k=r.get(S))||r.forEach(function(U){!k&&U.repliedInfo&&U.repliedInfo.messageSeq==S&&(k=U.repliedInfo)}),k&&(b=!0,y.rootRepliedSender=k.senderUserID,y.rootRepliedSentTime=k.timestamp||k.sentTime)),b)&&o.push(y)}),l.length&&this.bus.emit(_.m.MsgRepliedCount,{infos:l}),o.length)&&this.dbMgr.addMessageExtraList(o),i&&this.convType!=_.c.ConversationType.Room?(h={},R=[],w=new Map,r.forEach(function(D){var S,y;D.repliedInfo&&(S=D.repliedInfo.rootMessageSeq,y=Math.max(D.messageSeq,h[S]||0),h[S]=y,y=(S=d.getReplyMsgEditSeq(D.repliedInfo))?r.get(S):void 0,S&&y&&y.editSeq>(D.repliedInfo.messageEditSeq||0)&&d.pb.handleReplyMsgInfo(D,y,!0),S&&!y&&R.indexOf(S)!=-1&&R.push(S),D.repliedInfo.state==2)&&((y=w.get(D.repliedInfo.messageSeq)||[]).push(D),w.set(D.repliedInfo.messageSeq,y))}),this.preFetchReplyMsg(h),(w.size?this.batchFetchMsgList(Array.from(w.keys())).then(function(D){D.forEach(function(S,y){(y=w.get(y))&&y.forEach(function(k){k.repliedInfo.state=0,d.pb.handleReplyMsgInfo(k,S,!1)})})}):Promise.resolve()).then(function(){return d.fetchMsgListFromCache(R).then(function(D){r.forEach(function(y){var k;(k=(k=d.getReplyMsgEditSeq(y.repliedInfo))?D.get(k):void 0)&&k.editSeq>(y.repliedInfo.messageEditSeq||0)&&d.pb.handleReplyMsgInfo(y,k,!0)});var S=Array.from(r.values());return S.sort(function(y,k){return y.orderKey-k.orderKey}),Promise.resolve(S)})})):((i=Array.from(r.values())).sort(function(D,S){return D.orderKey-S.orderKey}),Promise.resolve(i))},s.prototype.getCombineMessageFile=function(r){var i=this,a=[],o=new Set,l=r.conversationType+"_"+r.localMessageID+"_"+r.aesKey,h=O.a.getInstance().crypto.generateNonce(),R=(this.getCombineMessageChild(r,a,o,l,1,h,r.senderUserID,r.conversationID),{});return o.forEach(function(w){var d=i.econf.dbUserMap.get(w);d&&(R[w]={sender_user_name:Object(T.j)(d.userName),sender_user_avatar:Object(T.j)(d.userAvatarUrl),update_time:d.updateTime||0})}),l=this.pb.encodeMsgCombineInfo({send_user_map:R,child:a},r.aesKey),h=this.st.deviceInfo.sdk_ver+"_"+r.type+"_"+r.aesKey,T.p?{fileName:h,fileBody:l}:new File([l],h)},s.prototype.getCombineMessageChild=function(r,i,a,o,l,h,R,w){var d=this,D=[],S=g(o.split("_"),2),y=S[0],k=S[1];r.messageList.forEach(function(b){var U=O.a.getInstance().crypto.generateNonce(),z="0",P=(1<l&&(U=b.cbID.replace(b.cbID.substring(8),h.substring(8)),z=b.parentID=="0"?h:b.parentID.replace(z.substring(8),h.substring(8))),{msg_type:b.type,msg:d.encodeMsgBody(b,!1,!1),sender_user_id:b.senderUserID,msg_time:b.timestamp,cb_id:U,root_id:k,real_root_id:k,parent_id:z,is_server:b.isServerMessage?1:0,root_conv_type:y,root_send_user_id:R,root_conv_id:w});(P=(b.subType&&(P.sub_type=b.subType),b.searchedContent&&(P.searched_content=b.searchedContent),b.extendedData&&(P.extended_data=b.extendedData),b.type==_.c.MessageType.Combine&&b.messageList&&0<b.messageList.length&&d.getCombineMessageChild(b,i,a,o,l+1,U,R,w),a.add(b.senderUserID),i.push(P),JSON.parse(JSON.stringify(b)))).rootID=o,P.cbID=U,P.parentID=z,P.type==_.c.MessageType.Combine&&(P.combineID=P.cbID+"-"+o+"-"+d.convID),D.push(P)}),r.messageList=D},s.prototype.batchFetchMsgList=function(r,i,a){var o=this;return i===void 0&&(i=!1),a===void 0&&(a=!1),new Promise(function(l){var h=o.convType==_.c.ConversationType.Room,R=o.dbConv.deletedMsgMaxSeq||0,w=o.dbConv.deletedMsgSeqs||[],d=((r=h?r:r.filter(function(D){return R<D&&w.indexOf(D)==-1})).sort(function(D,S){return D-S}),new Map);if(Object.values(o.msgCaches).forEach(function(D){D&&D.length&&D.forEach(function(S){var y=S.messageSeq;r.indexOf(y)!=-1&&d.set(y,S)})}),d.size==r.length)return l(d);o.dbMgr.getMessageListBySeqs(o.convID,o.convType,r).then(function(D){if(D.size==r.length||h)return l(D);var S=r.filter(function(y){return!D.has(y)}).map(function(y){return{cur_list_seq:y-1,count:1}});S={conv_id:o.convID,how:_.n.B,degree:1,reqs:S},o.cnMgr.send(_.d["msg_fetch_"+o.convType],S).then(function(y){var k=[];y.msgs||(y.msgs=[]),y.msgs.forEach(function(b){var U=b.msg_svr_info.conv_msg_seq;D.has(U)||r.indexOf(U)==-1||(b=o.transform2Message(b,!0),k.push(b),D.set(U,b))}),o.saveMsgRepliedInfo(D,!1,!1),i&&(y=r.filter(function(b){return!D.has(b)}),o.checkReplyMsgChange(y,a,!1)),o.updateMsgCacheList(k),l(D)})})})},s.prototype.checkReplyMsgChange=function(r,i,a){var o=this;this.dbMgr.getReplyMessageListBySeqs(this.convID,this.convType,r,0).then(function(l){var h;l.length&&(i&&o.bus.emit(_.m.MsgRepliedInfo,{messageList:l}),a)&&(h=[],l.forEach(function(R){var w;R.repliedInfo&&R.repliedInfo.rootMessageSeq==R.repliedInfo.messageSeq&&(w=o.econf.msgExtraMap.get(o.getMsgExtraKey(R.repliedInfo.rootMessageSeq)))&&!w.rootRepliedSender&&(w.rootRepliedState=_.c.MessageRepliedInfoState.Deleted,w.rootRepliedSender=R.repliedInfo.senderUserID,w.rootRepliedSentTime=R.repliedInfo.sentTime,h.push(w))}),h.length)&&o.dbMgr.addMessageExtraList(h)})},s.prototype.isMsgDel=function(r,i){var a=this.econf.user.deleteAllMsgTime||0,o=this.dbConv.deletedMsgMaxSeq||0,l=this.dbConv.deletedMsgSeqs||(this.dbConv.deletedMsgSeqs=[]);return r<=o||i<a||l.indexOf(r)!=-1},s.prototype.isMsgExist=function(r){return!this.isMsgDel(r,0)&&this.dbMgr.isMessageExist(this.convID,this.convType,r)},s.prototype.updateConvOrderKey=function(r){this.dbConv.orderKey=this.dbConv.isPinned?r+_.h.CONV_BASE_PIN:r},s.prototype.filterReceiptMemberMsg=function(r){if(this.convType==_.c.ConversationType.Group)return r.filter(function(i){return i.direction==_.c.MessageDirection.Send&&i.messageSeq&&i.receiptStatus&&i.receiptStatus<_.c.MessageReceiptStatus.Expired})},s.prototype.mergeMessageExtra=function(r,i,a,o,l,h){if(this.convType==_.c.ConversationType.Room||!r.messageSeq||r.isUserInserted||r.sentStatus!=_.c.MessageSentStatus.Success)return!1;var R=!1,w=r.messageSeq,d=this.econf.msgExtraMap.get(this.getMsgExtraKey(w)),D=(h=h?h.conversationSeq==w:d&&d.convReceipt,d&&d.receiptStatus),S=d&&d.reactions,y=d&&d.revokeInfo&&JSON.parse(d.revokeInfo);if(r.receiptStatus==_.c.MessageReceiptStatus.Processing&&(this.convType==_.c.ConversationType.Peer&&(r.direction==_.c.MessageDirection.Send&&w<=a||r.direction==_.c.MessageDirection.Receive&&w<=o)&&(r.receiptStatus=_.c.MessageReceiptStatus.Done,R=!0),r.receiptStatus==_.c.MessageReceiptStatus.Processing)&&D&&!h&&(r.receiptStatus=D,R=!0),a=this.convType==_.c.ConversationType.Peer?r.c2cSeq:w,r.receiptStatus==_.c.MessageReceiptStatus.Processing&&l&&a&&a<=l&&(r.receiptStatus=_.c.MessageReceiptStatus.Expired,R=!0,d)&&(d.receiptStatus=r.receiptStatus),S){var k,b=[];for(k in S){var U=S[k];b.push({conversationID:r.conversationID,conversationType:r.conversationType,messageID:r.messageID,userList:U.userList,totalCount:U.totalCount,reactionType:k,isSelfIncluded:U.isSelfIncluded})}(r.reactions=b).length&&(R=!0)}return r.type==_.c.MessageType.Revoke&&y&&y.originalTextMessageContent&&(r.originalTextMessageContent=y.originalTextMessageContent,R=!0),(o=r.repliedInfo&&r.repliedInfo.messageInfo?r.repliedInfo.messageSeq:0)&&r.repliedInfo?r.repliedInfo.messageInfo&&this.isMsgDel(o,r.repliedInfo.sentTime)&&(r.repliedInfo.state=1,R=!0):i.length&&i.some(function(z){return z.conversationSeq==w&&z.rootRepliedCount>(r.rootRepliedCount||0)&&(r.rootRepliedCount=z.rootRepliedCount,R=!0)}),R},s.prototype.getReplyMsgEditSeq=function(r){return r&&(r.messageEditSeq||r.messageInfo.type==_.c.MessageType.Text||r.messageInfo.type==_.c.MessageType.Custom||r.messageInfo.type==_.c.MessageType.Multiple)?r.messageSeq:0},s.prototype.copyMsgObj=function(r,i){i===void 0&&(i=!1);var a=JSON.parse(JSON.stringify(r));if(r.type>=_.c.MessageType.Image&&r.type<=_.c.MessageType.Video)a.fileLocalPath=i?"":r.fileLocalPath;else if(r.type==_.c.MessageType.Multiple)for(var o=0;o<r.messageInfoList.length;o++){var l=r.messageInfoList[o];l.type>=_.c.MessageType.Image&&l.type<=_.c.MessageType.Video&&(a.messageInfoList[o].fileLocalPath=i?"":l.fileLocalPath)}return a},s.prototype.clearMsgObjFile=function(r){if(r.type>=_.c.MessageType.Image&&r.type<=_.c.MessageType.Video)r.fileLocalPath="";else if(r.type==_.c.MessageType.Multiple)for(var i=0;i<r.messageInfoList.length;i++){var a=r.messageInfoList[i];a.type>=_.c.MessageType.Image&&a.type<=_.c.MessageType.Video&&(r.messageInfoList[i].fileLocalPath="")}},s);function s(r,i,a,o,l){this.lg=O.a.getInstance().lg,this.dr=O.a.getInstance().dr,this.pb=O.a.getInstance().pb,this.st=O.a.getInstance().st,this.lastSendTime=0,this.dbConv={},this.mergeMsgListSeq=0,this.msgCaches={},this.auditErrorCodes=[6000001,6000104,6000105,6000211,c,6000221,6000222,6000230,6000231],this.dbConv.conversationID=r,this.convID=r,this.econf=i,this.bus=a,this.dbMgr=o,this.cnMgr=l}},function(te,j,C){te.exports=(O=>{for(var T=O,_=T.lib.BlockCipher,E=T.algo,g=[],x=[],A=[],m=[],f=[],c=[],u=[],s=[],r=[],i=[],a=[],o=0;o<256;o++)a[o]=o<128?o<<1:o<<1^283;var l=0,h=0;for(o=0;o<256;o++){var R=h^h<<1^h<<2^h<<3^h<<4,w=a[x[g[l]=R=R>>>8^255&R^99]=l],d=a[w],D=a[d],S=257*a[R]^16843008*R;A[l]=S<<24|S>>>8,m[l]=S<<16|S>>>16,f[l]=S<<8|S>>>24,c[l]=S,u[R]=(S=16843009*D^65537*d^257*w^16843008*l)<<24|S>>>8,s[R]=S<<16|S>>>16,r[R]=S<<8|S>>>24,i[R]=S,l?(l=w^a[a[a[D^w]]],h^=a[a[h]]):l=h=1}var y=[0,1,2,4,8,16,32,64,128,27,54];return E=E.AES=_.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var k=this._keyPriorReset=this._key,b=k.words,U=k.sigBytes/4,z=4*(1+(this._nRounds=6+U)),P=this._keySchedule=[],H=0;H<z;H++)H<U?P[H]=b[H]:(L=P[H-1],H%U?6<U&&H%U==4&&(L=g[L>>>24]<<24|g[L>>>16&255]<<16|g[L>>>8&255]<<8|g[255&L]):(L=g[(L=L<<8|L>>>24)>>>24]<<24|g[L>>>16&255]<<16|g[L>>>8&255]<<8|g[255&L],L^=y[H/U|0]<<24),P[H]=P[H-U]^L);for(var Q=this._invKeySchedule=[],J=0;J<z;J++){var L;H=z-J,L=J%4?P[H]:P[H-4],Q[J]=J<4||H<=4?L:u[g[L>>>24]]^s[g[L>>>16&255]]^r[g[L>>>8&255]]^i[g[255&L]]}}},encryptBlock:function(k,b){this._doCryptBlock(k,b,this._keySchedule,A,m,f,c,g)},decryptBlock:function(k,b){var U=k[b+1];k[b+1]=k[b+3],k[b+3]=U,this._doCryptBlock(k,b,this._invKeySchedule,u,s,r,i,x),U=k[b+1],k[b+1]=k[b+3],k[b+3]=U},_doCryptBlock:function(k,b,U,z,P,H,Q,J){for(var L=this._nRounds,q=k[b]^U[0],B=k[b+1]^U[1],Y=k[b+2]^U[2],K=k[b+3]^U[3],ee=4,oe=1;oe<L;oe++){var ae=z[q>>>24]^P[B>>>16&255]^H[Y>>>8&255]^Q[255&K]^U[ee++],X=z[B>>>24]^P[Y>>>16&255]^H[K>>>8&255]^Q[255&q]^U[ee++],re=z[Y>>>24]^P[K>>>16&255]^H[q>>>8&255]^Q[255&B]^U[ee++],ie=z[K>>>24]^P[q>>>16&255]^H[B>>>8&255]^Q[255&Y]^U[ee++];q=ae,B=X,Y=re,K=ie}ae=(J[q>>>24]<<24|J[B>>>16&255]<<16|J[Y>>>8&255]<<8|J[255&K])^U[ee++],X=(J[B>>>24]<<24|J[Y>>>16&255]<<16|J[K>>>8&255]<<8|J[255&q])^U[ee++],re=(J[Y>>>24]<<24|J[K>>>16&255]<<16|J[q>>>8&255]<<8|J[255&B])^U[ee++],ie=(J[K>>>24]<<24|J[q>>>16&255]<<16|J[B>>>8&255]<<8|J[255&Y])^U[ee++],k[b]=ae,k[b+1]=X,k[b+2]=re,k[b+3]=ie},keySize:8}),T.AES=_._createHelper(E),O.AES})(C(5),(C(95),C(7),C(24),C(98)))},function(te,j,C){C.d(j,"b",function(){return T}),C.d(j,"a",function(){return _});var O={0:"Success.",1:"Failed.",6000001:"The incoming parameter is invalid.",6000002:"The SDK is not initialized.",6000003:"Invalid AppID.",6000004:"Trigger SDK internal frequency limit.",6000005:"Trigger background service frequency limit.",6000006:"Switch server internal error.",6000007:"ZIM service internal error.",6000010:"Failed to upload log.",6000011:"User is not exist.",6000012:"Trigger frequency limit when querying user information.",6000013:"Unsupported request.",6000014:"The ZIM service is being activated for you, please try again in five minutes.",6000015:"Exceed DAU limit.",6000016:"Exceed MAU limit.",6000101:"Login failed.",6000102:"Login failed due to background service.",6000103:"Token is invalid.",6000104:"Network error.",6000105:"Request timeout.",6000106:"Token expired.",6000107:"Token version number is wrong.",6000108:"Token duration is too short.",6000109:"Token duration is too long.",6000111:"User has already logged in.",6000121:"User is not logged in.",6000201:"Internal error sending message.",6000202:"Error sending message background service.",6000203:"Message sending failed.",6000204:"The message target does not exist.",6000205:"Message editing failed.",6000211:"File is not exist.",6000212:"File server internal error.",6000213:"File type is not supported.",6000214:"File size is invalid.",6000215:"File duration is invalid.",6000221:"Failed to pass security audit.",6000222:"Security audit failed.",6000230:"Failed to pass custom security audit.",6000270:"Call invitation failed.",6000271:"Failed to cancel call invitation.",6000272:"Failed to initiate call invitation service.",6000273:"The non-initiator cancel the call invitation.",6000274:"Uninvited users.",6000275:"CallID already exists.",6000276:"CallID does not exist.",6000277:"Receipt error.",6000278:"Revoke time is exceed.",6000279:"The message has been revoked.",6000280:"The message reaction type exist.",6000281:"The user invited by the call does not exist.",6000282:"The number of message receipts exceeds the limit.",6000283:"User is already in call.",6000284:"Sender in blacklist.",6000285:"There is no operation permission for message-related interfaces.",6000286:"Edit time is exceed.",6000301:"Internal error in room.",6000302:"Error in room service.",6000303:"Failed to create room.",6000304:"Failed to join room.",6000306:"Failed to leave the room.",6000310:"Failed to query room members.",6000311:"Failed to query room members.",6000321:"The user is not in the room.",6000322:"Room does not exist.",6000323:"Room already exist.",6000324:"The maximum number of rooms can exist at the same time.",6000325:"The number of rooms a user can join at the same time has reached the upper limit.",6000330:"Internal error in room attributes.",6000331:"Failed to operate room attributes.",6000333:"Failed to query room attributes.",6000334:"The number of room attributes exceeds limit.",6000335:"The key length of room attribute exceeds limit.",6000336:"The value length of room attribute exceeds limit.",6000337:"The total value length of the room attributes exceeds limit.",6000350:"Internal error in room member attributes.",6000351:"The total length of room member attributes exceeds limit.",6000352:"The key length of room member attribute exceeds limit.",6000353:"The value length of room member attributes exceeds limit.",6000357:"The member number of room member attributes exceeds limit.",6000501:"Internal error in group.",6000502:"Error in group service.",6000503:"Failed to create group.",6000504:"Failed to dismiss group.",6000505:"Failed to join group.",6000506:"Failed to leave group.",6000507:"Failed to kick group member.",6000508:"Failed to invite user to group.",6000509:"Failed to transfer group owner.",6000510:"Failed to update group information.",6000511:"Failed to query group information.",6000512:"Failed to operate group attributes.",6000513:"Failed to query group attributes.",6000514:"Failed to update group member information.",6000515:"Failed to query group member information.",6000516:"Failed to query group list.",6000517:"Failed to query group member list.",6000521:"User is not in group.",6000522:"User is already in the group.",6000523:"Group does not exist.",6000524:"Group already exists.",6000525:"The group members have reached the limit.",6000526:"Group attribute does not exist.",6000527:"Cannot create group after dismissed.",6000531:"The number of group attributes exceeds limit.",6000532:"The key length of group attribute exceeds limit.",6000533:"The value length of group attribute exceeds limit.",6000534:"The total value length of the group attributes exceeds limit.",6000541:"There is no operation permission for group-related interfaces.",6000542:"Not allowed to join the group.",6000543:"Need to apply to join the group.",6000544:"Need to be invited to apply into the group.",6000601:"Internal error in conversation.",6000602:"Error in conversation service.",6000603:"Conversation does not exist.",6000604:"The number of pinned conversations has reached the upper limit.",106120:"The number of single pass conversations states exceeds the limit.",106121:"There are conversations with duplicate settings.",106122:"Peer id is empty",106123:"Not allowed to set oneself",106124:"Already set c2c mute",106125:"Already cancel c2c mute",106126:"The number of undisturbed conversations exceeds the limit."},T=function(E,g,x){return g=x&&String(x).indexOf("6000")==-1?(E=(A=>{switch(A){case 50012:return 6000121;case 100002:case 100003:case 100004:case 50013:case 50014:case 104002:case 104008:return 6000001;case 50008:case 103019:case 100017:case 103020:case 103034:case 103041:case 103042:case 103044:case 103016:case 103017:case 108050:return 6000005;case 102002:return 6000016;case 102003:return 6000015;case 100018:return 6000012;case 100021:case 100043:return 6000013;case 50001:case 50002:case 50003:case 50004:case 50005:case 50007:case 50009:case 50101:case 50102:case 50105:case 50106:case 50107:case 50108:case 50110:return 6000006;case 50111:return 6000103;case 100001:case 102001:case 100005:case 100006:case 100007:case 100008:case 100009:case 100010:case 100011:case 101001:case 101002:case 101003:case 101004:return 6000007;case 105e3:case 105004:case 103033:return 6000011;case 103035:return 6000320;case 103015:case 103001:return 6000321;case 103021:return 6000322;case 103032:return 6000323;case 103050:return 6000311;case 103018:return 6000324;case 103010:return 6000325;case 103022:return 6000334;case 103023:return 6000335;case 103024:return 6000336;case 103025:return 6000337;case 103039:return 6000352;case 103040:return 6000353;case 103038:return 6000351;case 103045:return 6000357;case 107003:return 6000271;case 107004:return 6000272;case 107005:case 61002:case 61003:return 6000276;case 107006:case 107007:return 6000272;case 107012:return 6000273;case 107014:return 6000274;case 107019:return 6000275;case 107026:return 6000281;case 104014:return 6000285;case 104012:return 6000286;case 111101:return 6000230;case 108065:case 108066:return 6000231;case 111003:case 111006:case 111007:return 6000221;case 111002:case 111004:case 111005:return 6000222;case 61004:return 6000272;case 109001:return 6000204;case 108054:case 106019:return 6000277;case 100039:return 6000282;case 107025:return 6000283;case 106022:return 6000604;case 100015:case 110002:case 110003:case 110005:case 110006:case 110007:case 110008:case 110009:case 110010:case 110011:case 110012:case 110013:case 110014:case 110015:return 6000212;case 110004:return 6000211;case 110016:case 110019:case 110021:case 110023:return 6000213;case 110017:case 110020:case 110022:case 110024:return 6000214;case 110018:return 6000215;case 108035:case 108051:return 6000521;case 108003:case 108074:case 108080:case 108081:return 6000541;case 108072:return 6000542;case 108073:return 6000543;case 108040:return 6000531;case 108041:return 6000532;case 108042:return 6000533;case 108037:return 6000522;case 108038:case 108039:return 6000514;case 108043:return 6000524;case 108060:return 6000527;case 108044:case 106011:return 6000523;case 108046:return 6000526;case 108049:return 6000525;case 100012:return 6000278;case 100013:return 6000279;case 100022:return 6000278;case 100037:return 6000280;case 106024:case 106025:case 106026:case 106027:case 106030:case 106034:case 106033:case 106036:case 106039:case 106103:return 6000001;case 106032:return 6000801;case 106035:return 6000802;case 106031:return 6000803;case 106112:return 6000284;case 106101:return 6000804;case 106102:return 6000805;case 106105:return 6000815;case 106106:return 6000816;case 106110:return 6000806;case 106111:return 6000807;case 106104:return 6000808;case 106028:return 6000810;default:return 0}})(x)||E,"code: "+x+", message: "+(g||O[E])):!g||E!=6000121&&E!=6000104&&E!=6000105?g||O[E]:g+": "+O[E],{code:E=x&&String(x).indexOf("6000")==0?x:E,message:g}},_=function(E){return!!E&&(E==6000104||E==6000105)}},function(te,j,C){te.exports=C(5).enc.Hex},function(te,j,C){te.exports=C(5).enc.Utf8},function(te,j,C){C.d(j,"a",function(){return T}),C.d(j,"b",function(){return f});var O=C(21),T=(_.prototype.toString=function(o){if(this.s<0)return"-"+this.negate().toString(o);var l;if(o==16)l=4;else if(o==8)l=3;else if(o==2)l=1;else if(o==32)l=5;else{if(o!=4)return this.toRadix(o);l=2}var h,R=(1<<l)-1,w=!1,d="",D=this.t,S=this.DB-D*this.DB%l;if(0<D--)for(S<this.DB&&0<(h=this[D]>>S)&&(w=!0,d=Object(O.a)(h));0<=D;)S<l?(h=(this[D]&(1<<S)-1)<<l-S,h|=this[--D]>>(S+=this.DB-l)):(h=this[D]>>(S-=l)&R,S<=0&&(S+=this.DB,--D)),(w=0<h||w)&&(d+=Object(O.a)(h));return w?d:"0"},_.prototype.negate=function(){var o=m();return _.ZERO.subTo(this,o),o},_.prototype.abs=function(){return this.s<0?this.negate():this},_.prototype.compareTo=function(o){var l=this.s-o.s;if(l!=0)return l;var h=this.t;if((l=h-o.t)!=0)return this.s<0?-l:l;for(;0<=--h;)if((l=this[h]-o[h])!=0)return l;return 0},_.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+a(this[this.t-1]^this.s&this.DM)},_.prototype.mod=function(o){var l=m();return this.abs().divRemTo(o,null,l),this.s<0&&0<l.compareTo(_.ZERO)&&o.subTo(l,l),l},_.prototype.modPowInt=function(o,l){return l=new(o<256||l.isEven()?E:x)(l),this.exp(o,l)},_.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},_.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},_.prototype.copyTo=function(o){for(var l=this.t-1;0<=l;--l)o[l]=this[l];o.t=this.t,o.s=this.s},_.prototype.fromInt=function(o){this.t=1,this.s=o<0?-1:0,0<o?this[0]=o:o<-1?this[0]=o+this.DV:this.t=0},_.prototype.fromString=function(o,l){var h;if(l==16)h=4;else if(l==8)h=3;else if(l==256)h=8;else if(l==2)h=1;else if(l==32)h=5;else{if(l!=4)return void this.fromRadix(o,l);h=2}this.t=0,this.s=0;for(var R=o.length,w=!1,d=0;0<=--R;){var D=h==8?255&+o[R]:r(o,R);D<0?o.charAt(R)=="-"&&(w=!0):(w=!1,d==0?this[this.t++]=D:d+h>this.DB?(this[this.t-1]|=(D&(1<<this.DB-d)-1)<<d,this[this.t++]=D>>this.DB-d):this[this.t-1]|=D<<d,(d+=h)>=this.DB&&(d-=this.DB))}h==8&&(128&+o[0])!=0&&(this.s=-1,0<d)&&(this[this.t-1]|=(1<<this.DB-d)-1<<d),this.clamp(),w&&_.ZERO.subTo(this,this)},_.prototype.clamp=function(){for(var o=this.s&this.DM;0<this.t&&this[this.t-1]==o;)--this.t},_.prototype.dlShiftTo=function(o,l){for(var h=this.t-1;0<=h;--h)l[h+o]=this[h];for(h=o-1;0<=h;--h)l[h]=0;l.t=this.t+o,l.s=this.s},_.prototype.drShiftTo=function(o,l){for(var h=o;h<this.t;++h)l[h-o]=this[h];l.t=Math.max(this.t-o,0),l.s=this.s},_.prototype.lShiftTo=function(o,l){for(var h=o%this.DB,R=this.DB-h,w=(1<<R)-1,d=Math.floor(o/this.DB),D=this.s<<h&this.DM,S=this.t-1;0<=S;--S)l[S+d+1]=this[S]>>R|D,D=(this[S]&w)<<h;for(S=d-1;0<=S;--S)l[S]=0;l[d]=D,l.t=this.t+d+1,l.s=this.s,l.clamp()},_.prototype.rShiftTo=function(o,l){l.s=this.s;var h=Math.floor(o/this.DB);if(h>=this.t)l.t=0;else{var R=o%this.DB,w=this.DB-R,d=(1<<R)-1;l[0]=this[h]>>R;for(var D=h+1;D<this.t;++D)l[D-h-1]|=(this[D]&d)<<w,l[D-h]=this[D]>>R;0<R&&(l[this.t-h-1]|=(this.s&d)<<w),l.t=this.t-h,l.clamp()}},_.prototype.subTo=function(o,l){for(var h=0,R=0,w=Math.min(o.t,this.t);h<w;)R+=this[h]-o[h],l[h++]=R&this.DM,R>>=this.DB;if(o.t<this.t){for(R-=o.s;h<this.t;)R+=this[h],l[h++]=R&this.DM,R>>=this.DB;R+=this.s}else{for(R+=this.s;h<o.t;)R-=o[h],l[h++]=R&this.DM,R>>=this.DB;R-=o.s}l.s=R<0?-1:0,R<-1?l[h++]=this.DV+R:0<R&&(l[h++]=R),l.t=h,l.clamp()},_.prototype.multiplyTo=function(o,l){var h=this.abs(),R=o.abs(),w=h.t;for(l.t=w+R.t;0<=--w;)l[w]=0;for(w=0;w<R.t;++w)l[w+h.t]=h.am(0,R[w],l,w,0,h.t);l.s=0,l.clamp(),this.s!=o.s&&_.ZERO.subTo(l,l)},_.prototype.squareTo=function(o){for(var l=this.abs(),h=o.t=2*l.t;0<=--h;)o[h]=0;for(h=0;h<l.t-1;++h){var R=l.am(h,l[h],o,2*h,0,1);(o[h+l.t]+=l.am(h+1,2*l[h],o,2*h+1,R,l.t-h-1))>=l.DV&&(o[h+l.t]-=l.DV,o[h+l.t+1]=1)}0<o.t&&(o[o.t-1]+=l.am(h,l[h],o,2*h,0,1)),o.s=0,o.clamp()},_.prototype.divRemTo=function(o,l,h){if(!((k=o.abs()).t<=0)){var R=this.abs();if(R.t<k.t)l!=null&&l.fromInt(0),h!=null&&this.copyTo(h);else{h==null&&(h=m());var w=m(),d=this.s,D=(o=o.s,this.DB-a(k[k.t-1])),S=(0<D?(k.lShiftTo(D,w),R.lShiftTo(D,h)):(k.copyTo(w),R.copyTo(h)),w.t),y=w[S-1];if(y!=0){var k=y*(1<<this.F1)+(1<S?w[S-2]>>this.F2:0),b=this.FV/k,U=(1<<this.F1)/k,z=1<<this.F2,P=h.t,H=P-S,Q=l??m();for(w.dlShiftTo(H,Q),0<=h.compareTo(Q)&&(h[h.t++]=1,h.subTo(Q,h)),_.ONE.dlShiftTo(S,Q),Q.subTo(w,w);w.t<S;)w[w.t++]=0;for(;0<=--H;){var J=h[--P]==y?this.DM:Math.floor(h[P]*b+(h[P-1]+z)*U);if((h[P]+=w.am(0,J,h,H,0,S))<J)for(w.dlShiftTo(H,Q),h.subTo(Q,h);h[P]<--J;)h.subTo(Q,h)}l!=null&&(h.drShiftTo(S,l),d!=o)&&_.ZERO.subTo(l,l),h.t=S,h.clamp(),0<D&&h.rShiftTo(D,h),d<0&&_.ZERO.subTo(h,h)}}}},_.prototype.invDigit=function(){var o,l;return this.t<1||(1&(o=this[0]))==0?0:0<(l=(l=(l=(l=(l=3&o)*(2-(15&o)*l)&15)*(2-(255&o)*l)&255)*(2-((65535&o)*l&65535))&65535)*(2-o*l%this.DV)%this.DV)?this.DV-l:-l},_.prototype.isEven=function(){return(0<this.t?1&this[0]:this.s)==0},_.prototype.exp=function(o,l){if(4294967295<o||o<1)return _.ONE;var h,R=m(),w=m(),d=l.convert(this),D=a(o)-1;for(d.copyTo(R);0<=--D;)l.sqrTo(R,w),0<(o&1<<D)?l.mulTo(w,d,R):(h=R,R=w,w=h);return l.revert(R)},_.prototype.chunkSize=function(o){return Math.floor(Math.LN2*this.DB/Math.log(o))},_.prototype.toRadix=function(o){if(o==null&&(o=10),this.signum()==0||o<2||36<o)return"0";var l=this.chunkSize(o),h=Math.pow(o,l),R=i(h),w=m(),d=m(),D="";for(this.divRemTo(R,w,d);0<w.signum();)D=(h+d.intValue()).toString(o).substr(1)+D,w.divRemTo(R,w,d);return d.intValue().toString(o)+D},_.prototype.fromRadix=function(o,l){this.fromInt(0);for(var h=this.chunkSize(l=l??10),R=Math.pow(l,h),w=!1,d=0,D=0,S=0;S<o.length;++S){var y=r(o,S);y<0?o.charAt(S)=="-"&&this.signum()==0&&(w=!0):(D=l*D+y,++d>=h&&(this.dMultiply(R),this.dAddOffset(D,0),D=d=0))}0<d&&(this.dMultiply(Math.pow(l,d)),this.dAddOffset(D,0)),w&&_.ZERO.subTo(this,this)},_.prototype.dMultiply=function(o){this[this.t]=this.am(0,o-1,this,0,0,this.t),++this.t,this.clamp()},_.prototype.dAddOffset=function(o,l){if(o!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=o;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}},_);function _(o,l){o!=null&&(l==null&&typeof o!="string"?this.fromString(o,256):this.fromString(o,l))}g.prototype.convert=function(o){return o.s<0||0<=o.compareTo(this.m)?o.mod(this.m):o},g.prototype.revert=function(o){return o},g.prototype.reduce=function(o){o.divRemTo(this.m,null,o)},g.prototype.mulTo=function(o,l,h){o.multiplyTo(l,h),this.reduce(h)},g.prototype.sqrTo=function(o,l){o.squareTo(l),this.reduce(l)};var E=g;function g(o){this.m=o}A.prototype.convert=function(o){var l=m();return o.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),o.s<0&&0<l.compareTo(T.ZERO)&&this.m.subTo(l,l),l},A.prototype.revert=function(o){var l=m();return o.copyTo(l),this.reduce(l),l},A.prototype.reduce=function(o){for(;o.t<=this.mt2;)o[o.t++]=0;for(var l=0;l<this.m.t;++l){var h=32767&o[l],R=h*this.mpl+((h*this.mph+(o[l]>>15)*this.mpl&this.um)<<15)&o.DM;for(o[h=l+this.m.t]+=this.m.am(0,R,o,l,0,this.m.t);o[h]>=o.DV;)o[h]-=o.DV,o[++h]++}o.clamp(),o.drShiftTo(this.m.t,o),0<=o.compareTo(this.m)&&o.subTo(this.m,o)},A.prototype.mulTo=function(o,l,h){o.multiplyTo(l,h),this.reduce(h)},A.prototype.sqrTo=function(o,l){o.squareTo(l),this.reduce(l)};var x=A;function A(o){this.m=o,this.mp=o.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<o.DB-15)-1,this.mt2=2*o.t}function m(){return new T(null)}function f(o,l){return new T(o,l)}C=(j=typeof navigator<"u")&&navigator.appName=="Microsoft Internet Explorer"?(T.prototype.am=function(o,l,h,R,w,d){for(var D=32767&l,S=l>>15;0<=--d;){var y=32767&this[o],k=this[o++]>>15,b=S*y+k*D;w=((y=D*y+((32767&b)<<15)+h[R]+(1073741823&w))>>>30)+(b>>>15)+S*k+(w>>>30),h[R++]=1073741823&y}return w},30):j&&navigator.appName!="Netscape"?(T.prototype.am=function(o,l,h,R,w,d){for(;0<=--d;){var D=l*this[o++]+h[R]+w;w=Math.floor(D/67108864),h[R++]=67108863&D}return w},26):(T.prototype.am=function(o,l,h,R,w,d){for(var D=16383&l,S=l>>14;0<=--d;){var y=16383&this[o],k=this[o++]>>14,b=S*y+k*D;w=((y=D*y+((16383&b)<<14)+h[R]+w)>>28)+(b>>14)+S*k,h[R++]=268435455&y}return w},28);for(var c=(T.prototype.DB=C,T.prototype.DM=(1<<C)-1,T.prototype.DV=1<<C,T.prototype.FV=Math.pow(2,52),T.prototype.F1=52-C,T.prototype.F2=2*C-52,[]),u=48,s=0;s<=9;++s)c[u++]=s;for(u=97,s=10;s<36;++s)c[u++]=s;for(u=65,s=10;s<36;++s)c[u++]=s;function r(o,l){return(o=c[o.charCodeAt(l)])==null?-1:o}function i(o){var l=m();return l.fromInt(o),l}function a(o){var l,h=1;return(l=o>>>16)!=0&&(o=l,h+=16),(l=o>>8)!=0&&(o=l,h+=8),(l=o>>4)!=0&&(o=l,h+=4),(l=o>>2)!=0&&(o=l,h+=2),(l=o>>1)!=0&&(o=l,h+=1),h}T.ZERO=i(0),T.ONE=i(1)},function(te,j,C){C.d(j,"a",function(){return m});var O,T=C(2),_=C(1),E=C(0),g=function(){return(g=Object.assign||function(c){for(var u,s=1,r=arguments.length;s<r;s++)for(var i in u=arguments[s])Object.prototype.hasOwnProperty.call(u,i)&&(c[i]=u[i]);return c}).apply(this,arguments)},x=((j=O=O||{}).mb="memberSeq",j.app="groupAppSeq",E.v.Group),A=6000001,m=(f.prototype.destroy=function(){this.cnMgr=null,this.bus=null,this.lg=null,this.st=null,this.econf=null,this.dbMgr=null,this.dbMbMap.clear()},f.prototype.setDBGroup=function(c,u){var s=this;this.dbApplyMap=c,u&&(this.dbGroup=u,this.dbGroup.mutedInfo||(this.dbGroup.mutedInfo={mode:0,expiredTime:0,roles:[]}),this.dbGroup.verifyInfo||(this.dbGroup.verifyInfo={joinMode:0,inviteMode:0,beInviteMode:0}),this.dbMbMap.size<3)&&this.dbMgr.getGroupMemberList(this.groupID).then(function(r){u.totalMemberCount||(u.totalMemberCount=r.filter(function(a){return!a.state}).length);var i=s.st.getRealClientTimestamp();r.forEach(function(a){a.muteExpiredTime!=-1&&a.muteExpiredTime<=i&&(a.muteExpiredTime=0),s.dbMbMap.set(a.userID,a)})})},f.prototype.create=function(c,u,s){var r=this,i={time:new Date,groupInfo:c,config:s,userIDs:u},a=[],o=(Array.isArray(u)&&(u=u.filter(function(R){return!!Object(_.n)(R)||(a.push({userID:R,reason:A}),!1)}),u=Array.from(new Set(u))),s.groupAttributes),l=Object.keys(o).map(function(R){return{key:R,value:o[R],seq:1}}),h={group_id:c.groupID||"",group_name:c.groupName||"",group_notice:s.groupNotice||"",group_avatar:Object(_.j)(c.groupAvatarUrl||""),user_ids:u,limit_info:{maxMemberCount:s.maxMemberCount,joinMode:s.joinMode,inviteMode:s.inviteMode,beInviteMode:s.beInviteMode},attributes:l};return this.cnMgr.send(E.d.gp_create,h).then(function(R){return R.code?(i.error=Object(_.y)(6000503,R.message,R.code),r.lg.w(x,E.u.CreateGroup,i),Promise.reject(i.error)):(R.error_users.forEach(function(w){return a.push(r.createErrorUser(w))}),r.groupID=R.group_id,r.dbGroup.groupID=r.groupID,r.dbGroup.totalMemberCount=R.member_count,R.attributes={attributes:l,seq:R.group_attribute_seq},R.group_name=c.groupName,R.group_notice=s.groupNotice,R.group_avatar=h.group_avatar,R.limit_info=h.limit_info,R=r.createGroupCallback(R),r.lg.i(x,E.u.CreateGroup,i),{groupInfo:r.createGroupFullInfo(),userList:R,errorUserList:a})})},f.prototype.join=function(c,u){var s=this,r=c?E.u.JoinGroup:E.u.SendGroupJoinApp,i={time:new Date,groupID:this.groupID},a={group_id:this.groupID,user_id:u==null?void 0:u.wording,offline_info:Object(_.f)(u==null?void 0:u.pushConfig)};return this.cnMgr.send(c?E.d.gp_enter:E.d.gp_apply,a).then(function(o){var l,h;return o.code?(i.error=Object(_.y)(6000505,o.message,o.code),s.lg.w(x,r,i),Promise.reject(i.error)):c&&o.group_list_seq||o.group_info&&o.group_info.group_id?(c||Object.assign(o,o.group_info),s.dbGroup.totalMemberCount=o.member_count,o.member.member_data.user_avatar||(o.member.member_data.user_avatar=s.econf.user.userAvatarUrl),o.op_user=g(g({},o.member.member_data),{user_id:o.member.user_id}),o.members=[o.member],l=s.joinGroupCallback(o,E.c.GroupMemberEvent.Joined,E.c.GroupEvent.Joined),s.lg.i(x,r,i),{groupInfo:l}):(o.apply_group_info&&o.apply_group_info.create_time&&(l={type:E.c.GroupApplicationType.Join,state:E.c.GroupApplicationState.Waiting,updateTime:o.apply_group_info.update_time,createTime:o.apply_group_info.create_time,wording:(u==null?void 0:u.wording)||"",seq:o.apply_group_info.base_info.update_time,groupInfo:{groupID:s.groupID,groupName:Object(_.g)(o.apply_group_info.base_info.user_name),groupAvatarUrl:Object(_.g)(o.apply_group_info.base_info.avatar)},applyUser:Object(_.u)(s.econf.user.userID,s.econf)},s.syncGroupApplyMap(l)?s.bus.emit(E.m.GroupAppUpd,{applicationList:[l]}):(h=E.c.GroupApplicationListChangeAction.Added,s.bus.emit(E.m.GroupAppList,{action:h,applicationList:[l]})),s.updateSeq(o.apply_group_info.apply_list_seq,O.app)),void s.lg.i(x,r,i))})},f.prototype.inviteUsers=function(c,u,s){var r=this,i=c?E.u.SendGroupInviteApps:E.u.InviteIntoGroup,a={time:new Date,groupID:this.groupID,userIDs:u},o=[],l=(u=u.filter(function(h){return!(!Object(_.n)(h)||h==r.econf.user.userID)||(o.push({userID:h,reason:A}),!1)}),u=Array.from(new Set(u)),s==null?void 0:s.wording);return s=c?{group_id:this.groupID,user_infos:u.map(function(h){return{key:h,value:l}}),offline_info:Object(_.f)(s==null?void 0:s.pushConfig)}:{group_id:this.groupID,user_ids:u},this.cnMgr.send(E.d.gp_invite,s).then(function(h){if(h.code)return a.error=Object(_.y)(6000508,h.message,h.code),r.lg.w(x,i,a),Promise.reject(a.error);r.dbGroup.totalMemberCount=h.member_count,h.error_users.forEach(function(b){return o.push(r.createErrorUser(b))});var R=r.checkSyncUsers(h,"inviteUse",!0),w=(R.length&&r.bus.emit(E.m.GroupMemberState,{groupID:r.groupID,state:E.c.GroupMemberState.Enter,event:E.c.GroupMemberEvent.Invited,userList:R,operatedInfo:r.createOwnerOperator()}),[]),d=[];if(h.apply_users&&h.apply_users.length){for(var D=[r.dbGroup.groupAppSeq||0],S=r.dbGroup.dataSeq,y={groupID:r.groupID,groupName:r.dbGroup.groupName,groupAvatarUrl:r.dbGroup.groupAvatarUrl},k=(h=(h.apply_users.forEach(function(b){D.push(b.apply_list_seq);var U={userID:b.base_info.user_id,userName:Object(_.g)(b.base_info.user_name),userAvatarUrl:Object(_.g)(b.base_info.avatar)};Object(_.x)(U,r.econf,b.base_info.update_time),b={type:E.c.GroupApplicationType.Invite,state:E.c.GroupApplicationState.Waiting,updateTime:b.update_time,createTime:b.create_time,wording:l||"",seq:S,groupInfo:y,applyUser:U},(r.checkGroupApplyCreateTime(b)?d:w).push(b),c||o.push({userID:U.userID,reason:6000544})}),r.syncGroupApplyMap(),r.dbMbMap.get(r.econf.user.userID)),c&&h&&h.memberRole<E.s.Member&&(w.length&&(h=E.c.GroupApplicationListChangeAction.Added,r.bus.emit(E.m.GroupAppList,{action:h,applicationList:w})),d.length)&&r.bus.emit(E.m.GroupAppUpd,{applicationList:d}),D.sort(function(b,U){return b-U}),0);k<D.length&&D[k]+1==D[k+1];k++);k&&r.updateSeq(D[k],O.app,!0)}return r.lg.i(x,i,a),c?{groupID:r.groupID,errorUserList:o}:{groupID:r.groupID,errorUserList:o,userList:R}})},f.prototype.kickMembers=function(c){var u=this,s={time:new Date,groupID:this.groupID,userIDs:c},r=[],i=(c=c.filter(function(a){return!!Object(_.n)(a)||(r.push({userID:a,reason:A}),!1)}),c=Array.from(new Set(c)),{group_id:this.groupID,user_ids:c});return this.cnMgr.send(E.d.gp_kickout,i).then(function(a){if(a.code)return s.error=Object(_.y)(6000507,a.message,a.code),u.lg.w(x,E.u.KickGroupMembers,s),Promise.reject(s.error);u.dbGroup.totalMemberCount=a.member_count;var o=[],l=[];return c.forEach(function(h){var R;a.error_users.some(function(w){return w.user_id===h})||(R=u.dbMbMap.get(h))&&(R.state=1,l.push(Object(_.t)(R,u.econf)),u.dbMbMap.set(h,R),o.push(R))}),c=l.map(function(h){return h.userID}),a.error_users.forEach(function(h){return r.push(u.createErrorUser(h))}),u.updateSeq(a.member_all_seq,O.mb),u.dbMgr.addGroupMemberList(u.groupID,o),u.bus.emit(E.m.GroupMemberState,{groupID:u.groupID,state:E.c.GroupMemberState.Quit,event:E.c.GroupMemberEvent.KickedOut,userList:l,operatedInfo:u.createOwnerOperator()}),u.lg.i(x,E.u.KickGroupMembers,s),{groupID:u.groupID,kickedUserIDs:c,errorUserList:r}})},f.prototype.transferOwner=function(c){var u=this,s={time:new Date,groupID:this.groupID,userID:c},r={group_id:this.groupID,group_name:c};return this.cnMgr.send(E.d.gp_owner_transfer,r).then(function(i){return i.code?(s.error=Object(_.y)(6000509,i.message,i.code),u.lg.w(x,E.u.TransferGroupOwner,s),Promise.reject(s.error)):(u.transferOwnerCallback([{userID:c,dataSeq:i.conv_msg_seq},{userID:u.econf.user.userID,dataSeq:i.conv_list_seq}]),u.lg.i(x,E.u.TransferGroupOwner,s),{groupID:u.groupID,toUserID:c})})},f.prototype.update=function(c,u){var s=this,r={time:new Date,type:u,value:c},i=[E.d.gp_mdf_notice,E.d.gp_mdf_name,E.d.gp_mdf_avatar][u],a=u==E.p.Avatar?{user_id:this.groupID,user_name:Object(_.j)(c)}:{group_id:this.groupID,group_name:c};return this.cnMgr.send(i,a).then(function(o){if(o.code)return r.error=Object(_.y)(6000510,o.message,o.code),s.lg.w(x,E.u.UpdateGroup,r),Promise.reject(r.error);s.mergeGroupData(o.conv_list_seq,u,c,s.createOwnerOperator()),s.lg.i(x,E.u.UpdateGroup,r)})},f.prototype.mute=function(c){var u=this,s={time:new Date,config:c},r=(c.duration=0|c.duration,c.mode),i=(r==E.c.GroupMuteMode.None||r==E.c.GroupMuteMode.All?c.roles=[]:r==E.c.GroupMuteMode.Normal&&(c.roles=[E.s.Member]),{group_id:this.groupID,duration:c.duration,is_all_forbid:r==E.c.GroupMuteMode.All,forbid_list:c.roles});return this.cnMgr.send(E.d.gp_set_forbid,i).then(function(a){var o;return a.code?(s.error=Object(_.y)(6000510,a.message,a.code),u.lg.w(x,E.u.MuteGroup,s),Promise.reject(s.error)):(o={mode:r,expiredTime:0<c.duration?a.conv_msg_seq:c.duration,roles:c.roles},u.mergeGroupData(a.conv_list_seq,E.p.Mute,o,u.createOwnerOperator()),u.lg.i(x,E.u.MuteGroup,s),{groupID:u.groupID,isMute:r!=E.c.GroupMuteMode.None,mutedInfo:o})})},f.prototype.query=function(){var c=this,u={time:new Date,groupID:this.groupID},s={group_id:this.groupID};return this.cnMgr.send(E.d.gp_data,s).then(function(r){var i=r.code;return i&&!Object(_.m)(i)?(u.error=Object(_.y)(6000511,r.message,i),c.lg.w(x,E.u.QueryGroup,u),Promise.reject(u.error)):(i||c.queryGroupInfoCallback(r),c.lg.i(x,E.u.QueryGroup,u),{groupInfo:c.createGroupFullInfo()})})},f.prototype.updateAttr=function(c){var u,s=this,r={time:new Date,groupID:this.groupID,params:c},i=[],a=E.o.Set,o=Array.isArray(c)?(a=E.o.Delete,u=E.u.DelGroupAttrs,c=c.filter(function(l){return!!Object(_.n)(l)||(i.push(l),!1)}),(c=Array.from(new Set(c))).map(function(l){return{key:l,value:""}})):(u=E.u.SetGroupAttr,Object.keys(c).map(function(l){return{key:l,value:c[l]}}));return o={group_id:this.groupID,attributes:{action:a,attributes:o}},this.cnMgr.send(E.d.gp_mdf_attr,o).then(function(l){return l.code?(r.error=Object(_.y)(6000512,l.message,l.code),s.lg.w(x,u,r),Promise.reject(r.error)):(s.mergeAttr(a,l.attributes,s.createOwnerOperator()),l.fail_keys.forEach(function(h){return i.push(h.key)}),s.lg.i(x,u,r),{groupID:s.groupID,errorKeys:i})})},f.prototype.queryAttr=function(c){var u=this,s={time:new Date,groupID:this.groupID,keys:c},r=this.dbGroup.attributes||{},i=(c||Object.keys(r)).map(function(a){return{key:a,seq:((a=r[a])==null?void 0:a.seq)||1}});return i={group_id:this.groupID,attributes:{seq:this.dbGroup.attributeSeq||0,attributes:i}},this.cnMgr.send(E.d.gp_attr,i).then(function(a){var o=a.code;return o&&!Object(_.m)(o)?(s.error=Object(_.y)(6000513,a.message,o),u.lg.w(x,E.u.QueryGroupAttrs,s),Promise.reject(s.error)):(o||u.mergeAttr(E.o.Query,a.attributes),u.lg.i(x,E.u.QueryGroupAttrs,s),{groupID:u.groupID,groupAttributes:u.createAttr(c)})})},f.prototype.updateAlias=function(c){var u=this,s={time:new Date},r={group_id:this.groupID,group_name:c};return this.cnMgr.send(E.d.gp_remark,r).then(function(i){var a;return i.code?(s.error=Object(_.y)(6000510,i.message,i.code),u.lg.w(x,E.u.UpdateGroupAlias,s),Promise.reject(s.error)):(a=u.dbGroup.groupAlias,u.syncGroupInfo({conversationAlias:c}),a!=c&&(a=u.econf.user.userID,u.bus.emit(E.m.GroupAlias,{groupID:u.groupID,groupAlias:c,operatedUserID:a})),u.dbMgr.updateUserSeq(i.conv_msg_seq,E.z.gp),u.lg.i(x,E.u.UpdateGroupAlias,s),{groupID:u.groupID,groupAlias:c})})},f.prototype.setMemberInfo=function(c,u,s){var r=this,i={time:new Date,userID:c,value:u},a=s==E.r.Nickname?E.d.gp_member_nickname:E.d.gp_member_role,o=s==E.r.Nickname?E.u.SetGroupMemberNickname:E.u.SetGroupMemberRole,l={group_id:this.groupID};return s==E.r.Nickname?(l.group_name=c,l.group_notice=u):(l.user_id=c,l.role=u),this.cnMgr.send(a,l).then(function(h){return h.code?(i.error=Object(_.y)(6000514,h.message,h.code),r.lg.w(x,o,i),Promise.reject(i.error)):(r.mergeMemberInfo(s,h.conv_list_seq,u,c),r.lg.i(x,o,i),s==E.r.Nickname?{groupID:r.groupID,forUserID:c,nickname:u}:{groupID:r.groupID,forUserID:c,role:u})})},f.prototype.queryMemberInfo=function(c){var u=this,s={time:new Date,groupID:this.groupID,userID:c},r={group_id:this.groupID,user_id:c};return this.cnMgr.send(E.d.gp_member_data,r).then(function(i){var a,o=i.code;return o&&!Object(_.m)(o)?(s.error=Object(_.y)(6000515,i.message,o),u.lg.w(x,E.u.QueryGroupMember,s),Promise.reject(s.error)):(a=u.dbMbMap.get(c)||{userID:c},o||(o=u.st.getRealClientTimestamp(),a=u.createDBMember(i.member,o),u.dbMgr.addGroupMemberList(u.groupID,[a])),u.lg.i(x,E.u.QueryGroupMember,s),{groupID:u.groupID,userInfo:Object(_.t)(a,u.econf)})})},f.prototype.queryMemberList=function(c){var u=this;return new Promise(function(s,r){var i={time:new Date,groupID:u.groupID,config:c};u.isFullMembers&&u.dbGroup.totalMemberCount==u.getDBMemberCount()?u.queryMembersCallback(c,!1,null,i,s,r):u.mergeSvrMemberList(E.n.B,function(a){u.queryMembersCallback(c,!1,a,i,s,r)})})},f.prototype.queryMemberCount=function(){var c={groupID:this.groupID,count:this.dbGroup.totalMemberCount};return this.lg.i(x,E.u.QueryGroupMemberCount,c),Promise.resolve(c)},f.prototype.muteMembers=function(c,u,s){var r,i,a=this;return c&&(!s||s<-1)?Promise.reject({code:A,message:"The config instance of duration: "+s+" is invalid."}):(r={time:new Date,groupID:this.groupID},s=c?0|s:0,i=[],u=u.filter(function(o){return!!Object(_.n)(o)||(i.push({userID:o,reason:A}),!1)}),u=Array.from(new Set(u)),u={call_id:this.groupID,user_ids:u,timeout:s},this.cnMgr.send(E.d.gp_member_forbid,u).then(function(o){if(o.code)return r.error=Object(_.y)(6000514,o.message,o.code),a.lg.w(x,E.u.MuteGroupMembers,r),Promise.reject(r.error);o.error_users.forEach(function(h){return i.push(a.createErrorUser(h))});var l=a.st.getRealClientTimestamp();return o=o.members.map(function(h){return a.createDBMember(h,l)}),a.dbMgr.addGroupMemberList(a.groupID,o),a.bus.emit(E.m.GroupMemberInfo,{groupID:a.groupID,userList:o.map(function(h){return Object(_.t)(h,a.econf)}),operatedInfo:a.createOwnerOperator()}),a.lg.i(x,E.u.MuteGroupMembers,r),{groupID:a.groupID,isMute:c,duration:s,mutedUserIDs:o.map(function(h){return h.userID}),errorUserList:i}}))},f.prototype.queryMemberMutedList=function(c){var u=this;return new Promise(function(s,r){var i={time:new Date,groupID:u.groupID,config:c};u.isFullMembers&&u.dbGroup.totalMemberCount==u.getDBMemberCount()?u.queryMembersCallback(c,!0,null,i,s,r):u.mergeSvrMemberList(E.n.B,function(a){u.queryMembersCallback(c,!0,a,i,s,r)})})},f.prototype.queryReceiptMemberList=function(c,u,s,r,i){var a=this;return new Promise(function(o){var l,h,R,w,d,D,S,y,k,b,U=u.memberSeqs,z=Object.keys(U);return!i&&z.length?o({groupID:a.groupID,nextFlag:0,userList:[]}):(l=i?E.g.A:E.g.S,h=u.receiptMemberListSeq||0,R=c.messageSeq,w={time:new Date,groupID:a.groupID,msgSeq:R,dbSeq:h,seqs:z},d=function(P){P===void 0&&(P=!1);for(var H={},Q=a.dbGroup.memberSeqs||{},J=(Object.keys(Q).forEach(function(Y){var K=a.dbMbMap.get(Q[Y]);K&&(H[Y]=K)}),a.dbMbMap.forEach(function(Y){H[Y.seq]=Y,Q[Y.seq]=Y.userID}),z.filter(function(Y){return!H[Y]})),L=[],q=0;q<J.length;q+=100){var B=a.cnMgr.send(E.d.gp_members_by_seq,{conv_id:a.groupID,conv_msg_seq:J.slice(q,q+100)},l);L.push(B)}Promise.all(L).then(function(Y){var K=a.st.getRealClientTimestamp(),ee=new Map;Y.forEach(function(oe){var ae=oe.members;(oe=oe.deleted_members)&&oe.length&&oe.forEach(function(X){var re=a.createDBMember(X,K,!0);ee.set(re.userID,re),H[re.seq]=re,H[X.member_seq]=re,Q[re.seq]=re.userID,Q[X.member_seq]=re.userID}),ae&&ae.length&&ae.forEach(function(X){var re=a.createDBMember(X,K);ee.set(re.userID,re),H[re.seq]=re,H[X.member_seq]=re,Q[re.seq]=re.userID,Q[X.member_seq]=re.userID})}),a.dbGroup.memberSeqs=Q,a.dbMgr.addGroupMemberList(a.groupID,Array.from(ee.values())),(P||!ee.size&&J.length)&&(w.memberSeqMap={},Object.keys(Q).forEach(function(oe){var ae=Q[oe];w.memberSeqMap[ae]?w.memberSeqMap[ae].push(+oe):w.memberSeqMap[ae]=[+oe]}))}).then(function(){o(a.receiptMembersCallback(U,H,s,r,i,w));var Y,K,ee,oe,ae=a.receiptDetailMap[R];ae&&typeof ae=="object"&&(Y=ae.config,K=ae.read,ee=ae.apicall,oe=ae.log,(0,ae.resolve)(a.receiptMembersCallback(U,H,Y,K,ee,oe))),delete a.receiptDetailMap[R]})},u.readMemberCount&&u.receiptStatus!=E.c.MessageReceiptStatus.Processing&&z.filter(function(P){return U[P]}).length>=u.readMemberCount?d():void((D=a.receiptDetailMap[R])&&typeof D=="number"&&Date.now()-D<500?a.receiptDetailMap[R]={config:s,read:r,apicall:i,log:w,resolve:o}:(S=1,k=y=0,b=function(P){var H=Object(_.m)(P.code)?0:P.next_list_seq;H&&(u.receiptMemberListSeq=H),0<P.read_count&&(u.readMemberCount=P.read_count),0<P.unread_count&&(u.unreadMemberCount=P.unread_count),P.cur_member_all_seq&&(u.memberAllSeq=P.cur_member_all_seq),P.unread_members&&(k+=P.unread_members.length,P.unread_members.forEach(function(Q){return U[Q]=0})),P.read_members&&(y+=P.read_members.length,P.read_members.forEach(function(Q){return U[Q]=1})),!P.fetch_end&&H&&a.econf.token?a.fetchSvrReceiptDetail(H,++S,R,l).then(b):(P.read_members_len=y,(P.unread_members_len=k)==0&&0<P.unread_count?a.mergeSvrMemberSeqs(u,R,l,w,d):(d(),a.dbMgr.addMessageExtraList([u])))},a.receiptDetailMap[R]=Date.now(),a.fetchSvrReceiptDetail(h,S,R,l).then(b))))})},f.prototype.updateVerifyMode=function(c,u){var s=this,r={time:new Date,type:u,mode:c},i=["joinMode","inviteMode","beInviteMode"][u];return u={group_id:this.groupID,set_flag:[1,2,4][u],limit_info:((u={})[i]=c,u)},this.cnMgr.send(E.d.gp_limit,u).then(function(a){var o,l;return a.code?(r.error=Object(_.y)(6000510,a.message,a.code),s.lg.w(x,E.u.UpdateGroup,r),Promise.reject(r.error)):(o=s.dbGroup.verifyInfo[i]!=c,s.dbGroup.verifyInfo[i]=c,(s.dbGroup.dataSeq||0)+1!=(a=a.conv_list_seq)?s.cnMgr.send(E.d.gp_data,{group_id:s.groupID},E.g.S).then(function(h){h.code||s.queryGroupInfoCallback(h),o&&(h={groupID:s.groupID,verifyInfo:s.dbGroup.verifyInfo,operatedInfo:s.createOwnerOperator()},s.bus.emit(E.m.GroupVerifyInfo,h))}):o&&(l={groupID:s.groupID,verifyInfo:s.dbGroup.verifyInfo,operatedInfo:s.createOwnerOperator()},s.bus.emit(E.m.GroupVerifyInfo,l)),s.dbGroup.dataSeq=a,s.dbMgr.addGroupList([s.dbGroup]),s.lg.i(x,E.u.UpdateGroupVerifyMode,r),{groupID:s.groupID,mode:c})})},f.prototype.acceptApply=function(c,u,s){var r=this,i={time:new Date},a=c?E.u.AcceptGroupJoinApp:E.u.AcceptGroupInviteApp,o=c?E.d.gp_apply_accept:E.d.gp_invite_accept;return s={group_id:this.groupID,user_id:u,offline_info:Object(_.f)(s==null?void 0:s.pushConfig)},this.cnMgr.send(o,s).then(function(l){return l.code?(i.error=Object(_.y)(6000502,l.message,l.code),r.lg.w(x,a,i),Promise.reject(i.error)):(l=r.acceptApplyCallback(l,u,c),r.lg.i(x,a,i),c?{groupID:r.groupID,userID:u}:{inviterUserID:u,groupInfo:l})})},f.prototype.onPushCreate=function(c){this.dbGroup.totalMemberCount=c.member_count,this.createGroupCallback(c)},f.prototype.onPushJoin=function(c,u,s){this.dbGroup.totalMemberCount=c.member_count,c.members=[c.member],c.op_user||(c.op_user={user_id:this.econf.user.userID,user_name:this.econf.user.userName}),this.joinGroupCallback(c,u,s)},f.prototype.onPushModify=function(c){var u,s=this.dbGroup.dataSeq||0,r=c.group_data_seq;r&&s<=r&&(u=(s=c.modify_type||0)==E.p.Mute?Object(_.e)(c.value,this.st.getRealClientTimestamp()):c.value,this.mergeGroupData(r,s,u,this.createOperator(c.op_user)))},f.prototype.onPushAttrMdf=function(c){var u=this.dbGroup.attributeSeq||0,s=c.attributes.seq;s&&u<=s&&this.mergeAttr(E.o.Push,c.attributes,this.createOperator(c.op_user))},f.prototype.onPushOwnerTransfer=function(c){this.transferOwnerCallback([{userID:c.user_id},{userID:c.op_user.user_id}]),this.updateSeq(c.member_all_seq,O.mb)},f.prototype.onPushMemberChange=function(c){var u=this,s=(this.dbGroup.totalMemberCount=c.member_count,this.dbGroup.memberSeq||0),r=c.member_all_seq;if(r&&!(r<s)){var i=c.op_user.user_id;switch(c.change_type){case E.q.Enter:case E.q.ApplyJoin:case E.q.Invited:case E.q.ApplyInvited:var a=((a=c.members.findIndex(function(l){return l.user_id==i}))!=-1&&this.dbMbMap.has(i)&&c.members.splice(a,1),c.change_type==E.q.Enter||c.change_type==E.q.ApplyJoin?E.c.GroupMemberEvent.Joined:E.c.GroupMemberEvent.Invited);this.bus.emit(E.m.GroupMemberState,{groupID:this.groupID,state:E.c.GroupMemberState.Enter,event:a,userList:this.checkSyncUsers(c,"memberChange",!0),operatedInfo:this.createOperator(c.op_user)});break;case E.q.Quit:case E.q.Kickout:case E.q.OwnerQuit:a=this.createOperator(c.op_user),this.bus.emit(E.m.GroupMemberState,{groupID:this.groupID,state:E.c.GroupMemberState.Quit,event:c.change_type===E.q.Kickout?E.c.GroupMemberEvent.KickedOut:E.c.GroupMemberEvent.Left,userList:this.kickMemberCallback(c),operatedInfo:a}),c.change_type==E.q.OwnerQuit&&this.ownerQuitCallback(c.new_owner_id,a);break;case E.q.Modify:case E.q.Mute:var o=c.change_type==E.q.Mute?this.st.getRealClientTimestamp():0;a=c.members.map(function(l){return u.createDBMember(l,o)}),this.dbMgr.addGroupMemberList(this.groupID,a),this.bus.emit(E.m.GroupMemberInfo,{groupID:this.groupID,userList:a.map(function(l){return Object(_.t)(l,u.econf)}),operatedInfo:this.createOperator(c.op_user)})}}},f.prototype.onDisConnected=function(){this.isFullMembers=!1},f.prototype.createGroupFullInfo=function(){return{baseInfo:{groupID:this.dbGroup.groupID,groupName:this.dbGroup.groupName||"",groupAvatarUrl:this.dbGroup.groupAvatarUrl||""},groupAlias:this.dbGroup.groupAlias||"",groupNotice:this.dbGroup.groupNotice||"",groupAttributes:this.createAttr(),notificationStatus:this.dbGroup.notificationStatus,createTime:this.dbGroup.createTime||0,maxMemberCount:this.dbGroup.maxMemberCount||0,mutedInfo:this.dbGroup.mutedInfo,verifyInfo:this.dbGroup.verifyInfo}},f.prototype.createOwnerOperator=function(){var c=this.dbMbMap.get(this.econf.user.userID);return{userID:this.econf.user.userID,userName:this.econf.user.userName,memberRole:(c==null?void 0:c.memberRole)||0,memberNickname:(c==null?void 0:c.memberNickname)||""}},f.prototype.createOperator=function(c){var u=c.user_id,s=c.user_name,r=c.group_nick_name,i=(c=c.role,this.dbMbMap.get(u));return{userID:u,userName:((u=this.econf.dbUserMap.get(u))==null?void 0:u.userName)||Object(_.g)(s),memberRole:(i?i.memberRole:c)||E.s.Member,memberNickname:(i?i.memberNickname:r)||""}},f.prototype.createDBMember=function(c,u,s,r){s===void 0&&(s=!1),r===void 0&&(r=!1);var i=c.user_id,a=this.dbMbMap.get(i)||{userID:i},o=(D=c.member_data).group_nick_name,l=D.role,h=D.member_data_seq,R=D.enter_type,w=D.enter_time,d=D.op_user,D=D.remark;return(r=(r?a.memberNickname="":o&&(a.memberNickname=o),l&&(a.memberRole=l),u&&(a.muteExpiredTime=c.member_data.forbid_expire_time,a.muteExpiredTime!=-1&&a.muteExpiredTime<=u&&(a.muteExpiredTime=0),i==this.econf.user.userID)&&this.syncGroupInfo({mutedExpiredTime:this.getSelfMutedExpiredTime()}),R&&(a.enterType=R),w&&(a.enterTime=w),d&&d.user_id&&(a.operatedUser=g(g({},Object(_.u)(d.user_id,this.econf)),{memberRole:d.role,memberNickname:d.group_nick_name})),h&&(a.dataSeq=h),c.member_seq))&&(a.seq=r),a.memberNickname||(a.memberNickname=""),a.state=s?1:0,this.dbMbMap.set(i,a),this.econf.dbUserMap.has(i)||(o={userID:i,userName:c.member_data.user_name,userAvatarUrl:Object(_.g)(c.member_data.user_avatar)},this.econf.dbUserMap.set(i,o)),D&&this.econf.user.userID==i&&this.dbGroup.groupAlias!=D&&this.syncGroupInfo({conversationAlias:D}),a},f.prototype.createErrorUser=function(c){return{userID:c.user_id,reason:c.sub_code}},f.prototype.createAttr=function(c){var u,s=this;return this.dbGroup.attributes?(u={},(c=c||Object.keys(this.dbGroup.attributes)).forEach(function(r){var i=s.dbGroup.attributes[r];i&&!i.state&&(u[r]=i.value)}),u):(this.dbGroup.attributes={},{})},f.prototype.createDBGroupAttr=function(c){return(c||[]).reduce(function(u,s){return u[s.key]=s,u},{})},f.prototype.updateVerifyInfo=function(c){c&&(this.dbGroup.maxMemberCount=c.maxMemberCount,delete c.maxMemberCount,this.dbGroup.verifyInfo||(this.dbGroup.verifyInfo={joinMode:0,inviteMode:0,beInviteMode:0}),Object.assign(this.dbGroup.verifyInfo,c))},f.prototype.checkMemberInfoChange=function(c,u,s){return!!c&&(c.muteExpiredTime!=-1&&c.muteExpiredTime<=s&&(c.muteExpiredTime=0),(c.memberNickname||"")!=(u.memberNickname||"")||(c.memberRole||0)!=(u.memberRole||0)||(c.muteExpiredTime||0)!=(u.muteExpiredTime||0))},f.prototype.mergeMemberList=function(c,u,s,r){var i,a=this,o=(s&&(i=this.econf.user.userID,this.dbMbMap.forEach(function(S){S.state=i==S.userID?0:1})),""),l=this.st.getRealClientTimestamp(),h=new Map;if(u.forEach(function(S){var y=S.event_type,k=(S=S.member,y=y==E.q.Quit||y==E.q.Kickout||y==E.q.OwnerQuit,(k=a.dbMbMap.get(S.user_id))&&g({},k));(S=a.createDBMember(S,l,y)).memberRole!=E.s.Owner||y||(o=S.userID),c!=E.n.L&&c!=E.n.H||!a.checkMemberInfoChange(k,S,l)||h.set(S.userID,Object(_.t)(S,a.econf))}),o&&(this.dbMbMap.forEach(function(S){S.memberRole==E.s.Owner&&S.userID!=o&&(S.memberRole=E.s.Member)}),h.forEach(function(S){S.memberRole==E.s.Owner&&S.userID!=o&&(S.memberRole=E.s.Member)})),h.size&&this.bus.emit(E.m.GroupMemberInfo,{groupID:this.groupID,userList:Array.from(h.values()),operatedInfo:{}}),s=this.getDBMemberCount(),this.dbGroup.totalMemberCount==s)return this.dbMgr.addGroupMemberList(this.groupID,Array.from(this.dbMbMap.values())),r&&r();if(this.dbGroup.totalMemberCount>s&&!this.isRefetchMembers)return this.isRefetchMembers=!0,this.dbGroup.memberSeq=0,this.dbMbMap.forEach(function(S){S.state&&a.dbMbMap.delete(S.userID)}),this.mergeSvrMemberList(c,r);for(var R=Array.from(this.dbMbMap.values()).filter(function(S){return S.seq}),w=[],d=0;d<R.length;d+=100){var D=this.cnMgr.send(E.d.gp_members_by_seq,{conv_id:this.groupID,conv_msg_seq:R.slice(d,d+100).map(function(S){return S.seq})},c==E.n.B?E.g.A:E.g.S);w.push(D)}Promise.all(w).then(function(S){S.forEach(function(y){y.members&&y.members.length&&y.members.forEach(function(k){var b=a.dbMbMap.get(k.user_id);b&&(b.state=0,b.seq=k.member_seq)}),y.deleted_members&&y.deleted_members.length&&y.deleted_members.forEach(function(k){var b=a.dbMbMap.get(k.user_id);b&&(b.state=1,b.seq=k.member_seq)})}),a.dbMgr.addGroupMemberList(a.groupID,Array.from(a.dbMbMap.values())),r&&r()})},f.prototype.syncGroupInfo=function(c){var u=c.conversationName,s=c.conversationAvatarUrl,r=c.conversationAlias;typeof u=="string"&&(this.dbGroup.groupName=u),typeof s=="string"&&(this.dbGroup.groupAvatarUrl=s),typeof r=="string"&&(this.dbGroup.groupAlias=r),this.dbMgr.addGroupList([this.dbGroup]),this.bus.exec(E.m.ISyncGroupInfo,this.groupID,c)},f.prototype.getSelfMutedExpiredTime=function(){this.dbGroup.mutedInfo||(this.dbGroup.mutedInfo={mode:0,expiredTime:0,roles:[]});var c=(s=this.dbGroup.mutedInfo).mode,u=s.expiredTime,s=s.roles,r=((i=this.dbMbMap.get(this.econf.user.userID))==null?void 0:i.memberRole)||E.s.Member,i=(i==null?void 0:i.muteExpiredTime)||0;return this.dbGroup.selfMutedExpiredTime=i,(c==E.c.GroupMuteMode.Normal&&r!=E.s.Owner&&r!=E.s.Admin||c==E.c.GroupMuteMode.All||c==E.c.GroupMuteMode.Custom&&s&&s.indexOf(r)!=-1)&&(this.dbGroup.selfMutedExpiredTime=u==-1||i==-1?-1:Math.max(u||0,i)),this.dbGroup.selfMutedExpiredTime},f.prototype.mergeGroupData=function(c,u,s,r){c&&(this.dbGroup.dataSeq=c),u!=E.p.Notice&&u?u==E.p.Name?(this.syncGroupInfo({conversationName:s}),this.bus.emit(E.m.GroupName,{groupID:this.groupID,groupName:s,operatedInfo:r})):u==E.p.Avatar?(s=Object(_.g)(s),this.syncGroupInfo({conversationAvatarUrl:s}),this.bus.emit(E.m.GroupAvatar,{groupID:this.groupID,groupAvatarUrl:s,operatedInfo:r})):u==E.p.Mute?(this.dbGroup.mutedInfo=s,this.syncGroupInfo({mutedExpiredTime:this.getSelfMutedExpiredTime()}),this.bus.emit(E.m.GroupMute,{groupID:this.groupID,mutedInfo:s,operatedInfo:r})):u==E.p.Limit?(c=s.maxMemberCount,delete s.maxMemberCount,c&&(this.dbGroup.maxMemberCount=c),this.dbGroup.verifyInfo&&this.dbGroup.verifyInfo.joinMode==s.joinMode&&this.dbGroup.verifyInfo.inviteMode==s.inviteMode&&this.dbGroup.verifyInfo.beInviteMode==s.beInviteMode||(c={groupID:this.groupID,verifyInfo:s,operatedInfo:r},this.bus.emit(E.m.GroupVerifyInfo,c)),this.dbGroup.verifyInfo=s):u==E.p.SvrData&&(c=s.group_notice,this.dbGroup.groupNotice!=c&&(this.dbGroup.groupNotice=c,this.bus.emit(E.m.GroupNotice,{groupID:this.groupID,groupNotice:c,operatedInfo:r})),c=s.group_name,this.dbGroup.groupName!=c&&(this.dbGroup.groupName=c,this.bus.emit(E.m.GroupName,{groupID:this.groupID,groupName:c,operatedInfo:r})),c=Object(_.g)(s.group_avatar),this.dbGroup.groupAvatarUrl!=c&&(this.dbGroup.groupAvatarUrl=c,this.bus.emit(E.m.GroupAvatar,{groupID:this.groupID,groupAvatarUrl:c,operatedInfo:r})),this.syncGroupInfo({conversationName:this.dbGroup.groupName,conversationAvatarUrl:this.dbGroup.groupAvatarUrl})):(this.dbGroup.groupNotice=s,this.bus.emit(E.m.GroupNotice,{groupID:this.groupID,groupNotice:s,operatedInfo:r}))},f.prototype.mergeAttr=function(c,u,s){var r=u.seq,i=(u=u.attributes,this.dbGroup.attributes||{}),a={},o={},l=[],h={action:c,seq:r,attributes:u,setAttrs:a,delAtrrs:o};u.forEach(function(R){var w,d=R.key,D=R.value;R=R.seq,c!=E.o.Delete&&R?R&&(w=((w=i[d])==null?void 0:w.state)||0,(!i[d]||R>i[d].seq)&&(w=0,a[d]=D),i[d]={key:d,value:D,seq:R,state:w}):(c!=E.o.Query&&(o[d]=D),i[d]=g(g({},i[d]),{key:d,state:1}))}),Object.keys(a).length&&l.push({action:E.c.GroupAttributesUpdateAction.Set,groupAttributes:a}),Object.keys(o).length&&l.push({action:E.c.GroupAttributesUpdateAction.Delete,groupAttributes:o}),s&&l.length&&this.bus.emit(E.m.GroupAttr,{groupID:this.groupID,infoList:l,operatedInfo:s}),this.dbGroup.attributes=i,r&&(this.dbGroup.attributeSeq=r),this.dbMgr.addGroupList([this.dbGroup]),h.dbSeq=this.dbGroup.attributeSeq,h.dbAttr=i,this.lg.i(x,"mergeAttr",h)},f.prototype.mergeMemberInfo=function(c,u,s,r){var i=g(g({},this.dbMbMap.get(r)),{userID:r});u&&(i.dataSeq=u),c===E.r.Nickname?i.memberNickname=s:c===E.r.Role&&(i.memberRole=s),this.dbMbMap.set(r,i),this.dbMgr.addGroupMemberList(this.groupID,[i]),this.bus.emit(E.m.GroupMemberInfo,{groupID:this.groupID,userList:[Object(_.t)(i,this.econf)],operatedInfo:this.createOwnerOperator()})},f.prototype.fetchSvrMember=function(c,u,s,r){return c={group_id:this.groupID,cur_list_seq:c,count:100,full_pull:r,degree:u,how:s},r=s==E.n.B?E.g.A:E.g.S,this.cnMgr.send(E.d.gp_member_list,c,r)},f.prototype.fetchSvrReceiptDetail=function(c,u,s,r){return s={group_id:this.groupID,cur_list_seq:s,count:c,full_pull:100,degree:u},this.cnMgr.send(E.d.msg_read_detail,s,r)},f.prototype.fetchSvrMemberSeq=function(c,u,s,r,i,a){return c={group_id:this.groupID,cur_list_seq:c,count:u,msgSeq:s,msgMSeq:r,groupMSeq:i},this.cnMgr.send(E.d.gp_member_seqs,c,a)},f.prototype.mergeSvrMemberList=function(c,u){var s=this,r=this.getDBMemberCount(),i=this.dbGroup.memberSeq||0;if(i&&this.dbGroup.totalMemberCount>r){var a=[];this.dbMbMap.forEach(function(S){return a.push(S.seq||0)}),a.sort(function(S,y){return S-y});for(var o=1;o<a.length;o++)if(1<a[o]-a[o-1]){i=a[o-1];break}}var l={time:new Date,groupID:this.groupID,dbSeq:i,how:c,count:0},h=1,R=0,w=[],d=function(){s.lg&&(l.count=s.getDBMemberCount(),s.lg.i(x,"mergeSvrMember",l))},D=function(S){if(S.code||!s.dbMgr)return d(),u&&u(S);s.dbGroup.totalMemberCount=S.member_count;var y=S.member_all_seq;if(y<=i)return s.isFullMembers=!0,d(),u&&u();var k=S.cur_list_seq;w.push.apply(w,function(b,U,z){if(arguments.length===2)for(var P,H=0,Q=U.length;H<Q;H++)!P&&H in U||((P=P||Array.prototype.slice.call(U,0,H))[H]=U[H]);return b.concat(P||Array.prototype.slice.call(U))}([],function(b,U){var z=typeof Symbol=="function"&&b[Symbol.iterator];if(!z)return b;var P,H,Q=z.call(b),J=[];try{for(;(U===void 0||0<U--)&&!(P=Q.next()).done;)J.push(P.value)}catch(L){H={error:L}}finally{try{P&&!P.done&&(z=Q.return)&&z.call(Q)}finally{if(H)throw H.error}}return J}(S.change_list),!1)),h==1&&(R=S.full_list),k<y?s.fetchSvrMember(k,++h,c,R).then(D):(s.isFullMembers=!0,s.updateSeq(y,O.mb,!0),s.mergeMemberList(c,w,!!R,u),d())};this.fetchSvrMember(i,h,c,0).then(D)},f.prototype.mergeSvrMemberSeqs=function(c,u,s,r,i){var a=this,o=this.dbGroup.memberSeqs||{},l=this.dbGroup.memberSeq||0,h=this.dbGroup.memberAllSeq||0,R=c.memberAllSeq||0,w=(r.dbMemberSeq=h,r.msgMemberSeq=R,r.groupMemberSeq=l,function(S){S===void 0&&(S=!1);var y=a.econf.user.userID,k=c.memberSeqs;Object.keys(o).forEach(function(b){+b<=R&&!k[b]&&o[b]!=y&&(k[b]=0)}),a.dbMgr.addMessageExtraList([c]),i(S)});if(h&&l<=h)return w();var d=1,D=function(S){S.members&&S.members.forEach(function(k){var b=k.user_id,U=k.cur_seq;k=k.old_seq,U&&(o[U]=b),k&&(o[k]=b)});var y=Object(_.m)(S.code)?0:S.next_seq;y&&(a.dbGroup.memberAllSeq=y),y&&a.econf.token&&(!S.fetch_end||y<R||y<l)?a.fetchSvrMemberSeq(y,++d,u,R,l,s).then(D):(a.dbGroup.memberSeqs=o,a.dbMgr.addGroupList([a.dbGroup]),w(!0))};this.fetchSvrMemberSeq(h,d,u,R,l,s).then(D)},f.prototype.createGroupCallback=function(c){return Object.assign(this.dbGroup,{id:this.econf.user.userID+c.group_id,groupID:c.group_id,groupNotice:c.group_notice,groupAlias:"",notificationStatus:E.c.GroupMessageNotificationStatus.Notify,attributes:this.createDBGroupAttr(c.attributes.attributes),createTime:c.group_create_time,maxMemberCount:c.limit_info.maxMemberCount||0,verifyInfo:{joinMode:c.limit_info.joinMode||0,inviteMode:c.limit_info.inviteMode||0,beInviteMode:c.limit_info.beInviteMode||0}}),c.group_list_seq&&(this.dbGroup.groupSeq=c.group_list_seq),c.attributes.seq&&(this.dbGroup.attributeSeq=c.attributes.seq),c.member_all_seq&&(this.dbGroup.memberSeq=c.member_all_seq),this.dbGroup.mutedInfo||(this.dbGroup.mutedInfo={mode:0,expiredTime:0,roles:[]}),this.dbGroup.historyMsgSeq=0,this.syncGroupInfo({conversationName:c.group_name,conversationAvatarUrl:Object(_.g)(c.group_avatar)}),this.bus.exec(E.m.IJoinedGroup,{groupID:this.groupID,groupName:this.dbGroup.groupName,groupAvatarUrl:this.dbGroup.groupAvatarUrl,msgSeq:0,historySeq:0}),this.econf.dbGroupMap.set(this.groupID,this.dbGroup),this.handleCreateGroup(c)},f.prototype.handleCreateGroup=function(c){var u,s=c.op_user?c.op_user.user_id:this.econf.user.userID,r=c.op_user?this.createOperator(c.op_user):{userID:this.econf.user.userID,userName:this.econf.user.userName,memberRole:E.s.Owner,memberNickname:""};return(c=(u=((u=this.dbMbMap.get(s))?Object.assign(u,r):this.dbMbMap.set(s,r),this.bus.emit(E.m.GroupState,{state:E.c.GroupState.Enter,event:E.c.GroupEvent.Created,groupInfo:this.createGroupFullInfo(),operatedInfo:r}),this.dbGroup.attributes&&0<Object.keys(this.dbGroup.attributes).length&&(u={action:E.c.GroupAttributesUpdateAction.Set,groupAttributes:this.createAttr()},this.bus.emit(E.m.GroupAttr,{groupID:this.groupID,infoList:[u],operatedInfo:r})),this.bus.emit(E.m.GroupMemberState,{groupID:this.groupID,state:E.c.GroupMemberState.Enter,event:E.c.GroupMemberEvent.Joined,userList:[Object(_.t)(this.dbMbMap.get(s),this.econf)],operatedInfo:r}),this.checkSyncUsers(c,"createGroup",!0))).filter(function(i){return i.userID!=s})).length&&this.bus.emit(E.m.GroupMemberState,{groupID:this.groupID,state:E.c.GroupMemberState.Enter,event:E.c.GroupMemberEvent.Invited,userList:c,operatedInfo:r}),u},f.prototype.joinGroupCallback=function(c,u,s){var r=c.group_notice,i=c.group_data_seq,a=c.group_list_seq,o=c.properties,l=c.group_create_time,h=c.forbid_info;return r&&(this.dbGroup.groupNotice=r),l&&(this.dbGroup.createTime=l),h?this.dbGroup.mutedInfo=Object(_.e)(h,this.st.getRealClientTimestamp()):this.dbGroup.mutedInfo||(this.dbGroup.mutedInfo={mode:0,expiredTime:0,roles:[]}),a&&(this.dbGroup.groupSeq=a),this.updateVerifyInfo(c.limit_info),this.dbGroup.groupAlias="",this.dbGroup.notificationStatus=E.c.GroupMessageNotificationStatus.Notify,i&&(this.dbGroup.dataSeq=i),this.dbGroup.historyMsgSeq=c.history_msg_seq,this.dbGroup.attributes={},o?(this.dbGroup.attributes=this.createDBGroupAttr(o.attributes),o.seq&&(this.dbGroup.attributeSeq=o.seq)):this.innerQueryGroupAttr(),r=this.createOperator(c.op_user),l=this.checkSyncUsers(c,"joinGroup",!1),this.syncGroupInfo({conversationName:c.group_name,conversationAvatarUrl:Object(_.g)(c.group_avatar),mutedExpiredTime:this.getSelfMutedExpiredTime()}),this.bus.exec(E.m.IJoinedGroup,{groupID:this.groupID,groupName:this.dbGroup.groupName,groupAvatarUrl:this.dbGroup.groupAvatarUrl,msgSeq:c.conv_msg_seq,historySeq:c.history_msg_seq}),this.econf.dbGroupMap.set(this.groupID,this.dbGroup),h=this.createGroupFullInfo(),this.bus.emit(E.m.GroupState,{state:E.c.GroupState.Enter,event:s,groupInfo:h,operatedInfo:r}),this.dbGroup.attributes&&0<Object.keys(this.dbGroup.attributes).length&&(a={action:E.c.GroupAttributesUpdateAction.Set,groupAttributes:this.createAttr()},this.bus.emit(E.m.GroupAttr,{groupID:this.groupID,infoList:[a],operatedInfo:r})),l.length&&this.bus.emit(E.m.GroupMemberState,{groupID:this.groupID,state:E.c.GroupMemberState.Enter,event:u,userList:l,operatedInfo:r}),h},f.prototype.acceptApplyCallback=function(c,u,s){var r,i={type:a=s?E.c.GroupApplicationType.Join:E.c.GroupApplicationType.BeInvite,state:E.c.GroupApplicationState.Accepted,updateTime:c.apply_group_info.update_time,createTime:0,wording:"",seq:this.dbGroup.dataSeq,groupInfo:{groupID:this.groupID,groupName:this.dbGroup.groupName,groupAvatarUrl:this.dbGroup.groupAvatarUrl},applyUser:Object(_.u)(u,this.econf)},a=this.getApplyID(a,u);return(a=this.dbApplyMap.get(a))&&(i.createTime=a.createTime,i.wording=a.wording),s?i.operatedUser=g(g({},this.createOwnerOperator()),{userAvatarUrl:this.econf.user.userAvatarUrl}):(Object.assign(c,c.group_info),this.dbGroup.totalMemberCount=c.member_count,c.member.member_data.user_avatar||(c.member.member_data.user_avatar=this.econf.user.userAvatarUrl),a=this.dbMbMap.get(u),c.op_user={user_id:u,user_name:(u=this.econf.dbUserMap.get(u))==null?void 0:u.userName,group_nick_name:a==null?void 0:a.memberNickname,role:a==null?void 0:a.memberRole},c.members=[c.member],r=this.joinGroupCallback(c,E.c.GroupMemberEvent.Invited,E.c.GroupEvent.Invited),i.groupInfo.groupName=this.dbGroup.groupName,i.groupInfo.groupAvatarUrl=this.dbGroup.groupAvatarUrl,i.seq=this.dbGroup.dataSeq),this.syncGroupApplyMap(i),this.bus.emit(E.m.GroupAppUpd,{applicationList:[i]}),u=c.apply_group_info.apply_list_seq,s?this.updateSeq(u,O.app):this.dbMgr.updateUserSeq(u,E.z.gpApp),r},f.prototype.checkSyncUsers=function(c,u,s){var r=this,i=[],a=this.st.getRealClientTimestamp(),o=c.members.map(function(l){var h=r.createDBMember(l,a,!1,!0),R=h.userID,w=l.member_data.user_name,d=Object(_.g)(l.member_data.user_avatar);return Object(_.x)({userID:R,userName:w,userAvatarUrl:d},r.econf,l.member_data.update_user_time).userName||i.push(R),h});return this.dbMgr.addGroupMemberList(this.groupID,o),s&&this.updateSeq(c.member_all_seq,O.mb),i.length&&this.cnMgr.fetchSvrUsers(i,u),o.map(function(l){return Object(_.t)(l,r.econf)})},f.prototype.kickMemberCallback=function(c){var u=this;return this.updateSeq(c.member_all_seq,O.mb),c=c.members.map(function(s){return u.createDBMember(s,0,!0)}),this.dbMgr.addGroupMemberList(this.groupID,c),c.map(function(s){return Object(_.t)(s,u.econf)})},f.prototype.transferOwnerCallback=function(c){var u=this,s=this.dbMbMap.get(c[0].userID),r=this.dbMbMap.get(c[1].userID);(s&&r?Promise.resolve([s,r]):this.dbMgr.getGroupMemberList(this.groupID)).then(function(i){s=i.find(function(a){return a.userID==c[0].userID}),r=i.find(function(a){return a.userID==c[1].userID}),s&&r&&(s.memberRole=E.s.Owner,r.memberRole=E.s.Member,c[0].dataSeq&&(s.dataSeq=c[0].dataSeq),c[1].dataSeq&&(r.dataSeq=c[1].dataSeq),u.dbMbMap.set(s.userID,s),u.dbMbMap.set(r.userID,r),u.dbMgr.addGroupMemberList(u.groupID,[s,r]),u.bus.emit(E.m.GroupMemberInfo,{groupID:u.groupID,userList:[Object(_.t)(s,u.econf),Object(_.t)(r,u.econf)],operatedInfo:u.pickOperator(r)}))})},f.prototype.ownerQuitCallback=function(c,u){var s=g(g({},this.dbMbMap.get(c)),{userID:c});s.memberRole=E.s.Owner,this.dbMbMap.set(c,s),this.dbMgr.addGroupMemberList(this.groupID,[s]),this.bus.emit(E.m.GroupMemberInfo,{groupID:this.groupID,userList:[Object(_.t)(s,this.econf)],operatedInfo:u})},f.prototype.queryMembersCallback=function(c,u,s,r,i,a){var o=this,l=u?E.u.QueryGroupMemberMuteds:E.u.QueryGroupMembers;if((d=s&&s.code)&&!Object(_.m)(d))return r.error=Object(_.y)(6000517,s.message,s.code),this.lg.i(x,l,r),a(r.error);var h=[],R=this.st.getRealClientTimestamp(),w=(s=((S=Array.from(this.dbMbMap.values()).filter(function(y){var k;return y.state!=1&&((k=o.econf.dbUserMap.get(y.userID))!=null&&k.userName||h.push(y.userID),y.muteExpiredTime==-1||y.muteExpiredTime>R||(y.muteExpiredTime=0,!u))})).sort(function(y,k){return y.seq-k.seq}),r.total=this.dbGroup.totalMemberCount,r.dbTotal=S.length,((d=S[S.length-1])==null?void 0:d.seq)||0),c.nextFlag),d=(a=0,0<w&&w<=s?a=S.findIndex(function(y){return y.seq==w}):s<w&&s&&(a=S.length),a+Math.min(E.h.MAX_QUERY_PAGE_COUNT,c.count)),D=((c=S[d])==null?void 0:c.seq)||0,S=S.slice(a,d);Object.assign(r,{start:a,end:d,max:s,count:S.length,nextFlag:D}),this.lg.i(x,l,r),h.length?this.cnMgr.fetchSvrUsers(h,"queryMembers").then(function(){var y=S.map(function(k){return Object(_.t)(k,o.econf)});i({groupID:o.groupID,nextFlag:D,userList:y})}):(c=S.map(function(y){return Object(_.t)(y,o.econf)}),i({groupID:this.groupID,nextFlag:D,userList:c}))},f.prototype.receiptMembersCallback=function(c,u,s,r,i,a){var o=this,l=new Map,h=[],R=((b=((b=Object.keys(c)).forEach(function(z){c[z]&&(z=u[z])&&h.push(z.userID)}),b.forEach(function(z){var P;r&&c[z]?(P=u[z])&&l.set(P.userID,P):r||c[z]||(P=u[z])&&(h.indexOf(P.userID)==-1?l.set(P.userID,P):delete c[z])}),Array.from(l.values()))).sort(function(z,P){return z.seq-P.seq}),b.length),w=((w=b[b.length-1])==null?void 0:w.seq)||0,d=s.nextFlag||0,D=0,S=(0<d&&d<w?D=b.findIndex(function(z){return z.seq==d})+1:w<=d&&w&&(D=b.length),D+Math.min(E.h.MAX_QUERY_PAGE_COUNT,s.count)),y=(b=b.slice(D,S)).length,k=((k=b[y-1])==null?void 0:k.seq)||0,b=b.map(function(z){return Object(_.t)(z,o.econf)}),U=y==R||w==k?0:k;return Object.assign(a,{start:D,end:S,next:k,max:w,total:R,count:y,nextFlag:U,config:s}),D=i?r?E.u.QueryReceiptRead:E.u.QueryReceiptUnread:"queryReceipt",this.lg.i(x,D,a),{groupID:this.groupID,nextFlag:U,userList:b}},f.prototype.updateSeq=function(c,u,s){this.dbGroup&&c&&(s||!this.dbGroup[u]||this.dbGroup[u]+1==c)&&(this.dbGroup[u]=c,this.dbMgr.addGroupList([this.dbGroup]))},f.prototype.pickOperator=function(c){var u=this.econf.dbUserMap.get(c.userID);return{userID:c.userID,userName:(u==null?void 0:u.userName)||"",memberNickname:c.memberNickname||"",memberRole:c.memberRole||E.s.Member}},f.prototype.getApplyID=function(c,u){return c+"_"+this.groupID+"_"+u},f.prototype.getDBMemberCount=function(){var c=0;return this.dbMbMap.forEach(function(u){u.state||c++}),c},f.prototype.checkGroupApplyCreateTime=function(c){var u=this.getApplyID(c.type,c.applyUser.userID),s=this.dbApplyMap.get(u);return this.dbApplyMap.set(u,c),!s||!s.createTime||c.createTime&&s.state!=E.c.GroupApplicationState.Accepted&&s.state!=E.c.GroupApplicationState.Rejected||(c.createTime=s.createTime),!!s},f.prototype.syncGroupApplyMap=function(c){var u=this,s=(c=!!c&&this.checkGroupApplyCreateTime(c),Array.from(this.dbApplyMap.values()).filter(function(i){return i.groupInfo.groupID==u.groupID})),r=s[0];return s.forEach(function(i){i.seq>r.seq&&(r=i)}),s.forEach(function(i){i.seq=r.seq,i.groupInfo=r.groupInfo}),this.dbMgr.addGroupApplyList(s),c},f.prototype.queryGroupInfoCallback=function(c){c.group_data_seq&&(this.dbGroup.dataSeq=c.group_data_seq),this.dbGroup.groupNotice=c.group_notice,this.dbGroup.createTime=c.group_create_time,this.dbGroup.mutedInfo=Object(_.e)(c,this.st.getRealClientTimestamp()),this.updateVerifyInfo(c.limit_info),this.syncGroupInfo({conversationName:c.group_name,conversationAvatarUrl:Object(_.g)(c.group_avatar),mutedExpiredTime:this.getSelfMutedExpiredTime()})},f.prototype.innerQueryGroupAttr=function(){var c=this,u={group_id:this.groupID,attributes:{seq:0}};return this.cnMgr.send(E.d.gp_attr,u,E.g.S).then(function(s){var r;s.code||(r={},s.attributes.attributes.forEach(function(i){var a=i.key,o=i.seq;r[a]={key:a,value:i.value,seq:o,state:o?0:1}}),c.dbGroup.attributes=r,c.dbGroup.attributeSeq=s.attributes.seq,c.dbMgr.addGroupList([c.dbGroup]))})},f);function f(c,u,s,r,i){this.type=E.c.ConversationType.Group,this.groupID="",this.dbGroup={},this.isFullMembers=!1,this.isRefetchMembers=!1,this.dbMbMap=new Map,this.receiptDetailMap={},this.dbGroup.groupID=c,this.groupID=c,this.econf=u,this.lg=T.a.getInstance().lg,this.st=T.a.getInstance().st,this.bus=s,this.dbMgr=r,this.cnMgr=i}},function(te,j,C){C.r(j),C.d(j,"ZIM",function(){return O});var O,T,_=C(12),E=C(1),g=C(2),x=function(){return(x=Object.assign||function(A){for(var m,f=1,c=arguments.length;f<c;f++)for(var u in m=arguments[f])Object.prototype.hasOwnProperty.call(m,u)&&(A[u]=m[u]);return A}).apply(this,arguments)};(T=O=O||{}).TAG=" 3/21 17:15",T.toJSON=function(A){return JSON.stringify(A)},T.setEventHandler=function(A){_.b._flutter_handler=A},T.getVersion=function(){return g.a.getInstance().getVersion()},T.setGeofencingConfig=function(A,m){return g.a.getInstance().setGeofencingConfig(A,m)},T.setAdvancedConfig=function(A,m){g.a.getInstance().setAdvancedConfig(A,m)},T.create=function(A){var m;if((A=typeof A=="object"?A.appID:A)&&typeof A=="number")return(m=g.a.getInstance().createEngine(A))?new _.b(m):null;throw m=Object(E.y)(6000003),new Error(JSON.stringify(x({appID:A,version:T.getVersion()},m)))},T.getInstance=function(){return _.b._instance},(C=T.ConnectionState||(T.ConnectionState={}))[C.Disconnected=0]="Disconnected",C[C.Connecting=1]="Connecting",C[C.Connected=2]="Connected",C[C.Reconnecting=3]="Reconnecting",(C=T.ConnectionEvent||(T.ConnectionEvent={}))[C.Success=0]="Success",C[C.ActiveLogin=1]="ActiveLogin",C[C.LoginTimeout=2]="LoginTimeout",C[C.LoginInterrupted=3]="LoginInterrupted",C[C.KickedOut=4]="KickedOut",C[C.TokenExpired=5]="TokenExpired",C[C.Unregistered=6]="Unregistered",(C=T.MessagePriority||(T.MessagePriority={}))[C.Low=1]="Low",C[C.Medium=2]="Medium",C[C.High=3]="High",(C=T.GeofencingType||(T.GeofencingType={}))[C.None=0]="None",C[C.Include=1]="Include",C[C.Exclude=2]="Exclude",(C=T.CXHandleType||(T.CXHandleType={}))[C.Generic=1]="Generic",C[C.PhoneNumber=2]="PhoneNumber",C[C.EmailAddress=3]="EmailAddress",(C=T.PlatformType||(T.PlatformType={}))[C.Win=1]="Win",C[C.IPhoneOS=2]="IPhoneOS",C[C.Android=3]="Android",C[C.MacOS=4]="MacOS",C[C.Linux=5]="Linux",C[C.Web=6]="Web",C[C.MiniProgram=7]="MiniProgram",C[C.IPadOS=9]="IPadOS",C[C.OHOS=10]="OHOS",C[C.Unknown=32]="Unknown",(C=T.UserOnlineStatus||(T.UserOnlineStatus={}))[C.Online=0]="Online",C[C.Offline=1]="Offline",C[C.Logout=2]="Logout",C[C.Unknown=99]="Unknown",(C=T.CallInvitationMode||(T.CallInvitationMode={}))[C.Unknown=-1]="Unknown",C[C.General=0]="General",C[C.Advanced=1]="Advanced",(C=T.CallState||(T.CallState={}))[C.Unknown=-1]="Unknown",C[C.Started=1]="Started",C[C.Ended=2]="Ended",(C=T.CallUserState||(T.CallUserState={}))[C.Unknown=-1]="Unknown",C[C.Inviting=0]="Inviting",C[C.Accepted=1]="Accepted",C[C.Rejected=2]="Rejected",C[C.Cancelled=3]="Cancelled",C[C.Received=5]="Received",C[C.Timeout=6]="Timeout",C[C.Quit=7]="Quit",C[C.Ended=8]="Ended",C[C.NotYetReceived=9]="NotYetReceived",C[C.BeCancelled=10]="BeCancelled",(C=T.ConversationType||(T.ConversationType={}))[C.Unknown=-1]="Unknown",C[C.Peer=0]="Peer",C[C.Room=1]="Room",C[C.Group=2]="Group",(C=T.ConversationEvent||(T.ConversationEvent={}))[C.Added=0]="Added",C[C.Updated=1]="Updated",C[C.Disabled=2]="Disabled",C[C.Deleted=3]="Deleted",(C=T.ConversationNotificationStatus||(T.ConversationNotificationStatus={}))[C.Notify=1]="Notify",C[C.DoNotDisturb=2]="DoNotDisturb",(C=T.MessageType||(T.MessageType={}))[C.Unknown=0]="Unknown",C[C.Command=2]="Command",C[C.Barrage=20]="Barrage",C[C.Text=1]="Text",C[C.Multiple=10]="Multiple",C[C.Image=11]="Image",C[C.File=12]="File",C[C.Audio=13]="Audio",C[C.Video=14]="Video",C[C.System=30]="System",C[C.Revoke=31]="Revoke",C[C.Tips=32]="Tips",C[C.Combine=100]="Combine",C[C.Custom=200]="Custom",(C=T.MessageSentStatus||(T.MessageSentStatus={}))[C.Sending=0]="Sending",C[C.Success=1]="Success",C[C.Failed=2]="Failed",(C=T.MessageDirection||(T.MessageDirection={}))[C.Send=0]="Send",C[C.Receive=1]="Receive",(C=T.MessageOrder||(T.MessageOrder={}))[C.Descending=0]="Descending",C[C.Ascending=1]="Ascending",(C=T.MessageRepliedInfoState||(T.MessageRepliedInfoState={}))[C.Normal=0]="Normal",C[C.Deleted=1]="Deleted",C[C.NotFound=2]="NotFound",(C=T.MessageReceiptStatus||(T.MessageReceiptStatus={}))[C.None=0]="None",C[C.Processing=1]="Processing",C[C.Done=2]="Done",C[C.Expired=3]="Expired",C[C.Failed=4]="Failed",(C=T.MessageRevokeStatus||(T.MessageRevokeStatus={}))[C.Unknown=-1]="Unknown",C[C.SelfRevoke=0]="SelfRevoke",C[C.SystemRevoke=1]="SystemRevoke",C[C.ServiceAPIRevoke=2]="ServiceAPIRevoke",C[C.GroupAdminRevoke=3]="GroupAdminRevoke",C[C.GroupOwnerRevoke=4]="GroupOwnerRevoke",C[C.AuditRejectRevoke=5]="AuditRejectRevoke",(C=T.RevokeType||(T.RevokeType={}))[C.TwoWay=0]="TwoWay",C[C.OneWay=1]="OneWay",(C=T.MessageMentionedType||(T.MessageMentionedType={}))[C.MentionMe=1]="MentionMe",C[C.MentionAll=2]="MentionAll",C[C.MentionAllAndMe=3]="MentionAllAndMe",(C=T.MessageDeleteType||(T.MessageDeleteType={}))[C.MessageListDeleted=0]="MessageListDeleted",C[C.ConversationAllMessagesDeleted=1]="ConversationAllMessagesDeleted",C[C.AllConversationMessagesDeleted=2]="AllConversationMessagesDeleted",(C=T.TipsMessageEvent||(T.TipsMessageEvent={}))[C.Unknown=0]="Unknown",C[C.GroupCreated=1]="GroupCreated",C[C.GroupDismissed=2]="GroupDismissed",C[C.GroupJoined=3]="GroupJoined",C[C.GroupInvited=4]="GroupInvited",C[C.GroupLeft=5]="GroupLeft",C[C.GroupKickedOut=6]="GroupKickedOut",C[C.GroupInfoChanged=7]="GroupInfoChanged",C[C.GroupMemberInfoChanged=8]="GroupMemberInfoChanged",(C=T.TipsMessageChangeInfoType||(T.TipsMessageChangeInfoType={}))[C.GroupDataChanged=1]="GroupDataChanged",C[C.GroupNoticeChanged=2]="GroupNoticeChanged",C[C.GroupNameChanged=3]="GroupNameChanged",C[C.GroupAvatarUrlChanged=4]="GroupAvatarUrlChanged",C[C.GroupMuteChanged=5]="GroupMuteChanged",C[C.GroupOwnerTransferred=10]="GroupOwnerTransferred",C[C.GroupMemberRoleChanged=11]="GroupMemberRoleChanged",C[C.GroupMemberMuteChanged=12]="GroupMemberMuteChanged",(C=T.BlacklistChangeAction||(T.BlacklistChangeAction={}))[C.Added=0]="Added",C[C.Removed=1]="Removed",(C=T.UserRelationType||(T.UserRelationType={}))[C.SingleNo=1]="SingleNo",C[C.SingleHave=2]="SingleHave",C[C.BothAllNo=3]="BothAllNo",C[C.BothSelfHave=4]="BothSelfHave",C[C.BothOtherHave=5]="BothOtherHave",C[C.BothAllHave=6]="BothAllHave",(C=T.FriendRelationCheckType||(T.FriendRelationCheckType={}))[C.Both=0]="Both",C[C.Single=1]="Single",(C=T.FriendDeleteType||(T.FriendDeleteType={}))[C.Both=0]="Both",C[C.Single=1]="Single",(C=T.FriendListChangeAction||(T.FriendListChangeAction={}))[C.Added=0]="Added",C[C.Deleted=1]="Deleted",(C=T.FriendApplicationType||(T.FriendApplicationType={}))[C.None=0]="None",C[C.Received=1]="Received",C[C.Sent=2]="Sent",C[C.Both=3]="Both",(C=T.FriendApplicationState||(T.FriendApplicationState={}))[C.Waiting=1]="Waiting",C[C.Accepted=2]="Accepted",C[C.Rejected=3]="Rejected",C[C.Expired=4]="Expired",C[C.Disabled=5]="Disabled",(C=T.FriendApplicationListChangeAction||(T.FriendApplicationListChangeAction={}))[C.Added=0]="Added",(C=T.GroupMessageNotificationStatus||(T.GroupMessageNotificationStatus={}))[C.Notify=1]="Notify",C[C.Disturb=2]="Disturb",(C=T.GroupState||(T.GroupState={}))[C.Quit=0]="Quit",C[C.Enter=1]="Enter",(C=T.GroupEvent||(T.GroupEvent={}))[C.Created=1]="Created",C[C.Dismissed=2]="Dismissed",C[C.Joined=3]="Joined",C[C.Invited=4]="Invited",C[C.Left=5]="Left",C[C.KickedOut=6]="KickedOut",(C=T.GroupMemberState||(T.GroupMemberState={}))[C.Quit=0]="Quit",C[C.Enter=1]="Enter",(C=T.GroupMemberEvent||(T.GroupMemberEvent={}))[C.Joined=1]="Joined",C[C.Left=2]="Left",C[C.KickedOut=4]="KickedOut",C[C.Invited=5]="Invited",(C=T.GroupAttributesUpdateAction||(T.GroupAttributesUpdateAction={}))[C.Set=0]="Set",C[C.Delete=1]="Delete",(C=T.GroupMuteMode||(T.GroupMuteMode={}))[C.None=0]="None",C[C.Normal=1]="Normal",C[C.All=2]="All",C[C.Custom=3]="Custom",(C=T.GroupJoinMode||(T.GroupJoinMode={}))[C.Any=0]="Any",C[C.Auth=1]="Auth",C[C.Forbid=2]="Forbid",(C=T.GroupInviteMode||(T.GroupInviteMode={}))[C.Any=0]="Any",C[C.Admin=1]="Admin",(C=T.GroupBeInviteMode||(T.GroupBeInviteMode={}))[C.None=0]="None",C[C.Auth=1]="Auth",(C=T.GroupEnterType||(T.GroupEnterType={}))[C.Unknown=0]="Unknown",C[C.Created=1]="Created",C[C.JoinApply=2]="JoinApply",C[C.Joined=3]="Joined",C[C.Invited=4]="Invited",C[C.InviteApply=5]="InviteApply",(C=T.GroupApplicationType||(T.GroupApplicationType={}))[C.None=0]="None",C[C.Join=1]="Join",C[C.Invite=2]="Invite",C[C.BeInvite=3]="BeInvite",(C=T.GroupApplicationState||(T.GroupApplicationState={}))[C.Waiting=1]="Waiting",C[C.Accepted=2]="Accepted",C[C.Rejected=3]="Rejected",C[C.Expired=4]="Expired",C[C.Disabled=5]="Disabled",(C=T.GroupApplicationListChangeAction||(T.GroupApplicationListChangeAction={}))[C.Added=0]="Added",(C=T.RoomState||(T.RoomState={}))[C.Disconnected=0]="Disconnected",C[C.Connecting=1]="Connecting",C[C.Connected=2]="Connected",(C=T.RoomEvent||(T.RoomEvent={}))[C.Success=0]="Success",C[C.NetworkInterrupted=1]="NetworkInterrupted",C[C.NetworkDisconnected=2]="NetworkDisconnected",C[C.RoomNotExist=3]="RoomNotExist",C[C.ActiveCreate=4]="ActiveCreate",C[C.CreateFailed=5]="CreateFailed",C[C.ActiveEnter=6]="ActiveEnter",C[C.EnterFailed=7]="EnterFailed",C[C.KickedOut=8]="KickedOut",C[C.ConnectTimeout=9]="ConnectTimeout",C[C.KickedOutByOtherDevice=10]="KickedOutByOtherDevice",C[C.ActiveSwitch=11]="ActiveSwitch",C[C.SwitchFailed=12]="SwitchFailed",(C=T.RoomAttributesUpdateAction||(T.RoomAttributesUpdateAction={}))[C.Set=0]="Set",C[C.Delete=1]="Delete",j.default=O,E.p||typeof window>"u"||window.ZIM||(window.ZIM=O)},function(te,j,C){C.d(j,"a",function(){return O});function O(T){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(T)}},function(te,j,C){C.d(j,"a",function(){return _}),C.d(j,"b",function(){return E}),T.prototype.init=function(g){for(var x,A,m=0;m<256;++m)this.S[m]=m;for(m=x=0;m<256;++m)x=x+this.S[m]+g[m%g.length]&255,A=this.S[m],this.S[m]=this.S[x],this.S[x]=A;this.i=0,this.j=0},T.prototype.next=function(){this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255;var g=this.S[this.i];return this.S[this.i]=this.S[this.j],this.S[this.j]=g,this.S[g+this.S[this.i]&255]};var O=T;function T(){this.i=0,this.j=0,this.S=[]}function _(){return new O}var E=256},function(te,j,C){C.d(j,"a",function(){return E});var O=C(2),T=C(1),_=C(0),E=(j=function(x,A,m,f){var c,u=arguments.length,s=u<3?A:f===null?f=Object.getOwnPropertyDescriptor(A,m):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(x,A,m,f);else for(var r=x.length-1;0<=r;r--)(c=x[r])&&(s=(u<3?c(s):3<u?c(A,m,s):c(A,m))||s);return 3<u&&s&&Object.defineProperty(A,m,s),s},g.prototype.createNotInitError=function(){return this.engine?void 0:Object(T.y)(6000002)},g.prototype.destroy=function(){this.engine&&O.a.getInstance().destroyEngine(this.engine),this.engine=null},g.prototype.setLogConfig=function(x){this.engine&&O.a.getInstance().setLogConfig(x)},g.prototype.uploadLog=function(){return this.engine.uploadLog()},g.prototype.on=function(x,A){this.engine&&this.engine.on(x,A)},g.prototype.off=function(x){this.engine&&this.engine.off(x)},g.prototype.login=function(x,A){return this.engine.login(typeof x=="object"?x.userID:x,typeof A=="object"?A:{token:A,userName:typeof x=="object"?x.userName:"",customStatus:"",isOfflineLogin:!1})},g.prototype.logout=function(){this.engine&&this.engine.logout(!0)},g.prototype.renewToken=function(x){return this.engine.renewToken(x)},g.prototype.queryUsersInfo=function(x,A){return this.engine.queryUsers(x,A)},g.prototype.updateUserName=function(x){return this.engine.updateUser(1,x)},g.prototype.updateUserAvatarUrl=function(x){return this.engine.updateUser(16,x)},g.prototype.updateUserExtendedData=function(x){return this.engine.updateUser(10,x)},g.prototype.updateUserCustomStatus=function(x){return this.engine.updateUserStatus(x)},g.prototype.updateUserOfflinePushRule=function(x){return this.engine.updateUserRule(x)},g.prototype.querySelfUserInfo=function(){return this.engine.querySelf()},g.prototype.subscribeUsersStatus=function(x,A){return this.engine.subscribeUsersStatus(!0,x,A)},g.prototype.unsubscribeUsersStatus=function(x){return this.engine.subscribeUsersStatus(!1,x)},g.prototype.queryUsersStatus=function(x){return this.engine.queryUsersStatus(x)},g.prototype.querySubscribedUserStatusList=function(x){return this.engine.querySubscribedUsersStatus(x&&x.userIDs)},g.prototype.queryConversation=function(x,A){return this.engine.queryConv(x,A)},g.prototype.queryConversationList=function(x,A){return this.engine.queryConvs(x,A)},g.prototype.queryConversationPinnedList=function(x){return this.engine.queryPinneds(x)},g.prototype.queryConversationTotalUnreadMessageCount=function(x){return this.engine.queryUnreadCount(x)},g.prototype.deleteConversation=function(x,A,m){return this.engine.delConv(x,A,m)},g.prototype.deleteAllConversations=function(x){return this.engine.delAllConv(x)},g.prototype.clearConversationUnreadMessageCount=function(x,A){return this.engine.clearUnreadCount(x,A)},g.prototype.clearConversationTotalUnreadMessageCount=function(){return this.engine.clearAllUnreadCount()},g.prototype.deleteAllConversationMessages=function(x){return this.engine.delAllConvMsgs(x)},g.prototype.updateConversationPinnedState=function(x,A,m){return this.engine.updatePinnedState(x,A,m)},g.prototype.setConversationDraft=function(x,A,m){return this.engine.setConvDraft(x,A,m)},g.prototype.setConversationNotificationStatus=function(x,A,m){return this.engine.setNotifyStatus(x,A,m)},g.prototype.setConversationMark=function(x,A,m){return this.engine.setConvMark(x,A,m)},g.prototype.sendMediaMessage=function(x,A,m,f,c){return this.engine.sendMsg(x,A,m,f,c)},g.prototype.sendMessage=function(x,A,m,f,c){return this.engine.sendMsg(x,A,m,f,c)},g.prototype.editMessage=function(x,A,m){return this.engine.editMsg(x,A,m)},g.prototype.deleteMessages=function(x,A,m,f){return this.engine.delMsgs(x,A,m,f)},g.prototype.deleteAllMessage=function(x,A,m){return this.engine.delAllMsg(x,A,m)},g.prototype.queryHistoryMessage=function(x,A,m){return this.engine.queryHistoryMsg(x,A,m)},g.prototype.insertMessageToLocalDB=function(x,A,m,f){return this.engine.insertMsg(x,A,m,f)},g.prototype.updateMessageLocalExtendedData=function(x,A){return this.engine.updateMsgLocalExt(x,A)},g.prototype.revokeMessage=function(x,A){return this.engine.revokeMsg(x,A)},g.prototype.queryCombineMessageDetail=function(x){return this.engine.queryCombineMsg(x)},g.prototype.sendConversationMessageReceiptRead=function(x,A){return this.engine.sendConvReceipt(x,A)},g.prototype.sendMessageReceiptsRead=function(x,A,m){return this.engine.sendMsgReceipt(x,A,m)},g.prototype.queryMessageReceiptsInfo=function(x,A,m){return this.engine.queryMsgReceipt(x,A,m)},g.prototype.queryGroupMessageReceiptReadMemberList=function(x,A,m){return this.engine.queryReceiptMembers(x,A,m,!0)},g.prototype.queryGroupMessageReceiptUnreadMemberList=function(x,A,m){return this.engine.queryReceiptMembers(x,A,m,!1)},g.prototype.addMessageReaction=function(x,A){return this.engine.addMsgReaction(x,A)},g.prototype.deleteMessageReaction=function(x,A){return this.engine.delMsgReaction(x,A)},g.prototype.queryMessageReactionUserList=function(x,A){return this.engine.queryMsgReactions(x,A)},g.prototype.replyMessage=function(x,A,m,f){return this.engine.replyMessage(x,A,m,f)},g.prototype.queryMessageRepliedList=function(x,A){return this.engine.queryReplyMsg(x,A)},g.prototype.queryMessages=function(x,A,m){return this.engine.queryMessages(x,A,m)},g.prototype.createRoom=function(x,A){return this.engine.createRoom(_.y.Create,x,"",!1,A)},g.prototype.enterRoom=function(x,A){return this.engine.createRoom(_.y.Enter,x,"",!1,A)},g.prototype.joinRoom=function(x){return this.engine.createRoom(_.y.Join,{roomID:x,roomName:""},"",!1)},g.prototype.switchRoom=function(x,A,m,f){return this.engine.createRoom(_.y.Switch,A,x,m,f)},g.prototype.leaveRoom=function(x){return this.engine.leaveRoom(x)},g.prototype.leaveAllRoom=function(){return this.engine.leaveAllRoom()},g.prototype.queryRoomMemberList=function(x,A){return this.engine.queryRoomMemberList(x,A)},g.prototype.queryRoomMembers=function(x,A){return this.engine.queryRoomMembers(x,A)},g.prototype.queryRoomOnlineMemberCount=function(x){return this.engine.queryRoomOnlineMemberCount(x)},g.prototype.queryRoomAllAttributes=function(x){return this.engine.queryRoomAllAttr(x)},g.prototype.setRoomAttributes=function(x,A,m){return this.engine.setRoomAttr(x,A,m)},g.prototype.deleteRoomAttributes=function(x,A,m){return this.engine.delRoomAttr(x,A,m)},g.prototype.beginRoomAttributesBatchOperation=function(x,A){this.engine&&this.engine.beginRoomAttr(x,A)},g.prototype.endRoomAttributesBatchOperation=function(x){return this.engine.endRoomAttr(x)},g.prototype.setRoomMembersAttributes=function(x,A,m,f){return this.engine.setRoomMembersAttr(x,A,m,f)},g.prototype.queryRoomMembersAttributes=function(x,A){return this.engine.queryRoomMembersAttr(x,A)},g.prototype.queryRoomMemberAttributesList=function(x,A){return this.engine.queryRoomMemberAttrs(x,A)},g.prototype.createGroup=function(x,A,m){return this.engine.createGroup(x,A,m)},g.prototype.joinGroup=function(x){return this.engine.joinGroup(!0,x)},g.prototype.leaveGroup=function(x){return this.engine.leaveGroup(x)},g.prototype.dismissGroup=function(x){return this.engine.dismissGroup(x)},g.prototype.queryGroupList=function(){return this.engine.queryGroupList()},g.prototype.updateGroupNotice=function(x,A){return this.engine.updateGroupInfo(x,A,_.p.Notice).then(function(){return{groupID:A,groupNotice:x}})},g.prototype.updateGroupName=function(x,A){return this.engine.updateGroupInfo(x,A,_.p.Name).then(function(){return{groupID:A,groupName:x}})},g.prototype.updateGroupAvatarUrl=function(x,A){return this.engine.updateGroupInfo(x,A,_.p.Avatar).then(function(){return{groupID:A,groupAvatarUrl:x}})},g.prototype.muteGroup=function(x,A,m){return this.engine.muteGroup(x,A,m)},g.prototype.queryGroupInfo=function(x){return this.engine.queryGroupInfo(x)},g.prototype.setGroupAttributes=function(x,A){return this.engine.setGroupAttr(x,A)},g.prototype.deleteGroupAttributes=function(x,A){return this.engine.delGroupAttr(x,A)},g.prototype.queryGroupAttributes=function(x,A){return this.engine.queryGroupAttr(A,x)},g.prototype.queryGroupAllAttributes=function(x){return this.engine.queryGroupAttr(x)},g.prototype.transferGroupOwner=function(x,A){return this.engine.transferGroupOwner(x,A)},g.prototype.inviteUsersIntoGroup=function(x,A){return this.engine.inviteToGroup(!1,x,A)},g.prototype.kickGroupMembers=function(x,A){return this.engine.kickGroupMembers(x,A)},g.prototype.queryGroupMemberList=function(x,A){return this.engine.queryGroupMembers(x,A)},g.prototype.queryGroupMemberCount=function(x){return this.engine.queryGroupMemberCount(x)},g.prototype.muteGroupMembers=function(x,A,m,f){return this.engine.muteGroupMembers(x,A,m,f)},g.prototype.queryGroupMemberMutedList=function(x,A){return this.engine.queryGroupMemberMutedList(x,A)},g.prototype.updateGroupAlias=function(x,A){return this.engine.updateGroupAlias(x,A)},g.prototype.setGroupMemberNickname=function(x,A,m){return this.engine.setGroupMemberNickname(x,A,m)},g.prototype.setGroupMemberRole=function(x,A,m){return this.engine.setGroupMemberRole(x,A,m)},g.prototype.queryGroupMemberInfo=function(x,A){return this.engine.queryGroupMemberInfo(x,A)},g.prototype.updateGroupJoinMode=function(x,A){return this.engine.updateGroupVerifyMode(x,A,_.t.Join)},g.prototype.updateGroupInviteMode=function(x,A){return this.engine.updateGroupVerifyMode(x,A,_.t.Invite)},g.prototype.updateGroupBeInviteMode=function(x,A){return this.engine.updateGroupVerifyMode(x,A,_.t.BeInvite)},g.prototype.sendGroupJoinApplication=function(x,A){return this.engine.joinGroup(!1,x,A)},g.prototype.acceptGroupJoinApplication=function(x,A,m){return this.engine.acceptGroupApply(!0,x,A,m)},g.prototype.rejectGroupJoinApplication=function(x,A,m){return this.engine.rejectGroupApply(!0,x,A,m)},g.prototype.sendGroupInviteApplications=function(x,A,m){return this.engine.inviteToGroup(!0,x,A,m)},g.prototype.acceptGroupInviteApplication=function(x,A,m){return this.engine.acceptGroupApply(!1,x,A,m)},g.prototype.rejectGroupInviteApplication=function(x,A,m){return this.engine.rejectGroupApply(!1,x,A,m)},g.prototype.queryGroupApplicationList=function(x){return this.engine.queryGroupApplyList(x)},g.prototype.callInvite=function(x,A){return this.engine.callInvite(x,A)},g.prototype.callCancel=function(x,A,m){return this.engine.callCancel(x,A,m)},g.prototype.callAccept=function(x,A){return this.engine.callAccept(x,A)},g.prototype.callReject=function(x,A){return this.engine.callReject(x,A)},g.prototype.callQuit=function(x,A){return this.engine.callQuit(x,A)},g.prototype.callEnd=function(x,A){return this.engine.callEnd(x,A)},g.prototype.callJoin=function(x,A){return this.engine.callJoin(x,A)},g.prototype.callingInvite=function(x,A,m){return this.engine.callingInvite(x,A,m)},g.prototype.queryCallInvitationList=function(x){return this.engine.queryCalls(x)},g.prototype.searchLocalConversations=function(x){return this.engine.searchConv(x)},g.prototype.searchGlobalLocalMessages=function(x){return this.engine.searchGlobalMsg(x)},g.prototype.searchLocalMessages=function(x,A,m){return this.engine.searchMsg(x,A,m)},g.prototype.searchLocalGroups=function(x){return this.engine.searchGroup(x)},g.prototype.searchLocalGroupMembers=function(x,A){return this.engine.searchGroupMember(x,A)},g.prototype.searchLocalFriends=function(x){return this.engine.searchFriend(x)},g.prototype.addFriend=function(x,A){return this.engine.addFriend(x,A)},g.prototype.sendFriendApplication=function(x,A){return this.engine.sendFriendApply(x,A)},g.prototype.deleteFriends=function(x,A){return this.engine.delFriends(x,A)},g.prototype.checkFriendsRelation=function(x,A){return this.engine.checkFriendsRelation(x,A)},g.prototype.updateFriendAlias=function(x,A){return this.engine.updateFriendAlias(x,A)},g.prototype.updateFriendAttributes=function(x,A){return this.engine.updateFriendAttr(x,A)},g.prototype.acceptFriendApplication=function(x,A){return this.engine.acceptFriendApply(x,A)},g.prototype.rejectFriendApplication=function(x,A){return this.engine.rejectFriendApply(x,A)},g.prototype.queryFriendsInfo=function(x){return this.engine.queryFriendsInfo(x)},g.prototype.queryFriendList=function(x){return this.engine.queryFriendList(x)},g.prototype.queryFriendApplicationList=function(x){return this.engine.queryFriendApplyList(x)},g.prototype.addUsersToBlacklist=function(x){return this.engine.addBlacklist(x)},g.prototype.removeUsersFromBlacklist=function(x){return this.engine.removeBlacklist(x)},g.prototype.checkUserIsInBlacklist=function(x){return this.engine.checkBlacklist(x)},g.prototype.queryBlacklist=function(x){return this.engine.queryBlacklist(x)},j([Object(T.q)()],g.prototype,"uploadLog",null),j([Object(T.q)()],g.prototype,"login",null),j([Object(T.q)()],g.prototype,"renewToken",null),j([Object(T.q)()],g.prototype,"queryUsersInfo",null),j([Object(T.q)()],g.prototype,"updateUserName",null),j([Object(T.q)()],g.prototype,"updateUserAvatarUrl",null),j([Object(T.q)()],g.prototype,"updateUserExtendedData",null),j([Object(T.q)()],g.prototype,"updateUserCustomStatus",null),j([Object(T.q)()],g.prototype,"updateUserOfflinePushRule",null),j([Object(T.q)()],g.prototype,"querySelfUserInfo",null),j([Object(T.q)()],g.prototype,"subscribeUsersStatus",null),j([Object(T.q)()],g.prototype,"unsubscribeUsersStatus",null),j([Object(T.q)()],g.prototype,"queryUsersStatus",null),j([Object(T.q)()],g.prototype,"querySubscribedUserStatusList",null),j([Object(T.q)()],g.prototype,"queryConversation",null),j([Object(T.q)()],g.prototype,"queryConversationList",null),j([Object(T.q)()],g.prototype,"queryConversationPinnedList",null),j([Object(T.q)()],g.prototype,"queryConversationTotalUnreadMessageCount",null),j([Object(T.q)()],g.prototype,"deleteConversation",null),j([Object(T.q)()],g.prototype,"deleteAllConversations",null),j([Object(T.q)()],g.prototype,"clearConversationUnreadMessageCount",null),j([Object(T.q)()],g.prototype,"clearConversationTotalUnreadMessageCount",null),j([Object(T.q)()],g.prototype,"deleteAllConversationMessages",null),j([Object(T.q)()],g.prototype,"updateConversationPinnedState",null),j([Object(T.q)()],g.prototype,"setConversationDraft",null),j([Object(T.q)()],g.prototype,"setConversationNotificationStatus",null),j([Object(T.q)()],g.prototype,"setConversationMark",null),j([Object(T.q)()],g.prototype,"sendMediaMessage",null),j([Object(T.q)()],g.prototype,"sendMessage",null),j([Object(T.q)()],g.prototype,"editMessage",null),j([Object(T.q)()],g.prototype,"deleteMessages",null),j([Object(T.q)()],g.prototype,"deleteAllMessage",null),j([Object(T.q)()],g.prototype,"queryHistoryMessage",null),j([Object(T.q)()],g.prototype,"insertMessageToLocalDB",null),j([Object(T.q)()],g.prototype,"updateMessageLocalExtendedData",null),j([Object(T.q)()],g.prototype,"revokeMessage",null),j([Object(T.q)()],g.prototype,"queryCombineMessageDetail",null),j([Object(T.q)()],g.prototype,"sendConversationMessageReceiptRead",null),j([Object(T.q)()],g.prototype,"sendMessageReceiptsRead",null),j([Object(T.q)()],g.prototype,"queryMessageReceiptsInfo",null),j([Object(T.q)()],g.prototype,"queryGroupMessageReceiptReadMemberList",null),j([Object(T.q)()],g.prototype,"queryGroupMessageReceiptUnreadMemberList",null),j([Object(T.q)()],g.prototype,"addMessageReaction",null),j([Object(T.q)()],g.prototype,"deleteMessageReaction",null),j([Object(T.q)()],g.prototype,"queryMessageReactionUserList",null),j([Object(T.q)()],g.prototype,"replyMessage",null),j([Object(T.q)()],g.prototype,"queryMessageRepliedList",null),j([Object(T.q)()],g.prototype,"queryMessages",null),j([Object(T.q)()],g.prototype,"createRoom",null),j([Object(T.q)()],g.prototype,"enterRoom",null),j([Object(T.q)()],g.prototype,"joinRoom",null),j([Object(T.q)()],g.prototype,"switchRoom",null),j([Object(T.q)()],g.prototype,"leaveRoom",null),j([Object(T.q)()],g.prototype,"leaveAllRoom",null),j([Object(T.q)()],g.prototype,"queryRoomMemberList",null),j([Object(T.q)()],g.prototype,"queryRoomMembers",null),j([Object(T.q)()],g.prototype,"queryRoomOnlineMemberCount",null),j([Object(T.q)()],g.prototype,"queryRoomAllAttributes",null),j([Object(T.q)()],g.prototype,"setRoomAttributes",null),j([Object(T.q)()],g.prototype,"deleteRoomAttributes",null),j([Object(T.q)()],g.prototype,"endRoomAttributesBatchOperation",null),j([Object(T.q)()],g.prototype,"setRoomMembersAttributes",null),j([Object(T.q)()],g.prototype,"queryRoomMembersAttributes",null),j([Object(T.q)()],g.prototype,"queryRoomMemberAttributesList",null),j([Object(T.q)()],g.prototype,"createGroup",null),j([Object(T.q)()],g.prototype,"joinGroup",null),j([Object(T.q)()],g.prototype,"leaveGroup",null),j([Object(T.q)()],g.prototype,"dismissGroup",null),j([Object(T.q)()],g.prototype,"queryGroupList",null),j([Object(T.q)()],g.prototype,"updateGroupNotice",null),j([Object(T.q)()],g.prototype,"updateGroupName",null),j([Object(T.q)()],g.prototype,"updateGroupAvatarUrl",null),j([Object(T.q)()],g.prototype,"muteGroup",null),j([Object(T.q)()],g.prototype,"queryGroupInfo",null),j([Object(T.q)()],g.prototype,"setGroupAttributes",null),j([Object(T.q)()],g.prototype,"deleteGroupAttributes",null),j([Object(T.q)()],g.prototype,"queryGroupAttributes",null),j([Object(T.q)()],g.prototype,"queryGroupAllAttributes",null),j([Object(T.q)()],g.prototype,"transferGroupOwner",null),j([Object(T.q)()],g.prototype,"inviteUsersIntoGroup",null),j([Object(T.q)()],g.prototype,"kickGroupMembers",null),j([Object(T.q)()],g.prototype,"queryGroupMemberList",null),j([Object(T.q)()],g.prototype,"queryGroupMemberCount",null),j([Object(T.q)()],g.prototype,"muteGroupMembers",null),j([Object(T.q)()],g.prototype,"queryGroupMemberMutedList",null),j([Object(T.q)()],g.prototype,"updateGroupAlias",null),j([Object(T.q)()],g.prototype,"setGroupMemberNickname",null),j([Object(T.q)()],g.prototype,"setGroupMemberRole",null),j([Object(T.q)()],g.prototype,"queryGroupMemberInfo",null),j([Object(T.q)()],g.prototype,"updateGroupJoinMode",null),j([Object(T.q)()],g.prototype,"updateGroupInviteMode",null),j([Object(T.q)()],g.prototype,"updateGroupBeInviteMode",null),j([Object(T.q)()],g.prototype,"sendGroupJoinApplication",null),j([Object(T.q)()],g.prototype,"acceptGroupJoinApplication",null),j([Object(T.q)()],g.prototype,"rejectGroupJoinApplication",null),j([Object(T.q)()],g.prototype,"sendGroupInviteApplications",null),j([Object(T.q)()],g.prototype,"acceptGroupInviteApplication",null),j([Object(T.q)()],g.prototype,"rejectGroupInviteApplication",null),j([Object(T.q)()],g.prototype,"queryGroupApplicationList",null),j([Object(T.q)()],g.prototype,"callInvite",null),j([Object(T.q)()],g.prototype,"callCancel",null),j([Object(T.q)()],g.prototype,"callAccept",null),j([Object(T.q)()],g.prototype,"callReject",null),j([Object(T.q)()],g.prototype,"callQuit",null),j([Object(T.q)()],g.prototype,"callEnd",null),j([Object(T.q)()],g.prototype,"callJoin",null),j([Object(T.q)()],g.prototype,"callingInvite",null),j([Object(T.q)()],g.prototype,"queryCallInvitationList",null),j([Object(T.q)()],g.prototype,"searchLocalConversations",null),j([Object(T.q)()],g.prototype,"searchGlobalLocalMessages",null),j([Object(T.q)()],g.prototype,"searchLocalMessages",null),j([Object(T.q)()],g.prototype,"searchLocalGroups",null),j([Object(T.q)()],g.prototype,"searchLocalGroupMembers",null),j([Object(T.q)()],g.prototype,"searchLocalFriends",null),j([Object(T.q)()],g.prototype,"addFriend",null),j([Object(T.q)()],g.prototype,"sendFriendApplication",null),j([Object(T.q)()],g.prototype,"deleteFriends",null),j([Object(T.q)()],g.prototype,"checkFriendsRelation",null),j([Object(T.q)()],g.prototype,"updateFriendAlias",null),j([Object(T.q)()],g.prototype,"updateFriendAttributes",null),j([Object(T.q)()],g.prototype,"acceptFriendApplication",null),j([Object(T.q)()],g.prototype,"rejectFriendApplication",null),j([Object(T.q)()],g.prototype,"queryFriendsInfo",null),j([Object(T.q)()],g.prototype,"queryFriendList",null),j([Object(T.q)()],g.prototype,"queryFriendApplicationList",null),j([Object(T.q)()],g.prototype,"addUsersToBlacklist",null),j([Object(T.q)()],g.prototype,"removeUsersFromBlacklist",null),j([Object(T.q)()],g.prototype,"checkUserIsInBlacklist",null),j([Object(T.q)()],g.prototype,"queryBlacklist",null),g);function g(x){if(!x||!x.setContext)throw new Error("Can not use new.");(this.engine=x).setContext(this),g._instance=this}},function(te,j,C){var O,T,_,E,g;te.exports=(te=C(5),C(96),C(97),O=(_=(C=te).lib).Base,T=_.WordArray,E=(_=C.algo).MD5,g=_.EvpKDF=O.extend({cfg:O.extend({keySize:4,hasher:E,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,A){for(var m,f=this.cfg,c=f.hasher.create(),u=T.create(),s=u.words,r=f.keySize,i=f.iterations;s.length<r;){m&&c.update(m),m=c.update(x).finalize(A),c.reset();for(var a=1;a<i;a++)m=c.finalize(m),c.reset();u.concat(m)}return u.sigBytes=4*r,u}}),C.EvpKDF=function(x,A,m){return g.create(m).compute(x,A)},te.EvpKDF)},function(te,j,C){C.d(j,"b",function(){return O}),C.d(j,"c",function(){return T}),C.d(j,"a",function(){return _});var O=function(){return function(E,g,x){return{value:function(){for(var A=[],m=0;m<arguments.length;m++)A[m]=arguments[m];var f=E.createNotInitError.call(this);return f?Promise.reject(f):x.value.apply(this,A)}}}},T=function(E,g){return function(x,A,m){return{value:function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];var u=x.createNotLoggedError.call(this,E,g);return u?Promise.reject(u):m.value.apply(this,f)}}}},_=function(E,g,x){var A,m=0;return function(f,c,u){return{value:function(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];var i=Date.now();if(m++,i-(A=A||i)<g){if(E<m)return Promise.reject(f.createFrequencyLimitError.call(this,x))}else A=i,m=0;return u.value.apply(this,s)}}}}},function(te,j,C){C.d(j,"n",function(){return A}),C.d(j,"h",function(){return m}),C.d(j,"i",function(){return f}),C.d(j,"k",function(){return c}),C.d(j,"j",function(){return u}),C.d(j,"g",function(){return s}),C.d(j,"c",function(){return r}),C.d(j,"b",function(){return i}),C.d(j,"m",function(){return a}),C.d(j,"l",function(){return o}),C.d(j,"o",function(){return l}),C.d(j,"q",function(){return h}),C.d(j,"t",function(){return R}),C.d(j,"p",function(){return w}),C.d(j,"r",function(){return D}),C.d(j,"s",function(){return S}),C.d(j,"f",function(){return y}),C.d(j,"e",function(){return k}),C.d(j,"a",function(){return U}),C.d(j,"d",function(){return z});var O=C(6),T=(j=C(4),C.n(j)),_=C(0),E=function(P,H){var Q=typeof Symbol=="function"&&P[Symbol.iterator];if(!Q)return P;var J,L,q=Q.call(P),B=[];try{for(;(H===void 0||0<H--)&&!(J=q.next()).done;)B.push(J.value)}catch(Y){L={error:Y}}finally{try{J&&!J.done&&(Q=q.return)&&Q.call(q)}finally{if(L)throw L.error}}return B},g=function(P,H,Q){if(arguments.length===2)for(var J,L=0,q=H.length;L<q;L++)!J&&L in H||((J=J||Array.prototype.slice.call(H,0,L))[L]=H[L]);return P.concat(J||Array.prototype.slice.call(H))},x="web".indexOf("wx")!=-1,A=x?typeof tt<"u"?(tt._zim_platform="douyin",tt._zim_env=tt.env.VERSION,tt):typeof swan<"u"?(swan._zim_platform="baidu",swan._zim_env="",swan):typeof my<"u"?(my._zim_platform="alipay",my._zim_isAlipay=!0,my._zim_env=my.getAccountInfoSync().miniProgram.envVersion,my):typeof wx<"u"?(wx._zim_platform="weixin",wx._zim_env=wx.getAccountInfoSync().miniProgram.envVersion,wx):null:null,m=(()=>{var P,H,Q="z_deviceID",J=(P=new Date().getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var B=(P+16*Math.random())%16|0;return P=Math.floor(P/16),(q=="x"?B:3&B|8).toString(36)})),L="";try{x?(H=A.getStorageSync(A._zim_isAlipay?{key:Q}:Q)||"")&&H.data?L=typeof H=="object"?H.data:H:(L=J,A._zim_isAlipay?A.setStorageSync({key:Q,data:L}):A.setStorageSync(Q,L)):(L=localStorage.getItem(Q)||"")||(L=J,localStorage.setItem(Q,L))}catch{L=J}return L})(),f=x?(C=(j=A.getSystemInfoSync()).brand,JSON.stringify({env:A._zim_env,brand:C,model:j.model,version:j.version,system:j.system,platform:A._zim_platform+","+j.platform,SDKVersion:j.SDKVersion,benchmarkLevel:j.benchmarkLevel})):navigator.userAgent,c=function(){return new Date().getTime()+Math.random().toString().substring(2,7)},u=function(P){if(typeof P!="string")return P;if(!P)return new Uint8Array;try{var H;return typeof TextEncoder<"u"?new TextEncoder().encode(P):(H=unescape(encodeURIComponent(P)),new Uint8Array(Array.from(H).map(function(B){return B.charCodeAt(0)})))}catch{for(var Q=P,J=[],L=0;L<Q.length;L++){var q=Q.charCodeAt(L);q<=127?J.push(q):q<=2047?J.push(192|q>>6,128|63&q):q<=65535?J.push(224|q>>12,128|q>>6&63,128|63&q):J.push(240|q>>18,128|q>>12&63,128|q>>6&63,128|63&q)}return new Uint8Array(J)}},s=function(P){if(typeof P=="string")return P;if(!P||!P.length)return"";try{return typeof TextDecoder<"u"?new TextDecoder().decode(P):(H=String.fromCharCode.apply(String,g([],E(Array.from(P)),!1)),decodeURIComponent(escape(H)))}catch{try{var H=String.fromCharCode.apply(String,g([],E(Array.from(P)),!1));return decodeURIComponent(H)}catch{for(var Q=P,J="",L=0;L<Q.length;L++){var q,B=Q[L];(128&B)==0?J+=String.fromCharCode(B):(224&B)==192?(q=(31&B)<<6|63&Q[++L],J+=String.fromCharCode(q)):(240&B)==224?(q=(15&B)<<12|(63&Q[++L])<<6|63&Q[++L],J+=String.fromCharCode(q)):(248&B)==240&&(65535<(q=(7&B)<<18|(63&Q[++L])<<12|(63&Q[++L])<<6|63&Q[++L])?(q-=65536,J+=String.fromCharCode(55296|q>>10,56320|1023&q)):J+=String.fromCharCode(q))}return J}}},r=function(P){return O.a.fromUint8Array(P)},i=function(P){return O.a.toUint8Array(P)},a=function(P,H){return!!P&&typeof P=="string"&&P.length<=_.h.MAX_ID_SIZE&&(!H||P[0]!="#")},o=function(P,H){if(!P||typeof P!="string"||P.length<31)return[6000103];if(P.substring(0,2)!=="04")return[6000107];try{var Q=Date.now()/1e3,J=Array.from(O.a.toUint8Array(P.substring(2,14))),L=T.a.fromBytes(J.slice(0,8)).toInt();return[L<H||L<Q?6000106:L<30+Q?6000108:2073600+Q<L?6000109:0,L]}catch{return[6000103]}},l=function(P,H){var Q={};return P.forEach(function(J){return Q[J]=H[J]}),Q},h=function(P,H){var Q=H.dbUserMap.get(P)||{userID:P};return P&&!Q.userName&&H.syncUserTask.add(P),{userID:Q.userID,userName:Q.userName||"",userAvatarUrl:Q.userAvatarUrl||""}},R=function(P,H,Q){var J=H.dbUserMap.get(P.userID);return J?((!Q||!J.updateTime||Q>J.updateTime)&&(P.userName&&(J.userName=P.userName),P.userAvatarUrl&&(J.userAvatarUrl=P.userAvatarUrl),Q)&&(J.updateTime=Q),P.hasOwnProperty("extendedData")&&(J.extendedData=P.extendedData),J):(Q&&(P.updateTime=Q),H.dbUserMap.set(P.userID,P),P)},w=function(P,H){var Q,J;return P?(Q=H.dbUserMap.get(P.userID),(J=P.operatedUser)&&Object.assign(J,h(J.userID,H)),{userID:P.userID,userName:(Q==null?void 0:Q.userName)||"",userAvatarUrl:(Q==null?void 0:Q.userAvatarUrl)||"",memberNickname:P.memberNickname||"",memberRole:P.memberRole||_.s.Member,muteExpiredTime:P.muteExpiredTime||0,groupEnterInfo:{enterTime:P.enterTime||0,enterType:P.enterType||_.c.GroupEnterType.Unknown,operatedUser:J}}):{}},d=((C={})[_.x.RevokeSelf]=0,C[_.x.RevokeSystem]=1,C[_.x.RevokeService]=2,C[_.x.RevokeGroupAdmin]=3,C[_.x.RevokeGroupOwner]=4,C[_.x.RevokeAudit]=5,C[_.x.ReceiptDone]=2,C[_.x.ReceiptExpired]=3,C[_.x.ReceiptFailed]=4,C[_.x.ReceiptDoing]=1,C),D=function(P){for(var H,Q=0,J={revoke:0,receipt:0};P;)1&P&&((H=1<<Q)>=_.x.RevokeSelf&&H<=_.x.RevokeAudit?J.revoke+=H:H>=_.x.ReceiptDone&&H<=_.x.ReceiptDoing&&(J.receipt+=H)),Q++,P>>=1;return J.revoke=J.revoke>=_.x.RevokeSelf&&J.revoke<=_.x.RevokeAudit?d[J.revoke]:_.c.MessageRevokeStatus.Unknown,J.receipt=J.receipt>=_.x.ReceiptDone&&J.receipt<=_.x.ReceiptDoing?d[J.receipt]:_.c.MessageReceiptStatus.None,J},S=(Math.log2||(Math.log2=function(P){return Math.log(P)/Math.LN2}),function(P,H){H===void 0&&(H=!0);var Q=[];if(P&&P.toString()!="0")for(var J=0,L=Math.pow(2,J);P.greaterThanOrEqual(L);)P.and(L).toString()!=="0"&&Q.push(H?Math.log2(L)+1:L),J++,L=Math.pow(2,J);return Q}),y=function(P,H){if(P&&P.title&&P.content)return{enable_push:1,title:String(P.title),content:String(P.content),payload:String(P.payload||""),pushStrategyId:String(P.resourcesID||""),enable_force_push:H,custom_map:P.enableBadge||P.voIPConfig?{badge_increment:P.enableBadge?String(P.badgeIncrement||0):void 0,sdk_params:P.voIPConfig?JSON.stringify({voip_handle_type:P.voIPConfig.iOSVoIPHandleType,voip_handle_value:String(P.voIPConfig.iOSVoIPHandleValue||""),voip_has_video:!!P.voIPConfig.iOSVoIPHasVideo}):void 0}:void 0}},k=function(P,H){var Q=P.is_all_forbid,J=P.forbid_list;return(P=P.forbid_expire_time)!=-1&&P<H?{mode:_.c.GroupMuteMode.None,expiredTime:0,roles:[]}:(H=_.c.GroupMuteMode.None,P!=0&&Q?H=_.c.GroupMuteMode.All:J.length==1&&J[0]==_.s.Member?H=_.c.GroupMuteMode.Normal:P!=0&&J.length&&(H=_.c.GroupMuteMode.Custom),{mode:H,expiredTime:P,roles:J})},b=function(P,H){if(!P||!H||Object.keys(P).length!==Object.keys(H).length)return!1;var Q,J=!0;for(Q in P)H[Q]===void 0&&(J=!1),(typeof P[Q]=="object"&&typeof H[Q])=="object"?J=b(P[Q],H[Q]):P[Q]!==H[Q]&&(J=!1);return J},U=function(P,H){var Q;return!(!P||!H)&&P.length===H.length&&(Q=!0,P.forEach(function(J,L){b(J,H[L])||(Q=!1)}),Q)},z=function(P,H){return!!P&&P.toLocaleLowerCase().indexOf(H)!=-1}},function(te,j,C){var O,T,_,E,g,x,A,m,f,c,u,s,r,i,a,o;C.d(j,"p",function(){return O}),C.d(j,"o",function(){return T}),C.d(j,"c",function(){return _}),C.d(j,"e",function(){return E}),C.d(j,"h",function(){return g}),C.d(j,"l",function(){return x}),C.d(j,"k",function(){return A}),C.d(j,"g",function(){return m}),C.d(j,"i",function(){return f}),C.d(j,"j",function(){return c}),C.d(j,"f",function(){return u}),C.d(j,"m",function(){return s}),C.d(j,"n",function(){return r}),C.d(j,"d",function(){return i}),C.d(j,"b",function(){return a}),C.d(j,"a",function(){return o}),(C=O=O||{}).conv="convSeq",C.gp="groupSeq",C.cl="callSeq",C.pin="convPinnedSeq",C.mute="muteSeq",C.msg="c2cMsgSeq",C.ext="msgExtraSeq",C.state="c2cMsgStateSeq",C.bl="blacklistSeq",C.fd="friendSeq",C.fdApp="friendAppSeq",C.gpApp="groupAppSeq",(j=T=T||{})[j.Create=1]="Create",j[j.Enter=2]="Enter",j[j.Join=3]="Join",j[j.Switch=4]="Switch",(C=_=_||{})[C.Cancel=0]="Cancel",C[C.Timeout=1]="Timeout",(j=E=E||{})[j.Normal=0]="Normal",j[j.Disable=1]="Disable",j[j.Delete=2]="Delete",(C=g=g||{})[C.Notice=0]="Notice",C[C.Name=1]="Name",C[C.Avatar=2]="Avatar",C[C.Mute=3]="Mute",C[C.Limit=4]="Limit",C[C.SvrData=5]="SvrData",(j=x=x||{})[j.Join=0]="Join",j[j.Invite=1]="Invite",j[j.BeInvite=2]="BeInvite",(C=A=A||{})[C.Owner=1]="Owner",C[C.Admin=2]="Admin",C[C.Member=3]="Member",(j=m=m||{})[j.Set=0]="Set",j[j.Delete=1]="Delete",j[j.Push=2]="Push",j[j.Query=3]="Query",(C=f=f||{})[C.None=0]="None",C[C.Enter=1]="Enter",C[C.Quit=2]="Quit",C[C.Modify=3]="Modify",C[C.Kickout=4]="Kickout",C[C.Invited=5]="Invited",C[C.OwnerQuit=6]="OwnerQuit",C[C.Mute=7]="Mute",C[C.ApplyJoin=8]="ApplyJoin",C[C.ApplyInvited=9]="ApplyInvited",(j=c=c||{})[j.Nickname=0]="Nickname",j[j.Role=1]="Role",(C=u=u||{})[C.Other=0]="Other",C[C.L=1]="L",C[C.P=2]="P",C[C.H=3]="H",C[C.B=4]="B",(j=s=s||{}).Insert="Insert",j.Sending="Sending",j.Sended="Sended",j.Push="Push",j.Fetch="Fetch",(C=r=r||{})[C.None=0]="None",C[C.RevokeSelf=4]="RevokeSelf",C[C.RevokeSystem=8]="RevokeSystem",C[C.RevokeService=12]="RevokeService",C[C.RevokeGroupAdmin=16]="RevokeGroupAdmin",C[C.RevokeGroupOwner=20]="RevokeGroupOwner",C[C.RevokeAudit=24]="RevokeAudit",C[C.ReceiptDone=64]="ReceiptDone",C[C.ReceiptExpired=128]="ReceiptExpired",C[C.ReceiptFailed=192]="ReceiptFailed",C[C.ReceiptDoing=256]="ReceiptDoing",C[C.VoteDoing=1024]="VoteDoing",C[C.VoteDone=2048]="VoteDone",(j=i=i||{})[j.DontDisturb=-1]="DontDisturb",j[j.RecoverDisturb=0]="RecoverDisturb",j[j.HandleMessage=1]="HandleMessage",(C=a=a||{})[C.Insert=0]="Insert",C[C.Remove=1]="Remove",(j=o=o||{})[j.FetchAll=0]="FetchAll",j[j.FetchMessageList=1]="FetchMessageList",j[j.FetchMessageStatusList=2]="FetchMessageStatusList"},function(te,j,C){C.d(j,"d",function(){return E}),C.d(j,"c",function(){return O}),C.d(j,"b",function(){return T}),C.d(j,"a",function(){return r});var O,T,_=function(){return(_=Object.assign||function(i){for(var a,o=1,l=arguments.length;o<l;o++)for(var h in a=arguments[o])Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h]);return i}).apply(this,arguments)},E=function(i){return i==100021||i==100043},g=(C=((C=O=O||{})[C.S=0]="S",C[C.A=1]="A",(j=T=T||{})[j.L=0]="L",j[j.M=1]="M",j[j.H=2]="H",j[j.H1=10]="H1",{req:"QueryRoomMsgReq",rsp:"QueryRoomMsgRsp",w:T.H}),j={req:"GetStatemsgListReq",rsp:"GetStatemsgListRsp",w:T.M},{req:"C2CReadReceiptReq",rsp:"C2CReadReceiptRsp",w:T.M}),x={req:"RevokeMsgReq",rsp:"GetUserStatusRsp",w:T.M},A={req:"SetReactionReq",rsp:"SetReactionRsp",w:T.M},m={req:"DelReactionReq",rsp:"SetReactionRsp",w:T.M},f={req:"ReactionInfoReq",rsp:"ReactionInfoRsp",w:T.M},c={req:"ReactionListReq",rsp:"ReactionListRsp",w:T.M},u={req:"BatchFetchConvMsgReq",rsp:"BatchFetchConvMsgRsp",w:T.M},s={req:"DelReactionReq",rsp:"FetchReplyListRsp",w:T.M},r={sw_handshake:{cmd:"/sw/handshake_req",req:"HandshakeReq"},sw_login:{cmd:"/sw/login",req:"LoginReq",rsp:"LoginRsp",w:T.H1},sw_logout:{cmd:"/sw/logout",req:"StCommandMsgInfo",rsp:"CodeMsg",w:T.H1},sw_renew_token:{cmd:"/sw/renew_token",req:"ModifyUserInfoReq",rsp:"CodeMsg",w:T.H1},sw_hb:{cmd:"/sw/hb",req:"ModifyUserInfoReq",rsp:"HbRsp",w:T.H1},swp_kickout:{cmd:"/sw/push_kickout",rsp:"ErrList"},swp_redirect:{cmd:"/sw/push_redirect",rsp:"FriendDeletedReq"},swp_list:{cmd:"/sw/push_list",rsp:"PushListRequest"},swp_list_rsp:{cmd:"/sw/push_list_rsp",req:"PushListRsp"},p_log:{cmd:"push_detaillog_report",rsp:"CodeMsg"},mp_user_mdf:{cmd:"push_modify_userinfo",rsp:"ModifyUserInfoReq"},mp_user_status:{cmd:"push_self_user_status",rsp:"PushUserSelfStatus"},mp_msg_del:{cmd:"push_conv_msg_delete",rsp:"PushDelConvMsg"},mp_msg_del_all:{cmd:"push_clean_all_msg",rsp:"StMsgClientInfo"},mp_conv_del:{cmd:"push_conv_delete",rsp:"ConvInfo"},mp_conv_del_all:{cmd:"push_del_all_conv",rsp:"StMsgClientInfo"},mp_conv_read:{cmd:"push_update_readseq",rsp:"ConvInfo"},mp_conv_unread_clean:{cmd:"push_clean_unread",rsp:"StMsgClientInfo"},mp_conv_pinned:{cmd:"push_conv_pinned",rsp:"PushPinnedConvChange"},mp_conv_mark:{cmd:"push_conv_mark",rsp:"PushConvMark"},mp_c2c_notify:{cmd:"push_c2c_mute",rsp:"PushC2cMute"},mp_gp_notify:{cmd:"push_group_mute",rsp:"ConvInfo"},mp_gp_remark:{cmd:"push_group_remark",rsp:"GroupInfo"},mp_gp_enter:{cmd:"push_enter_group",rsp:"PushEnterGroup"},mp_gp_quit:{cmd:"push_quit_group",rsp:"PushGroupOwnerTransfer"},mp_bl_add:{cmd:"push_blacklist_add",rsp:"PushBlacklistAdd"},mp_bl_del:{cmd:"push_blacklist_del",rsp:"PushBlacklistDelete"},mp_fd_add:{cmd:"push_friend_add_to_self",rsp:"PushFriendAdd2Self"},mp_fd_app:{cmd:"push_friend_apply_to_self",rsp:"PushFriendApply2Self"},mp_fd_apt:{cmd:"push_friend_accept_to_self",rsp:"PushFriendAccept"},mp_fd_rfe:{cmd:"push_friend_refuse_to_self",rsp:"PushFriendRefuse"},mp_fd_del:{cmd:"push_friend_delete_to_self",rsp:"PushFriendAdd2Self"},mp_fd_attr_mdf:{cmd:"push_modify_friend_attribute",rsp:"PushModifyFriendAttribute"},mp_fd_remark_mdf:{cmd:"usermail/push_modify_friend_remark",rsp:"StGroupAttribute"},user_mdf:{cmd:"/sw/modify_info",req:"ModifyUserInfoReq",rsp:"ConvDelRsp",w:T.M},user_fetch:{cmd:"account/fetch_user_info",req:"FriendDeletedReq",rsp:"UserInfoRsp",w:T.H},user_zpns:{cmd:"userstate/zpns_report",req:"StGroupAttribute",rsp:"CodeMsg",w:T.H1},user_rule:{cmd:"account/fetch_self_user_rule",req:"",rsp:"SelfUserInfoRsp",w:T.H},user_rule_mdf:{cmd:"account/modify_custom_push",req:"ModifyUserCustomPush",rsp:"ConvDelRsp",w:T.M},user_sub:{cmd:"usermail/subscribe_user_status",req:"FriendDeletedReq",rsp:"SubscribeUserStatusRsp",w:T.M,ext:{unsub:!1,sublist:!1}},user_unsub:{cmd:"usermail/unsubscribe_user",req:"FriendDeletedReq",rsp:"SubscribeUserStatusRsp",w:T.M,ext:{unsub:!0,sublist:!1}},user_sub_list:{cmd:"usermail/fetch_subscribe_list",req:"FriendListReq",rsp:"SubscribeUserStatusRsp",w:T.M,ext:{unsub:!1,sublist:!0}},user_status:{cmd:"userstate/fetch_user_status",req:"FriendDeletedReq",rsp:"FetchUserStatusRsp",w:T.M},user_mdf_status:{cmd:"userstate/set_custom_status",req:"StGroupAttribute",rsp:"GetUserStatusRsp",w:T.M},user_self_status:{cmd:"userstate/get_self_status",req:"",rsp:"GetUserStatusRsp",w:T.H},p_status:{cmd:"push_user_status_change",rsp:"PushUserStatusChange"},conv_hb:{cmd:"usermail/hb",req:"StMsgClientInfo",rsp:"UserMailHbRsp",w:T.H1},conv_list:{cmd:"usermail/convlist",req:"FriendListReq",rsp:"GetConvListRsp",w:T.H1},conv_del:{cmd:"usermail/del_conv",req:"UpdateReadSeqReq",rsp:"ConvDelRsp",w:T.M},conv_del_all:{cmd:"usermail/del_all_conv",req:"StMsgClientInfo",rsp:"CodeMsg",w:T.M},conv_read_seq:{cmd:"usermail/update_read_seq",req:"UpdateReadSeqReq",rsp:"ConvDelRsp",w:T.M},conv_clean_all_unread:{cmd:"usermail/clean_all_unread",req:"StMsgClientInfo",rsp:"CodeMsg",w:T.M},conv_pinned:{cmd:"usermail/conv_pinned",req:"StCheckFriendFail",rsp:"ConvDelRsp",w:T.M},conv_pinned_list:{cmd:"usermail/convpinnedlist",req:"FriendListReq",rsp:"GetConvListRsp",w:T.H},conv_clean_all_msg:{cmd:"usermail/clean_all_msg",req:"",rsp:"ConvDelRsp",w:T.M},conv_mute_0:{cmd:"usermail/mute",req:"C2CMuteReq",rsp:"C2CMuteRsp",w:T.M},conv_mute_2:{cmd:"group/mute",req:"GroupMuteReq",rsp:"ConvDelRsp",w:T.M},conv_mute_list:{cmd:"usermail/mute_list",req:"",rsp:"GetMuteInfoListRsp",w:T.H},conv_mark:{cmd:"usermail/set_conv_mark",req:"SetConvMarkReq",rsp:"SetConvMarkRsp",w:T.M},conv_mark_list:{cmd:"usermail/fetch_conv_mark_list",req:"FriendListReq",rsp:"FetchConvMarkListRsp",w:T.H},msg_text_0:{cmd:"c2c/msg",req:"C2CMsgReq",rsp:"C2CMsgRsp",w:T.H},msg_text_2:{cmd:"group/msg",req:"C2CMsgReq",rsp:"GroupMsgRsp",w:T.H},msg_text_1:{cmd:"room/msg",req:"RoomMsgReq",rsp:"RoomMsgRsp",w:T.H},msg_cmd_0:{cmd:"c2c/command",req:"C2CCommandReq",rsp:"C2CCommandReqRsp",w:T.H},msg_cmd_2:{cmd:"group/command",req:"C2CCommandReq",rsp:"C2CCommandReqRsp",w:T.H},msg_cmd_1:{cmd:"msg/room_msg",req:"RoomCommandMsgReq",rsp:"RoomMsgRsp",w:T.H},msglist_0:{cmd:"usermail/msglist",req:"FetchConvMsgReq",rsp:"FetchConvMsgRsp",w:T.H},msglist_2:{cmd:"group/msglist",req:"FetchGroupMsgList",rsp:"FetchGroupMsgListRsp",w:T.H},msglist_1:{cmd:"room/room_msglist",req:"RoomMsglistReq",rsp:"RoomMsglistRsp",w:T.H},msg_query_0:_({cmd:"usermail/query_msg"},C),msg_query_2:_({cmd:"group/query_msg"},C),msg_query_1:_({cmd:"room/query_msg"},C),msg_del_0:{cmd:"usermail/del_msg_by_msgid",req:"ConvDelMsgByMsgIdReq",rsp:"CodeMsg",w:T.M},msg_del_2:{cmd:"group/del_msg",req:"C2CReadReceiptReq",rsp:"CodeMsg",w:T.M},msg_del_all_0:{cmd:"usermail/del_all_msg",req:"UpdateReadSeqReq",rsp:"CodeMsg",w:T.M},msg_del_all_2:{cmd:"group/del_all_msg",req:"C2CReadReceiptReq",rsp:"CodeMsg",w:T.M},msg_fetch_all_c2c:{cmd:"usermail/fetch_c2c_msg",req:"FriendListReq",rsp:"FetchC2CMsgRsp",w:T.L},p_c2c_msg:{cmd:"push_c2c_msg",rsp:"PushC2CMsg"},p_c2c_cmd:{cmd:"push_c2c_command",rsp:"PushC2CCommand"},p_gp_msg:{cmd:"push_group_msg",rsp:"PushC2CMsg"},p_gp_cmd:{cmd:"push_group_command_msg",rsp:"PushGroupCommand"},p_rm_msg:{cmd:"push_roommsg",rsp:"PushRoomMsg"},p_rm_cmd:{cmd:"push_room_msg",rsp:"PushRoomCommand"},p_msg_all:{cmd:"push_msg_to_all_users",rsp:"PushC2CMsg"},file_upload:{cmd:"file/upload",req:"FileUploadReq",rsp:"FileUploadRsp",w:T.H},file_process:{cmd:"file/process",req:"FileUploadReq",rsp:"FileProcessRsp",w:T.H},file_upload_list:{cmd:"file/upload_list",req:"FileListUploadReq",rsp:"FileListUploadRsp",w:T.H},file_process_list:{cmd:"file/process_list",req:"FileListUploadReq",rsp:"FileListProcessRsp",w:T.H},file_del:{cmd:"file/delete",req:"FileUploadReq",rsp:"CodeMsg",w:T.L},msg_state_list_0:_({cmd:"usermail/statemsg_list"},j),msg_state_list_2:_({cmd:"group/statemsg_list"},j),msg_state_list_1:{cmd:"room/msg_status_list",req:"RoomStatemsgListReq",rsp:"GetStatemsgListRsp",w:T.M},extra_msglist:{cmd:"usermail/extra_msglist",req:"FriendListReq",rsp:"GetExtraMsgListRsp",w:T.M},msg_edit_0:{cmd:"c2c/edit_msg",req:"EditMsgReq",rsp:"EditMsgRsp",w:T.M},msg_edit_2:{cmd:"group/edit_msg",req:"EditMsgReq",rsp:"EditMsgRsp",w:T.M},conv_read:{cmd:"usermail/conv_read",req:"GroupGetMembersReq",rsp:"ConvDelRsp",w:T.M},msg_read_0:_({cmd:"usermail/read_receipt"},g),msg_read_2:_({cmd:"group/read_receipt"},g),msg_read_detail:{cmd:"usermail/receipt_detail",req:"GroupGetMembersReq",rsp:"GetGroupReadReceiptDetailRsp",w:T.L},msg_revoke_0:_({cmd:"usermail/msg_revoke"},x),msg_revoke_2:_({cmd:"group/msg_revoke"},x),add_reaction_0:_({cmd:"usermail/add_reaction"},A),add_reaction_2:_({cmd:"group/add_reaction"},A),del_reaction_0:_({cmd:"usermail/del_reaction"},m),del_reaction_2:_({cmd:"group/del_reaction"},m),get_reaction_0:_({cmd:"usermail/get_reaction_info"},f),get_reaction_2:_({cmd:"group/get_reaction_info"},f),reaction_list_0:_({cmd:"usermail/reaction_list"},c),reaction_list_2:_({cmd:"group/reaction_list"},c),msg_fetch_0:_({cmd:"usermail/batch_fetch_conv_msg"},u),msg_fetch_2:_({cmd:"group/batch_fetch_conv_msg"},u),msg_reply_0:_({cmd:"usermail/fetch_reply_list"},s),msg_reply_2:_({cmd:"group/fetch_reply_list"},s),p_read_receipt:{cmd:"push_read_receipt",rsp:"PushReadReceipt"},p_reaction:{cmd:"push_reaction",rsp:"PushMsgReaction"},p_msg_revoke:{cmd:"push_msg_revoke",rsp:"PushMsgRevoke"},p_msg_edit:{cmd:"push_msg_edit",rsp:"PushMsgEdit"},rm_create:{cmd:"room/create",req:"RoomCreateReq",rsp:"RoomCreateRsp",w:T.M},rm_enter:{cmd:"room/enter",req:"RoomEnterReq",rsp:"RoomEnterRsp",w:T.M},rm_check:{cmd:"room/check",req:"QueryRoomUserInfosReq",rsp:"RoomCheckRsp",w:T.H},rm_switch:{cmd:"room/switch",req:"RoomEnterReq",rsp:"RoomEnterRsp",w:T.M},rm_quit:{cmd:"room/quit",req:"QueryRoomUserInfosReq",rsp:"CodeMsg",w:T.M},rm_quit_all:{cmd:"userstate/quit_all_room",req:"",rsp:"QuitAllRoomRsp",w:T.M},rm_info:{cmd:"room/info",req:"QueryRoomUserInfosReq",rsp:"RoomInfoRsp",w:T.H},rm_userlist:{cmd:"room/userlist",req:"RoomUserlistReq",rsp:"RoomUserlistRsp",w:T.M},rm_userinfos:{cmd:"room/user_infos",req:"QueryRoomUserInfosReq",rsp:"UserInfoRsp",w:T.M},rm_attr:{cmd:"room/get_attributes",req:"GetRoomAttributesReq",rsp:"ModifyRoomAttributesRsp",w:T.M},rm_attr_mdf:{cmd:"room/modify_attributes",req:"ModifyRoomAttributesReq",rsp:"ModifyRoomAttributesRsp",w:T.M},rm_user_attr_mdf:{cmd:"room/modify_user_attributes",req:"ModifyRoomUserAttributesReq",rsp:"ModifyRoomUserAttributesRsp",w:T.M},rm_user_attr:{cmd:"room/get_user_attributes",req:"GetRoomUserAttributesReq",rsp:"ModifyRoomUserAttributesRsp",w:T.M},rm_user_attr_list:{cmd:"room/get_user_attribute_list",req:"GetRoomUserAttributeListReq",rsp:"GetRoomUserAttributeListRsp",w:T.M},p_rm_enter:{cmd:"push_room_enter",rsp:"PushRoomEnter"},p_rm_quit:{cmd:"push_room_quit",rsp:"PushRoomEnter"},p_rm_kickout:{cmd:"push_room_kickout",rsp:"PushRoomKickout"},p_rm_attrs:{cmd:"push_room_attrs_modify",rsp:"PushRoomAttributesModify"},p_rm_user_attrs:{cmd:"push_room_user_attrs_modify",rsp:"PushRoomUserAttributesModify"},gp_create:{cmd:"group/create",req:"GroupCreateReq",rsp:"GroupCreateRsp",w:T.M},gp_enter:{cmd:"group/enter",req:"GroupApplyAccept",rsp:"GroupEnterRsp",w:T.M},gp_invite:{cmd:"group/invite",req:"GroupInviteReq",rsp:"GroupInviteRsp",w:T.M},gp_kickout:{cmd:"group/kickout",req:"GroupInviteReq",rsp:"GroupKickOutRsp",w:T.M},gp_quit:{cmd:"group/quit",req:"GroupApplyAccept",rsp:"ConvDelRsp",w:T.M},gp_destroy:{cmd:"group/destroy",req:"GroupApplyAccept",rsp:"ConvDelRsp",w:T.M},gp_list:{cmd:"usermail/grouplist",req:"FriendListReq",rsp:"GroupListRsp",w:T.H},gp_infos:{cmd:"group/infos",req:"FriendDeletedReq",rsp:"GroupInfosRsp",w:T.H},gp_infos_none:{cmd:"group/simple_info_list",req:"FriendDeletedReq",rsp:"GroupSimpleInfoRsp",w:T.H},gp_owner_transfer:{cmd:"group/owner_transfer",req:"GroupCreateReq",rsp:"ConvDelRsp",w:T.H},gp_data:{cmd:"group/data",req:"GroupApplyAccept",rsp:"GroupDataRsp",w:T.L},gp_attr:{cmd:"group/get_attributes",req:"GroupGetAttributesReq",rsp:"GroupModifyAttributeRsp",w:T.L},gp_mdf_name:{cmd:"group/modify_group_name",req:"GroupCreateReq",rsp:"ConvDelRsp",w:T.M},gp_mdf_avatar:{cmd:"group/modify_group_avatar",req:"StUserInfo",rsp:"ConvDelRsp",w:T.M},gp_mdf_notice:{cmd:"group/modify_group_notice",req:"GroupCreateReq",rsp:"ConvDelRsp",w:T.M},gp_mdf_attr:{cmd:"group/modify_attribute",req:"GroupModifyAttributeReq",rsp:"GroupModifyAttributeRsp",w:T.M},gp_set_forbid:{cmd:"group/set_forbid",req:"GroupSetForbidReq",rsp:"ConvDelRsp",w:T.M},gp_member_list:{cmd:"group/members",req:"GroupGetMembersReq",rsp:"GroupGetMembersRsp",w:T.L},gp_members_by_seq:{cmd:"group/members_by_seq",req:"C2CReadReceiptReq",rsp:"GetGroupMembersByMemberSeqRsp",w:T.L},gp_member_seqs:{cmd:"group/members_by_all_seq",req:"GroupGetMembersReq",rsp:"GetGroupMembersByMemberAllSeqRsp",w:T.L},gp_member_data:{cmd:"group/member_data",req:"GroupMemberDataReq",rsp:"GroupMemberDataRsp",w:T.L},gp_remark:{cmd:"group/remark",req:"GroupCreateReq",rsp:"ConvDelRsp",w:T.M},gp_member_nickname:{cmd:"group/set_nickname",req:"GroupCreateReq",rsp:"ConvDelRsp",w:T.M},gp_member_role:{cmd:"group/set_member_role",req:"GroupSetMemberRoleReq",rsp:"ConvDelRsp",w:T.M},gp_member_forbid:{cmd:"group/set_member_forbid",req:"CallReq",rsp:"GroupInviteRsp",w:T.M},gp_limit:{cmd:"group/modify_limit",req:"ModifyGroupLimitReq",rsp:"ConvDelRsp",w:T.M},gp_apply:{cmd:"group/apply",req:"GroupApplyAccept",rsp:"GroupApplyRsp",w:T.M,ext:{isGroup:!0}},gp_invite_accept:{cmd:"group/invite_accept",req:"GroupApplyAccept",rsp:"GroupApplyRsp",w:T.M,ext:{isGroup:!0}},gp_invite_reject:{cmd:"group/invite_reject",req:"GroupApplyAccept",rsp:"GroupApplyRsp",w:T.M,ext:{isGroup:!0}},gp_apply_accept:{cmd:"group/apply_accept",req:"GroupApplyAccept",rsp:"GroupApplyRsp",w:T.M},gp_apply_reject:{cmd:"group/apply_reject",req:"GroupApplyAccept",rsp:"GroupApplyRsp",w:T.M},gp_apply_list:{cmd:"group/user_apply_list",req:"GroupGetMembersReq",rsp:"UserApplyListRsp",w:T.L},gp_self_apply_list:{cmd:"usermail/group_apply_list",req:"FriendListReq",rsp:"UserApplyListRsp",w:T.L,ext:{isGroup:!0}},p_gp_create:{cmd:"push_create_group",rsp:"PushCreateGroup"},p_gp_invite:{cmd:"push_group_invite",rsp:"PushGroupInvite"},p_gp_destroy:{cmd:"push_group_destroy",rsp:"PushModifyGroupData"},p_gp_owner_transfer:{cmd:"push_group_owner_transfer",rsp:"PushGroupOwnerTransfer"},p_gp_mdf_attr:{cmd:"push_modify_group_attribute",rsp:"PushModifyGroupAttribute"},p_gp_mdf_data:{cmd:"push_modify_group_data",rsp:"PushModifyGroupData"},p_gp_member_change:{cmd:"push_group_member_change",rsp:"PushGroupMemberChange"},p_gp_member_kickout:{cmd:"push_group_member_kickout",rsp:"PushGroupOwnerTransfer"},p_gp_apply:{cmd:"push_apply_group_state_change",rsp:"PushApplyGroupStateChange"},p_gp_enter_apply:{cmd:"push_apply_user_state_change",rsp:"PushApplyUserStateChange"},cl_create:{cmd:"call/create",req:"CallReq",rsp:"CallRsp",w:T.H},cl_cancel:{cmd:"call/cancel",req:"CallReq",rsp:"CallCancelRsp",w:T.H},cl_accept:{cmd:"call/accept",req:"StUserInfo",rsp:"CallQuitRsp",w:T.H},cl_refuse:{cmd:"call/refuse",req:"CallQuitReq",rsp:"CallQuitRsp",w:T.H},cl_ack:{cmd:"call/ack",req:"CallQuitReq",rsp:"CodeMsg",w:T.H},cl_info:{cmd:"call/call_info",req:"CallQuitReq",rsp:"CallInfoRsp",w:T.L},cl_invite:{cmd:"call/invite",req:"CallInviteReq",rsp:"CallInviteRsp",w:T.H},cl_quit:{cmd:"call/quit",req:"CallQuitReq",rsp:"CallQuitRsp",w:T.H},cl_enter:{cmd:"call/enter",req:"StUserInfo",rsp:"CallEnterRsp",w:T.H},cl_destroy:{cmd:"call/destroy",req:"CallQuitReq",rsp:"CallQuitRsp",w:T.H},cl_list:{cmd:"usermail/call_list",req:"FriendListReq",rsp:"CallListRsp",w:T.L},p_cl_invite:{cmd:"push_call_invite",rsp:"PushCallInvited"},p_cl_cancel:{cmd:"push_call_cancel",rsp:"PushCallCancel"},p_cl_accept:{cmd:"push_call_accept",rsp:"PushCallAccept"},p_cl_refuse:{cmd:"push_call_refuse",rsp:"PushCallRefuse"},p_cl_quit:{cmd:"push_call_quit",rsp:"PushCallQuit"},p_cl_destroy:{cmd:"push_call_destroy",rsp:"PushCallDestroy"},p_cl_inviting:{cmd:"push_on_call_invite",rsp:"PushOnCallInvited"},p_cl_ack:{cmd:"push_call_ack",rsp:"PushCallAck"},p_cl_enter:{cmd:"push_call_enter",rsp:"PushCallEnter"},p_cl_ack_timeout:{cmd:"push_call_ack_timeout",rsp:"PushCallAckTimeout"},fd_add:{cmd:"usermail/friend_add",req:"FriendAddReq",rsp:"FriendAddRsp",w:T.M},fd_apply:{cmd:"usermail/friend_apply",req:"FriendAddReq",rsp:"FriendApplyRsp",w:T.M},fd_del:{cmd:"usermail/friend_delete",req:"FriendDeletedReq",rsp:"FriendAddRsp",w:T.M},fd_check:{cmd:"usermail/friend_check",req:"FriendDeletedReq",rsp:"FriendCheckedRsp",w:T.M},fd_mdf_remark:{cmd:"usermail/modify_friend_remark",req:"StGroupAttribute",rsp:"ConvDelRsp",w:T.M},fd_mdf_attr:{cmd:"usermail/modify_friend_attribute",req:"ModifyFriendAttributeReq",rsp:"ModifyFriendAttributeRsp",w:T.M},fd_accept:{cmd:"usermail/friend_accept",req:"FriendAcceptReq",rsp:"FriendAcceptRsp",w:T.M},fd_refuse:{cmd:"usermail/friend_refuse",req:"CallQuitReq",rsp:"ConvDelRsp",w:T.M},fd_list:{cmd:"usermail/friend_list",req:"FriendListReq",rsp:"FriendListRsp",w:T.L},fd_apply_list:{cmd:"usermail/friend_apply_list",req:"FriendListReq",rsp:"FriendApplyListRsp",w:T.L},p_fd_add:{cmd:"push_friend_add",rsp:"PushFriendAdd"},p_fd_del:{cmd:"push_friend_delete",rsp:"PushFriendRefuse"},p_fd_del_all:{cmd:"push_friend_delete_all",rsp:"ConvDelRsp"},p_fd_apply:{cmd:"push_friend_apply",rsp:"PushFriendApply"},p_fd_accept:{cmd:"push_friend_accept",rsp:"PushFriendAccept"},p_fd_refuse:{cmd:"push_friend_refuse",rsp:"PushFriendRefuse"},bl_add:{cmd:"usermail/blacklist_add",req:"FriendDeletedReq",rsp:"BlacklistAddRsp",w:T.M},bl_del:{cmd:"usermail/blacklist_delete",req:"FriendDeletedReq",rsp:"BlacklistDeleteRsp",w:T.M},bl_fetch:{cmd:"usermail/blacklist",req:"FriendListReq",rsp:"BlacklistRsp",w:T.L}}},function(te,j,C){C.d(j,"a",function(){return T}),C.d(j,"b",function(){return O});var O,T={MAX_ID_SIZE:1024,MAX_NAME_SIZE:2048,MAX_MESSAGE_SIZE:49152,MAX_QUERY_PAGE_COUNT:100,MAX_SEARCH_PAGE_COUNT:30,MESSAGE_SEQ_MULTIPLIER:100,CONV_BASE_PIN:1e12,get_user_attribute_qps:5,get_user_attribute_interval:3e4,hbTimeoutMaxCount:3,needReloginCodeList:[50107,103015,103021],convKeys:["conversationID","conversationName","conversationAlias","conversationAvatarUrl","type","unreadMessageCount","orderKey","notificationStatus","isPinned","isDisabled","mutedExpiredTime","marks","draft","mentionedInfoList","lastMessage"]};(C=O=O||{}).ILogined="logined",C.IJoinedGroup="joinedGroup",C.ILeftGroup="leftGroup",C.ISyncGroups="syncGroups",C.ISyncGroupInfo="syncGroupInfo",C.IUnreadMsgCount="unreadMsgCount",C.IConnectedRoom="connectedRoom",C.IConnected="connected",C.IDisConnected="disConnected",C.INetworkChange="networkChange",C.IIdleFetchConvMsg="idleFetchConvMsg",C.ITriggerHB="triggerHB",C.Error="error",C.ConnState="connectionStateChanged",C.TokenExpire="tokenWillExpire",C.UserInfo="userInfoUpdated",C.UserStatus="userStatusUpdated",C.UserRule="userRuleUpdated",C.ConvChanged="conversationChanged",C.ConvUnreadMsgCount="conversationTotalUnreadMessageCountUpdated",C.ConvMsgReceipt="conversationMessageReceiptChanged",C.ConvAllDeleted="conversationsAllDeleted",C.MsgRevoke="messageRevokeReceived",C.MsgReceipt="messageReceiptChanged",C.MsgReactions="messageReactionsChanged",C.MsgRepliedCount="messageRepliedCountChanged",C.MsgRepliedInfo="messageRepliedInfoChanged",C.MsgDeleted="messageDeleted",C.MsgEdited="messageEdited",C.MsgSentStatus="messageSentStatusChanged",C.BroadcastMsg="broadcastMessageReceived",C.RoomState="roomStateChanged",C.RoomMemberJoined="roomMemberJoined",C.RoomMemberLeft="roomMemberLeft",C.RoomAttr="roomAttributesUpdated",C.RoomAttrBatch="roomAttributesBatchUpdated",C.RoomMemberAttr="roomMemberAttributesUpdated",C.GroupState="groupStateChanged",C.GroupName="groupNameUpdated",C.GroupAvatar="groupAvatarUrlUpdated",C.GroupNotice="groupNoticeUpdated",C.GroupAlias="groupAliasUpdated",C.GroupAttr="groupAttributesUpdated",C.GroupMute="groupMutedInfoUpdated",C.GroupMemberState="groupMemberStateChanged",C.GroupMemberInfo="groupMemberInfoUpdated",C.GroupVerifyInfo="groupVerifyInfoUpdated",C.GroupAppList="groupApplicationListChanged",C.GroupAppUpd="groupApplicationUpdated",C.CallCreate="callInvitationCreated",C.CallRecv="callInvitationReceived",C.CallCancel="callInvitationCancelled",C.CallTimeout="callInvitationTimeout",C.CallEnd="callInvitationEnded",C.CallUserState="callUserStateChanged",C.BlacklistUpd="blacklistChanged",C.FriendList="friendListChanged",C.FriendInfo="friendInfoUpdated",C.FriendAppList="friendApplicationListChanged",C.FriendAppUpd="friendApplicationUpdated"},function(te,j,C){C.d(j,"b",function(){return T}),C.d(j,"a",function(){return O});var O,T={Log:"Log",DataReport:"DataReport",User:"User",Call:"Call",Conv:"Conversation",Group:"Group",MessageExtra:"MessageExtra",Member:"GroupMember",Message:"Message",Friend:"Friend",FriendApp:"FriendApp",Blacklist:"Blacklist",GroupApp:"GroupApp",SubUser:"SubUser"};(C=O=O||{}).ID="id",C.CombineID="combineID"},function(te,j,C){var O,T;C.d(j,"b",function(){return O}),C.d(j,"a",function(){return T}),(C=O=O||{}).Manager="MGR",C.Connection="Conn",C.Database="DB",C.Strategy="ST",C.User="User",C.Conversation="Conv",C.Room="Room",C.Group="Group",C.Call="Call",C.Friend="Friend",(j=T=T||{}).SCMD="SCMD",j.PCMD="PCMD",j.Create="API.create",j.Destroy="API.destroy",j.SetLogConfig="API.setLogConfig",j.SetGeoFence="API.setGeofencingConfig",j.UploadLog="API.uploadLog",j.Login="API.login",j.Logout="API.logout",j.RenewToken="API.renewToken",j.QueryUsers="API.queryUsersInfo",j.UpdateUser="API.updateUser",j.UpdateUserStatus="API.updateUserCustomStatus",j.UpdateUserRule="API.updateUserOfflinePushRule",j.QuerySelf="API.querySelfUserRule",j.SubscribeStatus="API.subscribeUsersStatus",j.QueryStatus="API.queryUsersStatus",j.QuerySubscriber="API.querySubscribedUserStatusList",j.QueryConv="API.queryConversation",j.QueryConvs="API.queryConversationList",j.QueryPinneds="API.queryConversationPinnedList",j.QueryUnreadCount="API.queryConversationTotalUnreadCount",j.DelConv="API.deleteConversation",j.DelAllConv="API.deleteAllConversations",j.ClearUnreadCount="API.clearConversationUnreadMessageCount",j.ClearAllUnreadCount="API.clearConversationTotalUnreadMessageCount",j.DelAllConvMsg="API.deleteAllConversationMessages",j.SetNotifyStatus="API.setConversationNotificationStatus",j.UpdatePinned="API.updateConversationPinnedState",j.SetConvDraft="API.setConversationDraft",j.SetConvMark="API.setConversationMark",j.SendMsg="API.sendMessage",j.EditMsg="API.editMessage",j.DelMsg="API.deleteMessages",j.DelAllMsg="API.deleteAllMessage",j.QueryHistoryMsg="API.queryHistoryMessage",j.InsertMsg="API.insertMessageToLocalDB",j.UpdateMsgLocalExt="API.updateMessageLocalExtendedData",j.RevokeMsg="API.revokeMessage",j.QueryCombineMsg="API.queryCombineMessageDetail",j.SendConvReceipt="API.sendConversationMessageReceiptRead",j.SendReceipts="API.sendMessageReceiptsRead",j.QueryReceipts="API.queryMessageReceiptsInfo",j.QueryReceiptRead="API.queryGroupMessageReceiptReadMemberList",j.QueryReceiptUnread="API.queryGroupMessageReceiptUnreadMemberList",j.AddReaction="API.addMessageReaction",j.DelReaction="API.deleteMessageReaction",j.QueryReaction="API.queryMessageReactionUserList",j.ReplyMsg="API.replyMessage",j.QueryReplyMsg="API.queryMessageRepliedList",j.QueryMsgs="API.queryMessages",j.CreateRoom="API.createRoom",j.EnterRoom="API.enterRoom",j.JoinRoom="API.joinRoom",j.SwitchRoom="API.switchRoom",j.LeaveRoom="API.leaveRoom",j.LeaveAllRoom="API.leaveAllRoom",j.QueryRoomMemberList="API.queryRoomMemberList",j.QueryRoomMembers="API.queryRoomMembers",j.QueryRoomMemberCount="API.queryRoomOnlineMemberCount",j.SetRoomAttr="API.setRoomAttributes",j.DelRoomAttr="API.deleteRoomAttributes",j.QueryRoomAllAttr="API.queryRoomAllAttributes",j.EndRoomAttr="API.endRoomAttributesBatchOperation",j.SetRoomMembersAttr="API.setRoomMembersAttributes",j.QueryRoomMembersAttr="API.queryRoomMembersAttributes",j.QueryRoomMemberAttrs="API.queryRoomMemberAttributesList",j.CreateGroup="API.createGroup",j.JoinGroup="API.joinGroup",j.LeaveGroup="API.leaveGroup",j.DismissGroup="API.dismissGroup",j.QueryGroups="API.queryGroupList",j.UpdateGroup="API.updateGroupInfo",j.MuteGroup="API.muteGroup",j.QueryGroup="API.queryGroupInfo",j.SetGroupAttr="API.setGroupAttributes",j.DelGroupAttrs="API.deleteGroupAttributes",j.QueryGroupAttrs="API.queryGroupAttributes",j.TransferGroupOwner="API.transferGroupOwner",j.InviteIntoGroup="API.inviteUsersIntoGroup",j.KickGroupMembers="API.kickGroupMembers",j.QueryGroupMembers="API.queryGroupMemberList",j.QueryGroupMemberCount="API.queryGroupMemberCount",j.MuteGroupMembers="API.muteGroupMembers",j.QueryGroupMemberMuteds="API.queryGroupMemberMutedList",j.UpdateGroupAlias="API.updateGroupAlias",j.SetGroupMemberNickname="API.setGroupMemberNickname",j.SetGroupMemberRole="API.setGroupMemberRole",j.QueryGroupMember="API.queryGroupMemberInfo",j.UpdateGroupVerifyMode="API.updateGroupVerifyMode",j.SendGroupJoinApp="API.sendGroupJoinApplication",j.AcceptGroupJoinApp="API.acceptGroupJoinApplication",j.RejectGroupJoinApp="API.rejectGroupJoinApplication",j.SendGroupInviteApps="API.sendGroupInviteApplications",j.AcceptGroupInviteApp="API.acceptGroupInviteApplication",j.RejectGroupInviteApp="API.rejectGroupInviteApplication",j.QueryGroupApps="API.queryGroupApplicationList",j.CallInvite="API.callInvite",j.CallCancel="API.callCancel",j.CallAccept="API.callAccept",j.CallReject="API.callReject",j.CallQuit="API.callQuit",j.CallJoin="API.callJoin",j.CallEnd="API.callEnd",j.CallingInvite="API.callingInvite",j.QueryCalls="API.queryCallInvitationList",j.AddFriend="API.addFriend",j.SendFriendApp="API.sendFriendApplication",j.DelFriends="API.deleteFriends",j.CheckFriends="API.checkFriendsRelation",j.UpdateFriendAlias="API.updateFriendAlias",j.UpdateFriendAttr="API.updateFriendAttributes",j.AcceptFriendApp="API.acceptFriendApplication",j.RejectFriendApp="API.rejectFriendApplication",j.QueryFriends="API.queryFriendsInfo",j.QueryFriendList="API.queryFriendList",j.QueryFriendApps="API.queryFriendApplicationList",j.AddBlacklist="API.addUsersToBlacklist",j.RemoveBlacklist="API.removeUsersFromBlacklist",j.CheckBlacklist="API.checkUserIsInBlacklist",j.QueryBlacklist="API.queryBlacklist",j.SearchConv="API.searchLocalConversations",j.SearchGlobalMsg="API.searchGlobalLocalMessages",j.SearchMsg="API.searchLocalMessages",j.SearchGroup="API.searchLocalGroups",j.SearchGroupMember="API.searchLocalGroupMembers",j.SearchFriend="API.searchLocalFriends"},function(te,j){throw new Error(`Module parse failed: Unexpected token (6:29)
You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders
| import { ZIMLogTag } from '../zentity';
| 
> export class ZIMFileStoreBase<T extends Record<string, any>> {
|     private lg = ZIMManager.getInstance().lg;
|     private logTags: string;`)},function(te,j){throw new Error(`Module parse failed: Unexpected token (39:26)
You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders
| import { ZIMFileStoreBase } from './ZIMFileStoreBase';
| 
> export class ZIMStoreImpl implements ZIMStoreBase {
|     private dir = '';
|     private userID = '';`)},function(te,j,C){C.r(j),C.d(j,"ZIMStoreImpl",function(){return c}),j=C(78);var O=C.n(j),T=C(2),_=C(1),E=C(15),g=C(0),x=function(){return(x=Object.assign||function(s){for(var r,i=1,a=arguments.length;i<a;i++)for(var o in r=arguments[i])Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s}).apply(this,arguments)},A="readonly",m="readwrite",f=g.v.Database,c=(u.prototype.destroy=function(){var s=this;this.unloadDB(),setTimeout(function(){s.storeMap.forEach(function(r){return r.close()}),s.storeMap.clear()})},u.prototype.clearDB=function(s){var r=this;this.unloadDB(),T.a.getInstance().dr.clearDB(),this.createStaticDB().then(function(i){i.transaction([g.l.Log],m).objectStore(g.l.Log).clear(),i.transaction([g.l.DataReport],m).objectStore(g.l.DataReport).clear(),i.transaction([g.l.User],m).objectStore(g.l.User).put(s),r.innerDeleteAllByOwnerID(i,g.l.Call,r.userID),r.innerDeleteAllByOwnerID(i,g.l.Conv,r.userID),r.innerDeleteAllByOwnerID(i,g.l.Group,r.userID),r.innerDeleteAllByOwnerID(i,g.l.MessageExtra,r.userID)}),this.createGlobalDB().then(function(i){i.transaction([g.l.Member],m).objectStore(g.l.Member).clear(),i.transaction([g.l.Message],m).objectStore(g.l.Message).clear(),i.transaction([g.l.Friend],m).objectStore(g.l.Friend).clear(),i.transaction([g.l.FriendApp],m).objectStore(g.l.FriendApp).clear(),i.transaction([g.l.Blacklist],m).objectStore(g.l.Blacklist).clear(),i.transaction([g.l.GroupApp],m).objectStore(g.l.GroupApp).clear(),i.transaction([g.l.SubUser],m).objectStore(g.l.SubUser).clear()})},u.prototype.loadDB=function(){var s=this;this.createGlobalDB().then(function(r){var i=Date.now(),a=g.l.Message;s.innerGetAll(r,a).then(function(o){var l,h=new Map;o.forEach(function(R){var w=s.hookMessageField(R);w&&h.set(w,R),s.setGlobalMsg(R)}),h.size&&(s.reportLog.delMsgCount=h.size,l=r.transaction([a],m).objectStore(a),h.forEach(function(R,w){l.delete(w),l.put(R)})),s.isGlobalMsg=!0,s.handleMsgCallbackList(),s.reportLog.messageCount=s.globalMsgMap.size,s.reportLog.messageTime=Date.now()}).then(function(){return s.innerGetAll(r,g.l.Member)}).then(function(o){o.forEach(function(l){s.globalMemberMap.set(l.id,l),s.syncMemberToUser(l)}),s.isGlobalMember=!0,s.handleMemberCallbackList(),s.reportLog.memberCount=s.globalMemberMap.size,s.reportLog.memberTime=Date.now()-s.reportLog.messageTime,s.reportLog.messageTime-=i,s.lg.i(f,"loadGDB",s.reportLog),s.dr.reportSDKEvent("/sdk/db",{error_message:JSON.stringify(s.reportLog)}),s.econf.dbUserMap.forEach(function(l){l.userName||s.econf.syncUserTask.add(l.userID)})})})},u.prototype.unloadDB=function(){this.lg.onLogout(),this.execSaveDBTimer(),this.isGlobalMsg=!1,this.isGlobalMember=!1,this.roomMsgMap.clear(),this.globalMsgMap.clear(),this.globalMemberMap.clear(),this.globalCbMsgMap.clear(),this.loadedMsgMap.clear(),this.searchMsgByConvCallbackList.length=0,this.searchMsgCallbackList.length=0,this.searchGroupsCallbackList.length=0,this.searchMembersCallbackList.length=0,this.getMembersCallbackList.length=0},u.prototype.searchConversations=function(s){var r=this;return new Promise(function(i){var a=new Date;r.innerSearchMessagesByConv(!0,s,function(o){var l=o.length,h=Math.min(10,s.conversationMessageCount),R=(o.forEach(function(y){y.messageList.sort(function(k,b){return b.timestamp-k.timestamp}),y.totalMessageCount>h&&(y.messageList=y.messageList.slice(0,h))}),o.sort(function(y,k){return k.messageList[0].timestamp-y.messageList[0].timestamp}),s.nextFlag),w=R?o.findIndex(function(y){return y.messageList[0].timestamp<=R})+1:0,d=w+Math.min(20,s.totalConversationCount),D=o[d]?o[d-1].messageList[0].timestamp:void 0,S=(o=o.slice(w,d),r.globalMsgMap.size);S={time:a,dbCount:S,start:w,end:d,total:l,count:o.length,config:s},r.lg.i(f,g.u.SearchConv,S),i({conversationSearchInfoList:o,nextFlag:D})})})},u.prototype.searchGlobalMessages=function(s){var r=this;return new Promise(function(i){r.innerSearchMessages(!0,"",0,s,function(a,o){r.lg.i(f,g.u.SearchGlobalMsg,o),i(a)})})},u.prototype.searchMessages=function(s,r,i){var a=this;return new Promise(function(o){a.innerSearchMessages(!0,s,r,i,function(l,h){a.lg.i(f,g.u.SearchMsg,h),o({conversationID:s,conversationType:r,messageList:l.messageList,nextMessage:l.nextMessage})})})},u.prototype.searchGroups=function(s,r,i,a,o){var l,h=this;if(!r&&!i)return a([],0);o||this.isGlobalMember?(l=[],this.globalMemberMap.forEach(function(R){var w=((w=h.econf.dbUserMap.get(R.userID))==null?void 0:w.userName)||"";(r&&!i&&h.isSomeKeys(w,s)||i&&!r&&h.isSomeKeys(R.memberNickname,s)||h.isSomeKeys(w,s)&&h.isSomeKeys(R.memberNickname,s))&&l.push(R)}),a(l,this.globalMemberMap.size)):this.searchGroupsCallbackList.push({keywords:s,isName:r,isNick:i,resolve:a})},u.prototype.searchGroupMembers=function(s,r){var i=this;return new Promise(function(a){var o=i.filterKeys(r.keywords);if(!o||!o.length)return a({groupID:s,nextFlag:0,userList:[]});var l=new Date,h=r.isAlsoMatchGroupMemberNickname;i.innerSearchGroupMember(!0,s,o,h,function(R){R.sort(function(b,U){return b.seq-U.seq});var w=R.length,d=r.nextFlag,D=((D=R[R.length-1])==null?void 0:D.seq)||0,S=0,y=(D=(0<d&&d<D?S=R.findIndex(function(b){return b.seq==d}):D<=d&&D&&(S=R.length-1),S+Math.min(g.h.MAX_SEARCH_PAGE_COUNT,r.count)),((y=R[D])==null?void 0:y.seq)||0),k=(R=R.slice(S,D).map(function(b){return Object(_.t)(b,i.econf)}),i.globalMemberMap.size);k={time:l,dbCount:k,start:S,end:D,total:w,count:R.length,nextFlag:y,groupID:s,config:r},i.lg.i(f,g.u.SearchGroupMember,k),a({groupID:s,nextFlag:y,userList:R})})})},u.prototype.getFileInfo=function(s,r){return new Promise(function(i,a){try{var o=s.size,l=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,h=1048576,R=Math.ceil(o/h),w=new O.a.ArrayBuffer,d=new FileReader,D=0,S=(d.onload=function(){var y=d.result||d.content;y?(w.append(y),++D<R?S():i(x({md5:w.end(),name:s.name,size:o},r))):a(Object(E.b)(6000214))},d.onerror=function(){a(Object(E.b)(6000211))},function(){var y=D*h,k=Math.min(y+h,o);y=l.call(s,y,k),d.readAsArrayBuffer(y)});S()}catch(y){a(y)}})},u.prototype.uploadFile=function(s,r,i){return new Promise(function(a,o){var l=new XMLHttpRequest,h=(l.onreadystatechange=function(){if(l.readyState==4){if(l.status!=200)return o({code:6000212,message:l.responseText||"upload file fail."});a()}},l.upload.addEventListener("progress",i),l.onerror=function(){return o({code:6000212,message:"upload file onerror."})},l.ontimeout=function(){return o({code:6000105,message:"upload file ontimeout."})},l.open(s.method,s.url,!0),l.timeout=6e5,s.headers);h&&(delete h["User-Agent"],delete h["user-agent"],Object.keys(h).forEach(function(R){return l.setRequestHeader(R,h[R])})),l.send(r)})},u.prototype.downloadFile=function(s,r){return new Promise(function(i,a){var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("GET",s,!0),o.onerror=function(){return a({code:6000212,message:r})},o.onload=function(){o.response&&o.status==200?i(new Uint8Array(o.response)):a({code:6000212,message:r})},o.send()})},u.prototype.updateUserSeq=function(s,r,i){var a=this.econf.user;return!(!s||!i&&+a[r]&&a[r]!=s-1||(a[r]=s,this.setUser(a),0))},u.prototype.setUserID=function(s){this.userID=s},u.prototype.setUser=function(s){this.batchAdd(g.l.User,[s])},u.prototype.getUserList=function(){var s=this;return this.createStaticDB().then(function(r){return s.innerGetAll(r,g.l.User)})},u.prototype.addUserList=function(s){this.batchAdd(g.l.User,s)},u.prototype.addConversationList=function(s){var r=this,i=this.userID;s.forEach(function(a){a.id||(a.id=r.appendID(a.type+a.conversationID)),a.ownerID||(a.ownerID=i),a.state=a.state||g.j.Normal}),this.batchAdd(g.l.Conv,s)},u.prototype.addGroupList=function(s){var r=this,i=this.userID;s.forEach(function(a){a.id||(a.id=r.appendID(a.groupID)),a.ownerID||(a.ownerID=i)}),this.batchAdd(g.l.Group,s)},u.prototype.deleteGroupList=function(s){var r=this,i=(this.isGlobalMember&&this.globalMemberMap.forEach(function(a){s.indexOf(a.ownerID)!=-1&&r.globalMemberMap.delete(a.id)}),s.map(function(a){return r.createGlobalDB().then(function(o){r.innerDeleteAllByOwnerID(o,g.l.Member,a);var l=r.saveDBMap[g.l.Member];l.forEach(function(h){h.ownerID==a&&l.delete(h.id)})}),r.appendID(a)}));this.createStaticDB().then(function(a){return r.batchDelete(a,g.l.Group,i)})},u.prototype.addGroupApplyList=function(s){s=s.map(function(r){return x(x({},r),{id:r.type+"_"+r.groupInfo.groupID+"_"+r.applyUser.userID,applyUser:r.applyUser.userID})}),this.batchAdd(g.l.GroupApp,s)},u.prototype.addGroupMemberList=function(s,r){var i=this;r.forEach(function(a){a.id||(a.id=s+"_"+a.userID),a.ownerID||(a.ownerID=s),i.globalMemberMap.set(a.id,a),i.syncMemberToUser(a)}),this.batchAdd(g.l.Member,r)},u.prototype.getGroupMemberList=function(s){var r,i=this;return this.isGlobalMember?(r=[],this.globalMemberMap.forEach(function(a){a.ownerID==s&&r.push(a)}),Promise.resolve(r)):new Promise(function(a){return i.getMembersCallbackList.push({groupID:s,resolve:a})})},u.prototype.addMessageList=function(s,r,i){if(r==g.c.ConversationType.Room)for(var a=0;a<i.length;a++)(o=i[a]).type==g.c.MessageType.Combine&&(l=this.roomMsgMap.get(o.localMessageID))&&(h=l.messageList,Object.assign(l,o),l.messageList=h,i[a]=l),this.roomMsgMap.set(o.localMessageID,i[a]);else{var o,l,h;for(a=0;a<i.length;a++)(o=i[a]).id=o.localMessageID,o.type==g.c.MessageType.Combine&&(l=this.globalCbMsgMap.get(o.combineID))&&(h=l.messageList,Object.assign(l,o),l.messageList=h,i[a]=l),this.setGlobalMsg(i[a]);this.batchAdd(g.l.Message,i)}},u.prototype.deleteAllMessage=function(s,r){var i=this;this.globalMsgMap.forEach(function(a){a.conversationID==s&&a.conversationType==r&&i.globalMsgMap.delete(a.id)}),this.globalCbMsgMap.forEach(function(a){a.conversationID==s&&a.conversationType==r&&i.globalCbMsgMap.delete(a.combineID)}),this.createGlobalDB().then(function(a){i.innerDeleteAllByOwnerID(a,g.l.Message,[r,s]);var o=i.saveDBMap[g.l.Message];o.forEach(function(l){l.conversationType==r&&l.conversationID==s&&o.delete(l.id)})})},u.prototype.deleteMessageList=function(s,r,i){var a,o=this;return r==g.c.ConversationType.Room?(i.forEach(function(l){o.roomMsgMap.delete(l.localMessageID)}),Promise.resolve(void 0)):(a=i.map(function(l){return o.globalMsgMap.delete(l.localMessageID),l.type==g.c.MessageType.Combine&&o.globalCbMsgMap.delete(l.combineID),l.localMessageID}),this.createGlobalDB().then(function(l){var h;return o.batchDelete(l,g.l.Message,a),o.isGlobalMsg||o.loadedMsgMap.has(r+s)?(h={orderKey:0},o.globalMsgMap.forEach(function(R){R.conversationID==s&&R.conversationType==r&&R.orderKey>h.orderKey&&(h=R)}),h.messageID?h:void 0):new Promise(function(R){var w=o.seq++,d=new Date,D=l.transaction([g.l.Message],A).objectStore(g.l.Message).index("ownerID").getAll([r,s]);D.onsuccess=function(){var S=D.result||[],y=(S.forEach(function(k){o.hookMessageField(k),o.setGlobalMsg(k)}),o.loadedMsgMap.add(r+s),o.saveDBMap[g.l.Message].forEach(function(k){k.conversationType==r&&k.conversationID==s&&S.push(k)}),S.sort(function(k,b){return b.orderKey-k.orderKey}),S[0]);o.hookMessageField(y),o.lg.i(f,"getLastMsg",{seq:w,time:d,convID:s,type:r,msg:y}),R(y)},D.onerror=function(S){S=S.target&&S.target.error&&S.target.error.message,o.lg.i(f,"getLastMsg",{seq:w,time:d,convID:s,type:r,onerror:S}),R(void 0)}})}))},u.prototype.getDeleteMessageCount=function(s,r,i,a){var o;this.isGlobalMsg?(o=0,this.globalMsgMap.forEach(function(l){l.conversationID==s&&l.conversationType==r&&l.direction==g.c.MessageDirection.Receive&&i.indexOf(l.messageSeq)!=-1&&o++}),a(o)):this.getDelMsgCountCallbackList.push({convID:s,type:r,delSeqs:i,resolve:a})},u.prototype.deleteAllMessageFromRemote=function(s,r,i,a,o){var l,h,R=this;this.isGlobalMsg?(l=0,h=[],this.globalMsgMap.forEach(function(w){w.conversationID==s&&w.conversationType==r&&(w.sentStatus==g.c.MessageSentStatus.Success&&!w.isUserInserted&&(w.direction==g.c.MessageDirection.Receive&&a.indexOf(w.messageSeq)!=-1&&l++,w.messageSeq<=i)?(R.globalMsgMap.delete(w.id),R.globalCbMsgMap.delete(w.combineID)):h.push(w))}),this.createGlobalDB().then(function(w){R.innerDeleteAllByOwnerID(w,g.l.Message,[r,s],function(){o(l),R.batchAdd(g.l.Message,h)});var d=R.saveDBMap[g.l.Message];d.forEach(function(D){D.conversationType==r&&D.conversationID==s&&d.delete(D.id)})})):this.delAllMsgCallbackList.push({convID:s,type:r,maxSeq:i,delSeqs:a,resolve:o})},u.prototype.deleteMessageListFromRemote=function(s,r,i,a,o){var l,h,R,w,d=this;this.isGlobalMsg?(h={orderKey:l=0},R=[],w=[],this.globalMsgMap.forEach(function(D){D.conversationID==s&&D.conversationType==r&&(D.sentStatus!=g.c.MessageSentStatus.Success||D.isUserInserted||i.indexOf(D.messageSeq)==-1?D.orderKey>h.orderKey&&(h=D):(d.globalMsgMap.delete(D.id),D.type==g.c.MessageType.Combine&&d.globalCbMsgMap.delete(D.combineID),R.push(D.id),w.push(D),D.direction==g.c.MessageDirection.Receive&&D.messageSeq>a&&l++))}),o(w,l,h.messageID?h:void 0),this.createGlobalDB().then(function(D){return d.batchDelete(D,g.l.Message,R)})):this.delMsgsCallbackList.push({convID:s,type:r,seqs:i,readSeq:a,resolve:o})},u.prototype.clearMessage=function(s){var r,i=this;s&&(r=[],this.isGlobalMsg&&this.globalMsgMap.forEach(function(a){a.timestamp>s?r.push(a):i.globalMsgMap.delete(a.id)}),this.createGlobalDB().then(function(a){var o=a.transaction([g.l.Message],m).objectStore(g.l.Message),l=(o.clear(),r.forEach(function(h){return o.put(h)}),i.saveDBMap[g.l.Message]);l.forEach(function(h){h.timestamp<=s&&l.delete(h.id)}),i.lg.i(f,"clearMsg"+r.length)}))},u.prototype.clearRoomMessage=function(s,r){var i=this,a=[],o=2+s;this.roomMsgMap.forEach(function(l,h){l.conversationID==s&&(i.roomMsgMap.delete(h),r)&&a.push(i.appendID(o+l.messageSeq))}),a.length&&this.deleteMessageExtraList(a),this.lg.i(f,"clearRoom"+s)},u.prototype.getMessageList=function(s,r,i){var a,o,l=this,h=r.count,R=r.reverse,w=(r=r.nextMessage,s.conversationID),d=s.type;return d==g.c.ConversationType.Room?(s=Array.from(this.roomMsgMap.values()).filter(function(D){return D.conversationID==w}),Promise.resolve(s)):(a=r==null?void 0:r.messageSeq,this.isGlobalMsg||this.loadedMsgMap.has(d+w)?(o=[],this.globalMsgMap.forEach(function(D){D.conversationID==w&&D.conversationType==d&&o.push(D)}),s={_seq:i,convID:w,type:d,reverse:R,queryCount:h,count:o.length,next:a},this.lg.i(f,"getMsgs",s),Promise.resolve(o)):this.createGlobalDB().then(function(D){return new Promise(function(S){var y=l.seq++,k=new Date,b={_seq:i,seq:y,time:k,convID:w,type:d,reverse:R,queryCount:h,count:0,next:a},U=D.transaction([g.l.Message],A).objectStore(g.l.Message).index("ownerID").getAll([d,w]);U.onsuccess=function(){var z=U.result||[];z.forEach(function(P){l.hookMessageField(P),l.setGlobalMsg(P)}),l.loadedMsgMap.add(d+w),l.saveDBMap[g.l.Message].forEach(function(P){P.conversationType!=d||P.conversationID!=w||z.some(function(H){return H.id==P.id})||z.push(P)}),b.count=z.length,l.lg.i(f,"getMsgs",b),S(z)},U.onerror=function(z){b.onerror=z.target&&z.target.error&&z.target.error.message,l.lg.i(f,"getMsgs",b),S([])}})}))},u.prototype.getMessageListBySeqs=function(s,r,i){var a=this,o=new Map;return r==g.c.ConversationType.Room?(this.roomMsgMap.forEach(function(l){l.conversationID==s&&i.indexOf(l.messageSeq)!=-1&&o.set(l.messageSeq,l)}),Promise.resolve(o)):(this.globalMsgMap.forEach(function(l){l.conversationID!=s||l.conversationType!=r||l.sentStatus!=g.c.MessageSentStatus.Success||l.isUserInserted||i.indexOf(l.messageSeq)==-1||o.set(l.messageSeq,l)}),o.size==i.length||this.loadedMsgMap.has(r+s)?Promise.resolve(o):this.createGlobalDB().then(function(l){return new Promise(function(h){var R=a.seq++,w=new Date,d=l.transaction([g.l.Message],A).objectStore(g.l.Message).index("ownerID").getAll([r,s]);d.onsuccess=function(){var D=d.result||[],S=(a.saveDBMap[g.l.Message].forEach(function(y){y.conversationType==r&&y.conversationID==s&&D.push(y)}),D.forEach(function(y){a.hookMessageField(y),a.setGlobalMsg(y);var k=y.messageSeq;y.sentStatus!=g.c.MessageSentStatus.Success||y.isUserInserted||i.indexOf(k)==-1||o.set(k,y)}),a.loadedMsgMap.add(r+s),{seq:R,time:w,convID:s,type:r,count:o.size,seqs:i});a.lg.i(f,"getMsgSeqs",S),h(o)},d.onerror=function(D){D=D.target&&D.target.error&&D.target.error.message,a.lg.i(f,"getMsgSeqs",{seq:R,time:w,convID:s,type:r,seqs:i,onerror:D}),h(new Map)}})}))},u.prototype.getMessageByIndexID=function(s,r,i,a){var o,l,h=this;return r==g.c.ConversationType.Room?(l=a==g.k.CombineID?"combineID":"localMessageID",this.roomMsgMap.forEach(function(R){R[l]==i&&(o=R)}),Promise.resolve(o)):a==g.k.CombineID&&this.globalCbMsgMap.has(i)?Promise.resolve(this.globalCbMsgMap.get(i)):a==g.k.ID&&this.globalMsgMap.has(i)?Promise.resolve(this.globalMsgMap.get(i)):this.createGlobalDB().then(function(R){return new Promise(function(w){var d=h.seq++,D=new Date,S=R.transaction([g.l.Message],A).objectStore(g.l.Message).index(a).get(i);S.onsuccess=function(){h.lg.i(f,"getMsgByID",{seq:d,time:D,indexType:a,convID:s});var y=S.result;if(y||h.saveDBMap[g.l.Message].forEach(function(k){k[a]==i&&(y=k)}),y&&y.sentStatus==g.c.MessageSentStatus.Success&&!y.isUserInserted)return h.hookMessageField(y),y.id&&h.globalMsgMap.set(y.id,y),y.combineID&&h.globalCbMsgMap.set(y.combineID,y),w(y);w()},S.onerror=function(y){y=y.target&&y.target.error&&y.target.error.message,h.lg.i(f,"getMsgByID",{seq:d,time:D,indexType:a,convID:s,onerror:y}),w()}})})},u.prototype.getReplyMessageListBySeqs=function(s,r,i,a){var o=[];return this.globalMsgMap.forEach(function(l){l.repliedInfo&&!l.repliedInfo.state&&l.conversationID==s&&l.conversationType==r&&i.indexOf(l.repliedInfo.messageSeq)!=-1&&(a==0?(l.repliedInfo.state=1,o.push(l)):a==1&&l.repliedInfo.messageInfo.type!=g.c.MessageType.Revoke?(l.repliedInfo.messageInfo={type:g.c.MessageType.Revoke},o.push(l)):a==2&&o.push(l))}),o.length&&(o.sort(function(l,h){return l.orderKey-h.orderKey}),a!=2)&&this.batchAdd(g.l.Message,o),Promise.resolve(o)},u.prototype.getReplyMessageListByRootSeq=function(s,r,i){var a,o=this;return this.isGlobalMsg||this.loadedMsgMap.has(r+s)?(a=[],this.globalMsgMap.forEach(function(l){(l.messageSeq==i||l.repliedInfo&&l.repliedInfo.rootMessageSeq==i&&l.sentStatus==g.c.MessageSentStatus.Success)&&l.conversationID==s&&l.conversationType==r&&a.push(l)}),Promise.resolve(a)):this.createGlobalDB().then(function(l){return new Promise(function(h){var R=o.seq++,w=new Date,d=l.transaction([g.l.Message],A).objectStore(g.l.Message).index("ownerID").getAll([r,s]);d.onsuccess=function(){var D=(d.result||[]).filter(function(y){return o.hookMessageField(y),o.setGlobalMsg(y),y.repliedInfo?y.repliedInfo.rootMessageSeq==i&&y.sentStatus==g.c.MessageSentStatus.Success:y.messageSeq==i}),S=(o.loadedMsgMap.add(r+s),{seq:R,time:w,convID:s,type:r,rootSeq:i,count:D.length});o.lg.i(f,"getReplyMsgs",S),h(D)},d.onerror=function(D){D=D.target&&D.target.error&&D.target.error.message,o.lg.i(f,"getReplyMsgs",{seq:R,time:w,convID:s,type:r,rootSeq:i,onerror:D}),h([])}})})},u.prototype.checkMessageStatus=function(s){var r;s.conversationType!=g.c.ConversationType.Room&&(r=this.globalMsgMap.get(s.localMessageID))&&(s.receiptStatus&&s.receiptStatus<r.receiptStatus&&(s.receiptStatus=r.receiptStatus),s.orderKey||(s.orderKey=r.orderKey))},u.prototype.isMessageExist=function(s,r,i){var a=!1;return this.globalMsgMap.forEach(function(o){a||o.messageSeq!=i||s!=o.conversationID||o.conversationType!=r||(a=!0)}),a},u.prototype.filterSaveMessage=function(s,r,i){var a=this;return i.filter(function(o){return!a.globalMsgMap.has(o.localMessageID)})},u.prototype.addMessageExtraList=function(s){var r=this;s.forEach(function(i){i.id||(i.id=r.appendID(i.conversationType+i.conversationID+(i.conversationSeq||""))),i.ownerID||(i.ownerID=r.userID)}),this.batchAdd(g.l.MessageExtra,s)},u.prototype.deleteMessageExtraList=function(s){var r=this;s.forEach(function(i){return r.econf.msgExtraMap.delete(i)}),this.createStaticDB().then(function(i){return r.batchDelete(i,g.l.MessageExtra,s)})},u.prototype.addCallList=function(s){var r=this;s.forEach(function(i){i.id||(i.id=r.appendID(i.callID)),i.ownerID||(i.ownerID=r.userID)}),this.batchAdd(g.l.Call,s)},u.prototype.getBeanListByOwnerID=function(s){var r=this;return this.createStaticDB().then(function(i){return r.innerGetListByOwnerID(i,s)})},u.prototype.addBeanList=function(s,r){this.batchAdd(r,s)},u.prototype.delBeanList=function(s,r,i){var a=this;i===void 0&&(i=!1),this.createGlobalDB().then(function(o){i?(o.transaction([r],m).objectStore(r).clear(),a.saveDBMap[r].clear()):a.batchDelete(o,r,s)})},u.prototype.getBeanList=function(s){var r=this;return this.createGlobalDB().then(function(i){return r.innerGetAll(i,s)})},u.prototype.createStaticDB=function(){var s=this,r=this.dbNameMap.static,i=this.storeMap.get(r);return i?Promise.resolve(i):new Promise(function(a){return s.openStaticDB(r,a,new Date)})},u.prototype.createGlobalDB=function(){var s=this,r=this.dbNameMap.global+this.userID,i=this.storeMap.get(r);return i?Promise.resolve(i):new Promise(function(a){return s.openGlobalDB(r,a,new Date)})},u.prototype.openStaticDB=function(s,r,i){var a=this,o=indexedDB.open(s,4);o.onsuccess=function(){o.onsuccess=null,a.initStaticStore(o.result,o.transaction,s,r,{time:i,event:"onsucc"})},o.onupgradeneeded=function(l){var h;o.onupgradeneeded=null,l.newVersion&&l.newVersion>l.oldVersion&&(h={time:i,event:"onupgrade",ver:[l.oldVersion,l.newVersion]},l=l.target.result,a.initStaticStore(l,o.transaction,s,r,h))},o.onerror=function(l){l="Static open onerror: "+(l.target&&l.target.error&&l.target.error.message),a.lg.i(f,a.action.create,{time:i,onerror:l}),a.storeMap.delete(s),indexedDB.deleteDatabase(s),o.onsuccess=null,o.onupgradeneeded=null,o.onerror=null,a.openStaticDB(s,r,i)},o.onblocked=function(){a.lg.i(f,a.action.create,{time:i,onerror:"Static open onblocked"})}},u.prototype.openGlobalDB=function(s,r,i){var a=this,o=indexedDB.open(s,4);o.onsuccess=function(){o.onsuccess=null,a.initGlobalStore(o.result,o.transaction,s,r,{time:i,event:"onsucc"})},o.onupgradeneeded=function(l){var h;o.onupgradeneeded=null,l.newVersion&&l.newVersion>l.oldVersion&&(h={time:i,event:"onupgrade",ver:[l.oldVersion,l.newVersion]},l=l.target.result,a.initGlobalStore(l,o.transaction,s,r,h))},o.onerror=function(l){l="Global open onerror: "+(l.target&&l.target.error&&l.target.error.message),a.lg.i(f,a.action.create,{time:i,onerror:l}),a.storeMap.delete(s),indexedDB.deleteDatabase(s),o.onsuccess=null,o.onupgradeneeded=null,o.onerror=null,a.openGlobalDB(s,r,i)},o.onblocked=function(){a.lg.i(f,a.action.create,{time:i,onerror:"Global open onblocked"})}},u.prototype.initStaticStore=function(s,r,i,a,o){var l=this,h=!(s.onclose=function(){return l.storeMap.delete(i)});if(h=(s.objectStoreNames.contains(g.l.Log)||(h=!0,s.createObjectStore(g.l.Log)),s.objectStoreNames.contains(g.l.DataReport)||(h=!0,s.createObjectStore(g.l.DataReport)),s.objectStoreNames.contains(g.l.User)||(h=!0,s.createObjectStore(g.l.User,{keyPath:"userID"})),s.objectStoreNames.contains(g.l.Conv)||(h=!0,s.createObjectStore(g.l.Conv,{keyPath:"id"}).createIndex("ownerID","ownerID")),s.objectStoreNames.contains(g.l.Group)||(h=!0,s.createObjectStore(g.l.Group,{keyPath:"id"}).createIndex("ownerID","ownerID")),s.objectStoreNames.contains(g.l.MessageExtra)||(h=!0,s.createObjectStore(g.l.MessageExtra,{keyPath:"id"}).createIndex("ownerID","ownerID")),s.objectStoreNames.contains(g.l.Call)||(h=!0,s.createObjectStore(g.l.Call,{keyPath:"id"}).createIndex("ownerID","ownerID")),o.isCreate=h,this.storeMap.get(i)))return o.db="Static is opened",this.lg.i(f,this.action.create,o),a(h);r?r.oncomplete=function(){l.storeMap.set(i,s),l.lg.setDB(s),T.a.getInstance().dr.setDB(s),a(s),o.db="Static oncomplete",l.lg.i(f,l.action.create,o)}:(this.storeMap.set(i,s),this.lg.setDB(s),T.a.getInstance().dr.setDB(s),a(s),o.db="Static",this.lg.i(f,this.action.create,o))},u.prototype.initGlobalStore=function(s,r,i,a,o){var l,h=this,R=!(s.onclose=function(){return h.storeMap.delete(i)});if(s.objectStoreNames.contains(g.l.Message)||(R=!0,(l=s.createObjectStore(g.l.Message,{keyPath:"id"})).createIndex("ownerID",["conversationType","conversationID"]),l.createIndex("combineID","combineID")),s.objectStoreNames.contains(g.l.Member)||(R=!0,(l=s.createObjectStore(g.l.Member,{keyPath:"id"})).createIndex("ownerID","ownerID")),s.objectStoreNames.contains(g.l.Friend)||(R=!0,s.createObjectStore(g.l.Friend,{keyPath:"userID"})),s.objectStoreNames.contains(g.l.FriendApp)||(R=!0,s.createObjectStore(g.l.FriendApp,{keyPath:"applyUser.userID"})),s.objectStoreNames.contains(g.l.Blacklist)||(R=!0,s.createObjectStore(g.l.Blacklist,{keyPath:"userID"})),s.objectStoreNames.contains(g.l.GroupApp)||(R=!0,s.createObjectStore(g.l.GroupApp,{keyPath:"id"})),s.objectStoreNames.contains(g.l.SubUser)||(R=!0,s.createObjectStore(g.l.SubUser,{keyPath:"userID"})),r){try{(l=r.objectStore(g.l.Message)).createIndex("combineID","combineID")}catch{}r.oncomplete=function(){h.storeMap.set(i,s),a(s),R&&(o.db="Global oncomplete",h.lg.i(f,h.action.create,o))}}else this.storeMap.set(i,s),a(s),R&&(o.db="Global",this.lg.i(f,this.action.create,o))},u.prototype.batchAdd=function(s,r){var i=this;s==g.l.FriendApp?r.forEach(function(a){i.saveDBMap[s].set(a.applyUser.userID,a)}):r.forEach(function(a){i.saveDBMap[s].set(a[i.dbKeyMap[s]],a)})},u.prototype.batchAddInner=function(s,r,i){var a=this,o=s.transaction(r,m);return r.forEach(function(l){try{var h=o.objectStore(l),R=a.saveDBMap[l];i[l]=R.size,R.forEach(function(w){return h.put(w)}),R.clear()}catch{}}),o},u.prototype.batchDelete=function(s,r,i){var a=this;if(s.objectStoreNames.contains(r)&&i.length){i.forEach(function(R){return a.saveDBMap[r].delete(R)});var o=this.seq++,l=new Date,h=s.transaction([r],m).objectStore(r);r="bd"+r,h.transaction.oncomplete=function(){a.lg.i(f,r,{seq:o,time:l,total:i.length})},h.transaction.onerror=function(R){R=R.target&&R.target.error&&R.target.error.message,R={seq:o,time:l,total:i.length,onerror:"onerror: "+R},a.lg.i(f,r,R)},h.transaction.onabort=function(){var R={seq:o,time:l,total:i.length,onerror:"onabort"};a.lg.i(f,r,R)};try{i.forEach(function(R){return h.delete(R)})}catch{}}},u.prototype.innerDeleteAllByOwnerID=function(s,r,i,a){var o,l,h,R,w=this;s.objectStoreNames.contains(r)&&(o=this.seq++,l=new Date,h=s.transaction([r],m).objectStore(r),R=h.index("ownerID").getAllKeys(i),r="da"+r,R.onsuccess=function(){var d=R.result||[];h.transaction.oncomplete=function(){w.lg.i(f,r,{seq:o,time:l,total:d.length,ownerID:i}),a&&a()},d.forEach(function(D){return h.delete(D)})},R.onerror=function(d){d=d.target&&d.target.error&&d.target.error.message,w.lg.i(f,r,{seq:o,time:l,ownerID:i,onerror:d})})},u.prototype.innerGetListByOwnerID=function(s,r){var i=this;return s.objectStoreNames.contains(r)?new Promise(function(a){var o=i.seq++,l=new Date,h=s.transaction([r],A).objectStore(r).index("ownerID").getAll(i.userID);r="ga"+r+"s",h.onsuccess=function(){var R=h.result||[];i.lg.i(f,r,{seq:o,time:l,total:R.length}),a(R)},h.onerror=function(R){R=R.target&&R.target.error&&R.target.error.message,i.lg.i(f,r,{seq:o,time:l,onerror:R}),a([])}}):Promise.resolve([])},u.prototype.innerGetAll=function(s,r,i){var a=this;return s.objectStoreNames.contains(r)?new Promise(function(o){var l=a.seq++,h=new Date,R=s.transaction([r],A).objectStore(r).getAll();r="ga"+r,R.onsuccess=function(){var w=R.result||[];a.lg.i(f,r,{seq:l,time:h,total:w.length,pid:i}),o(w)},R.onerror=function(w){w=w.target&&w.target.error&&w.target.error.message,a.lg.i(f,r,{seq:l,time:h,onerror:w,pid:i}),o([])}}):Promise.resolve([])},u.prototype.appendID=function(s){return this.userID+s},u.prototype.setGlobalMsg=function(s){this.globalMsgMap.set(s.id,s),s.type==g.c.MessageType.Combine&&this.globalCbMsgMap.set(s.combineID,s)},u.prototype.hookMessageField=function(s){var r,i,a,o=this;if(s)return s.isServerMessage||(r=this.st.advancedConfig.geoFence.reg,i=this.st.advancedConfig.geoFence.host.fileproxy,!this.checkFileProxyHost(r,i,s)&&s.type==g.c.MessageType.Multiple&&s.messageInfoList&&s.messageInfoList.forEach(function(l){return o.checkFileProxyHost(r,i,l)}),(a=s.repliedInfo&&s.repliedInfo.messageInfo)&&!this.checkFileProxyHost(r,i,a)&&a.type==g.c.MessageType.Multiple&&a.messageInfoList&&a.messageInfoList.forEach(function(l){return o.checkFileProxyHost(r,i,l)})),typeof s.messageSeq!="number"&&(s.messageSeq=s.isUserInserted||s.sentStatus!=g.c.MessageSentStatus.Success?0:s.conversationSeq),s.id&&s.id.indexOf("_")==1?(a=s.id,s.localMessageID[0]=="1"&&(s.localMessageID=s.conversationType+s.localMessageID),s.id=s.localMessageID,a):void 0},u.prototype.checkFileProxyHost=function(s,r,i){var a;return!!(i.fileUID&&i.type>=g.c.MessageType.Image&&i.type<=g.c.MessageType.Video)&&(i.fileDownloadUrl=this.setFileProxyHost(s,r,i.fileDownloadUrl),i.type==g.c.MessageType.Image?(i.thumbnailDownloadUrl=this.setFileProxyHost(s,r,i.thumbnailDownloadUrl),i.largeImageDownloadUrl=this.setFileProxyHost(s,r,i.largeImageDownloadUrl)):i.type==g.c.MessageType.Video&&(a=i.videoFirstFrameDownloadUrl,i.videoFirstFrameDownloadUrl=this.setFileProxyHost(s,r,a)),!0)},u.prototype.setFileProxyHost=function(s,r,i){return r&&i?i.replace(s,r+"$4"):i},u.prototype.filterKeys=function(s){return s&&s.length&&(s=s.filter(function(r){return typeof r=="string"&&r&&r.trim().length}).map(function(r){return r.toLocaleLowerCase()})).length?s:null},u.prototype.isMsgKeywords=function(s,r){var i;return!r||(s.type==g.c.MessageType.Combine?r.every(function(a){return Object(_.d)(s.title,a)||Object(_.d)(s.summary,a)}):s.type==g.c.MessageType.Multiple?s.messageInfoList.some(function(a){var o=a.type==g.c.MessageType.Custom?a.searchedContent:a.message||a.fileName;return!!o&&r.every(function(l){return Object(_.d)(o,l)})}):!!(i=s.type==g.c.MessageType.Custom?s.searchedContent:s.message||s.fileName)&&r.every(function(a){return Object(_.d)(i,a)}))},u.prototype.isMsgType=function(s,r,i,a){var o=!a||!a.length,l=!i||!i.length;return o&&l||(o&&!l?i.indexOf(s)!=-1:s==g.c.MessageType.Custom&&a.indexOf(r)!=-1)},u.prototype.isMsgTimeRange=function(s,r,i){return!r&&!i||(!i&&r?r<s:(!r&&i||r<s)&&s<i)},u.prototype.isSomeKeys=function(s,r){return!r||!!s&&r.some(function(i){return Object(_.d)(s,i)})},u.prototype.isEveryKeys=function(s,r){return!r||!!s&&r.every(function(i){return Object(_.d)(s,i)})},u.prototype.handleMsgCallbackList=function(){var s=this;this.searchMsgCallbackList.forEach(function(r){s.innerSearchMessages(!1,r.convID,r.type,r.config,r.resolve)}),this.searchMsgByConvCallbackList.forEach(function(r){s.innerSearchMessagesByConv(!1,r.config,r.resolve)}),this.searchMsgCallbackList.length=0,this.searchMsgByConvCallbackList.length=0,this.getDelMsgCountCallbackList.forEach(function(r){s.getDeleteMessageCount(r.convID,r.type,r.delSeqs,r.resolve)}),this.delMsgsCallbackList.forEach(function(r){s.deleteMessageListFromRemote(r.convID,r.type,r.seqs,r.readSeq,r.resolve)}),this.delAllMsgCallbackList.forEach(function(r){s.deleteAllMessageFromRemote(r.convID,r.type,r.maxSeq,r.delSeqs,r.resolve)}),this.getDelMsgCountCallbackList.length=0,this.delMsgsCallbackList.length=0,this.delAllMsgCallbackList.length=0},u.prototype.handleMemberCallbackList=function(){var s=this;this.searchGroupsCallbackList.forEach(function(r){s.searchGroups(r.keywords,r.isName,r.isNick,r.resolve,!0)}),this.searchMembersCallbackList.forEach(function(r){s.innerSearchGroupMember(!1,r.groupID,r.keywords,r.isNick,r.resolve)}),this.searchGroupsCallbackList.length=0,this.searchMembersCallbackList.length=0,this.getMembersCallbackList.forEach(function(r){var i=r.groupID,a=(r=r.resolve,[]);s.globalMemberMap.forEach(function(o){o.ownerID==i&&a.push(o)}),r(a)}),this.getMembersCallbackList.length=0},u.prototype.innerSearchMessagesByConv=function(s,r,i){var a,o=this;if(r.keywords=this.filterKeys(r.keywords),r.senderUserIDs=this.filterKeys(r.senderUserIDs),!(r.keywords&&r.keywords.length||r.messageTypes&&r.messageTypes.length||r.subMessageTypes&&r.subMessageTypes.length||r.senderUserIDs&&r.senderUserIDs.length||r.startTime&&!(r.startTime<0)||r.endTime&&!(r.endTime<0)))return i([]);s&&!this.isGlobalMsg?this.searchMsgByConvCallbackList.push({config:r,resolve:i}):(a=new Map,this.globalMsgMap.forEach(function(l){var h,R;l.type!=g.c.MessageType.Revoke&&o.isMsgKeywords(l,r.keywords)&&o.isMsgTimeRange(l.timestamp,r.startTime,r.endTime)&&o.isMsgType(l.type,l.subType,r.messageTypes,r.subMessageTypes)&&o.isSomeKeys(l.senderUserID,r.senderUserIDs)&&(h=l.conversationType+l.conversationID,(R=a.get(h)||{conversationID:l.conversationID,conversationType:l.conversationType,totalMessageCount:0,messageList:[]}).totalMessageCount+=1,R.messageList.push(l),a.set(h,R))}),i(Array.from(a.values())))},u.prototype.innerSearchMessages=function(s,r,i,a,o){var l,h,R,w,d,D,S=this;if(a.keywords=this.filterKeys(a.keywords),a.senderUserIDs=this.filterKeys(a.senderUserIDs),!(a.keywords&&a.keywords.length||a.messageTypes&&a.messageTypes.length||a.subMessageTypes&&a.subMessageTypes.length||a.senderUserIDs&&a.senderUserIDs.length||a.startTime&&!(a.startTime<0)||a.endTime&&!(a.endTime<0)))return o({messageList:[]},{convID:r,config:a});s&&!this.isGlobalMsg?this.searchMsgCallbackList.push({convID:r,type:i,config:a,resolve:o}):(d=[],this.globalMsgMap.forEach(function(y){(!r||y.conversationID==r&&y.conversationType==i)&&y.type!=g.c.MessageType.Revoke&&S.isMsgKeywords(y,a.keywords)&&S.isMsgTimeRange(y.timestamp,a.startTime,a.endTime)&&S.isMsgType(y.type,y.subType,a.messageTypes,a.subMessageTypes)&&S.isSomeKeys(y.senderUserID,a.senderUserIDs)&&d.push(y),y.type==g.c.MessageType.Combine&&y.messageList&&(!r||y.conversationID==r&&y.conversationType==i)&&y.messageList.forEach(function(k){k.type!=g.c.MessageType.Revoke&&S.isMsgKeywords(k,a.keywords)&&S.isMsgTimeRange(k.timestamp,a.startTime,a.endTime)&&S.isMsgType(k.type,k.subType,a.messageTypes,a.subMessageTypes)&&S.isSomeKeys(k.senderUserID,a.senderUserIDs)&&d.indexOf(y)==-1&&d.push(y)})}),s=d.length,a.order?d.sort(function(y,k){return y.timestamp-k.timestamp}):d.sort(function(y,k){return k.timestamp-y.timestamp}),R=(h=(l=a.nextMessage?a.nextMessage.id:"")?d.findIndex(function(y){return l===y.id})+1:0)+Math.min(g.h.MAX_SEARCH_PAGE_COUNT,a.count),w=d[R]?d[R-1]:void 0,d=d.slice(h,R),a.nextMessage=l,D=this.globalMsgMap.size,D={time:new Date,dbCount:D,start:h,end:R,total:s,count:d.length,convID:r,config:a},o({messageList:d,nextMessage:w},D))},u.prototype.innerSearchGroupMember=function(s,r,i,a,o){var l,h=this;s&&!this.isGlobalMember?this.searchMembersCallbackList.push({groupID:r,keywords:i,isNick:a,resolve:o}):(l=[],this.globalMemberMap.forEach(function(R){var w=((w=h.econf.dbUserMap.get(R.userID))==null?void 0:w.userName)||"";R.ownerID==r&&(h.isEveryKeys(w,i)||a&&h.isEveryKeys(R.memberNickname,i))&&l.push(R)}),o(l))},u.prototype.syncMemberToUser=function(s){var r=s.userName,i=s.memberAvatarUrl,a=this.econf.dbUserMap.get(s.userID);a?(r&&!a.userName&&(a.userName=r),i&&!a.userAvatarUrl&&(a.userAvatarUrl=i)):(a={userID:s.userID,userName:r,userAvatarUrl:i},this.econf.dbUserMap.set(s.userID,a))},u);function u(s){var r,i=this;this.econf=s,this.lg=T.a.getInstance().lg,this.st=T.a.getInstance().st,this.dr=T.a.getInstance().dr,this.dbNameMap={static:"",global:""},this.storeMap=new Map,this.saveDBMap=((r={})[g.l.User]=new Map,r[g.l.Conv]=new Map,r[g.l.Group]=new Map,r[g.l.Call]=new Map,r[g.l.MessageExtra]=new Map,r[g.l.Member]=new Map,r[g.l.Message]=new Map,r[g.l.Friend]=new Map,r[g.l.FriendApp]=new Map,r[g.l.Blacklist]=new Map,r[g.l.GroupApp]=new Map,r[g.l.SubUser]=new Map,r),this.dbKeyMap=((r={})[g.l.User]="userID",r[g.l.Conv]="id",r[g.l.Group]="id",r[g.l.Call]="id",r[g.l.MessageExtra]="id",r[g.l.Member]="id",r[g.l.Message]="id",r[g.l.Friend]="userID",r[g.l.Blacklist]="userID",r[g.l.GroupApp]="id",r[g.l.SubUser]="userID",r),this.seq=1,this.userID="",this.action={delete:"delete",create:"create"},this.isGlobalMsg=!1,this.isGlobalMember=!1,this.reportLog={delMsgCount:0,messageTime:0,memberTime:0,messageCount:0,memberCount:0},this.roomMsgMap=new Map,this.globalMsgMap=new Map,this.globalMemberMap=new Map,this.globalCbMsgMap=new Map,this.loadedMsgMap=new Set,this.searchMsgByConvCallbackList=[],this.searchMsgCallbackList=[],this.searchGroupsCallbackList=[],this.searchMembersCallbackList=[],this.getMembersCallbackList=[],this.getDelMsgCountCallbackList=[],this.delMsgsCallbackList=[],this.delAllMsgCallbackList=[],this.execSaveDBTimer=function(a){var o,l,h,R,w,d,D,S,y;a||setTimeout(i.execSaveDBTimer,1e4),i.storeMap.size&&i.econf.user&&i.econf.user.userID&&(o=[g.l.User,g.l.Conv,g.l.Group,g.l.Call,g.l.MessageExtra].filter(function(k){return 0<i.saveDBMap[k].size}),l=[g.l.Member,g.l.Message,g.l.Friend,g.l.FriendApp,g.l.Blacklist,g.l.GroupApp,g.l.SubUser].filter(function(k){return 0<i.saveDBMap[k].size}),o.length||l.length?(R=h=0,w=a?"TimerUnload":"Timer",d={seq:i.seq++,time:new Date},D=function(){R<=++h&&i.lg.i(f,w,d)},S=function(k){h++,k=k.target&&k.target.error&&k.target.error.message,d.onerror="onerror: "+k,R<=h&&i.lg.i(f,w,d)},y=function(){h++,d.onerror="onabort",R<=h&&i.lg.i(f,w,d)},o.length&&(R++,i.createStaticDB().then(function(k){(k=i.batchAddInner(k,o,d)).oncomplete=D,k.onerror=S,k.onabort=y})),l.length&&(R++,i.createGlobalDB().then(function(k){(k=i.batchAddInner(k,l,d)).oncomplete=D,k.onerror=S,k.onabort=y}))):i.lg.hbLog.push({id:"_DB",time:new Date().toLocaleTimeString("zh-CN"),ev:!!a}))},this.dbNameMap.static="ZIMSDKSTATIC"+s.appID,this.dbNameMap.global="ZIMSDKGLOBAL"+s.appID,this.createStaticDB(),setTimeout(this.execSaveDBTimer,1e4),window.addEventListener("beforeunload",this.execSaveDBTimer)}},function(te,j,C){te.exports=f;var O,T=C(9),_=T.LongBits,E=T.base64,g=T.utf8;function x(o,l,h){this.fn=o,this.len=l,this.next=void 0,this.val=h}function A(){}function m(o){this.head=o.head,this.tail=o.tail,this.len=o.len,this.next=o.states}function f(){this.len=0,this.head=new x(A,0,0),this.tail=this.head,this.states=null}function c(){return T.Buffer?function(){return(f.create=function(){return new O})()}:function(){return new f}}function u(o,l,h){l[h]=255&o}function s(o,l){this.len=o,this.next=void 0,this.val=l}function r(o,l,h){for(;o.hi;)l[h++]=127&o.lo|128,o.lo=(o.lo>>>7|o.hi<<25)>>>0,o.hi>>>=7;for(;127<o.lo;)l[h++]=127&o.lo|128,o.lo=o.lo>>>7;l[h++]=o.lo}function i(o,l,h){l[h]=255&o,l[h+1]=o>>>8&255,l[h+2]=o>>>16&255,l[h+3]=o>>>24}f.create=c(),f.alloc=function(o){return new T.Array(o)},T.Array!==Array&&(f.alloc=T.pool(f.alloc,T.Array.prototype.subarray)),f.prototype._push=function(o,l,h){return this.tail=this.tail.next=new x(o,l,h),this.len+=l,this},(s.prototype=Object.create(x.prototype)).fn=function(o,l,h){for(;127<o;)l[h++]=127&o|128,o>>>=7;l[h]=o},f.prototype.uint32=function(o){return this.len+=(this.tail=this.tail.next=new s((o>>>=0)<128?1:o<16384?2:o<2097152?3:o<268435456?4:5,o)).len,this},f.prototype.int32=function(o){return o<0?this._push(r,10,_.fromNumber(o)):this.uint32(o)},f.prototype.sint32=function(o){return this.uint32((o<<1^o>>31)>>>0)},f.prototype.int64=f.prototype.uint64=function(o){return o=_.from(o),this._push(r,o.length(),o)},f.prototype.sint64=function(o){return o=_.from(o).zzEncode(),this._push(r,o.length(),o)},f.prototype.bool=function(o){return this._push(u,1,o?1:0)},f.prototype.sfixed32=f.prototype.fixed32=function(o){return this._push(i,4,o>>>0)},f.prototype.sfixed64=f.prototype.fixed64=function(o){return o=_.from(o),this._push(i,4,o.lo)._push(i,4,o.hi)},f.prototype.float=function(o){return this._push(T.float.writeFloatLE,4,o)},f.prototype.double=function(o){return this._push(T.float.writeDoubleLE,8,o)};var a=T.Array.prototype.set?function(o,l,h){l.set(o,h)}:function(o,l,h){for(var R=0;R<o.length;++R)l[h+R]=o[R]};f.prototype.bytes=function(o){var l,h=o.length>>>0;return h?(T.isString(o)&&(l=f.alloc(h=E.length(o)),E.decode(o,l,0),o=l),this.uint32(h)._push(a,h,o)):this._push(u,1,0)},f.prototype.string=function(o){var l=g.length(o);return l?this.uint32(l)._push(g.write,l,o):this._push(u,1,0)},f.prototype.fork=function(){return this.states=new m(this),this.head=this.tail=new x(A,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new x(A,0,0),this.len=0),this},f.prototype.ldelim=function(){var o=this.head,l=this.tail,h=this.len;return this.reset().uint32(h),h&&(this.tail.next=o.next,this.tail=l,this.len+=h),this},f.prototype.finish=function(){for(var o=this.head.next,l=this.constructor.alloc(this.len),h=0;o;)o.fn(o.val,l,h),h+=o.len,o=o.next;return l},f._configure=function(o){O=o,f.create=c(),O._configure()}},function(te,j,C){te.exports=x;var O,T=C(9),_=T.LongBits,E=T.utf8;function g(r,i){return RangeError("index out of range: "+r.pos+" + "+(i||1)+" > "+r.len)}function x(r){this.buf=r,this.pos=0,this.len=r.length}function A(){return T.Buffer?function(r){return(x.create=function(i){return T.Buffer.isBuffer(i)?new O(i):f(i)})(r)}:f}var m,f=typeof Uint8Array<"u"?function(r){if(r instanceof Uint8Array||Array.isArray(r))return new x(r);throw Error("illegal buffer")}:function(r){if(Array.isArray(r))return new x(r);throw Error("illegal buffer")};function c(){var r=new _(0,0),i=0;if(!(4<this.len-this.pos)){for(;i<3;++i){if(this.pos>=this.len)throw g(this);if(r.lo=(r.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(127&this.buf[this.pos++])<<7*i)>>>0,r}for(;i<4;++i)if(r.lo=(r.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(127&this.buf[this.pos])<<28)>>>0,r.hi=(r.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return r;if(i=0,4<this.len-this.pos){for(;i<5;++i)if(r.hi=(r.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return r}else for(;i<5;++i){if(this.pos>=this.len)throw g(this);if(r.hi=(r.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}function u(r,i){return(r[i-4]|r[i-3]<<8|r[i-2]<<16|r[i-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw g(this,8);return new _(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}x.create=A(),x.prototype._slice=T.Array.prototype.subarray||T.Array.prototype.slice,x.prototype.uint32=(m=4294967295,function(){if(m=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(m=(m|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(m=(m|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(m=(m|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(m=(m|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return m;throw this.pos=this.len,g(this,10)}),x.prototype.int32=function(){return 0|this.uint32()},x.prototype.sint32=function(){var r=this.uint32();return r>>>1^-(1&r)|0},x.prototype.bool=function(){return this.uint32()!==0},x.prototype.fixed32=function(){if(this.pos+4>this.len)throw g(this,4);return u(this.buf,this.pos+=4)},x.prototype.sfixed32=function(){if(this.pos+4>this.len)throw g(this,4);return 0|u(this.buf,this.pos+=4)},x.prototype.float=function(){if(this.pos+4>this.len)throw g(this,4);var r=T.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r},x.prototype.double=function(){if(this.pos+8>this.len)throw g(this,4);var r=T.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r},x.prototype.bytes=function(){var r=this.uint32(),i=this.pos,a=this.pos+r;if(a>this.len)throw g(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(i,a):i===a?new this.buf.constructor(0):this._slice.call(this.buf,i,a)},x.prototype.string=function(){var r=this.bytes();return E.read(r,0,r.length)},x.prototype.skip=function(r){if(typeof r=="number"){if(this.pos+r>this.len)throw g(this,r);this.pos+=r}else do if(this.pos>=this.len)throw g(this);while(128&this.buf[this.pos++]);return this},x.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=7&this.uint32())!=4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this},x._configure=function(r){O=r,x.create=A(),O._configure();var i=T.Long?"toLong":"toNumber";T.merge(x.prototype,{int64:function(){return c.call(this)[i](!1)},uint64:function(){return c.call(this)[i](!0)},sint64:function(){return c.call(this).zzDecode()[i](!1)},fixed64:function(){return s.call(this)[i](!0)},sfixed64:function(){return s.call(this)[i](!1)}})}},function(te,j,C){C.d(j,"a",function(){return g});var O=C(83),T=C(88),_=C(3),E=function(){return(E=Object.assign||function(A){for(var m,f=1,c=arguments.length;f<c;f++)for(var u in m=arguments[f])Object.prototype.hasOwnProperty.call(m,u)&&(A[u]=m[u]);return A}).apply(this,arguments)},g=(x.prototype.setDB=function(A){var m=this;this.store?this.store.setDB(A).then(function(f){m.config.isProd&&f.forEach(function(c){return m.pendingQueue.enqueue(c)})}):this.db=A},x.prototype.clearDB=function(){this.pendingQueue.clear(),this.store&&this.store.clear()},x.prototype.init=function(A){return function(m,f,c,u){return new(c=c||Promise)(function(s,r){function i(l){try{o(u.next(l))}catch(h){r(h)}}function a(l){try{o(u.throw(l))}catch(h){r(h)}}function o(l){var h;l.done?s(l.value):((h=l.value)instanceof c?h:new c(function(R){R(h)})).then(i,a)}o((u=u.apply(m,[])).next())})}(this,void 0,void 0,function(){var m,f=this;return function(c,u){var s,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o={next:l(0),throw:l(1),return:l(2)};return typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(R){var w=[h,R];if(s)throw new TypeError("Generator is already executing.");for(;a=o&&w[o=0]?0:a;)try{if(s=1,r&&(i=2&w[0]?r.return:w[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,w[1])).done)return i;switch(r=0,(w=i?[2&w[0],i.value]:w)[0]){case 0:case 1:i=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,r=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!i||w[1]>i[0]&&w[1]<i[3]))a.label=w[1];else if(w[0]===6&&a.label<i[1])a.label=i[1],i=w;else{if(!(i&&a.label<i[2])){i[2]&&a.ops.pop(),a.trys.pop();continue}a.label=i[2],a.ops.push(w)}}w=u.call(c,a)}catch(d){w=[6,d],r=0}finally{s=i=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}}(this,function(c){return this.config=E(E({},_.b),A),this.logger=new O.a(this.miniProgram),this.logger.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.logger.setLogServer(this.config.serverUrl||""),this.logger.setPostSucCallback(this.postSucHandler.bind(this)),this.logger.setPostFailCallback(function(u){u.push.apply(u,function(s,r,i){if(arguments.length===2)for(var a,o=0,l=r.length;o<l;o++)!a&&o in r||((a=a||Array.prototype.slice.call(r,0,o))[o]=r[o]);return s.concat(a||Array.prototype.slice.call(r))}([],function(s,r){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var a,o,l=i.call(s),h=[];try{for(;(r===void 0||0<r--)&&!(a=l.next()).done;)h.push(a.value)}catch(R){o={error:R}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return h}(f.pendingQueue.readStoreData(1)),!1)),f.store.setItems(u)}),this.initPendingQueue(),m=C(38)("./"+(this.miniProgram?"zego.impl.wx":"zego.impl.web")).createZegoStore,this.store=m(this.config.appID,this.miniProgram),(this.db||this.miniProgram)&&this.store.setDB(this.db).then(function(u){f.config.isProd&&u.forEach(function(s){return f.pendingQueue.enqueue(s)})}),[2]})})},x.prototype.pause=function(){this.isPaused=!0},x.prototype.startReport=function(A){var m=A.get("userID"),f=A.get("token");return!(!m||typeof m!="string")&&!(!f||typeof f!="string")&&(this.startCommonField=A,this.config.userID=m,this.config.token=f,this.logger.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),(m=A.get("serverUrl"))&&(this.config.serverUrl=m,this.logger.setLogServer(this.config.serverUrl)),this.config.userID&&this.config.token&&this.config.serverUrl&&(A=(f=this.pendingQueue.getPendingDataInfo()).pendingDataSize,this.checkPendingQueue(A,f.size)),!0)},x.prototype.resume=function(){this.isPaused=!1;var A=this.pendingQueue.getPendingDataInfo(),m=A.pendingDataSize;this.checkPendingQueue(m,A.size)},x.prototype.report=function(A,m){m===void 0&&(m=!1);var f=Object(_.g)();return f={key:new Date().getTime()+"_"+f,value:A},this.config.isProd&&this.pendingQueue.enqueue(f),!this.config.isProd&&m||this.store.setItems([f]),!0},x.prototype.postSucHandler=function(A){this.store.removeItems(A);var m=(A=this.pendingQueue.getPendingDataInfo()).pendingDataSize;this.checkPendingQueue(m,A.size)},x.prototype.checkPendingQueue=function(A,m){if(A>this.config.reportSize||m>this.config.reportNum)return!(!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl||!(A>=this.cacheMaxSize||_.a.totalAvailCache<=0))||!this.logger.reportAllowed()&&(A>=this.cacheMaxSize||_.a.totalAvailCache<=0)?this.store.setItems(this.pendingQueue.readStoreData(this.cacheDelPer)):(A=(m=this.pendingQueue.readReportData(this.config.reportSize)).totalLen,this.logger.report(m.reportDataArr),void this.pendingQueue.refresh(A))},x.prototype.initPendingQueue=function(){var A=this;this.pendingQueue=new T.a,this.pendingQueue.setListener({enCallback:function(m,f,c){A.checkPendingQueue(c,f)}})},x);function x(A,m){this.product=A,this.miniProgram=m,this.QUEUE_MAX=100,this.cacheMaxSize=_.a.cacheMaxSize,this.cacheDelPer=_.a.cacheDelPer,this.forceDataTotalLen=0,this.isPaused=!1}},function(te,j,C){var O={"./zego.impl.web":39,"./zego.impl.web.ts":39,"./zego.impl.wx":40,"./zego.impl.wx.ts":40};function T(E){return E=_(E),C(E)}function _(E){if(C.o(O,E))return O[E];throw(E=new Error("Cannot find module '"+E+"'")).code="MODULE_NOT_FOUND",E}T.keys=function(){return Object.keys(O)},T.resolve=_,(te.exports=T).id=38},function(te,j,C){C.r(j),C.d(j,"createZegoStore",function(){return _}),C.d(j,"createZegoWebSocket",function(){return E});var O=(T.prototype.setDB=function(g){return this.store=g,this.getAll()},T.prototype.clear=function(){this.buffer.length=0},T.prototype.setItems=function(g){var x;if(this.store)try{var A=this.store.transaction([this.tname],"readwrite").objectStore(this.tname);g.forEach(function(m){return A.put(m.value,m.key)})}catch{}else(x=this.buffer).push.apply(x,function(m,f,c){if(arguments.length===2)for(var u,s=0,r=f.length;s<r;s++)!u&&s in f||((u=u||Array.prototype.slice.call(f,0,s))[s]=f[s]);return m.concat(u||Array.prototype.slice.call(f))}([],function(m,f){var c=typeof Symbol=="function"&&m[Symbol.iterator];if(!c)return m;var u,s,r=c.call(m),i=[];try{for(;(f===void 0||0<f--)&&!(u=r.next()).done;)i.push(u.value)}catch(a){s={error:a}}finally{try{u&&!u.done&&(c=r.return)&&c.call(r)}finally{if(s)throw s.error}}return i}(g),!1))},T.prototype.removeItems=function(g){var x;this.store&&(x=this.store.transaction([this.tname],"readwrite").objectStore(this.tname),g.forEach(function(A){return x.delete(A.key)}))},T.prototype.getAll=function(){var g=this;return new Promise(function(x){var A=g.store.transaction([g.tname],"readonly").objectStore(g.tname);A.getAllKeys().onsuccess=function(m){var f=m.target.result;A.getAll().onsuccess=function(c){c=c.target.result.map(function(u,s){return{key:f[s],value:u}}),x(c)}}})},T);function T(){this.buffer=[],this.tname="DataReport"}function _(){return new O}function E(g,x){var A=[];return(g=(Object.keys(x).forEach(function(m){A.push("".concat(m,"=").concat(x[m]))}),new WebSocket(g+"?"+A.join("&")))).binaryType="arraybuffer",g}},function(te,j){throw new Error(`Module parse failed: Unexpected token (4:20)
You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders
| import { ReportDataItem, ZegoStore, ZegoWebSocket } from '../../common/zego.entity';
| 
> class ZegoStoreImpl implements ZegoStore {
|     isAlipay = false;
|     isReadAll = false;`)},function(te,j,C){C.d(j,"a",function(){return E});var O=C(8),T=C(91),_=function(){return(_=Object.assign||function(x){for(var A,m=1,f=arguments.length;m<f;m++)for(var c in A=arguments[m])Object.prototype.hasOwnProperty.call(A,c)&&(x[c]=A[c]);return x}).apply(this,arguments)},E=(g.prototype.init=function(x){return function(A,m,f,c){return new(f=f||Promise)(function(u,s){function r(o){try{a(c.next(o))}catch(l){s(l)}}function i(o){try{a(c.throw(o))}catch(l){s(l)}}function a(o){var l;o.done?u(o.value):((l=o.value)instanceof f?l:new f(function(h){h(l)})).then(r,i)}a((c=c.apply(A,[])).next())})}(this,void 0,void 0,function(){var A;return function(m,f){var c,u,s,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(o){return function(l){var h=[o,l];if(c)throw new TypeError("Generator is already executing.");for(;r=i&&h[i=0]?0:r;)try{if(c=1,u&&(s=2&h[0]?u.return:h[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,h[1])).done)return s;switch(u=0,(h=s?[2&h[0],s.value]:h)[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,u=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(s=0<(s=r.trys).length&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3]))r.label=h[1];else if(h[0]===6&&r.label<s[1])r.label=s[1],s=h;else{if(!(s&&r.label<s[2])){s[2]&&r.ops.pop(),r.trys.pop();continue}r.label=s[2],r.ops.push(h)}}h=f.call(m,r)}catch(R){h=[6,R],u=0}finally{c=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}}(this,function(m){return A=this.miniProgram?"zego.fileHandler":"zego.storeHandler",this.fileConfig=_({maxSize:5e6,maxFiles:3,dropPer:1},x),A=C(114)("./"+A).ZegoStoreImpl,this.storeHandler=new A(this.product,this.fileConfig,this.miniProgram),[2]})})},g.prototype.setDB=function(x){this.storeHandler.setDB(x)},g.prototype.onLogout=function(){this.storeHandler.onLogout()},g.prototype.setLogLevel=function(x){return(x=O.a[x])!==void 0&&(this.logLevel=x,!0)},g.prototype.setHeaderInfo=function(x,A){this.userID=x,this.storeHandler.storeData(x,A)},g.prototype.write=function(x,A,m,f){var c=O.a[A];return c!==void 0&&(x=this.logParams(x,m,f),this.logLevel!==O.a.DISABLE&&this.logLevel<=c&&(A=="debug"||A=="report"||A=="info"?console.info:console.warn)(x),this.logRemoteLevel!==O.a.DISABLE&&this.logRemoteLevel<=c&&this.storeHandler.storeData(this.userID,x),!0)},g.prototype.upload=function(x,A){var m=this;return new Promise(function(f){setTimeout(function(){if(m.storeHandler)return m.storeHandler.upload(x,A).then(f);f()},20)})},g.prototype.logParams=function(x,A,m){return"[".concat(this.getCurrentTime(),"][").concat(x,"][").concat(A,"]:").concat(m)},g.prototype.getCurrentTime=function(){var x=new Date;return"".concat(this.D[x.getMonth()+1]||x.getMonth()+1).concat(this.D[x.getDate()]||x.getDate()," ").concat(x.toLocaleTimeString("zh-CN"),".").concat(x.getMilliseconds())},g);function g(x,A,m){this.product=x,this.miniProgram=A,this.logLevel=O.a.INFO,this.logRemoteLevel=0,this.userID="",this.D=["00","01","02","03","04","05","06","07","08","09"],this.stateCenter=T.a.getInstance(),this.init(m)}},function(te,j){throw new Error('Module parse failed: Unexpected token (1:31)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> function formDataArray(boundary: string, name: string, value: string): number[] {\n|     return toUtf8Bytes(`${boundary}\\r\\nContent-Disposition: form-data; name="${name}"\\r\\n\\r\\n${value}\\r\\n`);\n| }')},function(te,j){throw new Error(`Module parse failed: Unexpected token (5:27)
You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders
| import { convertFormData } from './formdata';
| 
> export class ZegoStoreImpl implements ZegoStore {
|     basePath = '';
|     fileManager: any;`)},function(te,j,C){C.r(j),C.d(j,"ZegoStoreImpl",function(){return _}),j=C(92);var O=C.n(j),T=C(8),_=(E.prototype.setDB=function(g){this.store=g,setTimeout(this.writeData,1e4)},E.prototype.onLogout=function(){this.writeData()},E.prototype.storeData=function(g,x){g&&(this.userID=g),x&&this.buffer.push(x),100<this.buffer.length&&this.writeData()},E.prototype.upload=function(g,x){var A=this,m={time:new Date,readTime:0,appID:g.appID,userID:g.userID,version:g.version,deviceID:g.deviceID,action:x,total:0,files:""};return this.readData(g.userID,m).then(function(f){var c,u;if(f)return c=new Date().getTime(),(u=new FormData).append("logs",f),u.append("id_name",g.userID),u.append("appid",g.appID),u.append("timestamp",c+""),u.append("token",g.token),u.append("deviceid",g.deviceID||""),u.append("product",g.product),u.append("req_sdk","1"),new Promise(function(s,r){A.postFile(g.uploadURL,u,m,s,r)})})},E.prototype.postFile=function(g,x,A,m,f){var c=this,u=new XMLHttpRequest;u.open("post",g),u.onreadystatechange=function(){var s,r;u.readyState==4&&(200<=u.status&&u.status<300||u.status==304?(s=JSON.parse(u.responseText)).code===0?(r=A.time,A.time=Date.now()-r.getTime()+","+r.toLocaleTimeString("zh-CN"),A=JSON.stringify(A),(0,console.log)(A),c.postFailCount=0,m()):s.code==4&&(c.postFailCount++,c.postFailCount<3?c.postFile(g,x,A,m,f):(c.postFailCount=0,f(s))):(c.postFailCount=0,f({code:1001,message:"upload fail"})))},u.send(x)},E.prototype.readData=function(g,x){return function(A,m,f,c){return new(f=f||Promise)(function(u,s){function r(o){try{a(c.next(o))}catch(l){s(l)}}function i(o){try{a(c.throw(o))}catch(l){s(l)}}function a(o){var l;o.done?u(o.value):((l=o.value)instanceof f?l:new f(function(h){h(l)})).then(r,i)}a((c=c.apply(A,[])).next())})}(this,void 0,void 0,function(){var A=this;return function(m,f){var c,u,s,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(o){return function(l){var h=[o,l];if(c)throw new TypeError("Generator is already executing.");for(;r=i&&h[i=0]?0:r;)try{if(c=1,u&&(s=2&h[0]?u.return:h[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,h[1])).done)return s;switch(u=0,(h=s?[2&h[0],s.value]:h)[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,u=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(s=0<(s=r.trys).length&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3]))r.label=h[1];else if(h[0]===6&&r.label<s[1])r.label=s[1],s=h;else{if(!(s&&r.label<s[2])){s[2]&&r.ops.pop(),r.trys.pop();continue}r.label=s[2],r.ops.push(h)}}h=f.call(m,r)}catch(R){h=[6,R],u=0}finally{c=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}}(this,function(m){return[2,new Promise(function(f){var c=0,u=[{datas:[],size:0}],s=A.store.transaction([A.tname],"readwrite").objectStore(A.tname);s.getAllKeys().onsuccess=function(r){var i=r.target.result.filter(function(o){return o.indexOf(g)==0}),a=0;i.forEach(function(o){s.get(o).onsuccess=function(l){var h;a++,(l=l.target.result)&&(u[c].size>A.fileConfig.maxSize&&(u[++c]={datas:[],size:0}),u[c].datas.push(l),u[c].size+=l.length+1),a>=i.length&&(l=new O.a,(h=l.folder("log"))&&1<u[0].size?(i.forEach(function(R){return s.delete(R)}),x.readTime=Date.now()-x.time,x.files=u.map(function(R){return R.size}),x.total=a,u[u.length-1].datas.push(JSON.stringify(x)),u.forEach(function(R,w){h.file("".concat(A.product).concat(w,".txt"),R.datas.join(`
`))}),l.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(function(R){x.total=R.size,f(R)})):f(null))}})}})]})})},E);function E(g,x){var A=this;this.product=g,this.fileConfig=x,this.buffer=[],this.tname="Log",this.postFailCount=0,this.userID="",this.writeData=function(){if(setTimeout(A.writeData,1e4),A.store&&A.userID)try{var m=A.userID+"_"+new Date().getTime()+"_"+Object(T.b)()+"_",f=A.store.transaction([A.tname],"readwrite").objectStore(A.tname);A.buffer.forEach(function(c,u){return f.put(c,m+String(u/100).replace(".",""))}),A.buffer.length=0}catch{}}}},function(te,j){var C,O;te=te.exports={};function T(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}try{C=typeof setTimeout=="function"?setTimeout:T}catch{C=T}try{O=typeof clearTimeout=="function"?clearTimeout:_}catch{O=_}function E(r){if(C===setTimeout)return setTimeout(r,0);if((C===T||!C)&&setTimeout)return(C=setTimeout)(r,0);try{return C(r,0)}catch{try{return C.call(null,r,0)}catch{return C.call(this,r,0)}}}var g,x=[],A=!1,m=-1;function f(){A&&g&&(A=!1,g.length?x=g.concat(x):m=-1,x.length)&&c()}function c(){if(!A){for(var r=E(f),i=(A=!0,x.length);i;){for(g=x,x=[];++m<i;)g&&g[m].run();m=-1,i=x.length}g=null,A=!1,function(a){if(O===clearTimeout)return clearTimeout(a);if((O===_||!O)&&clearTimeout)return(O=clearTimeout)(a);try{O(a)}catch{try{return O.call(null,a)}catch{return O.call(this,a)}}}(r)}}function u(r,i){this.fun=r,this.array=i}function s(){}te.nextTick=function(r){var i=new Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)i[a-1]=arguments[a];x.push(new u(r,i)),x.length!==1||A||E(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},te.title="browser",te.browser=!0,te.env={},te.argv=[],te.version="",te.versions={},te.on=s,te.addListener=s,te.once=s,te.off=s,te.removeListener=s,te.removeAllListeners=s,te.emit=s,te.prependListener=s,te.prependOnceListener=s,te.listeners=function(r){return[]},te.binding=function(r){throw new Error("process.binding is not supported")},te.cwd=function(){return"/"},te.chdir=function(r){throw new Error("process.chdir is not supported")},te.umask=function(){return 0}},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){},function(te,j,C){C.d(j,"a",function(){return m}),j=C(14);var O=C.n(j),T=(j=C(16),C.n(j)),_=(j=C(17),C.n(j)),E=(j=C(55),C.n(j)),g=(j=C(7),C.n(j)),x=C(6),A=C(56),m=(Object.defineProperty(f.prototype,"publicKey",{get:function(){return`-----BEGIN RSA Public Key-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqalgg0uuGIZm83ZsdPwo
G8xYrykn0GUmetUGw8MAqGgY+3GcyhcshOQAEa8MvlB91JVrjJUvj3PcxW/GeCsJ
ZYC8vLj5rQZBIyP+UvcDP3vYJduN6lwlNU2H/DP52ak87f6LGI3c69yQ+zBpMTNk
QgfWG8ATbCqGBXpjtVpgkS7Q8YS/YpTwuv8nVeAtwIprD/FmlvpihCUofipOeW6g
WxRKl0sgOA5ydZAuPgTOGhyLGyEqAlBpquJRrmy29NTUTA4mMDHnPjqY5KRs4lvE
s7JwjnuGg5FbP//OEknolwFXwPwpicFFYfkZvBxUyNQ7pXfPmlRFn1iF8BFiWd5m
AwIDAQAB
-----END RSA Public Key-----`},enumerable:!1,configurable:!0}),f.prototype.encrypt=function(c,u,s){return c=O.a.encrypt(this.u82Word(c),u,s).toString(),x.a.toUint8Array(c)},f.prototype.decrypt=function(c,u,s){return this.word2U8(O.a.decrypt(x.a.fromUint8Array(c),u,s))},f.prototype.encryptString=function(c,u){return O.a.encrypt(c,u.cryptoConfig.appIDKey,u.cryptoConfig.appIDIV).toString()},f.prototype.decryptString=function(c,u){return O.a.decrypt(c,u.cryptoConfig.appIDKey,u.cryptoConfig.appIDIV).toString(_.a)},f.prototype.generateK1Sign=function(c){var u=this.generateNonce();return c.cryptoConfig.key1=_.a.parse(u),c.cryptoConfig.iv1={iv:T.a.parse(g()(u).toString().toLowerCase())},c=new A.a(this.publicKey).encrypt(u),this.word2U8(T.a.parse(c))},f.prototype.decryptK2Sign=function(c,u){try{u.cryptoConfig.key2=O.a.decrypt(x.a.fromUint8Array(c),u.cryptoConfig.key1,u.cryptoConfig.iv1),u.cryptoConfig.iv2={iv:g()(u.cryptoConfig.key2)}}catch{}},f.prototype.generateNonce=function(){var c=Math.random().toString().substring(2,18);return c.length<16&&(c+=c.substring(0,16-c.length)),c},f.prototype.generateKeyIV=function(c){return[_.a.parse(c),{iv:T.a.parse(g()(c).toString().toLowerCase())}]},f.prototype.generateAppIDKey=function(c){var u=g()(String(c.appID)).toString().toLowerCase();c.cryptoConfig.appIDKey=_.a.parse(u),c.cryptoConfig.appIDIV={iv:T.a.parse(u)}},f.prototype.md5=function(c){return this.word2U8(g()(c))},f.prototype.md5Bytes=function(c){return this.word2U8(g()(this.u82Word(c)))},f.prototype.word2U8=function(c){for(var u=c.words,s=c.sigBytes,r=new Uint8Array(s),i=0;i<s;i++){var a=u[i>>>2]>>>24-i%4*8&255;r[i]=a}return r},f.prototype.u82Word=function(c){for(var u=c.length,s=[],r=0;r<u;r++)s[r>>>2]|=(255&c[r])<<24-r%4*8;return E.a.create(s,u)},f);function f(){}},function(te,j,C){var O;te.exports=(O=C(5),(()=>{var T,_;typeof ArrayBuffer=="function"&&(T=O.lib.WordArray,_=T.init,(T.init=function(E){if((E=(E=E instanceof ArrayBuffer?new Uint8Array(E):E)instanceof Int8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):E)instanceof Uint8Array){for(var g=E.byteLength,x=[],A=0;A<g;A++)x[A>>>2]|=E[A]<<24-A%4*8;_.call(this,x,g)}else _.apply(this,arguments)}).prototype=T)})(),O.lib.WordArray)},function(te,j,C){C.d(j,"a",function(){return x});var O=C(18),T=C(57),_=C(58),E=C(59),g=C(60),x=(A.prototype.parseKey=function(m){try{var f=0,c=0,u=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(m)?_.a.decode(m):E.a.unarmor(m),s=g.a.decode(u);if((s=s.sub.length===3?s.sub[2].sub[0]:s).sub.length===9)f=s.sub[1].getHexStringValue(),this.n=Object(O.b)(f,16),c=s.sub[2].getHexStringValue();else{if(s.sub.length!==2)return!1;var r=s.sub[1].sub[0];f=r.sub[0].getHexStringValue(),this.n=Object(O.b)(f,16),c=r.sub[1].getHexStringValue()}return this.e=parseInt(c,16),!0}catch{return!1}},A.prototype.pkcs1pad2=function(m,f){for(var c=[],u=m.length-1;0<=u&&0<f;){var s=m.charCodeAt(u--);s<128?c[--f]=s:127<s&&s<2048?(c[--f]=63&s|128,c[--f]=s>>6|192):(c[--f]=63&s|128,c[--f]=s>>6&63|128,c[--f]=s>>12|224)}c[--f]=0;for(var r=new T.a,i=[];2<f;){for(i[0]=0;i[0]==0;)r.nextBytes(i);c[--f]=i[0]}return c[--f]=2,c[--f]=0,new O.a(c)},A.prototype.encrypt=function(m){for(var f=this.n.bitLength()+7>>3,c=this.pkcs1pad2(m,f).modPowInt(this.e,this.n).toString(16),u=c.length,s=0;s<2*f-u;s++)c="0"+c;return c},A);function A(m){this.e=0,this.parseKey(m)}},function(te,j,C){C.d(j,"a",function(){return A});var O,T=C(22);if(!_){var _=[],E=0,g=void 0;if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){var x=new Uint32Array(256);for(window.crypto.getRandomValues(x),g=0;g<x.length;++g)_[E++]=255&x[g]}}m.prototype.nextBytes=function(f){for(var c=0;c<f.length;++c)f[c]=(()=>{if(O==null){for(O=Object(T.a)();E<T.b;){var u=Math.floor(65536*Math.random());_[E++]=255&u}for(O.init(_),E=0;E<_.length;++E)_[E]=0;E=0}return O.next()})()};var A=m;function m(){}},function(te,j,C){C.d(j,"a",function(){return T});var O,T={decode:function(_){if(O===void 0){var E="0123456789ABCDEF",g=` \f
\r	\u2028\u2029`;for(O={},f=0;f<16;++f)O[E.charAt(f)]=f;for(E=E.toLowerCase(),f=10;f<16;++f)O[E.charAt(f)]=f;for(f=0;f<g.length;++f)O[g.charAt(f)]=-1}for(var x=[],A=0,m=0,f=0;f<_.length;++f){var c=_.charAt(f);if(c=="=")break;if((c=O[c])!=-1){if(c===void 0)throw new Error("Illegal character at offset "+f);A|=c,2<=++m?(x[x.length]=A,m=A=0):A<<=4}}if(m)throw new Error("Hex encoding incomplete: 4 bits missing");return x}}},function(te,j,C){C.d(j,"a",function(){return T});var O,T={decode:function(_){if(O===void 0){var E=`= \f
\r	\u2028\u2029`;for(O=Object.create(null),m=0;m<64;++m)O["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(m)]=m;for(O["-"]=62,O._=63,m=0;m<E.length;++m)O[E.charAt(m)]=-1}for(var g=[],x=0,A=0,m=0;m<_.length;++m){var f=_.charAt(m);if(f=="=")break;if((f=O[f])!=-1){if(f===void 0)throw new Error("Illegal character at offset "+m);x|=f,4<=++A?(g[g.length]=x>>16,g[g.length]=x>>8&255,g[g.length]=255&x,A=x=0):x<<=6}}switch(A){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:g[g.length]=x>>10;break;case 3:g[g.length]=x>>16,g[g.length]=x>>8&255}return g},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(_){var E=T.re.exec(_);if(E)if(E[1])_=E[1];else{if(!E[2])throw new Error("RegExp out of sync");_=E[2]}return T.decode(_)}}},function(te,j,C){C.d(j,"a",function(){return E});var O=C(61),T=(_.prototype.get=function(m){if((m=m===void 0?this.pos++:m)>=this.enc.length)throw new Error("Requesting byte offset "+m+" on a stream of length "+this.enc.length);return typeof this.enc=="string"?this.enc.charCodeAt(m):this.enc[m]},_.prototype.hexByte=function(m){return this.hexDigits.charAt(m>>4&15)+this.hexDigits.charAt(15&m)},_.prototype.hexDump=function(m,f,c){for(var u="",s=m;s<f;++s)if(u+=this.hexByte(this.get(s)),c!==!0)switch(15&s){case 7:u+="  ";break;case 15:u+=`
`;break;default:u+=" "}return u},_);function _(m,f){this.hexDigits="0123456789ABCDEF",m instanceof _?(this.enc=m.enc,this.pos=m.pos):(this.enc=m,this.pos=f)}g.prototype.posStart=function(){return this.stream.pos},g.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},g.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},g.decodeLength=function(m){var f=127&(c=m.get());if(f==c)return f;if(6<f)throw new Error("Length over 48 bits not supported at position "+(m.pos-1));if(f==0)return null;for(var c=0,u=0;u<f;++u)c=256*c+m.get();return c},g.prototype.getHexStringValue=function(){var m=this.toHexString(),f=2*this.header,c=2*this.length;return m.substr(f,c)},g.decode=function(m){function f(){var l=[];if(s!==null){for(var h=r+s;c.pos<h;)l[l.length]=g.decode(c);if(c.pos!=h)throw new Error("Content size is not correct for container starting at offset "+r)}else try{for(;;){var R=g.decode(c);if(R.tag.isEOC())break;l[l.length]=R}s=r-c.pos}catch(w){throw new Error("Exception while decoding undefined length content: "+w)}return l}var c=m instanceof T?m:new T(m,0),u=(m=new T(c),new x(c)),s=g.decodeLength(c),r=c.pos,i=r-m.pos,a=null;if(u.tagConstructed)a=f();else if(u.isUniversal()&&(u.tagNumber==3||u.tagNumber==4))try{if(u.tagNumber==3&&c.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=f();for(var o=0;o<a.length;++o)if(a[o].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{a=null}if(a===null){if(s===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+r);c.pos=r+Math.abs(s)}return new g(m,i,s,u,a)};var E=g;function g(m,f,c,u,s){if(!(u instanceof x))throw new Error("Invalid tag value.");this.stream=m,this.header=f,this.length=c,this.tag=u,this.sub=s}A.prototype.isUniversal=function(){return this.tagClass===0},A.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0};var x=A;function A(m){var f=m.get();if(this.tagClass=f>>6,this.tagConstructed=(32&f)!=0,this.tagNumber=31&f,this.tagNumber==31){for(var c=new O.a;f=m.get(),c.mulAdd(128,127&f),128&f;);this.tagNumber=c.simplify()}}},function(te,j,C){C.d(j,"a",function(){return O}),T.prototype.mulAdd=function(_,E){for(var g,x=this.buf,A=x.length,m=0;m<A;++m)(g=x[m]*_+E)<1e13?E=0:g-=1e13*(E=0|g/1e13),x[m]=g;0<E&&(x[m]=E)},T.prototype.sub=function(_){for(var E,g=this.buf,x=g.length,A=0;A<x;++A)_=(E=g[A]-_)<0?(E+=1e13,1):0,g[A]=E;for(;g[g.length-1]===0;)g.pop()},T.prototype.simplify=function(){var _=this.buf;return _.length==1?_[0]:this};var O=T;function T(_){this.buf=[+_||0]}},function(te,j,C){C.d(j,"a",function(){return S});var O=C(6),T=C(2),_=C(63),E=C(64),g=C(65),x=C(67),A=C(73),m=C(74),f=C(75),c=C(77),u=C(1),s=C(0),r=(j=function(k,b,U,z){var P,H=arguments.length,Q=H<3?b:z===null?z=Object.getOwnPropertyDescriptor(b,U):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(k,b,U,z);else for(var J=k.length-1;0<=J;J--)(P=k[J])&&(Q=(H<3?P(Q):3<H?P(b,U,Q):P(b,U))||Q);return 3<H&&Q&&Object.defineProperty(b,U,Q),Q},function(k,b){var U=typeof Symbol=="function"&&k[Symbol.iterator];if(!U)return k;var z,P,H=U.call(k),Q=[];try{for(;(b===void 0||0<b--)&&!(z=H.next()).done;)Q.push(z.value)}catch(J){P={error:J}}finally{try{z&&!z.done&&(U=H.return)&&U.call(H)}finally{if(P)throw P.error}}return Q}),i=function(k,b,U){if(arguments.length===2)for(var z,P=0,H=b.length;P<H;P++)!z&&P in b||((z=z||Array.prototype.slice.call(b,0,P))[P]=b[P]);return k.concat(z||Array.prototype.slice.call(b))},a=s.v.Database,o=s.v.Manager,l=s.v.User,h=s.v.Conversation,R=s.v.Room,w=s.v.Group,d=s.v.Call,D=s.v.Friend,S=(y.prototype.handleBizPushEvent=function(k,b,U){switch(k){case s.d.p_c2c_msg.cmd:case s.d.p_rm_msg.cmd:case s.d.p_gp_msg.cmd:return this.addMsgPushEvent.apply(this,i([k,U],r(this.cvMgr.onPushMessage(b,k)),!1));case s.d.p_c2c_cmd.cmd:case s.d.p_rm_cmd.cmd:case s.d.p_gp_cmd.cmd:return this.addMsgPushEvent.apply(this,i([k,U],r(this.cvMgr.onPushCommand(b,k)),!1));case s.d.p_msg_all.cmd:return this.addMsgPushEvent(k,U,"broadcast",this.cvMgr.onPushBroadcastMessage(b));case s.d.p_read_receipt.cmd:return this.cvMgr.onPushReadReceipt(b);case s.d.p_reaction.cmd:return this.cvMgr.onPushReaction(b);case s.d.p_msg_revoke.cmd:return this.cvMgr.onPushMsgRevoke(b);case s.d.p_msg_edit.cmd:return this.cvMgr.onPushMsgEdit(b);case s.d.p_rm_enter.cmd:return this.gpMgr.onPushRoomUser(b,!0);case s.d.p_rm_quit.cmd:return this.gpMgr.onPushRoomUser(b,!1);case s.d.p_rm_kickout.cmd:return this.gpMgr.onPushRoomKickout(b);case s.d.p_rm_attrs.cmd:return this.gpMgr.onPushRoomAttrMdf(b);case s.d.p_rm_user_attrs.cmd:return this.gpMgr.onPushRoomUserAttrMdf(b);case s.d.p_gp_create.cmd:return this.gpMgr.onPushGroupCreate(b);case s.d.p_gp_invite.cmd:return this.gpMgr.onPushGroupJoin(b,!1);case s.d.p_gp_member_kickout.cmd:return this.gpMgr.onPushGroupDestroy(b,s.c.GroupEvent.KickedOut);case s.d.p_gp_destroy.cmd:return this.gpMgr.onPushGroupDestroy(b,s.c.GroupEvent.Dismissed);case s.d.p_gp_mdf_data.cmd:return this.gpMgr.onPushGroupDataModify(b);case s.d.p_gp_mdf_attr.cmd:return this.gpMgr.onPushGroupAttrMdf(b);case s.d.p_gp_owner_transfer.cmd:return this.gpMgr.onPushGroupOwnerTransfer(b);case s.d.p_gp_member_change.cmd:return this.gpMgr.onPushGroupMemberChange(b);case s.d.p_gp_apply.cmd:return this.gpMgr.onPushGroupApply(b);case s.d.p_gp_enter_apply.cmd:return this.gpMgr.onPushGroupEnterApply(b);case s.d.p_cl_invite.cmd:return this.clMgr.onPushCallInvited(b);case s.d.p_cl_cancel.cmd:return this.clMgr.onPushCallCancel(b);case s.d.p_cl_accept.cmd:return this.clMgr.onPushCallAccept(b);case s.d.p_cl_refuse.cmd:return this.clMgr.onPushCallReject(b);case s.d.p_cl_inviting.cmd:return this.clMgr.onPushCallingInvite(b);case s.d.p_cl_quit.cmd:return this.clMgr.onPushCallQuit(b);case s.d.p_cl_destroy.cmd:return this.clMgr.onPushCallEnd(b);case s.d.p_cl_ack.cmd:return this.clMgr.onPushCallAck(b);case s.d.p_cl_enter.cmd:return this.clMgr.onPushCallEnter(b);case s.d.p_cl_ack_timeout.cmd:return this.clMgr.onPushCallAckTimeout(b);case s.d.p_fd_add.cmd:return this.fdMgr.onPushFriendAdded(b);case s.d.p_fd_del.cmd:return this.fdMgr.onPushFriendDeleted(b);case s.d.p_fd_del_all.cmd:return this.fdMgr.onPushFriendAllDeleted(b);case s.d.p_fd_apply.cmd:return this.fdMgr.onPushFriendApply(b);case s.d.p_fd_accept.cmd:return this.fdMgr.onPushFriendAccept(b);case s.d.p_fd_refuse.cmd:return this.fdMgr.onPushFriendReject(b);case s.d.p_status.cmd:return this.urMgr.onPushUserStatus(b);case s.d.p_log.cmd:return this.lg.upload("push");case s.d.mp_user_mdf.cmd:return this.urMgr.onPushSelfInfo(b);case s.d.mp_user_status.cmd:return this.urMgr.onPushSelfStatus(s.n.P,b);case s.d.mp_msg_del.cmd:return this.cvMgr.onPushMsgDelete(b);case s.d.mp_conv_del.cmd:return this.cvMgr.onPushConvDelete(b);case s.d.mp_conv_read.cmd:return this.cvMgr.onPushConvRead(b);case s.d.mp_conv_pinned.cmd:return this.cvMgr.onPushConvPinned(b);case s.d.mp_conv_mark.cmd:return this.cvMgr.onPushConvMark(b);case s.d.mp_c2c_notify.cmd:return this.cvMgr.onPushC2CMute(b);case s.d.mp_gp_notify.cmd:return this.cvMgr.onPushConvNotify(b);case s.d.mp_gp_remark.cmd:return this.cvMgr.onPushGroupRemark(b);case s.d.mp_conv_del_all.cmd:return this.cvMgr.onPushConvAllDelete(b);case s.d.mp_conv_unread_clean.cmd:return this.cvMgr.onPushCleanAllUnread(b);case s.d.mp_msg_del_all.cmd:return this.cvMgr.onPushCleanAllMsgs(b);case s.d.mp_gp_enter.cmd:return this.gpMgr.onPushGroupJoin(b,!0);case s.d.mp_gp_quit.cmd:return this.gpMgr.onPushGroupDestroy(b,s.c.GroupEvent.Left);case s.d.mp_bl_add.cmd:return this.fdMgr.onPushBlacklistAdded(b);case s.d.mp_bl_del.cmd:return this.fdMgr.onPushBlacklistDeleted(b);case s.d.mp_fd_add.cmd:return this.fdMgr.onPushFriendAdded(b,!0);case s.d.mp_fd_del.cmd:return this.fdMgr.onPushFriendDeleted(b,!0);case s.d.mp_fd_app.cmd:return this.fdMgr.onPushFriendApply(b,!0);case s.d.mp_fd_apt.cmd:return this.fdMgr.onPushFriendAccept(b);case s.d.mp_fd_rfe.cmd:return this.fdMgr.onPushFriendReject(b);case s.d.mp_fd_attr_mdf.cmd:return this.fdMgr.onPushFriendAttrMdf(b);case s.d.mp_fd_remark_mdf.cmd:return this.fdMgr.onPushFriendRemarkUpdated(b)}},y.prototype.addMsgPushEvent=function(k,b,U,z){0<b&&this.msgPushMap[k].times.push(b),this.msgPushLog[U]?this.msgPushLog[U][z]=b:this.msgPushLog[U]=((k={})[z]=b,k)},y.prototype.addMsgPushDelay=function(k,b,U){var z,P,H,Q=b.length;Q<1||(P=b[z=0],H=0,b.forEach(function(J){z+=J,J<P&&(P=J),H<J&&(H=J)}),b.length=0,U.flag=!0,U[k+"_count"]=Q,U[k+"_ave_time_consumed"]=Math.floor(z/Q),U[k+"_max_time_consumed"]=H,U[k+"_min_time_consumed"]=P)},y.prototype.createNotLoggedError=function(k,b){if(!this.econf.user.userID||!this.econf.token)return this.lg.w(k,b,(k={code:6000121,message:b+": Not logged with call."}).code+""),k},y.prototype.setZPNsContext=function(k){var b=k.pushSDKVersion.length,U=k.pushID.length,z=new Uint8Array(9+b+U);z[0]=175,z[1]=0,z[2]=1,z[3]=1,z[4]=7,z[5]=0,z[6]=b,z[7]=U>>8,z[8]=U-(z[7]<<8),z.set(Object(u.j)(k.pushSDKVersion),9),z.set(Object(u.j)(k.pushID),9+b),U=O.a.fromUint8Array(z),this.econf.ZPNsPushID=U,this.urMgr&&this.urMgr.reportZPNs(),k.base64=U,this.lg.i(o,"ZPNs",k)},y.prototype.deleteFile=function(k){return this.cnMgr.send(s.d.file_del,{md5:k})},y.prototype.setContext=function(k){this.bus.setContext(k)},y.prototype.destroy=function(){this.logout(!1),this.bus&&this.bus.off(),this.bus=null,this.gpMgr.destroy(),this.gpMgr=null,this.cvMgr.destroy(),this.cvMgr=null,this.urMgr.destroy(),this.urMgr=null,this.clMgr.destroy(),this.clMgr=null,this.fdMgr.destroy(),this.fdMgr=null,this.cnMgr.destroy(),this.cnMgr=null,this.dbMgr.destroy(),this.dbMgr=null,this.lg=null,this.econf=null},y.prototype.uploadLog=function(){return this.lg.upload("apicall")},y.prototype.on=function(k,b){var U=this;typeof b=="function"&&(this.bus.on(k,b),this.evLog.on.length||setTimeout(function(){U.lg.i(o,"API.on",U.evLog.on.join()),U.evLog.on.length=0},10),this.evLog.on.push(k))},y.prototype.off=function(k){var b=this;this.bus.off(k),this.evLog.off.length||setTimeout(function(){b.lg.i(o,"API.off",b.evLog.off.join()),b.evLog.off.length=0},10),this.evLog.off.push(k)},y.prototype.login=function(k,b){var U=this.pv.validID("userID",k,l,s.u.Login);return U?Promise.reject(U):this.urMgr.login(k,b)},y.prototype.logout=function(k){var b=this;k?this.urMgr.logout().then(function(){return b.cnMgr.onLogout()}):this.cnMgr.onLogout(),this.urMgr.onLogout(),this.cvMgr.onLogout(),this.gpMgr.onLogout(),this.clMgr.onLogout(),this.fdMgr.onLogout(),this.pushTimer&&clearInterval(this.pushTimer),this.pushTimer=0,this.delayPushTasks.length=0},y.prototype.renewToken=function(k){return this.urMgr.renewToken(k)},y.prototype.queryUsers=function(k,b){var U=this.pv.validArray("userIDs",k,l,s.u.QueryUsers);return U?Promise.reject(U):this.cvMgr.queryUsers(k,b)},y.prototype.updateUser=function(k,b){var U=k==1?"userName":k==16?"userAvatarUrl":"extendedData",z=this.pv.validName(U,b,l,s.u.UpdateUser);return z?Promise.reject(z):this.urMgr.updateUser(k,U,b)},y.prototype.updateUserStatus=function(k){return this.urMgr.updateStatus(k||"")},y.prototype.updateUserRule=function(k){var b=this.pv.updateRule(k);return b?Promise.reject(b):this.urMgr.updateRule(k)},y.prototype.querySelf=function(){return this.urMgr.querySelf()},y.prototype.subscribeUsersStatus=function(k,b,U){var z=this.pv.validArray("userIDs",b,l,s.u.SubscribeStatus);return(z=z||!k||U&&U.subscriptionDuration&&!(U.subscriptionDuration<1)?z:{code:6000001,message:s.u.SubscribeStatus+": Duration is invalid."})?Promise.reject(z):this.urMgr.subscribeStatus(k,b,(U==null?void 0:U.subscriptionDuration)||0)},y.prototype.queryUsersStatus=function(k){var b=this.pv.validArray("userIDs",k,l,s.u.QueryStatus);return b?Promise.reject(b):this.urMgr.queryStatus(k)},y.prototype.querySubscribedUsersStatus=function(k){return this.urMgr.querySubscriber(k)},y.prototype.queryConv=function(k,b){var U=this.pv.validConvIDAndType(k,b,s.u.QueryConv);return U?Promise.reject(U):this.cvMgr.query(k,b)},y.prototype.queryConvs=function(k,b){var U=this.pv.validCount(k,h,s.u.QueryConvs);return U?Promise.reject(U):this.cvMgr.queryList(k,b)},y.prototype.queryPinneds=function(k){var b=this.pv.validCount(k,h,s.u.QueryPinneds);return b?Promise.reject(b):this.cvMgr.queryPinneds(k)},y.prototype.queryUnreadCount=function(k){return this.cvMgr.queryUnreadCount(k)},y.prototype.delConv=function(k,b,U){var z=this.pv.validConvIDAndType(k,b,s.u.DelConv);return z?Promise.reject(z):this.cvMgr.delete(k,b,U)},y.prototype.delAllConv=function(k){return this.cvMgr.deleteAll(k)},y.prototype.clearUnreadCount=function(k,b){var U=this.pv.validConvIDAndType(k,b,s.u.ClearUnreadCount);return U?Promise.reject(U):this.cvMgr.clearUnreadCount(k,b)},y.prototype.clearAllUnreadCount=function(){return this.cvMgr.clearAllUnreadCount()},y.prototype.delAllConvMsgs=function(k){return this.cvMgr.delAllConvMsgs(k)},y.prototype.setNotifyStatus=function(k,b,U){var z=this.pv.setNotifyStatus(k,b,U);return z?Promise.reject(z):this.cvMgr.setNotifyStatus(k,b,U)},y.prototype.updatePinnedState=function(k,b,U){var z=this.pv.validConvIDAndType(b,U,s.u.UpdatePinned);return z?Promise.reject(z):this.cvMgr.updatePinnedState(!!k,b,U)},y.prototype.setConvDraft=function(k,b,U){var z=this.pv.setConvDraft(b,U,k);return z?Promise.reject(z):this.cvMgr.setConvDraft(k,b,U)},y.prototype.setConvMark=function(k,b,U){var z=this.pv.setConvMark(k,U);return z?Promise.reject(z):this.cvMgr.setMark(k,!!b,U)},y.prototype.sendMsg=function(k,b,U,z,P){var H=this.pv.sendMsg(k,b,U,z,this.econf.cloudSetting.scale.cb_msg_title_len,this.econf.cloudSetting.scale.cb_msg_summary_len);return H?Promise.reject(H):this.cvMgr.sendMsg(k,b,U,z,P)},y.prototype.editMsg=function(k,b,U){var z=this.pv.editMsg(k);return z?Promise.reject(z):this.cvMgr.editMsg(k,U)},y.prototype.delMsgs=function(k,b,U,z){z=Object.assign({isAlsoDeleteServerMessage:!0},z);var P=this.pv.delMsgs(k,b,U,z);return P?Promise.reject(P):k.length||z.isAlsoDeleteServerMessage?this.cvMgr.delMsgs(k,b,U,z):Promise.resolve({conversationID:b,conversationType:U})},y.prototype.delAllMsg=function(k,b,U){var z=this.pv.validConvIDAndType(k,b,s.u.DelAllMsg);return z?Promise.reject(z):this.cvMgr.delAllMsg(k,b,U)},y.prototype.queryHistoryMsg=function(k,b,U){var z=this.pv.queryHistoryMsg(k,b,U);return z?Promise.reject(z):U.count<1?Promise.resolve({conversationID:k,conversationType:b,messageList:[]}):this.cvMgr.queryHistoryMsg(k,b,U)},y.prototype.insertMsg=function(k,b,U,z){var P=this.pv.insertMsg(k,b,U,z);return P?Promise.reject(P):this.cvMgr.insertMsg(k,b,U,z)},y.prototype.updateMsgLocalExt=function(k,b){var U=this.pv.updateMsgLocalExt(k,b);return U?Promise.reject(U):this.cvMgr.updateMsgLocalExt(k,b)},y.prototype.revokeMsg=function(k,b){var U=this.pv.validSDKMsg(k,s.u.RevokeMsg);return U?Promise.reject(U):this.cvMgr.revokeMsg(k,b)},y.prototype.queryCombineMsg=function(k){var b=this.pv.queryCombineMsg(k);return b?Promise.reject(b):this.cvMgr.queryCombineMsg(k)},y.prototype.sendConvReceipt=function(k,b){var U=this.pv.sendConvReceipt(k,b);return U?Promise.reject(U):this.cvMgr.sendConvReceipt(k,b)},y.prototype.sendMsgReceipt=function(k,b,U){var z=this.pv.sendMsgReceipt(k,b,U);return z?Promise.reject(z):this.cvMgr.sendMsgReceipt(k,b,U)},y.prototype.queryMsgReceipt=function(k,b,U){var z=this.pv.queryMsgReceipt(k,b,U);return z?Promise.reject(z):this.cvMgr.queryMsgReceipt(k,b,U)},y.prototype.queryReceiptMembers=function(k,b,U,z){var P=this.econf.user.userID;return(P=this.pv.queryReceiptMembers(k,b,U,z,P))?Promise.reject(P):U.count<1||k.direction==s.c.MessageDirection.Receive?Promise.resolve({groupID:b,nextFlag:0,userList:[]}):this.gpMgr.queryReceiptMembers(k,b,U,z,!0)},y.prototype.addMsgReaction=function(k,b){var U=this.pv.msgReaction(k,b,!0);return U?Promise.reject(U):this.cvMgr.addMsgReaction(k,b)},y.prototype.delMsgReaction=function(k,b){var U=this.pv.msgReaction(k,b);return U?Promise.reject(U):this.cvMgr.delMsgReaction(k,b)},y.prototype.queryMsgReactions=function(k,b){var U=this.pv.queryMsgBase(k,b,s.u.QueryReaction,!1);return U?Promise.reject(U):this.cvMgr.queryMsgReactions(k,b)},y.prototype.replyMessage=function(k,b,U,z){var P=this.econf.cloudSetting.scale.cb_msg_title_len,H=this.econf.cloudSetting.scale.cb_msg_summary_len;return(P=this.pv.replyMsg(k,b,U,P,H))?Promise.reject(P):this.cvMgr.replyMessage(k,b,U,z)},y.prototype.queryReplyMsg=function(k,b){var U=this.pv.queryMsgBase(k,b,s.u.QueryReplyMsg,!0);return U?Promise.reject(U):this.cvMgr.queryReplyMsg(k,b)},y.prototype.queryMessages=function(k,b,U){return this.cvMgr.queryMessages(k,b,U)},y.prototype.createRoom=function(k,b,U,z,P){var H=this.pv.createRoom(b,P);return H?Promise.reject(H):this.gpMgr.createRoom(k,b,U,z,P)},y.prototype.leaveRoom=function(k){var b=this.pv.validID("roomID",k,R,s.u.LeaveRoom);return b?Promise.reject(b):this.gpMgr.leaveRoom(k)},y.prototype.leaveAllRoom=function(){return this.gpMgr.leaveAllRoom()},y.prototype.queryRoomMemberList=function(k,b){var U=this.pv.validCount(b,R,s.u.QueryRoomMemberList,"roomID",k);return U?Promise.reject(U):b.count<1?Promise.resolve({roomID:k,memberList:[],nextFlag:b.nextFlag||""}):this.gpMgr.queryRoomMemberList(k,b)},y.prototype.queryRoomMembers=function(k,b){var U=this.pv.validIDAndArray("roomID",b,"userIDs",k,R,s.u.QueryRoomMemberList);return U?Promise.reject(U):this.gpMgr.queryRoomMembers(k,b)},y.prototype.queryRoomOnlineMemberCount=function(k){var b=this.pv.validID("roomID",k,R,s.u.QueryRoomMemberCount);return b?Promise.reject(b):this.gpMgr.queryRoomOnlineMemberCount(k)},y.prototype.queryRoomAllAttr=function(k){var b=this.pv.validID("roomID",k,R,s.u.QueryRoomAllAttr);return b?Promise.reject(b):this.gpMgr.queryRoomAllAttr(k)},y.prototype.setRoomAttr=function(k,b,U){var z=this.pv.setRoomAttr(k,b);return z?Promise.reject(z):this.gpMgr.setRoomAttr(k,b,U)},y.prototype.delRoomAttr=function(k,b,U){var z=this.pv.validIDAndArray("roomID",b,"keys",k,R,s.u.DelRoomAttr);return z?Promise.reject(z):this.gpMgr.delRoomAttr(k,b,U)},y.prototype.beginRoomAttr=function(k,b){this.gpMgr.beginRoomAttr(k,b)},y.prototype.endRoomAttr=function(k){var b=this.pv.validID("roomID",k,R,s.u.EndRoomAttr);return b?Promise.reject(b):this.gpMgr.endRoomAttr(k)},y.prototype.setRoomMembersAttr=function(k,b,U,z){var P=this.pv.setRoomMembersAttr(k,b,U);return P?Promise.reject(P):this.gpMgr.setRoomMembersAttr(k,b,U,z)},y.prototype.queryRoomMembersAttr=function(k,b){var U=this.pv.validIDAndArray("roomID",b,"userIDs",k,R,s.u.QueryRoomMembersAttr);return U?Promise.reject(U):this.gpMgr.queryRoomMembersAttr(k,b)},y.prototype.queryRoomMemberAttrs=function(k,b){var U=this.pv.validID("roomID",k,R,s.u.QueryRoomMemberAttrs);return U?Promise.reject(U):this.gpMgr.queryRoomMemberAttrs(k,b)},y.prototype.createGroup=function(k,b,U){k=Object.assign({},k),U=Object.assign({groupAttributes:{},groupNotice:""},U);var z=this.pv.createGroup(k,b,U);return z?Promise.reject(z):this.gpMgr.createGroup(k,b,U)},y.prototype.joinGroup=function(k,b,U){var z=k?s.u.JoinGroup:s.u.SendGroupJoinApp;return(z=this.pv.validID("groupID",b,w,z))?Promise.reject(z):this.gpMgr.joinGroup(k,b,U)},y.prototype.leaveGroup=function(k){var b=this.pv.validID("groupID",k,w,s.u.LeaveGroup);return b?Promise.reject(b):this.gpMgr.leaveGroup(k)},y.prototype.dismissGroup=function(k){var b=this.pv.validID("groupID",k,w,s.u.DismissGroup);return b?Promise.reject(b):this.gpMgr.dismissGroup(k)},y.prototype.queryGroupList=function(){return this.gpMgr.queryGroupList()},y.prototype.updateGroupInfo=function(k,b,U){var z=this.pv.validIDAndName("groupID",b,["groupNotice","groupName","groupAvatarUrl"][U],k,w,s.u.UpdateGroup);return z?Promise.reject(z):this.gpMgr.updateGroupInfo(k,b,U)},y.prototype.muteGroup=function(k,b,U){return U=Object.assign({mode:s.c.GroupMuteMode.All,duration:-1,roles:[]},U),k||(U.mode=s.c.GroupMuteMode.None,U.duration=0,U.roles=[]),(k=this.pv.muteGroup(b,U,k))?Promise.reject(k):this.gpMgr.muteGroup(b,U)},y.prototype.queryGroupInfo=function(k){var b=this.pv.validID("groupID",k,w,s.u.QueryGroup);return b?Promise.reject(b):this.gpMgr.queryGroupInfo(k)},y.prototype.setGroupAttr=function(k,b){var U=this.pv.setGroupAttr(k,b);return U?Promise.reject(U):this.gpMgr.setGroupAttr(k,b)},y.prototype.delGroupAttr=function(k,b){var U=this.pv.validIDAndArray("groupID",b,"keys",k,w,s.u.DelGroupAttrs);return U?Promise.reject(U):this.gpMgr.delGroupAttr(k,b)},y.prototype.queryGroupAttr=function(k,b){var U=this.pv.queryGroupAttr(k,b);return U?Promise.reject(U):this.gpMgr.queryGroupAttr(k,b)},y.prototype.transferGroupOwner=function(k,b){var U=this.pv.validTwoID("toUserID",k,"groupID",b,w,s.u.TransferGroupOwner);return U?Promise.reject(U):this.gpMgr.transferGroupOwner(k,b)},y.prototype.inviteToGroup=function(k,b,U,z){var P=this.pv.validIDAndArray("groupID",U,"userIDs",b,w,k?s.u.SendGroupInviteApps:s.u.InviteIntoGroup);return P?Promise.reject(P):this.gpMgr.inviteToGroup(k,b,U,z)},y.prototype.kickGroupMembers=function(k,b){var U=this.pv.validIDAndArray("groupID",b,"userIDs",k,w,s.u.KickGroupMembers);return U?Promise.reject(U):this.gpMgr.kickGroupMembers(k,b)},y.prototype.queryGroupMembers=function(k,b){b=Object.assign({count:100,nextFlag:0},b);var U=this.pv.validCount(b,w,s.u.QueryGroupMembers,"groupID",k);return U?Promise.reject(U):b.count<1?Promise.resolve({groupID:k,userList:[],nextFlag:b.nextFlag}):this.gpMgr.queryGroupMembers(k,b)},y.prototype.queryGroupMemberCount=function(k){var b=this.pv.validID("groupID",k,w,s.u.QueryGroupMemberCount);return b?Promise.reject(b):this.gpMgr.queryGroupMemberCount(k)},y.prototype.muteGroupMembers=function(k,b,U,z){var P=this.pv.validIDAndArray("groupID",U,"userIDs",b,w,s.u.MuteGroupMembers);return P?Promise.reject(P):this.gpMgr.muteGroupMembers(k,b,U,z)},y.prototype.queryGroupMemberMutedList=function(k,b){b=Object.assign({count:100,nextFlag:0},b);var U=this.pv.validCount(b,w,s.u.QueryGroupMemberMuteds,"groupID",k);return U?Promise.reject(U):b.count<1?Promise.resolve({groupID:k,userList:[],nextFlag:b.nextFlag}):this.gpMgr.queryGroupMemberMutedList(k,b)},y.prototype.updateGroupAlias=function(k,b){var U=this.pv.validIDAndName("groupID",b,"groupAlias",k,w,s.u.UpdateGroupAlias);return U?Promise.reject(U):this.gpMgr.updateGroupAlias(k,b)},y.prototype.setGroupMemberNickname=function(k,b,U){var z=this.pv.setMemberNickname(k,b,U);return z?Promise.reject(z):this.gpMgr.setGroupMemberNickname(k,b,U)},y.prototype.setGroupMemberRole=function(k,b,U){var z=this.pv.setMemberRole(k,b,U);return z?Promise.reject(z):this.gpMgr.setGroupMemberRole(k,b,U)},y.prototype.queryGroupMemberInfo=function(k,b){var U=this.pv.validTwoID("userID",k,"groupID",b,w,s.u.QueryGroupMember);return U?Promise.reject(U):this.gpMgr.queryGroupMemberInfo(k,b)},y.prototype.updateGroupVerifyMode=function(k,b,U){var z=this.pv.updateGroupVerifyMode(k,b,U);return z?Promise.reject(z):this.gpMgr.updateGroupVerifyMode(k,b,U)},y.prototype.acceptGroupApply=function(k,b,U,z){var P=this.pv.validTwoID("userID",b,"groupID",U,w,"API.acceptGroupApplication");return P?Promise.reject(P):this.gpMgr.acceptGroupApply(k,b,U,z)},y.prototype.rejectGroupApply=function(k,b,U,z){var P=this.pv.validTwoID("userID",b,"groupID",U,w,"API.rejectGroupApplication");return P?Promise.reject(P):this.gpMgr.rejectGroupApply(k,b,U,z)},y.prototype.queryGroupApplyList=function(k){k=Object.assign({count:100,nextFlag:0},k);var b=this.pv.validCount(k,w,s.u.QueryGroupApps);return b?Promise.reject(b):k.count<1?Promise.resolve({applicationList:[],nextFlag:k.nextFlag}):this.gpMgr.queryGroupApplyList(k)},y.prototype.callInvite=function(k,b){var U=this.pv.callInvite(k,b);return U?Promise.reject(U):this.clMgr.callInvite(k,b)},y.prototype.callCancel=function(k,b,U){var z=this.pv.validCallID(b,s.u.CallCancel);return z?Promise.reject(z):this.clMgr.callCancel(k,b,U)},y.prototype.callAccept=function(k,b){var U=this.pv.validCallID(k,s.u.CallAccept);return U?Promise.reject(U):this.clMgr.callAccept(k,b)},y.prototype.callReject=function(k,b){var U=this.pv.validCallID(k,s.u.CallReject);return U?Promise.reject(U):this.clMgr.callReject(k,b)},y.prototype.callQuit=function(k,b){var U=this.pv.validCallID(k,s.u.CallQuit);return U?Promise.reject(U):this.clMgr.callQuit(k,b)},y.prototype.callJoin=function(k,b){var U=this.pv.validCallID(k,s.u.CallJoin);return U?Promise.reject(U):this.clMgr.callJoin(k,b)},y.prototype.callEnd=function(k,b){var U=this.pv.validCallID(k,s.u.CallEnd);return U?Promise.reject(U):this.clMgr.callEnd(k,b)},y.prototype.callingInvite=function(k,b,U){var z=this.pv.validIDAndArray("callID",b,"invitees",k,d,s.u.CallingInvite);return z?Promise.reject(z):this.clMgr.callingInvite(k,b,U)},y.prototype.queryCalls=function(k){return this.clMgr.queryList(k)},y.prototype.searchConv=function(k){var b,U=this;return u.p?Promise.resolve({conversationSearchInfoList:[]}):(b=this.pv.searchConv(k))?Promise.reject(b):this.dbMgr.searchConversations(k).then(function(z){return z.conversationSearchInfoList.forEach(function(P){P.messageList=P.messageList.map(function(H){return U.pb.handleDBMessage(U.econf,H)})}),z})},y.prototype.searchGlobalMsg=function(k){var b,U=this;return u.p?Promise.resolve({messageList:[]}):(b=this.pv.searchMsg(k,s.u.SearchGlobalMsg))?Promise.reject(b):this.dbMgr.searchGlobalMessages(k).then(function(z){return z.messageList=z.messageList.map(function(P){return U.pb.handleDBMessage(U.econf,P)}),z})},y.prototype.searchMsg=function(k,b,U){var z,P=this;return u.p?Promise.resolve({conversationID:k,conversationType:b,messageList:[]}):(z=this.pv.validConvIDAndType(k,b,s.u.SearchMsg)||this.pv.searchMsg(U,s.u.SearchMsg))?Promise.reject(z):this.dbMgr.searchMessages(k,b,U).then(function(H){return H.messageList=H.messageList.map(function(Q){return P.pb.handleDBMessage(P.econf,Q)}),H})},y.prototype.searchGroup=function(k){var b;return u.p?Promise.resolve({nextFlag:0,groupSearchInfoList:[]}):(b=this.pv.searchBase(k,s.u.SearchGroup))?Promise.reject(b):this.gpMgr.searchGroups(k)},y.prototype.searchGroupMember=function(k,b){var U;return u.p?Promise.resolve({nextFlag:0,groupID:k,userList:[]}):(U=this.pv.validID("groupID",k,a,s.u.SearchGroupMember)||this.pv.searchBase(b,s.u.SearchGroupMember))?Promise.reject(U):this.dbMgr.searchGroupMembers(k,b)},y.prototype.searchFriend=function(k){var b;return u.p?Promise.resolve({nextFlag:0,friendInfoList:[]}):(b=this.pv.searchBase(k,s.u.SearchFriend))?Promise.reject(b):this.fdMgr.searchFriends(k)},y.prototype.addFriend=function(k,b){var U=this.pv.addFriend(k,b);return U?Promise.reject(U):this.fdMgr.addFriend(k,b)},y.prototype.sendFriendApply=function(k,b){var U=this.pv.addFriend(k,b);return U?Promise.reject(U):this.fdMgr.sendFriendApply(k,b)},y.prototype.delFriends=function(k,b){var U=this.pv.validArray("userIDs",k,D,s.u.DelFriends);return U?Promise.reject(U):this.fdMgr.deleteFriends(k,b)},y.prototype.checkFriendsRelation=function(k,b){var U=this.pv.validArray("userIDs",k,D,s.u.CheckFriends);return U?Promise.reject(U):this.fdMgr.checkFriendsRelation(k,b)},y.prototype.updateFriendAlias=function(k,b){var U=this.pv.updateFriendAlias(k,b);return U?Promise.reject(U):this.fdMgr.updateFriendAlias(k,b)},y.prototype.updateFriendAttr=function(k,b){var U=this.pv.updateFriendAttr(k,b);return U?Promise.reject(U):this.fdMgr.updateFriendAttr(k,b)},y.prototype.acceptFriendApply=function(k,b){var U=this.pv.acceptFriendApply(k,b);return U?Promise.reject(U):this.fdMgr.acceptFriendApply(k,b)},y.prototype.rejectFriendApply=function(k,b){return this.fdMgr.rejectFriendApply(k,b)},y.prototype.queryFriendsInfo=function(k){var b=this.pv.validArray("userIDs",k,D,s.u.QueryFriends,20);return b?Promise.reject(b):this.fdMgr.queryFriendsInfo(k)},y.prototype.queryFriendList=function(k){var b=this.pv.validCount(k,D,s.u.QueryFriendList);return b?Promise.reject(b):this.fdMgr.queryFriendList(k)},y.prototype.queryFriendApplyList=function(k){var b=this.pv.validCount(k,D,s.u.QueryFriendApps);return b?Promise.reject(b):this.fdMgr.queryFriendApplyList(k)},y.prototype.addBlacklist=function(k){var b=this.pv.validArray("userIDs",k,D,s.u.AddBlacklist);return b?Promise.reject(b):this.fdMgr.addBlacklist(k)},y.prototype.removeBlacklist=function(k){var b=this.pv.validArray("userIDs",k,D,s.u.RemoveBlacklist);return b?Promise.reject(b):this.fdMgr.removeBlacklist(k)},y.prototype.checkBlacklist=function(k){var b=this.pv.validID("userID",k,D,s.u.CheckBlacklist);return b?Promise.reject(b):this.fdMgr.checkBlacklist(k)},y.prototype.queryBlacklist=function(k){var b=this.pv.validCount(k,D,s.u.QueryBlacklist);return b?Promise.reject(b):this.fdMgr.queryBlacklist(k)},j([Object(u.r)(l,s.u.RenewToken)],y.prototype,"renewToken",null),j([Object(u.r)(l,s.u.QueryUsers)],y.prototype,"queryUsers",null),j([Object(u.r)(l,s.u.UpdateUser)],y.prototype,"updateUser",null),j([Object(u.r)(l,s.u.UpdateUserStatus)],y.prototype,"updateUserStatus",null),j([Object(u.r)(l,s.u.UpdateUserRule)],y.prototype,"updateUserRule",null),j([Object(u.r)(l,s.u.QuerySelf)],y.prototype,"querySelf",null),j([Object(u.r)(l,s.u.SubscribeStatus)],y.prototype,"subscribeUsersStatus",null),j([Object(u.r)(l,s.u.QueryStatus)],y.prototype,"queryUsersStatus",null),j([Object(u.r)(l,s.u.QuerySubscriber)],y.prototype,"querySubscribedUsersStatus",null),j([Object(u.r)(h,s.u.QueryConv)],y.prototype,"queryConv",null),j([Object(u.r)(h,s.u.QueryConvs)],y.prototype,"queryConvs",null),j([Object(u.r)(h,s.u.QueryPinneds)],y.prototype,"queryPinneds",null),j([Object(u.r)(h,s.u.QueryUnreadCount)],y.prototype,"queryUnreadCount",null),j([Object(u.r)(h,s.u.DelConv)],y.prototype,"delConv",null),j([Object(u.r)(h,s.u.DelAllConv)],y.prototype,"delAllConv",null),j([Object(u.r)(h,s.u.ClearUnreadCount)],y.prototype,"clearUnreadCount",null),j([Object(u.r)(h,s.u.ClearAllUnreadCount)],y.prototype,"clearAllUnreadCount",null),j([Object(u.r)(h,s.u.DelAllConvMsg)],y.prototype,"delAllConvMsgs",null),j([Object(u.r)(h,s.u.SetNotifyStatus)],y.prototype,"setNotifyStatus",null),j([Object(u.r)(h,s.u.UpdatePinned)],y.prototype,"updatePinnedState",null),j([Object(u.r)(h,s.u.SetConvDraft)],y.prototype,"setConvDraft",null),j([Object(u.r)(h,s.u.SetConvMark)],y.prototype,"setConvMark",null),j([Object(u.r)(h,s.u.SendMsg)],y.prototype,"sendMsg",null),j([Object(u.r)(h,s.u.EditMsg)],y.prototype,"editMsg",null),j([Object(u.r)(h,s.u.DelMsg)],y.prototype,"delMsgs",null),j([Object(u.r)(h,s.u.DelAllMsg)],y.prototype,"delAllMsg",null),j([Object(u.r)(h,s.u.QueryHistoryMsg)],y.prototype,"queryHistoryMsg",null),j([Object(u.r)(h,s.u.InsertMsg)],y.prototype,"insertMsg",null),j([Object(u.r)(h,s.u.InsertMsg)],y.prototype,"updateMsgLocalExt",null),j([Object(u.r)(h,s.u.RevokeMsg)],y.prototype,"revokeMsg",null),j([Object(u.r)(h,s.u.QueryCombineMsg)],y.prototype,"queryCombineMsg",null),j([Object(u.r)(h,s.u.SendConvReceipt)],y.prototype,"sendConvReceipt",null),j([Object(u.r)(h,s.u.SendReceipts)],y.prototype,"sendMsgReceipt",null),j([Object(u.r)(h,s.u.QueryReceipts)],y.prototype,"queryMsgReceipt",null),j([Object(u.r)(h,"API.queryReceiptMembers")],y.prototype,"queryReceiptMembers",null),j([Object(u.r)(h,s.u.AddReaction)],y.prototype,"addMsgReaction",null),j([Object(u.r)(h,s.u.DelReaction)],y.prototype,"delMsgReaction",null),j([Object(u.r)(h,s.u.QueryReaction)],y.prototype,"queryMsgReactions",null),j([Object(u.r)(h,s.u.ReplyMsg)],y.prototype,"replyMessage",null),j([Object(u.r)(h,s.u.QueryReplyMsg)],y.prototype,"queryReplyMsg",null),j([Object(u.r)(h,s.u.QueryMsgs)],y.prototype,"queryMessages",null),j([Object(u.r)(R,s.u.EnterRoom)],y.prototype,"createRoom",null),j([Object(u.r)(R,s.u.LeaveRoom)],y.prototype,"leaveRoom",null),j([Object(u.r)(R,s.u.LeaveAllRoom)],y.prototype,"leaveAllRoom",null),j([Object(u.r)(R,s.u.QueryRoomMemberList)],y.prototype,"queryRoomMemberList",null),j([Object(u.r)(R,s.u.QueryRoomMemberList)],y.prototype,"queryRoomMembers",null),j([Object(u.r)(R,s.u.QueryRoomMemberCount)],y.prototype,"queryRoomOnlineMemberCount",null),j([Object(u.r)(R,s.u.QueryRoomAllAttr)],y.prototype,"queryRoomAllAttr",null),j([Object(u.r)(R,s.u.SetRoomAttr)],y.prototype,"setRoomAttr",null),j([Object(u.r)(R,s.u.DelRoomAttr)],y.prototype,"delRoomAttr",null),j([Object(u.r)(R,s.u.EndRoomAttr)],y.prototype,"endRoomAttr",null),j([Object(u.r)(R,s.u.SetRoomMembersAttr)],y.prototype,"setRoomMembersAttr",null),j([Object(u.r)(R,s.u.QueryRoomMembersAttr)],y.prototype,"queryRoomMembersAttr",null),j([Object(u.r)(R,s.u.QueryRoomMemberAttrs)],y.prototype,"queryRoomMemberAttrs",null),j([Object(u.r)(w,s.u.CreateGroup)],y.prototype,"createGroup",null),j([Object(u.r)(w,s.u.JoinGroup)],y.prototype,"joinGroup",null),j([Object(u.r)(w,s.u.LeaveGroup)],y.prototype,"leaveGroup",null),j([Object(u.r)(w,s.u.DismissGroup)],y.prototype,"dismissGroup",null),j([Object(u.r)(w,s.u.QueryGroups)],y.prototype,"queryGroupList",null),j([Object(u.r)(w,s.u.UpdateGroup)],y.prototype,"updateGroupInfo",null),j([Object(u.r)(w,s.u.MuteGroup)],y.prototype,"muteGroup",null),j([Object(u.r)(w,s.u.QueryGroup)],y.prototype,"queryGroupInfo",null),j([Object(u.r)(w,s.u.SetGroupAttr)],y.prototype,"setGroupAttr",null),j([Object(u.r)(w,s.u.DelGroupAttrs)],y.prototype,"delGroupAttr",null),j([Object(u.r)(w,s.u.QueryGroupAttrs)],y.prototype,"queryGroupAttr",null),j([Object(u.r)(w,s.u.TransferGroupOwner)],y.prototype,"transferGroupOwner",null),j([Object(u.r)(w,s.u.InviteIntoGroup)],y.prototype,"inviteToGroup",null),j([Object(u.r)(w,s.u.KickGroupMembers)],y.prototype,"kickGroupMembers",null),j([Object(u.r)(w,s.u.QueryGroupMembers)],y.prototype,"queryGroupMembers",null),j([Object(u.r)(w,s.u.QueryGroupMemberCount)],y.prototype,"queryGroupMemberCount",null),j([Object(u.r)(w,s.u.MuteGroupMembers)],y.prototype,"muteGroupMembers",null),j([Object(u.r)(w,s.u.QueryGroupMemberMuteds)],y.prototype,"queryGroupMemberMutedList",null),j([Object(u.r)(w,s.u.UpdateGroupAlias)],y.prototype,"updateGroupAlias",null),j([Object(u.r)(w,s.u.SetGroupMemberNickname)],y.prototype,"setGroupMemberNickname",null),j([Object(u.r)(w,s.u.SetGroupMemberRole)],y.prototype,"setGroupMemberRole",null),j([Object(u.r)(w,s.u.QueryGroupMember)],y.prototype,"queryGroupMemberInfo",null),j([Object(u.r)(w,s.u.UpdateGroupVerifyMode)],y.prototype,"updateGroupVerifyMode",null),j([Object(u.r)(w,"API.acceptGroupApplication")],y.prototype,"acceptGroupApply",null),j([Object(u.r)(w,"API.rejectGroupApplication")],y.prototype,"rejectGroupApply",null),j([Object(u.r)(w,s.u.QueryGroupApps)],y.prototype,"queryGroupApplyList",null),j([Object(u.r)(d,s.u.CallInvite)],y.prototype,"callInvite",null),j([Object(u.r)(d,s.u.CallCancel)],y.prototype,"callCancel",null),j([Object(u.r)(d,s.u.CallAccept)],y.prototype,"callAccept",null),j([Object(u.r)(d,s.u.CallReject)],y.prototype,"callReject",null),j([Object(u.r)(d,s.u.CallQuit)],y.prototype,"callQuit",null),j([Object(u.r)(d,s.u.CallJoin)],y.prototype,"callJoin",null),j([Object(u.r)(d,s.u.CallEnd)],y.prototype,"callEnd",null),j([Object(u.r)(d,s.u.CallingInvite)],y.prototype,"callingInvite",null),j([Object(u.r)(d,s.u.QueryCalls)],y.prototype,"queryCalls",null),j([Object(u.r)(a,s.u.SearchConv)],y.prototype,"searchConv",null),j([Object(u.r)(a,s.u.SearchGlobalMsg)],y.prototype,"searchGlobalMsg",null),j([Object(u.r)(a,s.u.SearchMsg)],y.prototype,"searchMsg",null),j([Object(u.r)(a,s.u.SearchGroup)],y.prototype,"searchGroup",null),j([Object(u.r)(a,s.u.SearchGroupMember)],y.prototype,"searchGroupMember",null),j([Object(u.r)(a,s.u.SearchFriend)],y.prototype,"searchFriend",null),j([Object(u.r)(D,s.u.AddFriend)],y.prototype,"addFriend",null),j([Object(u.r)(D,s.u.SendFriendApp)],y.prototype,"sendFriendApply",null),j([Object(u.r)(D,s.u.DelFriends)],y.prototype,"delFriends",null),j([Object(u.r)(D,s.u.DelFriends)],y.prototype,"checkFriendsRelation",null),j([Object(u.r)(D,s.u.UpdateFriendAlias)],y.prototype,"updateFriendAlias",null),j([Object(u.r)(D,s.u.UpdateFriendAttr)],y.prototype,"updateFriendAttr",null),j([Object(u.r)(D,s.u.AcceptFriendApp)],y.prototype,"acceptFriendApply",null),j([Object(u.r)(D,s.u.RejectFriendApp)],y.prototype,"rejectFriendApply",null),j([Object(u.r)(D,s.u.QueryFriends)],y.prototype,"queryFriendsInfo",null),j([Object(u.r)(D,s.u.QueryFriendList)],y.prototype,"queryFriendList",null),j([Object(u.r)(D,s.u.QueryFriendApps)],y.prototype,"queryFriendApplyList",null),j([Object(u.r)(D,s.u.AddBlacklist)],y.prototype,"addBlacklist",null),j([Object(u.r)(D,s.u.RemoveBlacklist)],y.prototype,"removeBlacklist",null),j([Object(u.r)(D,s.u.CheckBlacklist)],y.prototype,"checkBlacklist",null),j([Object(u.r)(D,s.u.QueryBlacklist)],y.prototype,"queryBlacklist",null),y);function y(k,b){var U=this,z=(this.delayPushTasks=[],this.repeatedPushMap={},this.pushTimer=0,this.msgPushMap=((z={})[s.d.p_c2c_msg.cmd]={name:"peer_msg",times:[]},z[s.d.p_rm_msg.cmd]={name:"room_msg",times:[]},z[s.d.p_gp_msg.cmd]={name:"group_msg",times:[]},z[s.d.p_c2c_cmd.cmd]={name:"peer_cmd",times:[]},z[s.d.p_rm_cmd.cmd]={name:"room_cmd",times:[]},z[s.d.p_gp_cmd.cmd]={name:"group_cmd",times:[]},z[s.d.p_msg_all.cmd]={name:"broadcast",times:[]},z),this.msgPushLog={},this.evLog={on:[],off:[]},this.onConnectedEvent=function(P){U.urMgr.onConnected(P)},this.onDisConnectedEvent=function(P){U.urMgr.onDisConnected(P)},this.onPushEvent=function(P,H,Q){var J,L,q,B,Y,K;P===s.d.swp_list.cmd?(J=H.qos_flag==1?[]:void 0,L=1<H.push_requests.length,Y=H.push_requests.filter(function(ee){var oe=ee.sub_cmd,ae=ee.msg_id,X=!1;return J&&J.push({key:oe,value:ae}),!L||oe!=s.d.p_c2c_msg.cmd&&oe!=s.d.p_rm_msg.cmd&&oe!=s.d.p_gp_msg.cmd||(X=!0,q?q.push(ee):q=[ee]),!L||oe!=s.d.p_c2c_cmd.cmd&&oe!=s.d.p_rm_cmd.cmd&&oe!=s.d.p_gp_cmd.cmd||(X=!0,B?B.push(ee):B=[ee]),!X&&ae&&1<ae.length&&(ee=U.repeatedPushMap[oe+ae]||0,U.repeatedPushMap[oe+ae]=ee+1),!X}),U.econf.isDBLoaded?(Y.forEach(function(ee){return U.handleBizPushEvent(ee.sub_cmd,ee.msg_body,Q)}),q&&(K=U.cvMgr.onPushMessageList(q),U.dr.reportPushEvent("msg_push",Q,"msglist",K)),B&&(K=U.cvMgr.onPushCommandList(B),U.dr.reportPushEvent("msg_push",Q,"msglist",K))):(U.delayPushTasks.push({time:Q,list:Y}),q&&U.delayPushTasks.push({time:Q,list:q,isMergeMsg:!0}),B&&U.delayPushTasks.push({time:Q,list:B,isMergeCmd:!0})),q&&U.msgPushMap[q[0].sub_cmd].times.push(Q),B&&U.msgPushMap[B[0].sub_cmd].times.push(Q),J&&(K={server_send_time:H.send_time,push_responses:J},U.cnMgr.sendNoRsp(s.d.swp_list_rsp.cmd,K))):P==="Accesshub"?U.urMgr.onPushAccesshub(H):(U.dr.reportNetworkReq(P,H),P===s.d.swp_kickout.cmd?U.urMgr.onPushKickout(H):P===s.d.swp_redirect.cmd&&U.urMgr.onPushRedirect(H.user_ids))},this.onLogined=function(P){P||(U.pushTimer||(U.pushTimer=setInterval(U.reportPushEvent,6e4)),U.delayPushTasks.forEach(function(H){var Q,J=H.time,L=H.list,q=H.isMergeMsg;H=H.isMergeCmd,q||H||L.forEach(function(B){return U.handleBizPushEvent(B.sub_cmd,B.msg_body,J)}),q&&(Q=U.cvMgr.onPushMessageList(L),U.dr.reportPushEvent("msg_push",J,"msglist",Q)),H&&(Q=U.cvMgr.onPushCommandList(L),U.dr.reportPushEvent("msg_push",J,"msglist",Q))}),U.delayPushTasks.length=0)},this.reportPushEvent=function(){var P,H;U.dr&&U.lg&&(P={flag:!1},Object.values(U.msgPushMap).forEach(function(Q){var J=Q.name;return U.addMsgPushDelay(J,Q.times,P)}),P.flag&&(delete P.flag,U.dr.reportSDKEvent("/sdk/msg/push_delay",P)),Object.keys(U.msgPushLog).length&&(U.dr.reportPushEvent("msg_push",0,"timer",U.msgPushLog),U.msgPushLog={}),P={flag:!1},Object.keys(U.repeatedPushMap).forEach(function(Q){1<U.repeatedPushMap[Q]&&(P.flag=!0,P[Q]=U.repeatedPushMap[Q])}),(U.repeatedPushMap=P).flag&&U.dr.reportPushEvent("repeated",0,"",P),U.lg.hbLog.length)&&(H=U.lg.hbLog.reduce(function(Q,J){var L=J.id,q=J.time;return J=function(B,Y){var K={};for(oe in B)Object.prototype.hasOwnProperty.call(B,oe)&&Y.indexOf(oe)<0&&(K[oe]=B[oe]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,oe=Object.getOwnPropertySymbols(B);ee<oe.length;ee++)Y.indexOf(oe[ee])<0&&Object.prototype.propertyIsEnumerable.call(B,oe[ee])&&(K[oe[ee]]=B[oe[ee]]);return K}(J,["id","time"]),Q[L]?Q[L][q]=J:Q[L]=((L={})[q]=J,L),Q},{}),U.lg.hbLog.length=0,U.lg.i(l,"hb",H))},this.bus=new A.a,this.econf=T.a.getInstance().st.initEngine(k,b,this.bus),this.lg=T.a.getInstance().lg,this.dr=T.a.getInstance().dr,this.pb=T.a.getInstance().pb,this.pv=new _.a(this.lg),this.bus.add(s.m.ILogined,this.onLogined),C(99)("./"+(u.p?"ZIMFileStoreImpl":"ZIMIDBImpl")).ZIMStoreImpl);this.dbMgr=new z(this.econf),this.cnMgr=new g.a(this.econf,this.bus,this.dbMgr),this.cnMgr.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onPushEvent),this.gpMgr=new f.a(this.econf,this.bus,this.cnMgr,this.dbMgr),this.urMgr=new c.a(this.econf,this.bus,this.cnMgr,this.dbMgr),this.clMgr=new E.a(this.econf,this.bus,this.cnMgr,this.dbMgr),this.cvMgr=new x.a(this.econf,this.bus,this.cnMgr,this.dbMgr,this.gpMgr),this.fdMgr=new m.a(this.econf,this.bus,this.cnMgr,this.dbMgr)}},function(te,j,C){function O(a,o){return o===void 0&&(o=!1),typeof a=="string"&&(o||!!a)}function T(a){return typeof a=="number"&&0<=a}C.d(j,"a",function(){return r});var _=C(1),E=C(0),g=6000001,x=E.v.User,A=E.v.Conversation,m=E.v.Room,f=E.v.Group,c=E.v.Friend,u=E.v.Call,s=E.v.Database,r=(i.prototype.validID=function(a,o,l,h){var R;if(!Object(_.n)(a))return this.lg.w(l,h,((R={code:g,msg:l=a+" is invalid."})[a]=o,R)),this.createError(l,h)},i.prototype.validCallID=function(a,o){if(!O(a)||20<a.length)return this.lg.w(u,o,{code:g,msg:"callID is invalid or its length exceeds 20.",callID:a}),this.createError("callID is invalid or its length exceeds 20.",o)},i.prototype.validName=function(a,o,l,h){var R;if(!this._isValidName(o))return this.lg.w(l,h,((R={code:g,msg:l=a+" is invalid."})[a]=o,R)),this.createError(l,h)},i.prototype.validTwoID=function(a,o,l,h,R,w){var d="";if(!Object(_.n)(o)&&(d=a+" is invalid.")||!Object(_.n)(h)&&(d=l+" is invalid."))return this.lg.w(R,w,((R={code:g,msg:d})[a]=o,R[l]=h,R)),this.createError(d,w)},i.prototype.validTwoName=function(a,o,l,h,R,w){var d="";if(!this._isValidName(o)&&(d=a+" is invalid.")||!this._isValidName(h)&&(d=l+" is invalid."))return this.lg.w(R,w,((R={code:g,msg:d})[a]=o,R[l]=h,R)),this.createError(d,w)},i.prototype.validIDAndName=function(a,o,l,h,R,w){var d="";if(!Object(_.n)(o)&&(d=a+" is invalid.")||!this._isValidName(h)&&(d=l+" is invalid."))return this.lg.w(R,w,((R={code:g,msg:d})[a]=o,R[l]=h,R)),this.createError(d,w)},i.prototype.validCount=function(a,o,l,h,R){var w="";if(a&&T(a.count)?h&&!Object(_.n)(R)&&(w=h+" is invalid."):w="The config or its count is invalid.")return this.lg.w(o,l,{code:g,msg:w,config:a}),this.createError(w,l)},i.prototype.validArray=function(a,o,l,h,R){var w;if(!Array.isArray(o)||!o.length||o.some(function(d){return!O(d)})||R&&o.length>R)return w=a+" is invalid",R&&o.length>R&&(w+=" or its length exceeds "+R),this.lg.w(l,h,((R={code:g,msg:w+=" or each of its elements must be a valid string type."})[a]=o,R)),this.createError(w,h)},i.prototype.validIDAndArray=function(a,o,l,h,R,w,d){var D="";if(!Object(_.n)(o)&&(D=a+" is invalid.")||(!Array.isArray(h)||!h.length||h.some(function(S){return!O(S)})||d&&h.length>d)&&(D=l+" is invalid or each of its elements must be a valid string type."))return this.lg.w(R,w,((d={code:g,msg:D})[a]=o,d[l]=h,d)),this.createError(D,w)},i.prototype.updateRule=function(a){var o;if(!a||!Array.isArray(a.notToReceiveOfflinePushPlatforms)||!Array.isArray(a.onlinePlatforms)||a.notToReceiveOfflinePushPlatforms.some(function(l){return!E.c.PlatformType[l]})||a.onlinePlatforms.some(function(l){return!E.c.PlatformType[l]}))return o=E.u.UpdateUserRule,this.lg.w(x,o,{code:g,msg:"The offlinePushRule is invalid.",offlinePushRule:a}),this.createError("The offlinePushRule is invalid.",o)},i.prototype.validConvIDAndType=function(a,o,l){var h="";if(Object(_.n)(a)?o!==E.c.ConversationType.Peer&&o!==E.c.ConversationType.Group&&(h="conversationType is invalid."):h="conversationID is invalid.")return this.lg.w(A,l,{code:g,msg:h,conversationID:a,conversationType:o}),this.createError(h,l)},i.prototype.validSDKMsg=function(a,o){var l=this._checkSDKMsg(a);if(l)return this.lg.w(A,o,{code:g,msg:l,message:a}),this.createError(l,o)},i.prototype.setNotifyStatus=function(a,o,l){var h,R="";if((Object(_.n)(o)?l!==E.c.ConversationType.Group&&l!==E.c.ConversationType.Peer&&(R="conversationType is not support."):R="conversationID is invalid.")||a!==E.c.ConversationNotificationStatus.Notify&&a!==E.c.ConversationNotificationStatus.DoNotDisturb&&(R="status is invalid."))return h=E.u.SetNotifyStatus,this.lg.w(A,h,{code:g,msg:R,conversationID:o,conversationType:l,status:a}),this.createError(R,h)},i.prototype.setConvDraft=function(a,o,l){var h=E.u.SetConvDraft,R=this.validConvIDAndType(a,o,h);return R||(typeof l!="string"?(this.lg.w(A,h,{code:g,msg:R="draft is invalid.",conversationID:a,conversationType:o,draft:l}),this.createError(R,h)):void 0)},i.prototype.setConvMark=function(a,o){var l,h="";if(typeof a!="number"||a<1?h="markType is invalid.":(!Array.isArray(o)||!o.length)&&(h="infos is invalid."))return l=E.u.SetConvMark,this.lg.w(A,l,{code:g,msg:h,markType:a,infos:o}),this.createError(h,l)},i.prototype.sendMsg=function(a,o,l,h,R,w){var d="";if((Object(_.n)(o)?!this._checkConvType(l)&&(d="conversationType is invalid."):d="toConversationID is invalid.")||(a?!h&&(d="config is invalid."):d="message is invalid.")||(this._checkMsgType(a.type,l)?!this._checkMsgPriority(h.priority)&&(d="config priority is invalid."):d="message type is invalid.")||(this._checkMsgReceipt(l,a.type,h.hasReceipt)?(R=this._checkMsgContent(a,l,R,w))&&(d=R):d="The message type is not support setting receipt."))return w=E.u.SendMsg,this.lg.w(A,w,{code:g,msg:d,toConversationID:o,conversationType:l,message:a,config:h}),this.createError(d,w)},i.prototype.editMsg=function(a){var o,l="";if((a&&a.conversationID&&!a.isUserInserted&&!a.isBroadcastMessage&&a.messageSeq&&a.sentStatus==E.c.MessageSentStatus.Success?a.type!=E.c.MessageType.Text&&a.type!=E.c.MessageType.Custom&&a.type!=E.c.MessageType.Multiple&&(l="The message type is not support."):l="The message instance is not a successful message.")||(a.conversationType!==E.c.ConversationType.Peer&&a.conversationType!==E.c.ConversationType.Group?l="The message conversation type is not support.":(o=this._checkMsgContent(a,a.conversationType,0,0))&&(l=o)))return o=E.u.EditMsg,this.lg.w(A,o,{code:g,msg:l,message:a}),this.createError(l,o)},i.prototype.delMsgs=function(a,o,l,h){var R=E.u.DelMsg,w=this.validConvIDAndType(o,l,R);return w||(w="",Array.isArray(a)&&a.length!=0?a.some(function(d){return!d.messageID||d.conversationID!=o||d.conversationType!=l})&&(w="Some messages int the message list in the conversationID are illegal messages."):w="messageList is invalid.",w?(this.lg.w(A,R,{code:g,msg:w,messageList:a,config:h}),this.createError(w,R)):void 0)},i.prototype.queryHistoryMsg=function(a,o,l){var h="";if((Object(_.n)(a)?!this._checkConvType(o)&&(h="conversationType is invalid."):h="conversationID is invalid.")||(!l||!T(l.count))&&(h="The config or its count is invalid."))return l=E.u.QueryHistoryMsg,this.lg.w(A,l,{code:g,msg:h,conversationID:a,conversationType:o}),this.createError(h,l)},i.prototype.insertMsg=function(a,o,l,h){var R,w="";if((Object(_.n)(o)?!this._checkConvType(l)&&(w="conversationType is invalid."):w="conversationID is invalid.")||(Object(_.n)(h)?!a&&(w="message is invalid."):w="senderUserID is invalid.")||(this._checkInsertMsgType(a.type)?!this._checkInsertMsgContent(a)&&(w="The message instance of message is invalid."):w="message type is invalid."))return R=E.u.InsertMsg,this.lg.w(A,R,{code:g,msg:w,conversationID:o,conversationType:l,senderUserID:h,message:a}),this.createError(w,R)},i.prototype.updateMsgLocalExt=function(a,o){var l,h="";if(this._isValidName(a)?(!o||!o.conversationID||!o.messageID)&&(h="message is invalid."):h="localExtendedData is invalid.")return l=E.u.UpdateMsgLocalExt,this.lg.w(A,l,{code:g,msg:h,localExtendedData:a,message:o}),this.createError(h,l)},i.prototype.queryCombineMsg=function(a){var o;if(!a||a.type!=E.c.MessageType.Combine||!a.combineID)return o=E.u.QueryCombineMsg,this.lg.w(A,o,{code:g,msg:"The combine message is invalid.",message:a}),this.createError("The combine message is invalid.",o)},i.prototype.sendConvReceipt=function(a,o){var l,h="";if(Object(_.n)(a)?o!==E.c.ConversationType.Peer&&(h="conversationType is invalid."):h="conversationID is invalid.")return l=E.u.SendConvReceipt,this.lg.w(A,l,{code:g,msg:h,conversationID:a,conversationType:o}),this.createError(h,l)},i.prototype.sendMsgReceipt=function(a,o,l){var h=E.u.SendReceipts,R=this.validConvIDAndType(o,l,h);return R||(R="",Array.isArray(a)&&a.length!=0?a.every(function(w){return w.direction!=E.c.MessageDirection.Receive||w.receiptStatus!=E.c.MessageReceiptStatus.Processing||!w.messageID||!w.messageSeq||w.conversationID!=o||w.conversationType!=l})&&(R="Every message in the conversationID is not received receipt processing message."):R="messageList is invalid.",R?(this.lg.w(A,h,{code:g,msg:R,conversationID:o,conversationType:l,messageList:a}),this.createError(R,h)):void 0)},i.prototype.queryMsgReceipt=function(a,o,l){var h=E.u.QueryReceipts,R=this.validConvIDAndType(o,l,h);return R||(R="",Array.isArray(a)&&a.length!=0?a.every(function(w){return!w.receiptStatus||!w.messageID||!w.messageSeq||w.conversationID!=o||w.conversationType!=l})&&(R="Every messages in the conversationID is not receipt message."):R="messageList is invalid.",R?(this.lg.w(A,h,{code:g,msg:R,conversationID:o,conversationType:l,messageList:a}),this.createError(R,h)):void 0)},i.prototype.queryReceiptMembers=function(a,o,l,h,R){var w="";if((Object(_.n)(o)?(!l||!T(l.count))&&(w="The config or its count is invalid."):w="groupID is invalid.")||(a&&a.senderUserID==R&&a.sentStatus==E.c.MessageSentStatus.Success&&a.receiptStatus?this._isInvalidBizMsgType(a.type)&&(w="The message type is not support."):w="The message instance is not a successful receipt message sent by self.")||(a.conversationID!==o||a.conversationType!==E.c.ConversationType.Group)&&(w="The message instance is not belong the groupID."))return R=h?E.u.QueryReceiptRead:E.u.QueryReceiptUnread,this.lg.w(A,R,{code:g,msg:w,groupID:o,message:a,config:l}),this.createError(w,R)},i.prototype.msgReaction=function(a,o,l){var h;if(l=l?E.u.AddReaction:E.u.DelReaction,h=O(a)?this._checkSDKMsg(o):"reactionType is invalid.")return this.lg.w(A,l,{code:g,msg:h,message:o}),this.createError(h,l)},i.prototype.queryMsgBase=function(a,o,l,h){var R;if(R=!o||!T(o.count)||!o.count||100<o.count?"The config or its count is invalid or its count exceeds 100.":this._checkSDKMsg(a,"message",h))return this.lg.w(A,l,{code:g,msg:R,message:a,config:o}),this.createError(R,l)},i.prototype.replyMsg=function(a,o,l,h,R){var w,d="";return(d=this._checkSDKMsg(o,"toOriginMessage"))||(a?this._isInvalidBizMsgType(a.type)&&(d="The message type is not suppor."):d="message is invalid.")?(w=E.u.ReplyMsg,this.lg.w(A,w,{code:g,msg:d,message:a}),this.createError(d,w)):this.sendMsg(a,o.conversationID,o.conversationType,l,h,R)},i.prototype.createRoom=function(a,o){var l,h="";if((a?!Object(_.n)(a.roomID)&&(h="The roomInfo instance of roomID is invalid."):h="roomInfo is invalid.")||(this._isValidName(a.roomName)?o&&o.roomAttributes&&!this._isValidAttr(o.roomAttributes,!0)&&(h="The Key and Value of the roomAttributes property of the config instance only support string types."):h="The roomInfo instance of roomName is invalid."))return l=E.u.EnterRoom,this.lg.w(m,l,{code:g,msg:h,roomInfo:a,config:o}),this.createError(h,l)},i.prototype.setRoomAttr=function(a,o){var l,h="";if(Object(_.n)(o)?!this._isValidAttr(a)&&(h="The Key and Value of the roomAttributes only support string types."):h="roomID is invalid.")return l=E.u.SetRoomAttr,this.lg.w(m,l,{code:g,msg:h,roomID:o,roomAttributes:a}),this.createError(h,l)},i.prototype.setRoomMembersAttr=function(a,o,l){var h="";if((Object(_.n)(l)?!this._isValidAttr(a)&&(h="The Key and Value of the attributes only support string types."):h="roomID is invalid.")||(!Array.isArray(o)||!o.length||o.some(function(R){return!O(R)}))&&(h="Every one of userIDs must be a valid string type."))return o=E.u.SetRoomMembersAttr,this.lg.w(m,o,{code:g,msg:h,roomID:l,attributes:a}),this.createError(h,o)},i.prototype.createGroup=function(a,o,l){var h=String(a.groupID||"").trim(),R="";if((h&&!Object(_.n)(h,!0)?R="The groupInfo instance of groupID is invalid.":!this._isValidName(a.groupName)&&(R="The groupInfo instance of groupName is invalid."))||(this._isValidName(a.groupAvatarUrl)?!this._isValidName(l.groupNotice)&&(R="The config instance of groupNotice is invalid."):R="The groupInfo instance of groupAvatarUrl is invalid.")||(o&&!Array.isArray(o)?R="Every one of userIDs must be a valid string type.":!this._isValidAttr(l.groupAttributes,!0)&&(R="The Key and Value of the groupAttributes property of the config instance only support string types.")))return h=E.u.CreateGroup,this.lg.w(f,h,{code:g,msg:R,groupInfo:a,config:l,userIDs:o}),this.createError(R,h)},i.prototype.muteGroup=function(a,o,l){var h,R="";if((Object(_.n)(a)?(l&&(!o.mode||!o.duration)||[0,1,2,3].indexOf(o.mode)==-1)&&(R="The config instance or its mode is invalid."):R="groupID is invalid.")||(typeof o.duration!="number"||o.duration<-1?R="The config instance of duration is invalid.":o.mode==E.c.GroupMuteMode.Custom&&(!Array.isArray(o.roles)||!o.roles.length||o.roles.join()=="3")&&(R="The config instance of roles is invalid.")))return h=E.u.MuteGroup,this.lg.w(f,h,{code:g,msg:R,groupID:a,isMute:l,config:o}),this.createError(R,h)},i.prototype.setGroupAttr=function(a,o){var l,h="";if(Object(_.n)(o)?!this._isValidAttr(a)&&(h="The Key and Value of the groupAttributes only support string types."):h="groupID is invalid.")return l=E.u.SetGroupAttr,this.lg.w(f,l,{code:g,msg:h,groupID:o,groupAttributes:a}),this.createError(h,l)},i.prototype.queryGroupAttr=function(a,o){var l,h="";if(Object(_.n)(a)?Array.isArray(o)&&(!o.length||o.some(function(R){return!O(R)}))&&(h="Every one of kyes must be a valid string type."):h="groupID is invalid.")return l=E.u.QueryGroupAttrs,this.lg.w(f,l,{code:g,msg:h,groupID:a,keys:o}),this.createError(h,l)},i.prototype.setMemberNickname=function(a,o,l){var h,R="";if((this._isValidName(a)?!Object(_.n)(o)&&(R="forUserID is invalid."):R="nickname is invalid.")||!Object(_.n)(l)&&(R="groupID is invalid."))return h=E.u.SetGroupMemberNickname,this.lg.w(f,h,{code:g,msg:R,groupID:l,forUserID:o,nickname:a}),this.createError(R,h)},i.prototype.setMemberRole=function(a,o,l){var h,R="";if((T(a)?!Object(_.n)(o)&&(R="forUserID is invalid."):R="role is invalid.")||!Object(_.n)(l)&&(R="groupID is invalid."))return h=E.u.SetGroupMemberRole,this.lg.w(f,h,{code:g,msg:R,groupID:l,forUserID:o,role:a}),this.createError(R,h)},i.prototype.updateGroupVerifyMode=function(a,o,l){var h,R="";if((Object(_.n)(o)?typeof a!="number":R="groupID is invalid.")||(l==E.t.Join&&(a<0||2<a)||l!=E.t.Join&&(a<0||1<a))&&(R="mode is invalid."))return h=E.u.UpdateGroupVerifyMode,this.lg.w(f,h,{code:g,msg:R,groupID:o,mode:a,type:l}),this.createError(R,h)},i.prototype.callInvite=function(a,o){var l,h="";if(Array.isArray(a)&&a.length?o&&typeof o.timeout=="number"&&(o.timeout%1!=0||o.timeout<1||600<o.timeout)&&(h="The config of timeout is invalid or its size exceeds 600."):h="invitees is invalid.")return l=E.u.CallInvite,this.lg.w(u,l,{code:g,msg:h,invitees:a,config:o}),this.createError(h,l)},i.prototype.searchConv=function(a){var o,l="";if((a?!T(a.totalConversationCount)&&(l="The config instance of totalConversationCount is invalid."):l="config is invalid.")||(T(a.conversationMessageCount)?Array.isArray(a.keywords)&&(5<a.keywords.length||a.keywords.some(function(h){return!h}))&&(l="The config instance of keywords is invalid or its length exceeds 5."):l="The config instance of conversationMessageCount is invalid.")||Array.isArray(a.senderUserIDs)&&(5<a.senderUserIDs.length||a.senderUserIDs.some(function(h){return!h}))&&(l="The config instance of senderUserIDs is invalid or its length exceeds 5."))return o=E.u.SearchConv,this.lg.w(s,o,{code:g,msg:l,config:a}),this.createError(l,o)},i.prototype.searchMsg=function(a,o){var l="";if((a?!T(a.count)&&(l="The config instance of count is invalid."):l="config is invalid.")||(Array.isArray(a.keywords)&&(5<a.keywords.length||a.keywords.some(function(h){return!h}))?l="The config instance of keywords is invalid or its length exceeds 5.":Array.isArray(a.senderUserIDs)&&(5<a.senderUserIDs.length||a.senderUserIDs.some(function(h){return!h}))&&(l="The config instance of senderUserIDs is invalid or its length exceeds 5.")))return this.lg.w(s,o,{code:g,msg:l,config:a}),this.createError(l,o)},i.prototype.searchBase=function(a,o){var l="";if((a?!T(a.count)&&(l="The config instance of count is invalid."):l="config is invalid.")||(!Array.isArray(a.keywords)||!a.keywords.length||5<a.keywords.length||a.keywords.some(function(h){return!h}))&&(l="The config instance of keywords is invalid or its length exceeds 5."))return this.lg.w(s,o,{code:g,msg:l,config:a}),this.createError(l,o)},i.prototype.addFriend=function(a,o){var l,h="";if((Object(_.n)(a)?!o&&(h="config is invalid."):h="userID is invalid.")||(typeof o.wording=="string"&&1024<o.wording.length?h="The config instance of wording is invalid or its length exceeds 1024.":typeof o.friendAlias=="string"&&256<o.friendAlias.length&&(h="The config instance of friendAlias is invalid or its length exceeds 256."))||o.friendAttributes&&!this._isValidAttr(o.friendAttributes,!0)&&(h="The config instance of friendAttributes is invalid."))return l=E.u.AddFriend,this.lg.w(c,l,{code:g,msg:h,userID:a,config:o}),this.createError(h,l)},i.prototype.updateFriendAlias=function(a,o){var l,h="";if(Object(_.n)(o)?(!O(a,!0)||256<a.length)&&(h="friendAlias is invalid or its length exceeds 256."):h="userID is invalid.")return l=E.u.UpdateFriendAlias,this.lg.w(c,l,{code:g,msg:h,userID:o,friendAlias:a}),this.createError(h,l)},i.prototype.updateFriendAttr=function(a,o){var l,h="";if(Object(_.n)(o)?a&&!this._isValidAttr(a,!0)&&(h="The config instance of friendAttributes is invalid."):h="userID is invalid.")return l=E.u.UpdateFriendAlias,this.lg.w(c,l,{code:g,msg:h,userID:o,friendAttributes:a}),this.createError(h,l)},i.prototype.acceptFriendApply=function(a,o){var l,h="";if((Object(_.n)(a)?o&&typeof o.friendAlias=="string"&&256<o.friendAlias.length&&(h="The config instance of friendAlias is invalid or its length exceeds 256."):h="userID is invalid.")||o&&o.friendAttributes&&!this._isValidAttr(o.friendAttributes,!0)&&(h="The config instance of friendAttributes is invalid."))return l=E.u.AcceptFriendApp,this.lg.w(c,l,{code:g,msg:h,userID:a,config:o}),this.createError(h,l)},i.prototype.createError=function(a,o){return{code:g,message:o+": "+a}},i.prototype._checkMsgContent=function(a,o,l,h){var R=this,w=a.type,d=a.message,D="The message body is empty or its byte size exceeds.";if((w===E.c.MessageType.Text||w===E.c.MessageType.Custom||w===E.c.MessageType.Barrage&&o===E.c.ConversationType.Room)&&(typeof d!="string"||!d||!d.trim()||Object(_.j)(d).length>E.h.MAX_MESSAGE_SIZE)||w===E.c.MessageType.Command&&(!d.length||d.length>E.h.MAX_MESSAGE_SIZE||!Object(_.g)(d).trim()))return D;if(w>=E.c.MessageType.Image&&w<=E.c.MessageType.Video&&!a.fileLocalPath&&!a.fileDownloadUrl)return"The message of fileLocalPath and fileDownloadUrl is empty.";if(a.type==E.c.MessageType.Custom&&(a.subType<0||200<a.subType))return"The message of subType is invalid.";if(a.type==E.c.MessageType.Combine){var S="";if((!O(a.title)||Object(_.j)(a.title).length>l)&&(S="The combine message title is invalid or its byte size exceeds "+l+".")||(!O(a.summary)||Object(_.j)(a.summary).length>h)&&(S="The combine message summary is invalid or its byte size exceeds "+h+".")||(!Array.isArray(a.messageList)||!a.messageID&&a.messageList.length==0?S="The combine message list is invalid.":a.messageList.some(function(k){return R._checkSubMsg(k)})&&(S="The combine message list includes invalid message.")))return S}if(a.type==E.c.MessageType.Multiple){S="";var y=[E.c.MessageType.Text,E.c.MessageType.Custom,E.c.MessageType.Image,E.c.MessageType.File,E.c.MessageType.Audio,E.c.MessageType.Video];if(Array.isArray(a.messageInfoList)&&a.messageInfoList.length?a.messageInfoList.some(function(k){return R._isInvalidLiteContent(k,y)})&&(S="Item of messageInfoList is invalid."):S="messageInfoList is invalid.")return S}return""},i.prototype._isInvalidLiteContent=function(a,o){var l=a.type;return o.indexOf(l)==-1||(o=a.message,!(l!==E.c.MessageType.Text&&l!==E.c.MessageType.Custom||typeof o=="string"&&o&&o.trim()&&!(Object(_.j)(o).length>E.h.MAX_MESSAGE_SIZE)))||l>=E.c.MessageType.Image&&l<=E.c.MessageType.Video&&!a.fileLocalPath&&!a.fileDownloadUrl||a.type==E.c.MessageType.Custom&&(a.subType<0||200<a.subType)},i.prototype._checkMsgPriority=function(a){return a===E.c.MessagePriority.Low||a===E.c.MessagePriority.Medium||a===E.c.MessagePriority.High},i.prototype._checkMsgType=function(a,o){return a===E.c.MessageType.Text||a===E.c.MessageType.Custom||a===E.c.MessageType.Combine||a===E.c.MessageType.Multiple||a===E.c.MessageType.Image||a===E.c.MessageType.File||a===E.c.MessageType.Audio||a===E.c.MessageType.Video||a===E.c.MessageType.Command||o===E.c.ConversationType.Room&&a===E.c.MessageType.Barrage},i.prototype._checkInsertMsgType=function(a){return a===E.c.MessageType.Text||a===E.c.MessageType.Custom||a===E.c.MessageType.Multiple||a===E.c.MessageType.Image||a===E.c.MessageType.File||a===E.c.MessageType.Audio||a===E.c.MessageType.Video||a===E.c.MessageType.System},i.prototype._checkInsertMsgContent=function(a){var o=a.message;return!!(a.type!==E.c.MessageType.Text&&a.type!==E.c.MessageType.Custom&&a.type!==E.c.MessageType.System||typeof o=="string"&&o&&o.trim()&&!(Object(_.j)(o).length>E.h.MAX_MESSAGE_SIZE))&&!(a.type>=E.c.MessageType.Image&&a.type<=E.c.MessageType.Video&&!a.fileLocalPath&&!a.fileDownloadUrl||!(a.type!=E.c.MessageType.Combine||a.title&&a.summary))},i.prototype._checkConvType=function(a){return a===E.c.ConversationType.Peer||a===E.c.ConversationType.Room||a===E.c.ConversationType.Group},i.prototype._checkMsgReceipt=function(a,o,l){return!l||a!=E.c.ConversationType.Room&&o!=E.c.MessageType.Command&&o!=E.c.MessageType.Barrage},i.prototype._isInvalidBizMsgType=function(a,o){var l=!a||a==E.c.MessageType.Command||a==E.c.MessageType.Barrage||a==E.c.MessageType.Tips;return(o=o!==void 0&&o)?l:l||a==E.c.MessageType.Revoke},i.prototype._checkSDKMsg=function(a,o,l){o===void 0&&(o="message"),l===void 0&&(l=!1);var h="";return(!a||!a.conversationID||a.isUserInserted||a.isBroadcastMessage||a.sentStatus!=E.c.MessageSentStatus.Success)&&(h="The "+o+" instance is not a successful message.")||this._isInvalidBizMsgType(a.type,l)&&(h="The "+o+" type is not support.")||a.conversationType!==E.c.ConversationType.Peer&&a.conversationType!==E.c.ConversationType.Group&&(h="The "+o+" conversation type is not support."),h},i.prototype._checkSubMsg=function(a){var o="";return!a||a.isUserInserted||a.isBroadcastMessage||a.sentStatus!=1?o="The message instance is not a successful message.":this._isInvalidBizMsgType(a.type)&&(o="The message type is not support."),o},i);function i(a){this.lg=a,this._isValidName=function(o){return typeof o=="string"&&o.length<=E.h.MAX_NAME_SIZE},this._isValidAttr=function(o,l){return!(!o||Object.prototype.toString.call(o)!=="[object Object]"||(o=Object.values(o),!l&&!o.length))&&o.every(function(h){return typeof h=="string"})}}},function(te,j,C){C.d(j,"a",function(){return A});var O=C(2),T=C(1),_=C(0),E=function(){return(E=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var r in c=arguments[u])Object.prototype.hasOwnProperty.call(c,r)&&(f[r]=c[r]);return f}).apply(this,arguments)},g=_.v.Call,x=6000272,A=(m.prototype.destroy=function(){this.onLogout(),this.cnMgr=null,this.bus=null,this.lg=null},m.prototype.onLogout=function(){this.dbCallMap.clear(),this.receiveTimer={},this.inviterTimer={},this.callSessionIDMap={},clearTimeout(this.timerMap.inviting),clearTimeout(this.timerMap.inviting2),clearTimeout(this.timerMap.invited),this.timerMap.inviting=0,this.timerMap.inviting2=0,this.timerMap.invited=0},m.prototype.callInvite=function(f,c){var u=this,s={time:new Date,invitees:f,config:c},r=(c.mode=c.mode||_.c.CallInvitationMode.General,c.timeout=+c.timeout||90,f=Array.from(new Set(f.filter(function(a){return Object(T.n)(a)}))),Object(T.k)()),i={call_id:r,call_mode:c.mode,timeout:c.timeout,user_ids:f,payload:this.encodeExtendedData(c),offline_info:Object(T.f)(c.pushConfig),check_ack_timeout:!!c.enableNotReceivedCheck};return this.cnMgr.send(_.d.cl_create,i).then(function(a){if(a.code)return s.error=Object(T.y)(x,a.message,a.code),u.lg.w(g,_.u.CallInvite,s),Promise.reject(s.error);u.dbMgr.updateUserSeq(a.call_list_seq,_.z.cl),a.timeout||(a.timeout=i.timeout),f.map(function(d){u.createInviteTimeout(r,d,a.timeout)});var o=a.create_time,l=((R={})[u.econf.user.userID]={userID:u.econf.user.userID,state:_.c.CallUserState.Accepted,extendedData:"",acceptTime:0,quitTime:0,timeout:0},R),h=a.new_err_list.map(function(d){return{userID:d.user_id,reason:d.sub_code}}),R=a.err_list.map(function(d){return{userID:d.user_id,state:u.translateUserState(d,u.econf.user.userID),extendedData:""}}),w=((w=f.filter(function(d){return!h.find(function(D){return D.userID==d})}).map(function(d){return d={userID:d,state:_.c.CallUserState.Inviting,extendedData:""},l[d.userID]=E(E({},d),{acceptTime:0,quitTime:0,timeout:a.timeout}),d})).unshift(u.pickCallUser(l[u.econf.user.userID])),u.bus.emit(_.m.CallUserState,{callID:r,callUserList:w}),{callID:r,caller:u.econf.user.userID,mode:c.mode,state:_.c.CallState.Started,extendedData:c.extendedData,createTime:o,endTime:0,timeout:a.timeout,inviter:u.econf.user.userID,callDuration:0,userDuration:0,callUserMap:l});return u.dbCallMap.set(r,w),u.dbMgr.addCallList([w]),u.lg.i(g,_.u.CallInvite,s),u.bus.emit(_.m.CallCreate,{callID:r,mode:w.mode,caller:w.caller,extendedData:w.extendedData,timeout:w.timeout,createTime:w.createTime,callUserList:w.callUserMap?Object.values(w.callUserMap).map(function(d){return u.pickCallUser(d)}):[]}),{callID:r,timeout:a.timeout,errorUserList:h,errorInvitees:R}})},m.prototype.callCancel=function(f,c,u,s){var r=this,i=(s===void 0&&(s=_.f.Cancel),{time:new Date,callID:c,state:s,config:u,invitees:f});if(this.checkCallAPI(c,i,_.u.CallCancel))return Promise.reject(i.error);f=Array.from(new Set(f.filter(function(l){return Object(T.n)(l)})));var a=u.extendedData||"",o=(u={call_id:c,user_ids:f,timeout:s,payload:this.encodeExtendedData(u),offline_info:Object(T.f)(u.pushConfig)},s==_.f.Cancel?_.g.A:_.g.S);return this.cnMgr.send(_.d.cl_cancel,u,o).then(function(l){if(l.code)return i.error=Object(T.y)(x,l.message,l.code),s||r.lg.w(g,_.u.CallCancel,i),Promise.reject(i.error);r.dbMgr.updateUserSeq(l.call_list_seq,_.z.cl);var h,R=l.err_list.map(function(d){return d.user_id}),w=r.dbCallMap.get(c);return w&&(s==_.f.Timeout?(w.mode==_.c.CallInvitationMode.General&&(w.state=_.c.CallState.Ended),(h=f.filter(function(d){return R.indexOf(d)==-1}).map(function(d){var D={userID:d,state:_.c.CallUserState.Timeout,extendedData:a};return(d=w.callUserMap[d])&&(d.state=D.state,d.extendedData=a),D})).length&&(r.bus.emit(_.m.CallUserState,{callID:c,callUserList:h}),r.bus.emit("callInviteesAnsweredTimeout",{callID:c,invitees:h.map(function(d){return d.userID})}))):s==_.f.Cancel&&r.isMainDevice(_.c.CallUserState.Accepted,l.call_user_session_id)&&(l=!f.length,h=(f=l?Object.keys(w.callUserMap).filter(function(d){return d!==w.caller}):f).filter(function(d){return R.indexOf(d)==-1}).map(function(d){var D={userID:d,state:_.c.CallUserState.BeCancelled,extendedData:a};return(d=w.callUserMap[d])&&(d.state=D.state,d.extendedData=a),D}),l&&(w.state=_.c.CallState.Ended,l=w.callUserMap[r.econf.user.userID])&&(l.state=_.c.CallUserState.Cancelled,l.extendedData=a,h.unshift(r.pickCallUser(l))),r.bus.emit(_.m.CallUserState,{callID:c,callUserList:h})),r.dbMgr.addCallList([w])),s||r.lg.i(g,_.u.CallCancel,i),{callID:c,errorInvitees:R}})},m.prototype.callAccept=function(f,c){var u,s=this,r={time:new Date,callID:f,config:c};return this.checkCallAPI(f,r,_.u.CallAccept)?Promise.reject(r.error):(u={user_id:f,user_name:this.encodeExtendedData(c)},this.cnMgr.send(_.d.cl_accept,u).then(function(i){if(i.code)return r.error=Object(T.y)(x,i.message,i.code),s.lg.w(g,_.u.CallAccept,r),Promise.reject(r.error);s.dbMgr.updateUserSeq(i.talk_time,_.z.cl);var a,o=+i.quit_time,l=(i=s.dbCallMap.get(f))&&i.callUserMap[s.econf.user.userID];return i&&l&&(i.mode==_.c.CallInvitationMode.General&&(i.state=_.c.CallState.Ended),l.state=_.c.CallUserState.Accepted,l.acceptTime=o,l.extendedData=c.extendedData||"",(a=Object.values(i.callUserMap)).length==2&&a.forEach(function(h){return h.acceptTime=o}),s.dbMgr.addCallList([i]),s.bus.emit(_.m.CallUserState,{callID:f,callUserList:[s.pickCallUser(l)]})),s.lg.i(g,_.u.CallAccept,r),{callID:f}}))},m.prototype.callReject=function(f,c){var u,s=this,r={time:new Date,callID:f,config:c};return this.checkCallAPI(f,r,_.u.CallReject)?Promise.reject(r.error):(u={call_id:f,payload:this.encodeExtendedData(c)},this.cnMgr.send(_.d.cl_refuse,u).then(function(i){if(i.code)return r.error=Object(T.y)(x,i.message,i.code),s.lg.w(g,_.u.CallReject,r),Promise.reject(r.error);s.dbMgr.updateUserSeq(i.talk_time,_.z.cl);var a=(i=s.dbCallMap.get(f))&&i.callUserMap[s.econf.user.userID];return i&&a&&(a.state=_.c.CallUserState.Rejected,i.state=_.c.CallState.Ended,a.extendedData=c.extendedData||"",s.dbMgr.addCallList([i]),s.bus.emit(_.m.CallUserState,{callID:f,callUserList:[s.pickCallUser(a)]})),s.lg.i(g,_.u.CallReject,r),{callID:f}}))},m.prototype.callingInvite=function(f,c,u){var s,r=this,i={time:new Date,callID:c,invitees:f,config:u};return this.checkCallAPI(c,i,_.u.CallingInvite)?Promise.reject(i.error):(s=[],f=Array.from(new Set(f.filter(function(a){return!!Object(T.n)(a)||(s.push({userID:a,reason:6000001}),!1)}))),u={call_id:c,user_ids:f,offline_info:Object(T.f)(u.pushConfig)},this.cnMgr.send(_.d.cl_invite,u).then(function(a){if(a.code)return i.error=Object(T.y)(x,a.message,a.code),r.lg.w(g,_.u.CallInvite,i),Promise.reject(i.error);a.err_list.forEach(function(R){return s.push({userID:R.user_id,reason:R.sub_code})});var o,l,h=r.dbCallMap.get(c);return h&&(o=f.filter(function(R){return!s.find(function(w){return w.userID==R})}).map(function(R){return R={userID:R,state:_.c.CallUserState.Inviting,extendedData:""},h.callUserMap[R.userID]=E(E({},R),{acceptTime:0,quitTime:0,timeout:h.timeout}),R}),l=(l=h.callUserMap[r.econf.user.userID])==null?void 0:l.state,r.isMainDevice(l,a.call_user_session_id)?(r.bus.emit(_.m.CallUserState,{callID:c,callUserList:o}),f.map(function(R){clearTimeout(r.receiveTimer[c+R]),r.createInviteTimeout(c,R,a.timeout)})):r.timerMap.inviting=setTimeout(function(){r.timerMap.inviting&&f.forEach(function(R){R=h.callUserMap[R],h.state!=_.c.CallState.Started||(R==null?void 0:R.state)!=_.c.CallUserState.Inviting&&(R==null?void 0:R.state)!=_.c.CallUserState.Received||(R.state=_.c.CallUserState.Timeout)})},1e3*a.timeout),r.dbMgr.addCallList([h])),r.lg.i(g,_.u.CallingInvite,i),{callID:c,errorUserList:s}}))},m.prototype.callQuit=function(f,c){var u,s=this,r={time:new Date,callID:f,config:c};return this.checkCallAPI(f,r,_.u.CallQuit)?Promise.reject(r.error):(u={call_id:f,payload:this.encodeExtendedData(c),offline_info:Object(T.f)(c.pushConfig)},this.cnMgr.send(_.d.cl_quit,u).then(function(i){if(i.code)return r.error=Object(T.y)(x,i.message,i.code),s.lg.w(g,_.u.CallQuit,r),Promise.reject(r.error);s.dbMgr.updateUserSeq(i.call_list_seq,_.z.cl);var a,o,l=s.dbCallMap.get(f),h=l&&l.callUserMap[s.econf.user.userID];return l&&h&&(a=h.state,h.state=_.c.CallUserState.Quit,l.state=_.c.CallState.Ended,h.extendedData=c.extendedData||"",h.quitTime=+i.quit_time,l.userDuration=(h.quitTime-h.acceptTime)/1e3|0,l.endTime=Object.values(l.callUserMap).some(function(R){return R.state==_.c.CallUserState.Accepted})?0:+i.quit_time,Object.values(l.callUserMap).every(function(R){return R.state==_.c.CallUserState.Quit})&&(l.endTime=0),o=0,Object.values(l.callUserMap).forEach(function(R){var w=R.state;R=R.acceptTime,w!=_.c.CallUserState.Rejected&&w!=_.c.CallUserState.Timeout&&w!=_.c.CallUserState.Quit||(o?R<o&&(o=R):o=R||0)}),o&&(l.callDuration=(h.quitTime-o)/1e3|0),s.isMainDevice(a,i.call_user_session_id)&&s.bus.emit(_.m.CallUserState,{callID:f,callUserList:[s.pickCallUser(h)]}),s.dbMgr.addCallList([l])),s.lg.i(g,_.u.CallQuit,r),{callID:f,createTime:(l==null?void 0:l.createTime)||0,acceptTime:(h==null?void 0:h.acceptTime)||(l==null?void 0:l.createTime)||0,quitTime:(h==null?void 0:h.quitTime)||0}}))},m.prototype.callJoin=function(f,c){var u=this,s={time:new Date,callID:f,config:c};return this.checkCallAPI(f,s,_.u.CallJoin)?Promise.reject(s.error):(c={user_id:f,user_name:this.encodeExtendedData(c)},this.cnMgr.send(_.d.cl_enter,c).then(function(r){if(r.code)return s.error=Object(T.y)(x,r.message,r.code),u.lg.w(g,_.u.CallJoin,s),Promise.reject(s.error);u.dbMgr.updateUserSeq(r.call_list_seq,_.z.cl);var i=[],a=u.dbCallMap.get(f)||{callID:f,caller:r.caller,mode:_.c.CallInvitationMode.Advanced,state:_.c.CallState.Started,createTime:r.create_time,endTime:0,extendedData:Object(T.g)(r.payload),callDuration:0,userDuration:0,callUserMap:{}};return a.state=_.c.CallState.Started,a.timeout=r.timeout,r.user_state_list.map(function(o){o={userID:o.user_id,state:u.translateUserState(o,r.caller),extendedData:Object(T.g)(o.extended_data),acceptTime:o.acceptTime,quitTime:o.quit_time},a.callUserMap[o.userID]=E(E({},o),{timeout:a.timeout}),i.push(u.pickCallUser(o))}),u.dbCallMap.set(f,a),u.dbMgr.addCallList([a]),{callID:f,createTime:r.create_time,joinTime:r.accept_time,extendedData:Object(T.g)(r.extended_data),callUserList:i}}))},m.prototype.callEnd=function(f,c){var u,s=this,r={time:new Date,callID:f,config:c};return this.checkCallAPI(f,r,_.u.CallEnd)?Promise.reject(r.error):(u={call_id:f,payload:this.encodeExtendedData(c),offline_info:Object(T.f)(c.pushConfig)},this.cnMgr.send(_.d.cl_destroy,u).then(function(i){if(i.code)return r.error=Object(T.y)(x,i.message,i.code),s.lg.w(g,_.u.CallEnd,r),Promise.reject(r.error);s.dbMgr.updateUserSeq(i.call_list_seq,_.z.cl);var a,o=i.talk_time,l=s.dbCallMap.get(f),h=l&&l.callUserMap[s.econf.user.userID];return l&&h&&(a=h.state,l.state=_.c.CallState.Ended,l.endTime=o,s.calculateCallDuration(l),h.extendedData=c.extendedData,h.state=_.c.CallUserState.Ended,s.isMainDevice(a,i.quit_time)&&(a={callID:f,mode:l.mode,caller:l.caller,operatedUserID:s.econf.user.userID,endTime:o,extendedData:c.extendedData},s.bus.emit(_.m.CallEnd,a),s.bus.emit(_.m.CallUserState,{callID:f,callUserList:[s.pickCallUser(h)]})),s.dbMgr.addCallList([l])),s.lg.i(g,_.u.CallEnd,r),{callID:f,createTime:(l==null?void 0:l.createTime)||0,acceptTime:(h==null?void 0:h.acceptTime)||0,endTime:o}}))},m.prototype.queryList=function(f){var c,u=this,s=Array.from(this.dbCallMap.values()).sort(function(o,l){return l.createTime-o.createTime}),r={config:f,total:s.length,count:0},i=100<f.count?100:f.count,a=(f=(f=f.nextFlag||0)||0,i<s.length?(f=(c=(f+1)*i)>=(s=(a=f*i)>s.length?[]:s).length?0:f+1,s=s.slice(a,c),r.start=a,r.end=c):f=0,i==0&&(f=0),r.count=s.length,s.map(function(o){return u.getCallInfoFromDB(o)}));return this.lg.i(g,_.u.QueryCalls,r),Promise.resolve({callList:a,nextFlag:f})},m.prototype.onPushCallInvited=function(f){var c,u,s,r=this,i=f.call_id,a=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(i)),o=a&&a.callUserMap[this.econf.user.userID];a&&o&&o.state!=_.c.CallUserState.Inviting||(c=f.timeout||0,u={},s=[],f.user_state_list.forEach(function(l){l.sub_code!=4&&(l={userID:l.user_id,state:r.translateUserState(l,f.caller),extendedData:""},s.push(l),u[l.userID]=E(E({},l),{acceptTime:0,quitTime:0,timeout:c}))}),a||(a={callID:i,caller:f.caller,mode:f.call_mode==_.c.CallInvitationMode.Advanced?_.c.CallInvitationMode.Advanced:_.c.CallInvitationMode.General,state:_.c.CallState.Started,createTime:f.create_time,endTime:0,extendedData:Object(T.g)(f.payload),timeout:c,inviter:f.caller,userDuration:0,callDuration:0,callUserMap:u},this.dbCallMap.set(i,a)),a.caller!==this.econf.user.userID?this.queryCallInfo(a,!0,"push",s):((o=f.call_user_session_id)&&o!="1"||(i={callID:i,mode:a.mode,caller:a.caller,extendedData:a.extendedData,createTime:a.createTime,timeout:a.timeout,callUserList:s},this.bus.emit(_.m.CallCreate,i)),o!==this.econf.sessionID.toString()&&(this.timerMap.invited=setTimeout(function(){r.timerMap.invited&&(a==null?void 0:a.state)==_.c.CallState.Started&&s.filter(function(l){return l.userID!==a.caller}).forEach(function(l){(a==null?void 0:a.callUserMap[l.userID].state)!=_.c.CallUserState.Inviting&&(a==null?void 0:a.callUserMap[l.userID].state)!=_.c.CallUserState.Received||(a.callUserMap[l.userID].state=_.c.CallUserState.Timeout)})},1e3*c))),this.dbMgr.addCallList([a]))},m.prototype.onPushCallCancel=function(f){var c,u,s,r,i,a,o,l=this,h=f.call_id,R=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(h));R&&((o=R.callUserMap[this.econf.user.userID])&&o.state!=_.c.CallUserState.Timeout?(a=o.state,c=f.call_user_session_id,f.state==_.f.Timeout?this.isSelfNotInCall(R,"PushTimeout")||(u=[],f.user_ids.forEach(function(w){(w=R.callUserMap[w])&&w.state!==_.c.CallUserState.Timeout&&(w.state=_.c.CallUserState.Timeout,u.push(l.pickCallUser(w)))}),f.user_ids.indexOf(this.econf.user.userID)!=-1&&(R.state=_.c.CallState.Ended,o.state=_.c.CallUserState.Timeout,c||this.bus.emit(_.m.CallTimeout,{callID:h,mode:R.mode})),this.checkEndCallState(R),this.isMainDevice(a,c)&&u.length&&this.bus.emit(_.m.CallUserState,{callID:h,callUserList:u})):(s=_.c.CallUserState.BeCancelled,r=Object(T.g)(f.extended_data),i=R.callUserMap[f.operator],a=f.user_ids.reduce(function(w,d){return d!==i.userID&&R.callUserMap[d]&&(R.callUserMap[d].state=s,R.callUserMap[d].extendedData=r,w.push(l.pickCallUser(R.callUserMap[d]))),w},[]),!f.user_ids.length&&i&&(i.state=_.c.CallUserState.Cancelled,i.extendedData=r,a.unshift(this.pickCallUser(i))),f.user_ids.length&&f.user_ids.indexOf(this.econf.user.userID)==-1||(R.state=_.c.CallState.Ended),this.isMainDevice(o.state,c)&&(R.mode!=_.c.CallInvitationMode.General&&!f.user_ids.includes(this.econf.user.userID)||(o={callID:h,mode:R.mode,inviter:f.caller,extendedData:r},this.bus.emit(_.m.CallCancel,o)),this.bus.emit(_.m.CallUserState,{callID:h,callUserList:a}))),this.dbMgr.addCallList([R])):R.state=_.c.CallState.Ended)},m.prototype.onPushCallAccept=function(f){var c,u=f.call_id,s=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(u)),r=s&&s.callUserMap[f.invitee],i=s&&((i=s.callUserMap[this.econf.user.userID])==null?void 0:i.state);s&&r&&i!=_.c.CallUserState.Cancelled&&i!=_.c.CallUserState.BeCancelled&&(r.state=_.c.CallUserState.Accepted,r.extendedData=Object(T.g)(f.extended_data),r.acceptTime=f.accept_time,(c=s.callUserMap[f.caller])&&!c.acceptTime&&(c.acceptTime=r.acceptTime),this.checkEndCallState(s),this.isMainDevice(i,f.call_user_session_id)&&(this.bus.emit(_.m.CallUserState,{callID:u,callUserList:[this.pickCallUser(r)]}),this.bus.emit("callInvitationAccepted",{callID:u,invitee:r.userID,extendedData:r.extendedData})),this.dbMgr.addCallList([s]))},m.prototype.onPushCallReject=function(f){var c=f.call_id,u=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(c)),s=u&&u.callUserMap[f.invitee],r=u&&((r=u.callUserMap[this.econf.user.userID])==null?void 0:r.state);u&&s&&r!=_.c.CallUserState.Cancelled&&r!=_.c.CallUserState.BeCancelled&&(s.state=_.c.CallUserState.Rejected,s.extendedData=Object(T.g)(f.extended_data),this.checkEndCallState(u),this.isMainDevice(r,f.call_user_session_id)&&(this.bus.emit(_.m.CallUserState,{callID:c,callUserList:[this.pickCallUser(s)]}),this.bus.emit("callInvitationRejected",{callID:c,invitee:s.userID,extendedData:s.extendedData})),this.econf.user.userID==s.userID&&(u.state=_.c.CallState.Ended),this.dbMgr.addCallList([u]))},m.prototype.onPushCallingInvite=function(f){var c,u,s,r,i=this,a=f.call_id,o=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),f.call_user_session_id),l=f.timeout,h=this.dbCallMap.get(a)||{callID:a,caller:f.caller,mode:_.c.CallInvitationMode.Advanced,state:_.c.CallState.Started,createTime:f.create_time,endTime:0,extendedData:Object(T.g)(f.payload),callDuration:0,userDuration:0,callUserMap:{}};h.inviter=f.invitee,h.timeout=f.timeout,!f.user_state_list.find(function(R){return R.user_id==i.econf.user.userID})&&this.isSelfNotInCall(h)||(u=(u=h.callUserMap[this.econf.user.userID])==null?void 0:u.state,r=f.user_state_list.reduce(function(R,w){return w.sub_code!=4&&(R[w.user_id]={userID:w.user_id,state:i.translateUserState(w,f.caller),extendedData:"",acceptTime:0,quitTime:0,timeout:l}),R},{}),Object.assign(h.callUserMap,r),this.dbCallMap.set(a,h),s=[],f.user_state_list.forEach(function(R){var w=h&&h.callUserMap[R.user_id];R.sub_code||R.user_id!=i.econf.user.userID||(c=!0,h.state=_.c.CallState.Started),w&&s.push(i.pickCallUser(w))}),s.length&&!c&&(f.invitee!==this.econf.user.userID&&s.forEach(function(R){return clearTimeout(i.inviterTimer[a+R.userID])}),this.isMainDevice(u,o))&&this.bus.emit(_.m.CallUserState,{callID:a,callUserList:s}),r={isMain:o==this.econf.sessionID.toString(),callUserList:s},f.invitee==this.econf.user.userID?o==this.econf.sessionID.toString()?s.map(function(R){return i.createInviteTimeout(f.call_id,R.userID,l)}):this.timerMap.inviting2=setTimeout(function(){i.timerMap.inviting2&&h.state==_.c.CallState.Started&&s.forEach(function(R){h.callUserMap[R.userID].state!=_.c.CallUserState.Inviting&&h.callUserMap[R.userID].state!=_.c.CallUserState.Received||(h.callUserMap[R.userID].state=_.c.CallUserState.Timeout)})},1e3*l):this.queryCallInfo(h,!0,"push",s),this.lg.i(g,"onPushCallingInvite",r))},m.prototype.onPushCallQuit=function(f){var c,u=f.call_id,s=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(u)),r=s&&s.callUserMap[f.invitee];s&&r&&!this.isSelfNotInCall(s)&&(c=(c=s.callUserMap[this.econf.user.userID])==null?void 0:c.state,r.state=_.c.CallUserState.Quit,r.extendedData=Object(T.g)(f.payload),r.quitTime=f.quit_time,r.acceptTime||(r.acceptTime=f.accept_time),this.checkEndCallState(s),this.isMainDevice(c,f.call_user_session_id)&&this.bus.emit(_.m.CallUserState,{callID:u,callUserList:[this.pickCallUser(r)]}),this.econf.user.userID==r.userID&&(s.state=_.c.CallState.Ended),this.dbMgr.addCallList([s]))},m.prototype.onPushCallEnter=function(f){var c,u,s=this,r=f.call_id,i=(this.dbMgr.updateUserSeq(f.call_list_seq,_.z.cl),this.dbCallMap.get(r));(i&&!this.isSelfNotInCall(i)||f.user_id===this.econf.user.userID)&&(i?f.user_id==this.econf.user.userID&&(i.state=_.c.CallState.Started):(i={callID:r,caller:this.econf.user.userID,mode:_.c.CallInvitationMode.Advanced,state:_.c.CallState.Started,extendedData:Object(T.g)(f.call_payload),createTime:f.create_time,endTime:0,timeout:f.timeout,inviter:f.caller,callDuration:0,userDuration:0,callUserMap:{}},this.dbCallMap.set(r,i)),u=(c=null)==(u=i.callUserMap[this.econf.user.userID])?void 0:u.state,f.user_state_list.forEach(function(a){var o=a.user_id;i.callUserMap[o]={userID:o,state:s.translateUserState(a,s.econf.user.userID),extendedData:Object(T.g)(a.extended_data),acceptTime:a.accept_time,quitTime:0,timeout:a.residue_timeout_time},o==f.user_id&&(i.callUserMap[o].extendedData=Object(T.g)(f.payload),i.callUserMap[o].acceptTime=f.enter_time,c=s.pickCallUser(i.callUserMap[o]))}),this.isMainDevice(u,f.call_user_session_id)&&c&&this.bus.emit(_.m.CallUserState,{callID:r,callUserList:[c]}),this.dbMgr.addCallList([i]))},m.prototype.onPushCallAckTimeout=function(f){var c,u,s=this,r=f.call_id,i=this.dbCallMap.get(r);i&&!this.isSelfNotInCall(i)&&(u=f.invitees)!=null&&u.length&&(c=[],f.invitees.forEach(function(a){(a=i.callUserMap[a])&&a.state!==_.c.CallUserState.Received&&(a.state=_.c.CallUserState.NotYetReceived,c.push(s.pickCallUser(a)))}),u=(u=i.callUserMap[this.econf.user.userID])==null?void 0:u.state,this.isMainDevice(u,f.session_id)&&c.length&&this.bus.emit(_.m.CallUserState,{callID:r,callUserList:c}),this.dbMgr.addCallList([i]))},m.prototype.onPushCallEnd=function(f){var c,u,s=f.call_id,r=this.dbCallMap.get(s);r&&(u=(u=r.callUserMap[this.econf.user.userID])==null?void 0:u.state,r.state=_.c.CallState.Ended,r.endTime=f.destroy_time,this.calculateCallDuration(r),(c=r.callUserMap[f.operator||r.caller])&&(c.state=_.c.CallUserState.Ended,c.extendedData=Object(T.g)(f.payload)),this.isMainDevice(u,f.call_user_session_id)&&!this.isSelfNotInCall(r)&&(u={callID:s,mode:r.mode,caller:r.caller,operatedUserID:f.operator||r.caller,extendedData:Object(T.g)(f.payload),endTime:r.endTime},this.bus.emit(_.m.CallEnd,u),this.bus.emit(_.m.CallUserState,{callID:s,callUserList:[this.pickCallUser(c)]})),this.dbMgr.addCallList([r]))},m.prototype.onPushCallAck=function(f){var c,u=f.call_id,s=this.dbCallMap.get(u),r=s&&s.callUserMap[f.invitee];s&&r&&!this.isSelfNotInCall(s)&&r.state!=_.c.CallUserState.Received&&(c=(c=s.callUserMap[this.econf.user.userID])==null?void 0:c.state,r.state=_.c.CallUserState.Received,this.isMainDevice(c,f.call_user_session_id)&&this.bus.emit(_.m.CallUserState,{callID:u,callUserList:[this.pickCallUser(r)]}),this.dbMgr.addCallList([s]))},m.prototype.registerInnerEvent=function(){this.bus.add(_.m.ILogined,this.onLogined.bind(this)),this.bus.add(_.m.IConnected,this.onConnected.bind(this)),this.bus.add(_.m.ITriggerHB,this.onTriggerHB.bind(this))},m.prototype.onLogined=function(f){var c=this;if(f)return this.onLogout();this.dbMgr.getBeanListByOwnerID(_.l.Call).then(function(u){u.forEach(function(s){c.dbCallMap.set(s.callID,s),s.state!=_.c.CallState.Started||c.isSelfNotInCall(s)||c.queryCallInfo(s,!1,"onLogined")})}),this.mergeSvrCallList(_.n.L)},m.prototype.onConnected=function(){this.mergeSvrCallList(_.n.H,"onConnected")},m.prototype.onTriggerHB=function(){this.mergeSvrCallList(_.n.H,"hb")},m.prototype.checkEndCallState=function(f){var c,u=[];for(c in f.callUserMap)u.push(f.callUserMap[c]);f.mode==_.c.CallInvitationMode.General&&u.every(function(s){return s.state==_.c.CallUserState.Accepted||s.state==_.c.CallUserState.Rejected||s.state==_.c.CallUserState.Timeout})&&(f.state=_.c.CallState.Ended),f.mode==_.c.CallInvitationMode.Advanced&&u.every(function(s){return s.state==_.c.CallUserState.Quit})&&(f.state=_.c.CallState.Ended)},m.prototype.mergeSvrCallList=function(f,c){var u,s,r,i,a=this,o=+this.econf.user.callSeq||0,l=this.econf.mailHBConfig.call_list_seq;(!l||l<=o)&&c!=="onConnected"||(u={time:new Date,dbSeq:o,hbSeq:l,how:f,action:c},s=1,r=0,i=function(h){var R;h.list.forEach(function(w){var d,D,S,y,k,b=w.call_status,U=a.dbCallMap.get(w.call_id),z=!(U!=null&&U.callUserMap[a.econf.user.userID]);U?(d=w.call_user_list.some(function(P){return a.translateUserState(P,w.caller)==_.c.CallUserState.Ended}),U.endTime=w.destroy_time,D=[],y=!a.isSelfNotInCall(U),b==_.c.CallState.Ended&&w.call_user_list.forEach(function(P){var H,Q=U.callUserMap[P.user_id];P.user_id==a.econf.user.userID&&(H=Q==null?void 0:Q.state,z=(z=H==_.c.CallUserState.Accepted&&P.user_session_id==a.econf.sessionID.toString())||H==_.c.CallUserState.Received||H==_.c.CallUserState.Inviting||!P.user_session_id),Q&&P.user_state?(H=a.translateUserState(P,w.caller),Q.state!==H&&H!==_.c.CallUserState.Unknown&&Q.state!==_.c.CallUserState.Ended&&(Q.state=H,Q.extendedData=Object(T.g)(P.extended_data),Q.timeout=P.residue_timeout_time,Q.acceptTime=P.accept_time,Q.quitTime=P.quit_time,D.push(a.pickCallUser(Q))),Q.state=H):(Q={userID:P.user_id,state:a.translateUserState(P,w.caller),extendedData:Object(T.g)(P.extended_data),acceptTime:P.accept_time,quitTime:P.quit_time,timeout:P.residue_timeout_time},D.push(a.pickCallUser(Q)),U.callUserMap[Q.userID]=Q)}),k=!1,D.length&&z&&(a.bus.emit(_.m.CallUserState,{callID:U.callID,callUserList:D}),S=D.find(function(P){return P.userID==a.econf.user.userID}))&&(S.state==_.c.CallUserState.Timeout&&(k=!0,a.bus.emit(_.m.CallTimeout,{callID:U.callID,mode:U.mode})),S.state==_.c.CallUserState.Cancelled)&&(k=!0,S.userID!=U.caller||f==_.n.H&&c=="onConnected")&&a.bus.emit(_.m.CallCancel,{callID:U.callID,mode:U.mode,inviter:U.inviter,extendedData:S.extendedData}),U.state==_.c.CallState.Started&&b==_.c.CallState.Ended&&z&&U.mode==_.c.CallInvitationMode.Advanced&&y&&!k&&d&&(U.state=_.c.CallState.Ended,S={callID:U.callID,mode:U.mode,caller:U.caller,operatedUserID:U.caller,extendedData:Object(T.g)(h.payload),endTime:U.endTime},a.bus.emit(_.m.CallEnd,S)),(U.state=b)==_.c.CallState.Started&&a.queryCallInfo(U,!1,"merge0")):(y=w.user_timeout,U={callID:w.call_id,caller:w.caller,createTime:w.create_time,endTime:w.destroy_time,mode:w.call_mode==_.c.CallInvitationMode.Advanced?_.c.CallInvitationMode.Advanced:_.c.CallInvitationMode.General,state:b,extendedData:Object(T.g)(w.payload),timeout:y,inviter:w.inviter,callDuration:0,userDuration:0,callUserMap:w.call_user_list.reduce(function(P,H){var Q=a.translateUserState(H,w.caller);return H.sub_code!=4&&Q!==_.c.CallUserState.Unknown&&(P[H.user_id]={userID:H.user_id,state:Q,extendedData:Object(T.g)(H.extended_data),acceptTime:H.accept_time,quitTime:H.quit_time,timeout:H.residue_timeout_time}),H.user_id==a.econf.user.userID&&(z=Q==_.c.CallUserState.Accepted&&H.user_session_id==a.econf.sessionID.toString()||!H.user_session_id),P},{})},a.dbCallMap.set(U.callID,U),c=="onConnected"&&((k=U.callUserMap[a.econf.user.userID])==null?void 0:k.state)==_.c.CallUserState.Timeout&&a.bus.emit(_.m.CallTimeout,{callID:U.callID,mode:U.mode}),U.caller==a.econf.user.userID&&z&&a.bus.emit(_.m.CallCreate,{callID:U.callID,mode:U.mode,caller:U.caller,extendedData:U.extendedData,timeout:U.timeout,createTime:U.createTime,callUserList:U.callUserMap?Object.values(U.callUserMap).map(function(P){return a.pickCallUser(P)}):[]}),a.queryCallInfo(U,!0,"merge1"))}),r+=h.list.length,h.nextFlag&&a.econf.token?a.fetchSvrCall(h.nextFlag,++s,f).then(i):(a.dbMgr.updateUserSeq((c!="hb"||r!=0)&&h.cur||h.max,_.z.cl,!0),R=Array.from(a.dbCallMap.values()),a.dbMgr.addCallList(R),c=="onConnected"&&r==0&&a.dbCallMap.forEach(function(w){w.state==_.c.CallState.Started&&a.queryCallInfo(w,!1,"onConnected")}),a.lg.i(g,"mergeSvrCalls",u))},this.fetchSvrCall(o,s,f).then(i))},m.prototype.fetchSvrCall=function(f,c,u){return this.cnMgr.send(_.d.cl_list,{cur_list_seq:f,count:100,full_pull:c,how:u},_.g.S).then(function(s){var r,i,a;return s.code?{cur:0,list:[]}:(r=s.cur_list_seq,i=s.max_list_seq,{nextFlag:(a=s.fetch_end)||i<=r||r<=f||i<=f?0:r,cur:r,max:i,list:s.calls,fetch_end:a})})},m.prototype.queryCallInfo=function(f,c,u,s){var r=this;f.state!=_.c.CallState.Ended&&this.cnMgr.send(_.d.cl_info,{call_id:f.callID,action:u},_.g.S).then(function(i){if(R=i.code)Object(T.m)(R)||R==1||(f.state=_.c.CallState.Ended,r.dbMgr.addCallList([f]));else{var a=[],o={},l=0,h=(c||r.diffCallUserState(f,i,u),i.user_list.forEach(function(D){var S,y;D.user_state!=4&&(S={userID:D.user_id,state:r.translateUserState(D,f.caller),extendedData:Object(T.g)(D.extended_data)},a.push(S),y=D.accept_time,o[S.userID]=E(E({},S),{acceptTime:y,quitTime:D.quit_time,timeout:D.residue_timeout_time}),y&&(l=l?Math.min(y,l):y),r.callSessionIDMap[f.callID]||(r.callSessionIDMap[f.callID]={}),r.callSessionIDMap[f.callID][S.userID]=D.user_session_id)}),o[r.econf.user.userID]),R=(o[f.caller]&&(o[f.caller].acceptTime=l),i.now_time),w=h&&h.acceptTime,d=(R&&w&&f.state==_.c.CallState.Started&&(f.userDuration=(R-w)/1e3|0),f.callUserMap=o,r.isSelfNotInCall(f)&&(f.state=_.c.CallState.Ended),{callID:f.callID,mode:f.mode,caller:f.caller,inviter:f.inviter,extendedData:f.extendedData,createTime:f.createTime,timeout:h.timeout,callUserList:a});if(c&&h)switch(h.state!=_.c.CallUserState.Inviting&&h.state!=_.c.CallUserState.Accepted&&h.state!=_.c.CallUserState.Received||i.user_list.forEach(function(D){(D=o[D.user_id]).state==_.c.CallUserState.Inviting&&D.timeout&&r.createReceiveTimeout(f.callID,D.userID,D.timeout)}),h.state){case _.c.CallUserState.Inviting:r.callAck(f.callID),f.state=_.c.CallState.Started,r.bus.emit(_.m.CallRecv,d);break;case _.c.CallUserState.Received:f.state=_.c.CallState.Started,s&&!s.some(function(D){return D.userID==h.userID})||r.bus.emit(_.m.CallRecv,d);break;case _.c.CallUserState.Timeout:f.state=_.c.CallState.Ended,r.bus.emit(_.m.CallTimeout,{callID:f.callID,mode:f.mode})}!c&&u=="merge0"&&(h==null?void 0:h.state)==_.c.CallUserState.Inviting&&h.timeout&&(r.callAck(f.callID),r.bus.emit(_.m.CallRecv,d),a.forEach(function(D){return r.createReceiveTimeout(f.callID,D.userID,h.timeout)})),c||u!="onConnected"||i.user_list.forEach(function(D){(D=o[D.user_id]).state!=_.c.CallUserState.Inviting&&D.state!=_.c.CallUserState.Received||r.createReceiveTimeout(f.callID,D.userID,D.timeout)}),r.dbMgr.addCallList([f])}})},m.prototype.diffCallUserState=function(f,c,u){var s=this,r={action:u,call:f.callID,userState:""},i=f.callUserMap,a=(a=i[this.econf.user.userID])==null?void 0:a.state,o=[],l="",h=(c.user_list.forEach(function(R){var w,d=i[R.user_id],D=(r.userState+=R.user_id+":"+R.user_state+",",s.translateUserState(R,f.caller));d&&d.state===D||(r[R.user_id]=(d==null?void 0:d.state)+","+D,w=Object(T.g)(R.extended_data),o.push({userID:R.user_id,state:D,extendedData:w}),d&&(d.state=D,d.extendedData=w)),R.user_id==s.econf.user.userID&&(l=R.user_session_id)}),o.find(function(R){return R.userID==s.econf.user.userID}));h&&h.state==_.c.CallUserState.Inviting&&this.bus.emit(_.m.CallRecv,{callUserList:f.callUserMap?Object.values(f.callUserMap).map(function(R){return s.pickCallUser(R)}):[],caller:f.caller,createTime:f.createTime,extendedData:f.extendedData,inviter:c.inviter,timeout:c.user_timeout,callID:f.callID,mode:c.mode}),h&&h.state==_.c.CallUserState.Timeout&&this.bus.emit(_.m.CallTimeout,{callID:f.callID,mode:f.mode}),c=o.find(function(R){return R.state==_.c.CallUserState.Cancelled&&R.userID!==(h==null?void 0:h.userID)}),u=="onLogined"&&h&&c&&this.bus.emit(_.m.CallCancel,{callID:f.callID,inviter:f.inviter,mode:f.mode,extendedData:c.extendedData}),u=this.isMainDevice(a,l),r.isMain=u,r.selfOldState=a,this.lg.i(g,"diffCallUserState",r),o.length&&u&&this.bus.emit(_.m.CallUserState,{callID:f.callID,callUserList:o})},m.prototype.callAck=function(f){var c=this,u={call_id:f},s=this.dbCallMap.get(f),r=s&&s.callUserMap[this.econf.user.userID];(r==null?void 0:r.state)===_.c.CallUserState.Inviting&&this.cnMgr.send(_.d.cl_ack,u,_.g.S).then(function(i){!i.code&&s&&r&&(r.state=_.c.CallUserState.Received,c.dbMgr.addCallList([s]),c.bus.emit(_.m.CallUserState,{callID:f,callUserList:[c.pickCallUser(r)]}))})},m.prototype.createInviteTimeout=function(f,c,u){var s=this,r=f+c;this.inviterTimer[r]&&clearTimeout(this.inviterTimer[r]),this.inviterTimer[r]=setTimeout(function(){var i=s.dbCallMap.get(f);!i||i.state==_.c.CallState.Ended&&i.mode==_.c.CallInvitationMode.Advanced||(i=i.callUserMap[c]).state!=_.c.CallUserState.Inviting&&i.state!=_.c.CallUserState.Received&&i.state!=_.c.CallUserState.NotYetReceived&&i.state!=_.c.CallUserState.Unknown||s.callCancel([c],f,{extendedData:""},_.f.Timeout)},1e3*u)},m.prototype.createReceiveTimeout=function(f,c,u){var s=this,r=f+c;this.receiveTimer[r]&&clearTimeout(this.receiveTimer[r]),this.receiveTimer[r]=setTimeout(function(){var i,a,o,l=s.dbCallMap.get(f);l&&l.state!==_.c.CallState.Ended&&((i=l.callUserMap[c]).state!=_.c.CallUserState.Received&&i.state!=_.c.CallUserState.Inviting||(i.state=_.c.CallUserState.Timeout),a=i.state==_.c.CallUserState.Timeout,(o=(o=s.callSessionIDMap[f])==null?void 0:o[s.econf.user.userID])&&o!=s.econf.sessionID.toString()||!a||s.bus.emit(_.m.CallUserState,{callID:f,callUserList:[s.pickCallUser(i)]}),c==s.econf.user.userID&&a&&(l.state=_.c.CallState.Ended,s.bus.emit(_.m.CallTimeout,{callID:l.callID,mode:l.mode})),s.dbMgr.addCallList([l]))},1e3*u)},m.prototype.translateUserState=function(f,c){var u=f.call_state_list||[],s=f.user_state||f.sub_code;return(s=(u=(u=u.sort(function(r,i){return r.start_version-i.start_version})).shift())?s||u.state:s)?s==1?_.c.CallUserState.Accepted:s==2?_.c.CallUserState.Rejected:s==3?f.user_id!=c?_.c.CallUserState.BeCancelled:_.c.CallUserState.Cancelled:s==5?_.c.CallUserState.Received:s==7?_.c.CallUserState.Quit:s==8?_.c.CallUserState.Ended:s==9?_.c.CallUserState.Timeout:s==10?_.c.CallUserState.NotYetReceived:_.c.CallUserState.Unknown:_.c.CallUserState.Inviting},m.prototype.calculateCallDuration=function(f){var c=0;Object.values(f.callUserMap).forEach(function(u){0<(u=u.acceptTime)&&(!c||u<c)&&(c=u)}),f.callDuration=c?(f.endTime-c)/1e3|0:0},m.prototype.pickCallUser=function(f){return{userID:f.userID,state:f.state,extendedData:f.extendedData}},m.prototype.encodeExtendedData=function(f){return(f=(f==null?void 0:f.extendedData)||"")?Object(T.j)(f):void 0},m.prototype.isSelfNotInCall=function(f,c){var u,s;return!!f.callUserMap&&(!(u=!(u=f.callUserMap[this.econf.user.userID])||u.state==_.c.CallUserState.Timeout||u.state==_.c.CallUserState.Cancelled||u.state==_.c.CallUserState.BeCancelled||u.state==_.c.CallUserState.Rejected||u.state==_.c.CallUserState.Quit)&&c&&(s={action:c,call:f.callID},Object.values(f.callUserMap).forEach(function(r){return s[r.userID]=r.state}),this.lg.i(g,"isSelfNotInCall",s)),u)},m.prototype.isMainDevice=function(f,c){return f==_.c.CallUserState.Accepted&&c==this.econf.sessionID.toString()||f==_.c.CallUserState.Received||f==_.c.CallUserState.Inviting||!c},m.prototype.getCallInfoFromDB=function(f){var c=this;return{callID:f.callID,caller:f.caller,mode:f.mode,state:f.state,inviter:f.inviter,extendedData:f.extendedData,createTime:f.createTime,endTime:f.endTime,callUserList:f.callUserMap?Object.values(f.callUserMap).map(function(u){return c.pickCallUser(u)}):[]}},m.prototype.checkCallAPI=function(f,c,u){},m);function m(f,c,u,s){this.lg=O.a.getInstance().lg,this.dbCallMap=new Map,this.receiveTimer={},this.inviterTimer={},this.timerMap={inviting:0,inviting2:0,invited:0},this.callSessionIDMap={},this.econf=f,this.bus=c,this.cnMgr=u,this.dbMgr=s,this.registerInnerEvent()}},function(te,j,C){C.d(j,"a",function(){return A});var O=C(2),T=C(1),_=C(0),E=C(66),g=function(){return(g=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var r in c=arguments[u])Object.prototype.hasOwnProperty.call(c,r)&&(f[r]=c[r]);return f}).apply(this,arguments)},x=_.v.Connection,A=(m.prototype.destroy=function(){this.onLogout(),this.connection&&this.connection.destroy(),clearInterval(this.rspTimer),clearInterval(this.qpsStgy.timer),this.lg=null,this.dr=null,this.pb=null,this.econf=null,this.connection=null},m.prototype.onLogout=function(){this.requestMap.clear(),this.qpsStgy.timeoutMap.clear(),this.qpsStgy.requestList.length=0,this.timeoutCount=0,this.timeoutRetry=!1},m.prototype.initEvent=function(f,c,u){this.onConnectedEvent=f,this.onDisConnectedEvent=c,this.onPushEvent=u},m.prototype.create=function(f,c){return c===void 0&&(c=!1),!f&&this.connection&&this.connection.isOpen?Promise.resolve():(this.connection||((f=new E.a(this.bus,this.econf)).onconnected=this.onConnectedEvent,f.ondisconnected=this.onDisConnectedEvent,f.onmessage=this.onmessage,this.connection=f),this.initUrls(),this.initSessionID(),f=0<this.st.streamID?this.pb.encodeCloseStream(this.st.streamID):void 0,this.st.streamID+=2,this.connection.create(this.urls,c,this.st.streamID,f))},m.prototype.close=function(f){this.connection&&(0<f&&this.connection.isReady()&&this.connection.closeStream(this.pb.encodeCloseStream(f)),this.st.streamID<=f)&&this.connection.close(!0)},m.prototype.stop=function(){this.connection&&this.connection.stop()},m.prototype.sendDispatch=function(f){var c,u;this.connection&&this.connection.isReady()&&(c=new Date,u=++this.seq,f=this.pb.encodeHubGetAppConf(u,this.econf,f),this.connection.send(f),this.requestMap.set(u,{log:{time:c,seq:u,cmd:"AccesshubGetAppConfig"}}),u=++this.seq,f=this.pb.encodeHubDispatch(u,this.econf),this.connection.send(f),this.requestMap.set(u,{log:{time:c,seq:u,cmd:"AccesshubDispatch"}}),u=++this.seq,f=this.pb.encodeHubGetSvrAddr(u,this.econf),this.connection.send(f),this.requestMap.set(u,{log:{time:c,seq:u,cmd:"AccesshubGetSvraddr"}}))},m.prototype.sendHttp=function(f,c,u){var s,r=this;return this.connection&&this.connection.isReady()?(s=++this.seq,u=this.pb.encodeHubHTTP(s,this.econf,f,c,u),this.connection.send(u),new Promise(function(i){var a={time:new Date,seq:s,rsize:0,cmd:"AccesshubHTTP",http:f,body:c};r.requestMap.set(s,{log:a,resolve:i})})):Promise.resolve(Object(T.y)(6000104))},m.prototype.send=function(f,c,u,s,r){u===void 0&&(u=_.g.A),s===void 0&&(s=this.econf.cloudSetting.req_to.def),r===void 0&&(r=!0),u==_.g.S&&(s*=2);var i=this.econf.token||f.cmd==_.d.sw_login.cmd?0:6000121;return!i&&this.connection&&this.connection.isReady()?f.w==_.e.H1||this.canPass()?this.sendInner(f.cmd,c,u,s,r,f):this.createQPSReq(f,c,u,s,r):Promise.resolve(this.createNoneNetworkErr(f.cmd,i))},m.prototype.sendHB=function(f,c){var u=this.econf.token?0:6000121;return!u&&this.connection&&this.connection.isReady()?this.sendInner(f.cmd,c,_.g.S,this.econf.cloudSetting.req_to.def,!1,f):Promise.resolve(this.createNoneNetworkErr(f.cmd,u))},m.prototype.sendNoRsp=function(f,c,u){u===void 0&&(u=_.g.S),this.connection&&this.connection.isReady()&&(f=this.generateHeader(++this.seq,f,u,_.e.H1),u=this.pb.encodeReq(f,c,this.econf),this.connection.send(u))},m.prototype.responseReq=function(f,c,u){return this.requestMap.has(f)?(c&&(this.requestMap.get(f).resolve({code:u}),this.requestMap.delete(f)),f):0},m.prototype.fetchSvrUsers=function(f,c){var u=this;if(!(f=f.length?f.filter(function(a){return!!a}):f).length)return Promise.resolve();for(var s=[],r=0;r<f.length;r+=100){var i=this.send(_.d.user_fetch,{_ev_:c,user_ids:f.slice(r,r+100)},_.g.S);s.push(i)}return Promise.all(s).then(function(a){var o=[];a.forEach(function(l){(l=l.result)&&l.length&&l.forEach(function(h){var R=h.user_id,w=Object(T.g)(h.user_name),d=Object(T.g)(h.avatar),D={userID:R,userName:w,userAvatarUrl:d,extendedData:Object(T.g)(h.extra)};D=Object(T.x)(D,u.econf,h.updated_at),(h=(o.push(D),u.econf.syncUserTask.delete(R),u.econf.dbConvMap.get(u.econf.user.userID+"0"+R)))&&(h.conversationName=w,h.conversationAvatarUrl=d)})}),u.dbMgr.addUserList(o)})},m.prototype.initUrls=function(){if(!this.urls.length){var f=this.st.advancedConfig.geoFence.host.accesshub;if(f)this.urls[0]=f;else{this.urls[0]=this.st.advancedConfig.geoFence.hostMap[1].host.accesshub;try{var c=T.p?T.p.getStorageSync(T.p._zisAlipay?{key:this.urlKey}:this.urlKey):localStorage.getItem(this.urlKey);c&&(typeof c!="object"||c.data)&&(this.urls=O.a.getInstance().crypto.decryptString(typeof c=="object"?c.data:c,this.econf).split(","))}catch{}}}},m.prototype.saveUrls=function(){if(this.urls.length){var f=O.a.getInstance().crypto.encryptString(this.urls.join(","),this.econf);if(T.p)T.p._zisAlipay?T.p.setStorageSync({key:this.urlKey,data:f}):T.p.setStorageSync(this.urlKey,f);else try{localStorage.setItem(this.urlKey,f)}catch{}}},m.prototype.initSessionID=function(){try{var f,c,u=T.p?T.p.getStorageSync(T.p._zisAlipay?{key:this.sessionKey}:this.sessionKey):localStorage.getItem(this.sessionKey);u&&(typeof u!="object"||u.data)&&(c=(f=typeof u=="object"?u.data:u).indexOf("_"),f.substring(c+1)==this.econf.user.userID)&&(this.sessionID=f.substring(0,c))}catch{}},m.prototype.saveSessionID=function(){var f=this.econf.sessionID+"_"+this.econf.user.userID;if(T.p)T.p._zisAlipay?T.p.setStorageSync({key:this.sessionKey,data:f}):T.p.setStorageSync(this.sessionKey,f);else try{localStorage.setItem(this.sessionKey,f)}catch{}},m.prototype.initTimer=function(){var f=this;this.rspTimer=setInterval(function(){if(!f.lg)return clearInterval(f.rspTimer);var c=Date.now();f.requestMap.forEach(function(u,s){var r=c-u.time;0<u.time&&r>=u.timeout&&(f.qpsStgy.timeoutMap.set(s,u.time),!T.p&&/Android|iPhone|iPad|iPod/i.test(T.i)&&2<f.timeoutCount&&!f.timeoutRetry?(f.lg&&f.lg.w(x,"reconn","timeout: "+f.timeoutCount),f.timeoutCount=0,f.timeoutRetry=!0,f.create(!0).then(function(){f.timeoutCount=0,f.timeoutRetry=!1})):f.timeoutCount++,f.handleTimeoutLog(u,s,r),f.requestMap.delete(s))})},1e3*Math.ceil(this.econf.cloudSetting.req_to.def/2e3)),this.qpsStgy.timer=setInterval(function(){if(!f.lg)return clearInterval(f.qpsStgy.timer);f.qpsStgy.requestList.sort(function(o,l){return l.w+3*l.caller_type-o.w-3*o.caller_type});var c=f.qpsStgy.requestList[0],u=0,s=f.econf.cloudSetting.qps_token.step,r=c&&c.caller_type==_.g.S&&30<f.qpsStgy.requestList.length,i=r&&c.w==_.e.L&&10<f.timeoutCount;for(r&&(s=2*(c.w+1));f.qpsStgy.requestList.length&&u<s&&!i;){var a=f.qpsStgy.requestList[0];if(!(a&&0<f.qpsStgy.tokenCount)||(u++,f.sendQPSReq(a.seq)&&(f.qpsStgy.tokenCount--,f.qpsStgy.requestList.shift()),f.qpsStgy.tokenCount<1))break}u&&(r=f.qpsStgy.requestList.length,c=c.seq+c.cmd,f.lg.w(x,"QPS",{token:f.qpsStgy.tokenCount,reqs:r,count:u,step:s,seq:c})),(u||f.qpsStgy.tokenCount<1)&&(f.qpsStgy.tokenCount+=f.econf.cloudSetting.qps_token.step),f.qpsStgy.tokenCount>f.econf.cloudSetting.qps_token.max&&(f.qpsStgy.tokenCount=f.econf.cloudSetting.qps_token.max)},100)},m.prototype.sendInner=function(f,c,u,s,r,i){var a=this,o=(l=this.generateHeader(++this.seq,f,u,_.e.H1)).seq,l=(f==_.d.sw_login.cmd&&(c._seq=o),this.dr.beginNetworkReq(f,o,u,c),this.pb.encodeReq(l,c,this.econf)),h=(this.connection.send(l),r?{time:new Date,seq:o,caller:u,timeout:void 0,size:l.length,rsize:0,cmd:f,body:c}:null);return new Promise(function(R){R={req:i,time:Date.now(),timeout:s,log:h,resolve:R},a.requestMap.set(o,R)})},m.prototype.sendQPSReq=function(f){var c=this.requestMap.get(f);if(!c||!this.connection||!this.connection.isReady())return!1;c.time=Date.now();var u=c.header;return this.dr.beginNetworkReq(u.cmd,f,u.caller_type,c.body),f=this.pb.encodeReq(u,c.body,this.econf),this.connection.send(f),!0},m.prototype.createQPSReq=function(f,c,u,s,r){var i=this,a=f.cmd,o=this.generateHeader(++this.seq,a,u,f.w),l=o.seq,h=(a==_.d.sw_login.cmd&&(c._seq=l),this.qpsStgy.requestList.push(o),r?{time:new Date,w:f.w,seq:l,caller:u,timeout:void 0,size:0,rsize:0,cmd:a,body:c}:null);return new Promise(function(R){i.requestMap.set(l,{time:0,timeout:s,log:h,resolve:R,req:f,header:o,body:c})})},m.prototype.handleHubPCDownwardMessage=function(f){var c,u,s,r,i,a,o,l,h=this,R=(d=function(y,k){var b=typeof Symbol=="function"&&y[Symbol.iterator];if(!b)return y;var U,z,P=b.call(y),H=[];try{for(;(k===void 0||0<k--)&&!(U=P.next()).done;)H.push(U.value)}catch(Q){z={error:Q}}finally{try{U&&!U.done&&(b=P.return)&&b.call(P)}finally{if(z)throw z.error}}return H}(this.pb.decodeRspHeader(f),2))[0],w=d[1],d=R.seq,D=this.swPushCmdList.indexOf(R.cmd)!=-1,S=f.byteLength;D?(d>this.seq&&(this.seq=d),this.timeoutCount=0,c=R.cmd,u={time:0,seq:d,size:S,cmd:c,subs:void 0,body:1},this.econf.cryptoConfig.key2?(u.body=void 0,this.handlePushEvent(c,f,w,u)):setTimeout(function(){return h.handlePushEvent(c,f,w,u)},16)):(D=Date.now(),(o=this.requestMap.get(d))?(this.timeoutCount=0,s=R.cmd.replace("_rsp",""),r=this.pb.decodeRspBody(f,s,w,this.econf),this.setFileProxyHost(s,r),s===_.d.sw_login.cmd&&(r.rspHeader=R),i=o.resolve,a=o.log,o=o.time,(a||r.code)&&(l=null,a?(a.rsize=S,a.rbody=r,a.hasOwnProperty("w")&&o&&(a.w+=","+(D-o))):l={seq:d,rsize:S,cmd:s,rbody:r},r.code?this.lg.w(x,_.u.SCMD,a||l):this.lg.i(x,_.u.SCMD,a||l)),Object(_.A)(r.code)||this.dr.endNetworkReq(s,d,r),r.code==50012&&this.onConnectedEvent(!0),this.requestMap.delete(d),i(r)):(a={seq:d,timeout:o=(o=this.qpsStgy.timeoutMap.get(d))&&D-o,cmd:R.cmd,rsize:S,seqs:this.requestMap.size},this.lg.w(x,_.u.SCMD,a)))},m.prototype.handlePushEvent=function(f,c,u,s){var r,i,a,o;c=this.pb.decodeRspBody(c,f,u,this.econf),f==_.d.swp_list.cmd&&c.push_requests&&c.push_requests[0]&&(a=(u=c.push_requests[0]).sub_cmd,r=u.sender_user_id,i=u.msg_id,u=u.msg_body,s.time=this.st.getRealClientTimestamp()-c.send_time,s.cmd=a,s.body={d:s.body,qos:c.qos_flag||void 0,stime:c.send_time,suid:r,msg_id:i,msg_body:u},1<(a=c.push_requests.length))&&(o={len:a},c.push_requests.forEach(function(l){o[l.sub_cmd]=(o[l.sub_cmd]||0)+1}),s.subs=o),this.lg.i(x,_.u.PCMD,s),c.subCmds||this.onPushEvent(f,c,s.time)},m.prototype.handleHubHTTPRsp=function(f){var c=f.txid;if(c&&this.requestMap.has(c)){var u=(s=this.requestMap.get(c)).resolve,s=s.log,r={};if(f.body&&f.body.length){s.rsize=f.body.length;try{r=JSON.parse(Object(T.g)(f.body))}catch{}}s.rbody=r,this.lg.i(x,_.u.SCMD,s),this.requestMap.delete(c),u(r)}},m.prototype.handleHubRsp=function(f){var c,u=f.txid;return!!this.requestMap.has(u)&&((c=this.requestMap.get(u).log).rbody=f,this.lg.i(x,_.u.SCMD,c),this.requestMap.delete(u),!f.code)},m.prototype.handleHubLog=function(f,c,u){this.lg.i(x,_.u.PCMD,{type:f,cmd:"Accesshub"+(u=u===void 0?"":u),res:c}),f!=19&&f!=20&&f!=30||this.onPushEvent("Accesshub",g({_type:f},c),0)},m.prototype.generateHeader=function(f,c,u,s){return{cmd:c,seq:f,timestamp:Date.now(),product:2,flags:[1],caller_type:u,w:s,app_id:this.econf.appID,user_id:this.econf.user.userID,session_id:this.econf.sessionID,user_nid:this.econf.serverUserID,controls:this.econf.controls}},m.prototype.setFileProxyHost=function(f,c){var u,s=this.st.advancedConfig.geoFence.host.fileproxy;s&&!c.code&&(u=this.st.advancedConfig.geoFence.reg,f==_.d.file_upload.cmd?c.upload_req.url=c.upload_req.url.replace(u,s+"$4"):f==_.d.file_process.cmd&&(c.download_url=c.download_url.replace(u,s+"$4")))},m.prototype.replaceDomain=function(f){var c=f.logreport,u=f.detaillog,s=(f=f.zimfile,this.st.advancedConfig.geoFence.host);c&&(s.logreport="wss://"+c+"/zglog/web"),u&&(s.detaillog="https://"+u),f&&(s.fileproxy="https://"+f)},m.prototype.createNoneNetworkErr=function(f,c){return Object(T.y)(c||6000104,f.replace(/\/im\/(usermail\/)?/,""))},m.prototype.canPass=function(){return 0<this.qpsStgy.tokenCount&&(this.qpsStgy.tokenCount--,!0)},m.prototype.handleTimeoutLog=function(f,c,u){var s=f.log;(u=(s&&(s.rsize=void 0,s.timeout=this.timeoutCount+","+u,this.lg.w(x,_.u.SCMD,s)),Object(T.y)(6000105))).seq=c,f.req&&this.dr.endNetworkReq(f.req.cmd,c,u),f.resolve&&f.resolve(u)},m);function m(f,c,u){var s=this;this.urls=[],this.sessionID="",this.seq=0,this.urlKey="",this.sessionKey="",this.timeoutCount=0,this.timeoutRetry=!1,this.rspTimer=0,this.requestMap=new Map,this.swPushCmdList=[_.d.swp_list.cmd,_.d.swp_kickout.cmd,_.d.swp_redirect.cmd],this.lg=O.a.getInstance().lg,this.dr=O.a.getInstance().dr,this.pb=O.a.getInstance().pb,this.st=O.a.getInstance().st,this.qpsStgy={timeoutMap:new Map,requestList:[],timer:0,tokenCount:50},this.onmessage=function(r){try{var i,a,o=T.p&&r.data.isBuffer?Object(T.b)(r.data.data):new Uint8Array(r.data),l=(o[2]<<8)+o[3],h=s.pb.decodeHubRsp(l,o)||{};switch(l){case 21:s.handleHubPCDownwardMessage(h);break;case 5:s.handleHubHTTPRsp(h);break;case 40:s.handleHubRsp(h)&&(1<=(i=h.geofencing_id)&&i<=7&&i!=s.st.advancedConfig.geoFence.id&&s.st.setHost(i),s.replaceDomain(h),(a=s.st.advancedConfig.geoFence.host.accesshub)&&(s.urls[1]=a),s.saveUrls());break;case 27:s.handleHubRsp(h)&&h.wss_groups[0]&&(a=h.wss_groups[0].host,s.st.advancedConfig.geoFence.dispatch.host=a,s.urls[0]="wss://"+a+"/accesshub",s.saveUrls());break;case 24:s.handleHubRsp(h)&&(s.st.advancedConfig.geoFence.dispatch.domain=h.domain);break;case 3:s.handleHubLog(l,h,"CloseConnection"),s.onDisConnectedEvent(!0);break;case 22:s.handleHubLog(l,h,"Redirect");var R=h.wss_groups.map(function(w){return"wss://"+w.host+"/accesshub"});R.length&&s.onPushEvent(_.d.swp_redirect.cmd,{user_ids:R},0);break;default:s.handleHubLog(l,h)}}catch{}},this.econf=f,this.bus=c,this.dbMgr=u,this.urlKey="z_AccesshubURL_"+this.econf.appID,this.sessionKey="z_AccesshubSession_"+this.econf.appID,O.a.getInstance().crypto.generateAppIDKey(this.econf),this.initTimer()}},function(te,j,C){C.d(j,"a",function(){return g});var O=C(2),T=C(1),_=C(0),E=_.v.Connection,g=(x.prototype.destroy=function(){this.close(!0),this.bus.remove(_.m.INetworkChange)},x.prototype.create=function(A,m,f,c){var u=this;return this.streamID=f,this.streamBody=c,this.urls=A,this.urlIndex=0,this.retryCount=0,this.retryTotalTime=0,this.isConnecting=!1,this.initDelayTask(),this.close(!1,!!c),new Promise(function(s,r){u.createSocket(m,s,r),u.loginParams[0]=m,u.loginParams[1]=s,u.loginParams[2]=r})},x.prototype.stop=function(){this.isConnecting=!1,this.delayTaskList.length=0,this.unlimited_retry=0,this.retryTimer&&clearTimeout(this.retryTimer)},x.prototype.close=function(A,m){return this.isOpen=!1,A&&this.stop(),!!this.socket&&(T.p?(T.p._zim_isAlipay?(this.socket.offMessage(),this.socket.offOpen(),this.socket.offClose(),this.socket.offError()):(this.socket.onMessage(function(){}),this.socket.onOpen(function(){}),this.socket.onClose(function(){}),this.socket.onError(function(){})),!A&&m?setTimeout(function(f){return f&&f.close()},150,this.socket):this.socket.close()):(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,!A&&m?setTimeout(function(f){f&&(f.onmessage=null,f.close(1e3))},150,this.socket):(this.socket.onmessage=null,this.socket.close(1e3))),this.socket=null,this.reportLog({id:this.streamID,seq:this.seq,event:"close",delay:m}),!0)},x.prototype.closeStream=function(A){A&&(this.reportLog({id:A.streamID,seq:this.seq,event:"closeStream"}),this.send(A.data))},x.prototype.send=function(A){var m;this.socket&&(T.p?(m=T.p._zim_isAlipay?Object(T.c)(A):A.buffer,this.socket.send({data:m,isBuffer:!0})):this.socket.send(A))},x.prototype.isReady=function(){return!!this.socket&&(T.p?this.isOpen:this.socket.readyState==1)},x.prototype.createSocket=function(A,m,f){var c=this,u=++this.seq;if(T.p)try{this.socket=T.p.connectSocket({url:this.urls[this.urlIndex]+"?zim="+u,multiple:!0})}catch{}else try{this.socket=new WebSocket(this.urls[this.urlIndex]+"?zim="+u),this.socket.binaryType="arraybuffer"}catch{}function s(){c.isOpen=!0,c.isConnecting=!1,c.retryCount=0,c.retryTotalTime=0,c.urlIndex=0,c.loginParams.length=0;var i=!m,a=c.initDelayTask(),o=c.econf.cloudSetting.retry.login_max_itvl;a={id:c.streamID,seq:u,event:"conn",isReconnect:i,total:a,max:o},c.reportLog(a),c.closeStream(c.streamBody),c.onconnected(i),m&&m(),m=void 0}function r(i){!c.isConnecting&&c.socket&&(c.isConnecting=!0,c.reconnect(u,i,A,m,f))}T.p?(this.socket.onMessage(this.onmessage),this.socket.onOpen(s),this.socket.onClose(r),this.socket.onError(r)):(this.socket.onmessage=this.onmessage,this.socket.onopen=s,this.socket.onclose=r,this.socket.onerror=r)},x.prototype.reconnect=function(A,m,f,c,u){var s=this,r=(m=m&&m.type?{code:m.code||6000104,message:m.reason||"Socket "+m.type}:m,this.econf.cloudSetting.req_to.login),i=this.delayTaskList.shift()||this.unlimited_retry;!i||f&&0<r&&this.retryTotalTime>r?(r={id:this.streamID,seq:A,event:"disconn",count:this.retryCount,time:this.retryTotalTime},this.reportLog(r),this.isOpen=!1,this.isConnecting=!1,this.retryCount=0,this.retryTotalTime=0,this.urlIndex=0,this.loginParams.length=0,this.stop(),this.ondisconnected(!0),u&&u(m),u=void 0):(this.ondisconnected(!1),this.retryTimer=setTimeout(function(){s.isOpen=!1,s.isConnecting=!1,s.retryTotalTime+=i,s.urlIndex=(s.urlIndex+1)%s.urls.length;var a=++s.retryCount,o=s.retryTotalTime;a={id:s.streamID,seq:A,event:"reconn",delay:i,count:a,time:o,reason:m},s.reportLog(a),s.close(!1),s.createSocket(f,c,u)},i))},x.prototype.initDelayTask=function(){var A=this.econf.cloudSetting.retry.login_max_itvl,m=A<0?3e5:1e3*A;if((this.unlimited_retry=0)==A)return this.delayTaskList.length=0;for(var f=500+Math.floor(1500*Math.random()),c=(this.delayTaskList=[f],0),u=f;u<m;){var s=Math.min(2e3*Math.pow(2,c),32e3);u+=s,this.delayTaskList.push(s),u<m&&(u+=s,this.delayTaskList.push(s)),c++}return A<0?(this.unlimited_retry=this.delayTaskList[this.delayTaskList.length-1],-1):u},x.prototype.reportLog=function(A){O.a.getInstance().lg.w(E,"reconn",A),O.a.getInstance().dr.reportSDKEvent("/sdk/conn",{error_message:JSON.stringify(A)})},x);function x(A,m){var f=this;this.bus=A,this.econf=m,this.isOpen=!1,this.seq=0,this.streamID=0,this.streamBody=void 0,this.urls=[],this.urlIndex=0,this.isConnecting=!1,this.unlimited_retry=0,this.retryCount=0,this.retryTotalTime=0,this.retryTimer=0,this.delayTaskList=[],this.loginParams=[],this.onNetworkChange=function(c,u){var s,r;c=="fetchSetting"?(s=f.initDelayTask(),r=f.econf.cloudSetting.retry.login_max_itvl,O.a.getInstance().lg.i(E,c,{event:"resetRetry",total:s,login_max_itvl:r})):c&&(f.delayTaskList[0]||f.unlimited_retry)&&(f.isConnecting=!0,f.delayTaskList.unshift(100),f.retryTimer&&clearTimeout(f.retryTimer),f.reconnect.apply(f,function(i,a,o){if(arguments.length===2)for(var l,h=0,R=a.length;h<R;h++)!l&&h in a||((l=l||Array.prototype.slice.call(a,0,h))[h]=a[h]);return i.concat(l||Array.prototype.slice.call(a))}([f.seq,"NetworkChange:"+u],function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var l,h,R=o.call(i),w=[];try{for(;(a===void 0||0<a--)&&!(l=R.next()).done;)w.push(l.value)}catch(d){h={error:d}}finally{try{l&&!l.done&&(o=R.return)&&o.call(R)}finally{if(h)throw h.error}}return w}(f.loginParams),!1)))},A.add(_.m.INetworkChange,this.onNetworkChange)}},function(te,j,C){C.d(j,"a",function(){return R}),j=C(4);var O=C.n(j),T=C(2),_=C(68),E=C(1),g=C(0),x=C(70),A=C(71),m=C(72),f=function(){return(f=Object.assign||function(d){for(var D,S=1,y=arguments.length;S<y;S++)for(var k in D=arguments[S])Object.prototype.hasOwnProperty.call(D,k)&&(d[k]=D[k]);return d}).apply(this,arguments)},c=function(d,D,S,y){return new(S=S||Promise)(function(k,b){function U(H){try{P(y.next(H))}catch(Q){b(Q)}}function z(H){try{P(y.throw(H))}catch(Q){b(Q)}}function P(H){var Q;H.done?k(H.value):((Q=H.value)instanceof S?Q:new S(function(J){J(Q)})).then(U,z)}P((y=y.apply(d,[])).next())})},u=function(d,D){var S,y,k,b={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]},U={next:z(0),throw:z(1),return:z(2)};return typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function z(P){return function(H){var Q=[P,H];if(S)throw new TypeError("Generator is already executing.");for(;b=U&&Q[U=0]?0:b;)try{if(S=1,y&&(k=2&Q[0]?y.return:Q[0]?y.throw||((k=y.return)&&k.call(y),0):y.next)&&!(k=k.call(y,Q[1])).done)return k;switch(y=0,(Q=k?[2&Q[0],k.value]:Q)[0]){case 0:case 1:k=Q;break;case 4:return b.label++,{value:Q[1],done:!1};case 5:b.label++,y=Q[1],Q=[0];continue;case 7:Q=b.ops.pop(),b.trys.pop();continue;default:if(!(k=0<(k=b.trys).length&&k[k.length-1])&&(Q[0]===6||Q[0]===2)){b=0;continue}if(Q[0]===3&&(!k||Q[1]>k[0]&&Q[1]<k[3]))b.label=Q[1];else if(Q[0]===6&&b.label<k[1])b.label=k[1],k=Q;else{if(!(k&&b.label<k[2])){k[2]&&b.ops.pop(),b.trys.pop();continue}b.label=k[2],b.ops.push(Q)}}Q=D.call(d,b)}catch(J){Q=[6,J],y=0}finally{S=k=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}}},s=function(d,D){var S=typeof Symbol=="function"&&d[Symbol.iterator];if(!S)return d;var y,k,b=S.call(d),U=[];try{for(;(D===void 0||0<D--)&&!(y=b.next()).done;)U.push(y.value)}catch(z){k={error:z}}finally{try{y&&!y.done&&(S=b.return)&&S.call(b)}finally{if(k)throw k.error}}return U},r=function(d,D,S){if(arguments.length===2)for(var y,k=0,b=D.length;k<b;k++)!y&&k in D||((y=y||Array.prototype.slice.call(D,0,k))[k]=D[k]);return d.concat(y||Array.prototype.slice.call(D))},i=g.v.Conversation,a=6000001,o=6000121,l=6000602,h=6000603,R=(w.prototype.destroy=function(){this.onLogout(),this.cnMgr=null,this.gpMgr=null,this.bus=null,this.lg=null,this.econf=null,this.stgyMgr=null},w.prototype.onLogout=function(){var d=[];this.econf.dbConvMap.forEach(function(D){D.type==g.c.ConversationType.Room&&(D.maxSeq=0,D.msgSeq=0,D.maxOrderKey=0,D.roomSessionID="",d.push(D))}),d.length&&this.dbMgr&&this.dbMgr.addConversationList(d),this.stgyMgr.stop(),this.econf.dbConvMap.clear(),this.econf.dbGroupMap.clear(),this.econf.msgExtraMap.clear(),this.convMap.forEach(function(D){return D.destroy()}),this.convMap.clear(),this.selfReceiptSeqs.length=0,this.mergeMsgReceiptSeqs.clear(),this.mergeMsgReceiptMap.clear(),this.mergeMsgReceiptDBConvMap.clear(),this.msgReceiptChangedMap.clear(),clearTimeout(this.mergeMsgReceiptTimer),this.mergeMsgReceiptTimer=0,this.isLogined=!1,this.oldTotalUnreadCount=0,this.svrConvAttrMap.pin.clear(),this.svrConvAttrMap.mute.clear(),this.svrConvAttrMap.mark.clear(),this.st.queryMsgSeq=0,this.querySeqMap.conv=0,this.querySeqMap.pin=0,this.queryConvsTasks.length=0},w.prototype.queryUsers=function(d,D){var S,y,k,b,U=this;return this.dbMgr&&this.cnMgr&&this.econf?(S=new Map,d=d.filter(function(z){return!!Object(E.n)(z)||(S.set(z,{userID:z,reason:a}),!1)}),k=(d=Array.from(new Set(d))).filter(function(z){return!U.econf.dbUserMap.has(z)}),b=d.length-k.length,y={time:new Date,config:D,queryCount:d.length,dbCount:b},k.length!=0||D&&D.isQueryFromServer?(D={user_ids:(b=D&&D.isQueryFromServer?g.g.A:g.g.S)?d:k},this.cnMgr.send(g.d.user_fetch,D,b).then(function(z){var P=z.code||0,H=(P&&(y.error=Object(E.y)(6000007,z.message,z.code),P=y.error.code),z.result),Q=((z=z.err_list)&&z.length&&z.forEach(function(L){S.set(L.user_id,{userID:L.user_id,reason:L.sub_code})}),new Map),J=(H&&H.length&&(H.forEach(function(L){var q=L.user_id,B=Object(E.g)(L.user_name),Y=Object(E.g)(L.avatar),K=Object(E.g)(L.extra);Q.set(q,{baseInfo:{userID:q,userName:B,userAvatarUrl:Y},extendedData:K}),q={userID:q,userName:B,userAvatarUrl:Y,extendedData:K},Object(E.x)(q,U.econf,L.updated_at),q.userID==U.econf.user.userID&&(B=U.econf.user,Y=L.user_info_seq)&&B.userInfoSeq<Y&&(B.userInfoSeq=Y)}),U.dbMgr.addUserList(Array.from(U.econf.dbUserMap.values()))),P&&P!=6000012&&d.forEach(function(L){var q;Q.has(L)||((q=U.econf.dbUserMap.get(L))?Q.set(L,{baseInfo:{userID:q.userID,userName:q.userName,userAvatarUrl:q.userAvatarUrl},extendedData:q.extendedData}):S.has(L)||S.set(L,{userID:L,reason:P}))}),new Map);return U.econf.dbConvMap.forEach(function(L){var q,B=L.type==g.c.ConversationType.Peer&&Q.get(L.conversationID);B&&L.state==g.j.Normal&&(q=(B=B.baseInfo).userName,B=B.userAvatarUrl,L.conversationName!=q&&(L.conversationName=q,J.set(L.conversationID,L)),L.conversationAvatarUrl!=B)&&(L.conversationAvatarUrl=B,J.set(L.conversationID,L))}),U.emitConvUpdate(Array.from(J.values()),"queryUsers"),y.count=Q.size,U.lg.i(g.v.User,g.u.QueryUsers,y),Q.size==0?Promise.reject(y.error):{userList:Array.from(Q.values()),errorUserList:Array.from(S.values())}})):(k=d.map(function(z){return{baseInfo:{userID:(z=U.econf.dbUserMap.get(z)).userID,userName:z.userName,userAvatarUrl:z.userAvatarUrl},extendedData:z.extendedData}}),this.lg.i(g.v.User,g.u.QueryUsers,y),Promise.resolve({userList:k,errorUserList:Array.from(S.values())}))):Promise.reject(Object(E.y)(o,g.u.QueryUsers))},w.prototype.query=function(d,D){var S=this;return this.dbMgr&&this.cnMgr&&this.econf?new Promise(function(y,k){var b=Array.from(S.econf.dbConvMap.values()).find(function(U){return U.conversationID==d&&U.type==D});b&&S.isValidConv(b)?(S.lg.i(i,g.u.QueryConv,d+","+b.unreadMessageCount),y({conversation:Object(E.s)(g.h.convKeys,b)})):(y=Object(E.y)(h),S.lg.w(i,g.u.QueryConv,{error:y,convID:d,type:D}),k(y))}):Promise.reject(Object(E.y)(o,g.u.QueryConv))},w.prototype.queryList=function(d,D){var S,y=this;return this.dbMgr&&this.cnMgr&&this.econf?(S=(D==null?void 0:D.marks)||[]).length&&!S.every(function(k){return-1<=k&&k<=64})?(S={marks:S,error:Object(E.y)(a,"There are illegal values in the marks.")},this.lg.w(i,g.u.QueryConvs,S),Promise.reject(S.error)):d.count<1?Promise.resolve({conversationList:[]}):new Promise(function(k){var b,U={seq:++y.querySeqMap.conv,time:new Date,logined:y.isLogined,queryCount:d.count,count:0,option:D};y.isLogined?(b=function(z){(z=z.filter(function(P){var H=y.filterValidConv(P);return H&&y.createInstance(P.conversationID,P.type),H})).sort(function(P,H){return H.orderKey-P.orderKey}),y.handleQueryConvsCallback(z,{option:D,config:d,log:U,resolve:k})},y.econf.isDBLoaded&&y.econf.dbConvMap.size?b(Array.from(y.econf.dbConvMap.values())):y.dbMgr.getBeanListByOwnerID(g.l.Conv).then(function(z){z.forEach(function(P){P.isDisabled||(P.isDisabled=!1),P.mutedExpiredTime||(P.mutedExpiredTime=0),P.marks||(P.marks=[]),P.mentionedInfoList||(P.mentionedInfoList=[]),y.updateConvOrderKey(P)}),b(z)})):y.queryConvsTasks.push({option:D,config:d,log:U,resolve:k})}):Promise.reject(Object(E.y)(o,g.u.QueryConvs))},w.prototype.queryPinneds=function(d){var D=this;return this.dbMgr&&this.cnMgr&&this.econf?d.count<1?Promise.resolve({conversationList:[]}):new Promise(function(S){var y,k={seq:++D.querySeqMap.pin,time:new Date,logined:D.isLogined,queryCount:d.count,count:0};D.isLogined?((y=Array.from(D.econf.dbConvMap.values()).filter(function(b){var U=D.filterValidConv(b,!0);return U&&D.createInstance(b.conversationID,b.type),U})).sort(function(b,U){return U.orderKey-b.orderKey}),D.handleQueryConvsCallback(y,{isPinned:!0,config:d,log:k,resolve:S})):D.queryConvsTasks.push({isPinned:!0,config:d,log:k,resolve:S})}):Promise.reject(Object(E.y)(o,g.u.QueryPinneds))},w.prototype.queryUnreadCount=function(d){var D,S,y,k,b,U,z,P,H=this;return this.dbMgr&&this.cnMgr&&this.econf?(D=(d==null?void 0:d.marks)||[]).length&&!D.every(function(Q){return-1<=Q&&Q<=64})?(S={marks:D,error:Object(E.y)(a,"There are illegal values in the marks.")},this.lg.w(i,g.u.QueryUnreadCount,S),Promise.reject(S.error)):(y=0,k=d?d.conversationTypes:void 0,b=D.indexOf(-1)!=-1,U=D.indexOf(0)!=-1,z=g.c.ConversationNotificationStatus.DoNotDisturb,P={unreadCount:y,isAllMark:b,isNoneMark:U,config:d},this.econf.dbConvMap.forEach(function(Q){var J,L;Q.notificationStatus!=z&&Q.unreadMessageCount&&H.filterValidConv(Q)&&(J=Q,!D.length||(L=!1,J=J.marks?J.marks.slice():[],b&&(L=0<J.length),L=!(!U||J.length)||L)||J.some(function(q){return D.indexOf(q)!=-1}))&&(L=Q,!k||!k.length||k.indexOf(L.type)!=-1)&&(y+=Q.unreadMessageCount,D.length&&Q.marks&&Q.marks.length?P[Q.conversationID]=Q.unreadMessageCount+":"+Q.marks.join():P[Q.conversationID]=Q.unreadMessageCount)}),P.unreadCount=y,this.lg.i(i,g.u.QueryUnreadCount,P),Promise.resolve({unreadMessageCount:y})):Promise.reject(Object(E.y)(o,g.u.QueryUnreadCount))},w.prototype.delete=function(d,D,S){var y,k,b=this,U=(S=Object.assign({isAlsoDeleteServerConversation:!0},S),this.econf.dbConvMap.get(this.getConvKey(d,D)));return this.isValidConv(U)?(y={time:new Date,convID:d,type:D,config:S},k={conv_id:d,conv_type:D,read_seq:U.msgSeq},S&&S.isAlsoDeleteServerConversation?this.cnMgr.send(g.d.conv_del,k).then(function(z){return z.code?(y.error=Object(E.y)(l,z.message,z.code),b.lg.w(i,g.u.DelConv,y),Promise.reject(y.error)):(U.seq=z.conv_list_seq,b.deleteLocalConv(U,y))}):(this.cnMgr.send(g.d.conv_read_seq,k,g.g.S),this.deleteLocalConv(U,y))):(k=Object(E.y)(h),this.lg.w(i,g.u.DelConv,{error:k,convID:d,type:D,config:S}),Promise.reject(k))},w.prototype.deleteAll=function(d){var D=this;if(this.convMap.size==0)return Promise.resolve();d=Object.assign({isAlsoDeleteServerConversation:!0},d);var S={time:new Date,config:d,count:0};return this.getMailHBSeq().then(function(y){return y={conv_sid:y},d.isAlsoDeleteServerConversation?D.cnMgr.send(g.d.conv_del_all,y).then(function(k){return k.code?(S.error=Object(E.y)(l,k.message,k.code),D.lg.i(i,g.u.DelAllConv,S),Promise.reject(S.error)):(S.count=D.deleteAllLocalConv(),D.lg.i(i,g.u.DelAllConv,S),Promise.resolve())}):(D.cnMgr.send(g.d.conv_clean_all_unread,y,g.g.S),S.count=D.deleteAllLocalConv(),D.lg.i(i,g.u.DelAllConv,S),Promise.resolve())})},w.prototype.setNotifyStatus=function(d,D,S){var y=this,k={time:new Date,convID:D,type:S},b=d==g.c.ConversationNotificationStatus.DoNotDisturb,U=S==g.c.ConversationType.Group?{conv_id:D,enable:b}:{c2c_mute_list:[{conv_id:D,enable:b}]};return this.cnMgr.send(g.d["conv_mute_"+S],U).then(function(z){if(z.code)return k.error=Object(E.y)(l,z.message,z.code),y.lg.w(i,g.u.SetNotifyStatus,k),Promise.reject(k.error);var P=z.mute_info;if((z=z.error_user_list)&&z[0])return(H=z[0].sub_code)==106126&&(H=l),(H=Object(E.y)(H,"",z[0].sub_code)).code!==l&&(H.code=a),k.error=H,y.lg.w(i,g.u.SetNotifyStatus,k),Promise.reject(H);S==g.c.ConversationType.Peer&&(b?y.svrConvAttrMap.mute.add(D):y.svrConvAttrMap.mute.delete(D));var H;return z=y.econf.dbConvMap.get(y.getConvKey(D,S)),P&&P[0]&&(H=P[0].mute_list_seq,(z&&z.muteSeq||0)<H)&&z&&(z.muteSeq=H),z&&(z.notificationStatus=d,y.emitConvUpdate([z],"setNotifyStatus"),y.onUnreadMessageCount()),P=d==g.c.ConversationNotificationStatus.DoNotDisturb?g.i.DontDisturb:g.i.RecoverDisturb,y.stgyMgr.updateConvAct(D,S,P),y.lg.i(i,g.u.SetNotifyStatus,k),{conversationID:D,conversationType:S}})},w.prototype.updatePinnedState=function(d,D,S){var y,k,b=this,U=this.getConvKey(D,S),z=this.econf.dbConvMap.get(U);return z&&z.isPinned==d?(y="Cannot set the same value of isPinned: "+d,y=Object(E.y)(a,y),this.lg.w(i,g.u.UpdatePinned,{error:y,convID:D,isPinned:d}),Promise.reject(y)):(k={time:new Date,convID:D,type:S},this.cnMgr.send(g.d.conv_pinned,{user_id:D,sub_code:S,relation:d?1:0}).then(function(P){return P.code?(k.error=Object(E.y)(l,P.message,P.code),b.lg.w(i,g.u.UpdatePinned,k),Promise.reject(k.error)):(b.svrConvAttrMap.pin.delete(U),z?(z.isPinned=d,b.updateConvOrderKey(z),b.emitConvUpdate([z],"setPinned")):d&&b.svrConvAttrMap.pin.add(U),b.dbMgr.updateUserSeq(P.conv_list_seq,g.z.pin),b.lg.i(i,g.u.UpdatePinned,k),{conversationID:D,conversationType:S})}))},w.prototype.setMark=function(d,D,S){var y=this,k=[],b=[],U=Math.pow(2,d-1),z=S.filter(function(H){var Q;return!H||!H.conversationID||H.conversationType==g.c.ConversationType.Room||H.conversationType==g.c.ConversationType.Peer&&H.conversationID==y.econf.user.userID||(Q={conv_id:H.conversationID,conv_type:H.conversationType,mark_content:U,action:D},H.conversationType==g.c.ConversationType.Peer?k.push(Q):H.conversationType==g.c.ConversationType.Group&&b.push(Q),!1)}),P={time:new Date,markType:d,enable:D,errorInfos:z};return z.length==S.length||100<k.length+b.length?(P.error=Object(E.y)(a,"Infos is invalid or its length exceeds 100."),this.lg.w(i,g.u.SetConvMark,P),Promise.reject(P.error)):this.cnMgr.send(g.d.conv_mark,{set_mark_c2c:k,set_mark_group:b}).then(function(H){return H.code?(P.error=Object(E.y)(l,H.message,H.code),y.lg.w(i,g.u.SetConvMark,P),Promise.reject(P.error)):(H.succ_list&&H.succ_list.length&&y.onPushConvMark(H),H.fail_list&&H.fail_list.length&&H.fail_list.forEach(function(Q){z.push({conversationID:Q.conv_id,conversationType:Q.conv_type})}),y.lg.i(i,g.u.SetConvMark,P),{failedConversationInfos:z})})},w.prototype.clearUnreadCount=function(d,D){var S,y,k,b,U=this,z=this.econf.dbConvMap.get(this.getConvKey(d,D));return this.isValidConv(z)?(S=z.msgSeq||0,y=z.readMsgSeq||0,k=z.unreadMessageCount||0,S&&y<S&&(this.syncConvReadSeqToMsgSeq(z,S),this.dbMgr.addConversationList([z]),k&&(b={event:g.c.ConversationEvent.Updated,conversation:Object(E.s)(g.h.convKeys,z)},this.bus.emit(g.m.ConvChanged,{infoList:[b]}),this.onUnreadMessageCount()),this.cnMgr.send(g.d.conv_read_seq,{conv_id:d,conv_type:D,read_seq:S}).then(function(P){P=P.conv_list_seq,S<P&&(U.syncConvReadSeqToMsgSeq(z,P),U.dbMgr.addConversationList([z]))})),this.lg.i(i,g.u.ClearUnreadCount,{convID:d,msgSeq:S,readSeq:y,uncount:k}),Promise.resolve({conversationID:d,conversationType:D})):(b=Object(E.y)(h),this.lg.w(i,g.u.ClearUnreadCount,{error:b,convID:d,type:D}),Promise.reject(b))},w.prototype.clearAllUnreadCount=function(){var d=this,D=0,S=[];return this.econf.dbConvMap.forEach(function(y){d.filterValidConv(y)&&(D++,y.readMsgSeq<y.msgSeq)&&(d.syncConvReadSeqToMsgSeq(y,y.msgSeq),S.push(y))}),S.length&&(this.onUnreadMessageCount(),this.dbMgr.addConversationList(S),this.getMailHBSeq().then(function(y){d.cnMgr.send(g.d.conv_clean_all_unread,{conv_sid:y})})),this.lg.i(i,g.u.ClearAllUnreadCount,S.length+","+D),Promise.resolve()},w.prototype.delAllConvMsgs=function(d){var D=this,S=(d=Object.assign({isAlsoDeleteServerMessage:!0},d),{time:new Date,config:d});return this.getMailHBSeq().then(function(y){var k={conv_sid:y};return d.isAlsoDeleteServerMessage?D.cnMgr.send(g.d.conv_clean_all_msg,null).then(function(b){return b.code?(S.error=Object(E.y)(l,b.message,b.code),D.lg.i(i,g.u.DelAllConvMsg,S),Promise.reject(S.error)):(D.updateDelMsgTime(b.conv_list_seq),D.cnMgr.send(g.d.conv_clean_all_unread,k,g.g.S),D.deleteAllLocalConvMsg(S))}):(D.cnMgr.send(g.d.conv_clean_all_unread,k,g.g.S),D.updateDelMsgTime(D.st.getRealClientTimestamp()),D.deleteAllLocalConvMsg(S))})},w.prototype.setConvDraft=function(d,D,S){var y;return S!=g.c.ConversationType.Group||this.econf.dbGroupMap.get(D)?((y=this.createInstance(D,S).dbConv).draft=d,y.state=g.j.Normal,d?this.updateConvOrderKey(y,this.st.getRealClientTimestamp()):y.lastMessage&&this.updateConvOrderKey(y,y.lastMessage.timestamp),this.emitConvUpdate([y],"setDraft"),Promise.resolve({conversationID:D,conversationType:S})):(d=Object(E.y)(6000523),this.lg.w(i,g.u.SetConvDraft,{error:d,convID:D,type:S}),Promise.reject(d))},w.prototype.sendMsg=function(d,D,S,y,k){return c(this,void 0,void 0,function(){var b,U,z,P,H;return u(this,function(Q){switch(Q.label){case 0:return S!==g.c.ConversationType.Room||this.gpMgr.findRoom(D)?!(P=d.type===g.c.MessageType.Command||d.type===g.c.MessageType.Barrage)&&y.isRetrySend&&d.localMessageID&&d.sentStatus!=g.c.MessageSentStatus.Failed?(H=Object(E.y)(a,"The send status of message is not failed when retry send."),this.lg.w(i,g.u.SendMsg,{error:H,convID:D,type:S}),[2,Promise.reject(H)]):(b=this.createInstance(D,S),P?[2,b.sendCommand(d,y,k)]:(this.stgyMgr.updateConvAct(D,S,g.i.HandleMessage),y.isRetrySend&&d.repliedInfo&&d.repliedInfo.messageInfo?(z=d.repliedInfo.messageSeq,[4,b.fetchMsgListFromCache([z])]):[3,2])):(H=Object(E.y)(6000203,"Room is not exist or not in the room."),this.lg.w(i,g.u.SendMsg,{error:H,convID:D,type:S}),[2,Promise.reject(H)]);case 1:if(P=Q.sent(),!(U=P.get(z))||U.type==g.c.MessageType.Revoke)return H=Object(E.y)(a,"The replied message is invalid when retry send."),this.lg.w(i,g.u.SendMsg,{error:H,convID:D,type:S}),[2,Promise.reject(H)];Q.label=2;case 2:return d.type===g.c.MessageType.Combine?[2,this.transformCombineMessage(d).then(function(J){return b.sendMediaMessage(J,y,k,U)})]:[4,this.fetchServerFile(d)];case 3:return Q.sent(),d.type===g.c.MessageType.Multiple?[2,b.sendMultipleMessage(d,y,k,U)]:[2,d.type>=g.c.MessageType.Image&&d.type<=g.c.MessageType.Video?b.sendMediaMessage(d,y,k,U):b.sendMessage(d,y,k,U)]}})})},w.prototype.replyMessage=function(d,D,S,y){return c(this,void 0,void 0,function(){var k,b,U,z;return u(this,function(P){switch(P.label){case 0:return k=D.conversationID,b=D.conversationType,S.isRetrySend&&d.localMessageID&&d.sentStatus!=g.c.MessageSentStatus.Failed?(U=Object(E.y)(a,"The send status of message is not failed when retry send."),this.lg.w(i,g.u.ReplyMsg,{error:U,convID:k,type:b}),[2,Promise.reject(U)]):(this.stgyMgr.updateConvAct(k,b,g.i.HandleMessage),z=this.createInstance(k,b),d.type===g.c.MessageType.Combine?[2,this.transformCombineMessage(d).then(function(H){return z.sendMediaMessage(H,S,y,D)})]:[4,this.fetchServerFile(d)]);case 1:return P.sent(),d.type===g.c.MessageType.Multiple?[2,z.sendMultipleMessage(d,S,y,D)]:[2,d.type>=g.c.MessageType.Image&&d.type<=g.c.MessageType.Video?z.sendMediaMessage(d,S,y,D):z.sendMessage(d,S,y,D)]}})})},w.prototype.editMsg=function(d,D){return c(this,void 0,void 0,function(){return u(this,function(S){switch(S.label){case 0:return[4,this.fetchServerFile(d)];case 1:return S.sent(),[2,this.createInstance(d.conversationID,d.conversationType).editMessage(d,D)]}})})},w.prototype.delMsgs=function(d,D,S,y){return this.createInstance(D,S).deleteMessages(d,y)},w.prototype.delAllMsg=function(d,D,S){return this.createInstance(d,D).deleteAllMessage(S)},w.prototype.queryHistoryMsg=function(d,D,S){var y=this,k=this.createInstance(d,D);return k.queryHistoryMessage(S).then(function(b){var U=b.list,z=b.receiptMemberMsgs;return D!=g.c.ConversationType.Peer&&setTimeout(function(){y.mergeGroupMessageStatus(k.dbConv,U,g.n.B),D!=g.c.ConversationType.Group||y.econf.isNewDB||y.queryReceiptMemberList(z)},20),{conversationID:d,conversationType:D,messageList:U}})},w.prototype.insertMsg=function(d,D,S,y){return d.senderUserID=y,this.createInstance(D,S).insertMsg(d)},w.prototype.updateMsgLocalExt=function(d,D){(D=Object.isFrozen(D)?JSON.parse(JSON.stringify(D)):D).localExtendedData=d;var S=D.conversationID,y=D.conversationType;return this.createInstance(S,y).updateMsgCacheList([D]),S=(S=this.econf.dbConvMap.get(this.getConvKey(S,y)))==null?void 0:S.lastMessage,y!=g.c.ConversationType.Room&&S&&S.messageID==D.messageID&&(S.localExtendedData=d),this.lg.i(i,g.u.UpdateMsgLocalExt,D.messageID),Promise.resolve({message:D})},w.prototype.sendConvReceipt=function(d,D){var S,y,k,b=this,U=this.econf.dbConvMap.get(this.getConvKey(d,D));return this.isValidConv(U)?(S=U.maxRecvReceiptMsgSeq||0,y=U.msgSeq||0,k={time:new Date,convID:d,oldSeq:S,seq:y},y?y<=S?(this.lg.i(i,g.u.SendConvReceipt,k),Promise.resolve({conversationID:d,conversationType:D})):this.cnMgr.send(g.d.conv_read,{group_id:d,cur_list_seq:y}).then(function(z){return z.code?(k.error=Object(E.y)(l,z.message,z.code),b.lg.w(i,g.u.SendConvReceipt,k),Promise.reject(k.error)):(b.selfReceiptSeqs.push(z.conv_list_seq),U.maxRecvReceiptMsgSeq=y,(z=U.lastMessage)&&z.receiptStatus&&z.messageSeq==y&&z.direction==g.c.MessageDirection.Receive?(z.receiptStatus=g.c.MessageReceiptStatus.Done,b.emitConvUpdate([U])):b.dbMgr.addConversationList([U]),b.lg.i(i,g.u.SendConvReceipt,k),{conversationID:d,conversationType:D})}):(k.error=Object(E.y)(a,"No message from server."),this.lg.w(i,g.u.SendConvReceipt,k),Promise.reject(k.error))):(S=Object(E.y)(h),this.lg.w(i,g.u.SendConvReceipt,{error:S,convID:d,type:D}),Promise.reject(S))},w.prototype.sendMsgReceipt=function(d,D,S){function y(P){var H=P.conv_msg_seq2_receipt_seq,Q=[],J=[],L=b.econf.dbConvMap.get(b.getConvKey(D,S)),q=L&&L.lastMessage;return d.forEach(function(B){var Y=String(B.messageSeq),K=U.get(Y);H&&H.hasOwnProperty(Y)&&K&&K.messageID==B.messageID?(b.selfReceiptSeqs.push(H[Y]),(Y=JSON.parse(JSON.stringify(K))).receiptStatus=g.c.MessageReceiptStatus.Done,Q.push(Y),q&&q.receiptStatus&&q.messageSeq==B.messageSeq&&(q.receiptStatus=g.c.MessageReceiptStatus.Done,b.emitConvUpdate([L]))):J.push(B.messageID)}),b.createInstance(D,S).updateMsgCacheList(Q),P.code||J.length==d.length?(z.error=Object(E.y)(6000277,P.message,P.code),b.lg.w(i,g.u.SendReceipts,z),Promise.reject(z.error)):(b.lg.i(i,g.u.SendReceipts,z),Promise.resolve({conversationID:D,conversationType:S,errorMessageIDs:J}))}var k,b=this,U=new Map,z=(d.forEach(function(P){P.conversationID==D&&P.conversationType==S&&P.direction==g.c.MessageDirection.Receive&&P.receiptStatus==g.c.MessageReceiptStatus.Processing&&P.messageSeq&&P.messageID&&U.set(String(P.messageSeq),P)}),{time:new Date,convID:D,count:U.size});return U.size?(k={conv_id:D,conv_msg_seq:Array.from(U.keys())},this.cnMgr.send(g.d["msg_read_"+S],k).then(y)):y({})},w.prototype.queryMsgReceipt=function(d,D,S){var y=this;return new Promise(function(k){var b={time:new Date,convID:D,count:0,messageCount:d.length,flag:{}};y.mergeSvrMsgExtraList(g.n.B,function(){var U=[],z=[],P=[];d.forEach(function(H){var Q,J,L,q,B,Y;H.type!=g.c.MessageType.Revoke&&H.sentStatus==g.c.MessageSentStatus.Success&&H.receiptStatus&&H.messageID&&H.messageSeq&&H.conversationID===D&&H.conversationType===S&&(!(J=y.econf.msgExtraMap.get(y.getMsgExtraKey(D,S,Q=H.messageSeq)))||!J.revokeInfo&&J.receiptStatus)?(L={conversationID:D,conversationType:S,messageID:H.messageID,status:H.receiptStatus,readMemberCount:0,unreadMemberCount:0,isSelfOperated:!1},z.push(L),J&&!J.messageID&&(J.messageID=H.messageID,P.push(J)),q=!1,S==g.c.ConversationType.Peer&&(B=((Y=y.econf.dbConvMap.get(y.getConvKey(D,S)))==null?void 0:Y.maxSendReceiptMsgSeq)||0,Y=(Y==null?void 0:Y.maxRecvReceiptMsgSeq)||0,H.direction==g.c.MessageDirection.Send&&Q<=B||H.direction==g.c.MessageDirection.Receive&&Q<=Y)&&(q=!0,L.status=g.c.MessageReceiptStatus.Done,L.readMemberCount=H.direction==g.c.MessageDirection.Send?1:0,L.isSelfOperated=L.readMemberCount==0,b.sendSeq=B,b.recvSeq=Y),q||(J&&!J.convReceipt?(L.status=J.receiptStatus,L.readMemberCount=Math.max(J.readMemberCount,0),L.unreadMemberCount=J.unreadMemberCount):(H.receiptStatus==g.c.MessageReceiptStatus.Processing&&J&&(L.status=J.receiptStatus),S==g.c.ConversationType.Peer&&H.direction==g.c.MessageDirection.Send&&(L.status==g.c.MessageReceiptStatus.Done?L.readMemberCount=1:L.unreadMemberCount=1))),b.flag[Q]=L.readMemberCount+","+L.unreadMemberCount):U.push(H.messageID)}),y.dbMgr.addMessageExtraList(P),b.count=z.length,y.lg.i(i,g.u.QueryReceipts,b),k({infos:z,errorMessageIDs:U})})})},w.prototype.revokeMsg=function(d,D){var S=this,y={conv_id:d.conversationID,conv_msg_seq:d.messageSeq,payload:Object(E.j)((D==null?void 0:D.revokeExtendedData)||""),offline_push:Object(E.f)(D==null?void 0:D.pushConfig)};return this.cnMgr.send(g.d["msg_revoke_"+d.conversationType],y).then(function(k){var b,U;return k.code?(b=Object(E.y)(6000007,k.message,k.code),S.lg.w(i,g.u.RevokeMsg,b),Promise.reject(b)):(b=Object(E.v)(k.user_devices),U=S.createRevokeMsg(d,{revokeType:g.c.RevokeType.TwoWay,revokeStatus:b.revoke,revokeTimestamp:k.last_change_time,operatedUserID:S.econf.user.userID,revokeExtendedData:(D==null?void 0:D.revokeExtendedData)||"",originalMessageType:d.type,originalTextMessageContent:d.type==g.c.MessageType.Text?d.message:""}),S.saveMessageRevokeExtra(U,k.user_status_seq,"revoke"),S.lg.i(i,g.u.RevokeMsg,b),{message:U})})},w.prototype.addMsgReaction=function(d,D){var S=this,y={conv_id:D.conversationID,conv_msg_seq:D.messageSeq,reaction_key:d,reaction_into_map:((y={})[d]={conv_id:""},y)},k={time:new Date};return this.cnMgr.send(g.d["add_reaction_"+D.conversationType],y).then(function(b){return c(S,void 0,void 0,function(){var U,z,P,H,Q=this;return u(this,function(J){switch(J.label){case 0:return b.code||!b.succ_list.length?(k.reactionType=d,k.error=Object(E.y)(l,b.message,b.code),this.lg.w(i,g.u.AddReaction,k),[2,Promise.reject(k.error)]):(U=this.createMessageExtra(D.conversationID,D.conversationType,D.messageSeq,D.messageID),H=(H=(H=U.reactions[d])==null?void 0:H.userList)&&H.length?H.filter(function(L){return L.userID!==Q.econf.user.userID}):H||[],z=b.succ_list.find(function(L){return L.reaction_key=d}),H.length<this.econf.mailHBConfig.reaction_brief_len&&(H.push({userID:this.econf.user.userID,seq:z.cur_reaction_seq}),H.length!==z.user_total_count)?[4,this.fetchReactionKey(D,d,!1)]:[3,2]);case 1:(P=J.sent()).code||(H=P.user_reaction,z.cur_reaction_seq=P.max_reaction_seq,z.user_total_count=P.total_user_count),J.label=2;case 2:return P={reactionKey:z.reaction_key,reactionSeq:z.cur_reaction_seq,totalCount:z.user_total_count,isSelfIncluded:!0,userList:H},this.saveMessageReactionExtra(U,[P],void 0,!0),k.reactionInfo=P,this.lg.i(i,g.u.AddReaction,k),[2,{reaction:{conversationID:D.conversationID,conversationType:D.conversationType,messageID:D.messageID,totalCount:P.totalCount,isSelfIncluded:!0,reactionType:d,userList:H.map(function(L){return{userID:L.userID}})}}]}})})})},w.prototype.delMsgReaction=function(d,D){var S=this,y={conv_id:D.conversationID,conv_msg_seq:D.messageSeq,reaction_key:[d]},k={time:new Date};return this.cnMgr.send(g.d["del_reaction_"+D.conversationType],y).then(function(b){return c(S,void 0,void 0,function(){var U,z,P,H,Q=this;return u(this,function(J){switch(J.label){case 0:return b.code||!b.succ_list.length?(k.reactionType=d,k.error=Object(E.y)(l,b.message,b.code),this.lg.w(i,g.u.DelReaction,k),[2,Promise.reject(k.error)]):(U=this.createMessageExtra(D.conversationID,D.conversationType,D.messageSeq,D.messageID),H=(H=(H=U.reactions[d])==null?void 0:H.userList)&&H.length?H.filter(function(L){return L.userID!==Q.econf.user.userID}):H||[],z=b.succ_list.find(function(L){return L.reaction_key=d}),H.length<this.econf.mailHBConfig.reaction_brief_len&&H.length!==z.user_total_count?[4,this.fetchReactionKey(D,d,!1)]:[3,2]);case 1:(P=J.sent()).code||(H=P.user_reaction,z.cur_reaction_seq=P.max_reaction_seq,z.user_total_count=P.total_user_count),J.label=2;case 2:return z.user_total_count==0&&(H.length=0),P={reactionKey:z.reaction_key,reactionSeq:z.cur_reaction_seq,totalCount:z.user_total_count,isSelfIncluded:!1,userList:H},this.saveMessageReactionExtra(U,[P],void 0,!0),k.reactionInfo=P,this.lg.i(i,g.u.DelReaction,k),[2,{reaction:{conversationID:D.conversationID,conversationType:D.conversationType,messageID:D.messageID,totalCount:P.totalCount,isSelfIncluded:!1,reactionType:d,userList:H.map(function(L){return{userID:L.userID}})}}]}})})})},w.prototype.queryMsgReactions=function(d,D){var S,y,k=this,b={time:new Date,total:0,count:0,msgSeq:d.messageSeq,config:D},U=D.reactionType,z=this.getMsgExtraKey(d.conversationID,d.conversationType,d.messageSeq),P=this.econf.msgExtraMap.get(z);return P&&P.reactions&&P.reactions[U]?(S=function(H,Q){var J=H.length,L=D.nextFlag||0,q=L+D.count;return H=H.slice(L,q).map(function(B){return{userID:B.userID}}),L=q<J?q:0,b.total=J,b.count=H.length,k.lg.i(i,g.u.QueryReaction,b),{reactionType:U,totalCount:Q,nextFlag:L,userList:H,message:d}},z=+P.reactions[U].detailSeq||0,0<(y=+P.reactions[U].seq||0)&&z<y?this.fetchReactionKey(d,U,!0).then(function(H){var Q,J,L;return H.code?(Q=Object(E.y)(l,H.message,H.code),k.lg.w(i,g.u.QueryReaction,b),Promise.reject(Q)):(H={reactionSeq:Q=H.max_reaction_seq,reactionKey:U,totalCount:J=H.total_user_count,userList:H.user_reaction,isSelfIncluded:!1},L=k.econf.user.userID,H.isSelfIncluded=H.userList.some(function(q){return q.userID==L}),P.messageID=d.messageID,k.saveMessageReactionExtra(P,[H],Q,!0,!0),S(H.userList,J))}):(z=P.reactions[U].detailUserList||[],Promise.resolve(S(z,z.length)))):(y=Object(E.y)(a,"reactionType: "+U+" is invalid."),this.lg.w(i,g.u.QueryReaction,b),Promise.reject(y))},w.prototype.queryCombineMsg=function(d){var D=this,S=d.combineID,y=(b=s(S.split("-"),2))[0],k=b[1],b=S.replace(y+"-"+k+"-",""),U=Number(k[0]),z={time:new Date,msgSeq:d.messageSeq,convID:b,convType:U,combineID:S};return this.dbMgr.getMessageByIndexID(b,U,S.replace(y,"0"),g.k.CombineID).then(function(P){if(!P)throw Object(E.y)(a,"The combine message no found in DB.");if(0<(Q=(P.messageList||[]).filter(function(L){return L.parentID==y})).length)return d.messageList=Q.map(function(L){return D.pb.handleDBMessage(D.econf,L)}),z.count=d.messageList.length,{message:d};var H,Q=P.fileDownloadUrl,J=P.aesKey;if(y!=="0"&&(Q=((H=P.messageList.find(function(L){return L.combineID==S}))==null?void 0:H.fileDownloadUrl)||"",J=(H==null?void 0:H.aesKey)||""),Q&&J)return D.dbMgr.downloadFile(Q,"get combine onerror.").then(function(L){return D.handleCombineFileRsp(d,L,P,J,k,y),z.count=d.messageList.length,z.size=L.length,{message:d}});throw Object(E.y)(a,"The combine message no found for url.")}).then(function(P){return D.lg.i(i,g.u.QueryCombineMsg,z),P}).catch(function(P){throw z.error=P,D.lg.w(i,g.u.QueryCombineMsg,z),P})},w.prototype.queryReplyMsg=function(d,D){var S=d.conversationID;return this.createInstance(S,d.conversationType).queryReplyMsg(d,D)},w.prototype.queryMessages=function(d,D,S){return!d||!Array.isArray(d)||!d.length||10<d.length?Promise.reject(Object(E.y)(a,"messageSeqs is invalid or its length exceeds 10.")):this.createInstance(D,S).queryMessages(d)},w.prototype.onPushMsgDelete=function(d){var D=d.conv_id,S=d.conv_type,y=d.max_del_conv_msg_seq;d.is_del_all&&y?this.createInstance(D,S).onPushAllMsgDelete(y,!0):d.del_conv_msg_seqs.length&&this.createInstance(D,S).onPushMsgDelete(d.del_conv_msg_seqs)},w.prototype.onPushConvDelete=function(d){var D;d=this.getConvKey(d.conv_id,d.conv_type),(d=this.econf.dbConvMap.get(d))&&(this.isValidConv(d)?(this.deleteLocalConv(d),D={event:g.c.ConversationEvent.Deleted,conversation:Object(E.s)(g.h.convKeys,d)},this.bus.emit(g.m.ConvChanged,{infoList:[D]},"delConv")):d.state=g.j.Delete)},w.prototype.onPushConvRead=function(d){var D,S=this,y=d.conv_msg_seq,k=d.read_seq,b=(d=this.getConvKey(d.conv_id,d.conv_type),this.econf.dbConvMap.get(d));b&&y&&(b.readMsgSeq=Math.max(y,b.readMsgSeq||0),b.sendMsgCount=k,this.isValidConv(b))&&(d=function(U){var z=((z=b.mentionedInfoList)&&z.length&&(b.mentionedInfoList=z.filter(function(P){return P.messageSeq>y})),b.deletedMsgCount=U,b.msgSeq||0);(z=Math.max(z-b.readMsgSeq-k-U,0))!=b.unreadMessageCount?(b.unreadMessageCount=z,S.onUnreadMessageCount(),S.emitConvUpdate([b],"onPushRead")):S.dbMgr.addConversationList([b])},(D=b.deletedMsgSeqs&&b.deletedMsgSeqs.length?b.deletedMsgSeqs.filter(function(U){return y<U}):null)&&D.length?this.dbMgr.getDeleteMessageCount(b.conversationID,b.type,D,d):d(0))},w.prototype.onPushConvNotify=function(d){var D,S=this.getConvKey(d.conv_id,g.c.ConversationType.Group);(S=this.econf.dbConvMap.get(S))&&(D=d.conv_type?g.c.ConversationNotificationStatus.DoNotDisturb:g.c.ConversationNotificationStatus.Notify,this.isValidConv(S)&&S.notificationStatus!=D?(S.notificationStatus=D,this.emitConvUpdate([S],"onPushNotify"),this.onUnreadMessageCount()):S.notificationStatus=D,D=this.econf.dbGroupMap.get(S.conversationID))&&(D.notificationStatus=d.conv_type?g.c.GroupMessageNotificationStatus.Disturb:g.c.GroupMessageNotificationStatus.Notify,this.dbMgr.addGroupList([D]))},w.prototype.onPushConvPinned=function(d){var D=this.getConvKey(d.conv_id,d.conv_type),S=this.econf.dbConvMap.get(D);S?(!S.isPinned!=!d.pinned_type&&(S.isPinned=!!d.pinned_type,this.updateConvOrderKey(S),this.emitConvUpdate([S],"onPushPinned")),this.dbMgr.updateUserSeq(d.conv_pinned_list_seq,g.z.pin)):d.pinned_type?this.svrConvAttrMap.pin.add(D):this.svrConvAttrMap.pin.delete(D)},w.prototype.onPushConvMark=function(d){var D=this,S=[];d=d.succ_list.map(function(y){var k,b=Object(E.w)(y.mark_content),U=D.getConvKey(y.conv_id,y.conv_type),z=D.econf.dbConvMap.get(U);return z?((k=z.marks||[]).length==b.length&&k.join()==b.join()||S.push(z),z.marks=b):D.svrConvAttrMap.mark.set(U,b),y.mark_seq}),this.emitConvUpdate(S,"setMark"),this.updateMarkSeq(d)},w.prototype.onPushGroupRemark=function(d){var D=d.group_id,S=d.group_name,y=this.getConvKey(D,g.c.ConversationType.Group);(y=((y=this.econf.dbConvMap.get(y))&&y.conversationAlias!=S&&(y.conversationAlias=S,this.emitConvUpdate([y])),this.econf.dbGroupMap.get(D)))&&y.groupAlias!=S&&(y.groupAlias=S,this.dbMgr.addGroupList([y]),this.bus.emit(g.m.GroupAlias,{groupID:D,groupAlias:S,operatedUserID:this.econf.user.userID})),this.dbMgr.updateUserSeq(d.group_data_seq,g.z.gp)},w.prototype.onPushMessage=function(d,D){var S,y=this,k=d.recv_msg_info.msg_info,b=d.recv_msg_info.msg_svr_info,U=b.sender_user_id,z=k.conv_id,P=g.c.ConversationType.Peer;return D==g.d.p_gp_msg.cmd?P=g.c.ConversationType.Group:D==g.d.p_rm_msg.cmd?(z=z||d.room_id,P=g.c.ConversationType.Room):D==g.d.p_c2c_msg.cmd&&(z=z||U),z?(S=this.createInstance(z,P),(D=d.send_count_after_read||0)&&(S.dbConv.sendMsgCount=D,this.dbMgr.addConversationList([S.dbConv])),(!k.sender_unaware||U&&U!=this.econf.user.userID)&&(d.read_seq&&P==g.c.ConversationType.Peer&&(S.dbConv.readMsgSeq=d.read_seq),(D=this.syncConvNameWithPush(S.dbConv,U,b.sender_user_name))?D.then(function(){return S.onPushMessageList([d],y.gpMgr)}):S.onPushMessageList([d],this.gpMgr)),[P+z,b.conv_msg_seq]):[P+z,""]},w.prototype.onPushMessageList=function(d){var D=this,S={},y=(d.forEach(function(k){var b=k.sub_cmd,U=(k=k.msg_body,g.c.ConversationType.Peer),z=k.recv_msg_info.msg_info.conv_id;b==g.d.p_gp_msg.cmd?U=g.c.ConversationType.Group:b==g.d.p_rm_msg.cmd?(U=g.c.ConversationType.Room,z=z||k.room_id):b==g.d.p_c2c_msg.cmd&&(z=z||k.recv_msg_info.msg_svr_info.sender_user_id),z&&(S[U+z]?S[U+z].push(k):S[U+z]=[k])}),{});return Object.keys(S).forEach(function(k){var b=0,U=S[k].filter(function(Q){y[k]=(y[k]||"")+","+Q.recv_msg_info.msg_svr_info.conv_msg_seq,b=Math.max(Q.send_count_after_read||0,b);var J=Q.recv_msg_info.msg_svr_info.sender_user_id;return!(Q.recv_msg_info.msg_info.sender_unaware&&(!J||J==D.econf.user.userID))}),z=+k[0],P=k.substring(1),H=D.createInstance(P,z);0<b&&(H.dbConv.sendMsgCount=b,D.dbMgr.addConversationList([H.dbConv])),U.length&&((P=D.syncConvNameWithPush(H.dbConv,U[0].recv_msg_info.msg_svr_info.sender_user_id,U[0].recv_msg_info.msg_svr_info.sender_user_name))?P.then(function(){return H.onPushMessageList(U,D.gpMgr)}):H.onPushMessageList(U,D.gpMgr))}),y},w.prototype.onPushCommand=function(d,D){var S="",y=g.c.ConversationType.Peer;return D==g.d.p_gp_cmd.cmd?(y=g.c.ConversationType.Group,S=d.recv_command_info.command_msg_info.conv_id):D==g.d.p_rm_cmd.cmd?(y=g.c.ConversationType.Room,S=d.room_id):D==g.d.p_c2c_cmd.cmd&&(S=d.recv_command_info.command_msg_info.conv_id||d.recv_command_info.command_svr_info.sender_user_id),S?[y+S,this.emitRecvCmdMsgs(S,y,[d])]:[y+S,""]},w.prototype.onPushCommandList=function(d){var D=this,S={},y=(d.forEach(function(k){var b=k.sub_cmd,U=(k=k.msg_body,g.c.ConversationType.Peer),z="";b==g.d.p_gp_cmd.cmd?(U=g.c.ConversationType.Group,z=k.recv_command_info.command_msg_info.conv_id):b==g.d.p_rm_cmd.cmd?(U=g.c.ConversationType.Room,z=k.room_id):b==g.d.p_c2c_cmd.cmd&&(z=k.recv_command_info.command_msg_info.conv_id||k.recv_command_info.command_svr_info.sender_user_id),z&&(S[U+z]?S[U+z].push(k):S[U+z]=[k])}),{});return Object.keys(S).forEach(function(k){var b=+k[0],U=k.substring(1);U=D.emitRecvCmdMsgs(U,b,S[k]),y[k]=U}),y},w.prototype.onPushBroadcastMessage=function(d){return(d=this.transform2Message(d.recv_msg_info,"",g.c.ConversationType.Unknown))&&this.bus.emit(g.m.BroadcastMsg,{message:d}),d?d.messageID:""},w.prototype.onPushReadReceipt=function(d){var D=this,S=0,y=d.PushItems.map(function(z){var P=D.createMessageReceiptItemExtra(D.mergeMsgReceiptDBConvMap,z);return D.mergeMsgReceiptMap.set(P.id,P),P=z.receipt_seq||0,D.mergeMsgReceiptSeqs.add(P),S<=P&&(S=P),P}),k=(d=(y.sort(function(z,P){return z-P}),y[y.length-1]-y[0]==y.length-1),Array.from(this.mergeMsgReceiptMap.values())),b=(this.emitMessageReceiptOrRevoke(k,g.n.P),y[0]),U=+this.econf.user.msgExtraSeq||0;!U||b<=U||b-1==U&&d&&!this.mergeMsgReceiptTimer?(this.dbMgr.updateUserSeq(S,g.z.ext),this.dbMgr.addMessageExtraList(k),this.dbMgr.addConversationList(Array.from(this.mergeMsgReceiptDBConvMap.values())),this.mergeMsgReceiptSeqs.clear(),this.mergeMsgReceiptMap.clear(),this.mergeMsgReceiptDBConvMap.clear(),this.lg.i(i,"mergeMsgReceipt",{dbSeq:U,seqs:y,action:"continuousMerge"})):this.mergeMsgReceiptTimer||(this.mergeMsgReceiptTimer=setTimeout(function(){var z,P;D.lg&&D.mergeMsgReceiptTimer&&((z=Array.from(D.mergeMsgReceiptSeqs.values())).sort(function(H,Q){return H-Q}),P=z[z.length-1]-z[0]==z.length-1,D.lg.i(i,"mergeMsgReceipt",{dbSeq:U,seqs:y,action:"waitingPush",continuous:P,mergeSeqs:z}),P?(D.dbMgr.updateUserSeq(z[z.length-1],g.z.ext),D.dbMgr.addMessageExtraList(Array.from(D.mergeMsgReceiptMap.values())),D.dbMgr.addConversationList(Array.from(D.mergeMsgReceiptDBConvMap.values()))):D.mergeSvrMsgExtraList(g.n.P),D.mergeMsgReceiptTimer=0,D.mergeMsgReceiptSeqs.clear(),D.mergeMsgReceiptMap.clear(),D.mergeMsgReceiptDBConvMap.clear())},this.econf.mailHBConfig.list_to))},w.prototype.onPushMsgRevoke=function(d){var D=this,S=d.recv_msg_info.msg_info.conv_id,y=d.conv_type||0,k=(b=d.recv_msg_info.msg_svr_info).conv_msg_seq,b=b.msg_time;y!=g.c.ConversationType.Room&&this.isMsgDel(this.econf.dbConvMap.get(this.getConvKey(S,y)),k,b)?this.dbMgr.getReplyMessageListBySeqs(S,y,[k],1).then(function(U){U.length&&D.bus.emit(g.m.MsgRepliedInfo,{messageList:U})}):(b=this.createInstance(S,y).transform2Message(d.recv_msg_info,!1),this.bus.emit(g.m.MsgRevoke,{messageList:[b]}),this.saveMessageRevokeExtra(f({},b),d.statemsg_seq,"pushRevoke"))},w.prototype.onPushMsgEdit=function(d){var D=this,S=d.conv_id,y=d.conv_type||0,k=[d.conv_msg_seq],b=this.econf.dbConvMap.get(this.getConvKey(S,y));this.isMsgDel(b,k[0],0)||this.dbMgr.getMessageListBySeqs(S,y,k).then(function(U){var z,P=U.get(k[0]);P&&((z=D.createInstance(S,y)).updateMsgStateSeq(d.state_msg_seq),P.editSeq=d.edit_msg_seq,P.editedTime=d.edit_time,P.editorUserID=d.edit_user,(U=Object(E.w)(O.a.fromNumber(d.edit_type||0),!1)).indexOf(1)!=-1&&D.pb.decodeMsgBody(D.econf,P,d.msg),U.indexOf(2)!=-1&&(P.extendedData=Object(E.g)(d.payload)),U.indexOf(4)!=-1&&(P.mentionedUserIDs=d.at_list),U.indexOf(8)!=-1&&(P.isMentionAll=d.is_at_all||!1),P.type==g.c.MessageType.Custom&&U.indexOf(16)!=-1&&(P.subType=d.sub_msg_type||0),D.bus.emit(g.m.MsgEdited,{messageList:[P]}),b&&b.lastMessage&&b.lastMessage.messageID==P.messageID&&(b.lastMessage=P,D.emitConvUpdate([b])),D.dbMgr.getReplyMessageListBySeqs(S,y,k,2).then(function(H){H.length&&(H.forEach(function(Q){return D.pb.handleReplyMsgInfo(Q,P,!0)}),D.bus.emit(g.m.MsgRepliedInfo,{messageList:H})),z.updateMsgCacheList(H.concat(P))}))})},w.prototype.onPushReaction=function(d){var D=this,S=d.conv_id,y=d.conv_type,k=new Set,b=this.createInstance(S,y),U=b.dbConv.deletedMsgMaxSeq||0,z=b.dbConv.deletedMsgSeqs||[],P=d.msg_reactions.filter(function(H){var Q,J=H.conv_msg_seq;return!(z.indexOf(J)!=-1||J<=U||+(Q=D.createMessageExtra(S,y,J)).reactionSeq>H.start_reaction_seq||(Q.messageID||k.add(J),0))});this.lg.i(i,"pushReaction",{count:P.length}),b.fetchMsgListFromCache(Array.from(k)).then(function(H){P.forEach(function(Q){var J=Q.conv_msg_seq,L=Q.start_reaction_seq,q=Q.end_reaction_seq,B=(Q=Q.reaction_infos,D.createMessageExtra(S,y,J,(J=H.get(J))==null?void 0:J.messageID));B.messageID&&(J=Q.map(function(Y){var K=Y.reaction_key,ee=!(!B.reactions||!B.reactions[K])&&B.reactions[K].isSelfIncluded;return{reactionSeq:Y.max_reaction_seq,reactionKey:K,totalCount:Y.total_user_count||0,userList:Y.user_reaction,isSelfIncluded:ee=Y.is_multi?Y.include_self:ee,value:""}}),D.saveMessageReactionExtra(B,J,q),+B.reactionSeq+1<L)&&D.mergeMessageReactionList(B)})})},w.prototype.onPushConvAllDelete=function(d){var D=this.deleteAllLocalConv();D&&this.bus.emit(g.m.ConvAllDeleted,{count:D})},w.prototype.onPushCleanAllUnread=function(d){var D=this;this.econf.dbConvMap.forEach(function(S){D.syncConvReadSeqToMsgSeq(S,S.msgSeq)}),this.dbMgr.addConversationList(Array.from(this.econf.dbConvMap.values())),this.onUnreadMessageCount()},w.prototype.onPushCleanAllMsgs=function(d){this.updateDelMsgTime(+d.conv_sid),this.deleteAllLocalConvMsg()},w.prototype.onPushC2CMute=function(d){var D=this,S=[];d.mute_info.forEach(function(y){var k=y.peer_user_id,b=y.mute;y=y.mute_list_seq,b?D.svrConvAttrMap.mute.add(k):D.svrConvAttrMap.mute.delete(k),k=D.getConvKey(k,g.c.ConversationType.Peer),!(k=D.econf.dbConvMap.get(k))||y<(k.muteSeq||0)||(b=b?g.c.ConversationNotificationStatus.DoNotDisturb:g.c.ConversationNotificationStatus.Notify,k.notificationStatus!=b&&(k.muteSeq=y,k.notificationStatus=b,S.push(k)))}),this.emitConvUpdate(S,"onPushC2CMute"),this.onUnreadMessageCount()},w.prototype.setDBUser=function(d){var D=this,S=[];d.forEach(function(y){var k=D.econf.dbUserMap.get(y.userID);k&&k.updateTime<y.updateTime?(S.push(k),Object.assign(k,y)):k||(S.push(y),D.econf.dbUserMap.set(y.userID,y))}),0<S.length&&this.dbMgr.addUserList(S)},w.prototype.registerInnerEvent=function(){this.bus.add(g.m.ILogined,this.onLogined.bind(this)),this.bus.add(g.m.ITriggerHB,this.onTriggerHB.bind(this)),this.bus.add(g.m.ISyncGroups,this.onSyncGroups.bind(this)),this.bus.add(g.m.IJoinedGroup,this.onJoinedGroup.bind(this)),this.bus.add(g.m.ILeftGroup,this.onLeftGroup.bind(this)),this.bus.add(g.m.ISyncGroupInfo,this.onSyncGroupInfo.bind(this)),this.bus.add(g.m.IUnreadMsgCount,this.onUnreadMessageCount.bind(this)),this.bus.add(g.m.IDisConnected,this.onDisConnected.bind(this)),this.bus.add(g.m.IConnected,this.onConnected.bind(this)),this.bus.add(g.m.IConnectedRoom,this.onConnectedRoom.bind(this))},w.prototype.onSyncGroups=function(d,D,S){var y=this,k=(this.isLogined=!1,d?g.n.H:g.n.L);this.mergeSvrConvAttrList(k,function(){y.mergeSvrConvList(k,function(b){function U(){y.dbMgr.addConversationList(H);var B,Y=b.size+"onSyncGroups"+D.size;b.size&&(B=[],b.forEach(function(K,ee){var oe;ee=y.econf.dbConvMap.get(ee),K!=g.c.ConversationEvent.Deleted&&!y.isValidConv(ee)||(oe=Object(E.s)(g.h.convKeys,ee),B.push({event:K,conversation:oe})),y.stgyMgr.modifyConv(ee.conversationID,ee.type,K,g.a.FetchAll)}),y.bus.emit(g.m.ConvChanged,{infoList:B},Y)),y.oldTotalUnreadCount=0,y.onUnreadMessageCount(Y,P),y.isLogined=!0,y.queryConvsTasks.forEach(function(K){return y.handleQueryConvsCallback(P,K)}),y.queryConvsTasks.length=0,y.mergeSvrC2CMsgList(k,function(){var K,ee,oe=0,ae=0,X=new Set;P.forEach(function(re){var ie=re.type==g.c.ConversationType.Group&&re.minStatemsgSeq<re.maxStatemsgSeq&&++ae<10?function(){y.mergeSvrMsgStateList(k,re.minStatemsgSeq,1,re.msgSeq,{conv_id:re.conversationID},re)}:void 0;!re.lastMessage||re.lastMessage.messageSeq<re.msgSeq||re.maxSeq<re.msgSeq&&++oe<10?(X.add(re.type+re.conversationID),y.createInstance(re.conversationID,re.type).mergeSvrMessageList(k,ie)):ie&&ie()}),k==g.n.L&&(K={_total:0,_count:0,_fetchMsg:X.size},ee=g.c.ConversationNotificationStatus.DoNotDisturb,y.econf.dbConvMap.forEach(function(re){var ie;re.type!=g.c.ConversationType.Room&&(re.unreadMessageCount&&re.notificationStatus!=ee&&(K._total+=re.unreadMessageCount),K._count++,K[ie=re.type+re.conversationID]={u:re.unreadMessageCount,m:re.msgSeq,r:re.readMsgSeq,s:re.sendMsgCount,d:re.deletedMsgCount,ns:re.notificationStatus,name:re.conversationName,url:re.conversationAvatarUrl?re.conversationAvatarUrl.length:void 0,st:re.state,ms:re.maxSeq,mo:re.maxOrderKey,mf:X.has(ie)?1:void 0,msg:re.lastMessage?y.printMsg(re.lastMessage):void 0})}),y.lg.i(i,Y,K)),X.clear()}),setTimeout(function(){S&&S(),y.mergeSvrMsgExtraList(k),y.mergeSvrMsgStateList(k)},2e3)}var z=null,P=[],H=[];if(y.econf.dbConvMap.forEach(function(B){var Y,K,ee,oe,ae,X,re,ie;B.type!=g.c.ConversationType.Room&&((Y=y.filterValidConv(B))&&P.push(B),ee=!1,K=B.id,!B.isPinned&&y.svrConvAttrMap.pin.has(K)&&(B.isPinned=ee=!0,y.updateConvOrderKey(B),Y&&!b.has(K)&&b.set(K,g.c.ConversationEvent.Updated),y.svrConvAttrMap.pin.delete(K)),B.type==g.c.ConversationType.Peer&&B.notificationStatus!==g.c.ConversationNotificationStatus.DoNotDisturb&&y.svrConvAttrMap.mute.has(B.conversationID)&&(ee=!0,B.notificationStatus=g.c.ConversationNotificationStatus.DoNotDisturb,Y&&!b.has(K)&&b.set(K,g.c.ConversationEvent.Updated),y.svrConvAttrMap.mute.delete(B.conversationID)),y.svrConvAttrMap.mark.has(K)&&(re=B.marks||[],ie=y.svrConvAttrMap.mark.get(K),re.length==ie.length&&re.join()==ie.join()||(ee=!0,B.marks=ie,Y&&!b.has(K)&&b.set(K,g.c.ConversationEvent.Updated)),y.svrConvAttrMap.mark.delete(K)),B.type==g.c.ConversationType.Group&&(ee=!0,(re=y.econf.dbGroupMap.get(B.conversationID))?(ie=re.groupName,oe=re.groupAvatarUrl,ae=re.groupAlias,X=re.notificationStatus,B.state!=g.j.Delete&&(B.state=g.j.Normal),B.historyMsgSeq=re.historyMsgSeq,ie&&(B.conversationName=ie),oe&&(B.conversationAvatarUrl=oe),typeof ae=="string"&&(B.conversationAlias=ae),B.notificationStatus!=X&&(B.notificationStatus=X,Y)&&!b.has(K)&&b.set(K,g.c.ConversationEvent.Updated)):(B.isDisabled=!0,B.mutedExpiredTime=0,B.state!=g.j.Delete&&(B.state=g.j.Disable),(re=D.get(B.conversationID))&&(re.groupName&&(B.conversationName=re.groupName),re.groupAvatarUrl&&(B.conversationAvatarUrl=re.groupAvatarUrl),re.groupAlias)&&(B.conversationAlias=re.groupAlias),B.state!=g.j.Disable&&((ie=b.has(K)?b.get(K):g.c.ConversationEvent.Disabled)!=g.c.ConversationEvent.Deleted&&(ie=g.c.ConversationEvent.Disabled),b.set(K,ie))),B.conversationName&&(k!=g.n.L||B.conversationAvatarUrl)||(z=z||new Map).set(B.conversationID,B)),ee)&&H.push(B)}),P.sort(function(B,Y){return Y.orderKey-B.orderKey}),z){for(var Q=Array.from(z.keys()),J=[],L=0;L<Q.length;L+=100){var q={user_ids:Q.slice(L,L+100)};q=y.cnMgr.send(g.d.gp_infos_none,q),J.push(q)}Promise.all(J).then(function(B){B.forEach(function(Y){Y.code||Y.result.forEach(function(K){var ee,oe=z.get(K.group_id);oe&&(ee=K.group_name,K=K.group_avatar,ee&&(oe.conversationName=ee),K)&&(oe.conversationAvatarUrl=K)})}),U()})}else U()})})},w.prototype.onLogined=function(d){var D=this;if(d)return this.onLogout();var S=[],y=[];this.econf.dbConvMap.forEach(function(k){D.createInstance(k.conversationID,k.type),k.type||k.conversationName||S.push(k.conversationID),y.push({conversationID:k.conversationID,conversationType:k.type,conversationOrderKey:k.orderKey,todoFlag:0})}),this.cnMgr.fetchSvrUsers(S,"initLocalConv"),this.stgyMgr.start(),this.stgyMgr.initConv(y)},w.prototype.onTriggerHB=function(){var d=this;this.econf.syncUserTask.size&&this.cnMgr.fetchSvrUsers(Array.from(this.econf.syncUserTask),"syncTask"),this.mergeSvrDelAllConvMsgs(),this.mergeSvrConvAttrList(g.n.H,function(){return d.mergeSvrConvList(g.n.H)}),this.mergeSvrMsgExtraList(g.n.H),this.mergeSvrMsgStateList(g.n.H),this.gpMgr.mergeSvrGroupList(g.n.H),this.gpMgr.mergeSvrGroupApplyList("",g.n.H),this.checkGroupConvMuteExpiredTime()},w.prototype.onJoinedGroup=function(d){var D=d.groupID,S=d.groupName,y=d.groupAvatarUrl,k=d.msgSeq,b=(d=d.historySeq,(D=this.createInstance(D,g.c.ConversationType.Group).dbConv).unreadMessageCount);D.conversationName=S,D.conversationAvatarUrl=y,D.conversationAlias="",D.notificationStatus=g.c.ConversationNotificationStatus.Notify,D.historyMsgSeq=d,D.isDisabled=!1,D.state==g.j.Disable&&(D.state=g.j.Normal),D.msgSeq=k,this.syncConvReadSeqToMsgSeq(D,k),0<b?(this.emitConvUpdate([D]),this.onUnreadMessageCount()):this.dbMgr.addConversationList([D])},w.prototype.onLeftGroup=function(d,D,S){var y,k=this.createInstance(d,g.c.ConversationType.Group).dbConv;k.state!=g.j.Delete&&(k.state=g.j.Disable),k.isDisabled=!0,D&&(k.historyMsgSeq=D),k.maxOrderKey&&(S&&(D=k.msgSeq+1,S.localMessageID=k.type+String(S.event)+d,S.messageID="",S.messageSeq=0,S.orderKey=D*g.h.MESSAGE_SEQ_MULTIPLIER,S.conversationID=d,S.conversationType=k.type,S.direction=g.c.MessageDirection.Receive,S.sentStatus=g.c.MessageSentStatus.Success,S.timestamp=this.st.getRealClientTimestamp(),y=f({},S),k.msgSeq=D,k.deletedMsgCount++,k.maxOrderKey=S.orderKey,k.lastMessage=y,this.dbMgr.addMessageList(d,k.type,[y]),this.bus.emit("groupMessageReceived",D={messageList:[S],fromConversationID:d,info:{isOfflineMessage:!1}}),this.bus.emit("receiveGroupMessage",D)),k.state!=g.j.Delete)&&(y={event:g.c.ConversationEvent.Disabled,conversation:Object(E.s)(g.h.convKeys,k)},this.bus.emit(g.m.ConvChanged,{infoList:[y]})),this.dbMgr.addConversationList([k])},w.prototype.onSyncGroupInfo=function(d,D){var S=(d=this.createInstance(d,g.c.ConversationType.Group).dbConv).conversationName||"",y=d.conversationAvatarUrl||"",k=d.conversationAlias||"",b=d.mutedExpiredTime||0;Object.assign(d,D),d.conversationName==S&&d.conversationAvatarUrl==y&&d.conversationAlias==k&&d.mutedExpiredTime==b||this.emitConvUpdate([d],"onSyncGroupInfo")},w.prototype.onUnreadMessageCount=function(d,D){var S=this,y=g.c.ConversationNotificationStatus.DoNotDisturb,k=0;D?D.forEach(function(b){b.notificationStatus!=y&&(k+=b.unreadMessageCount)}):this.econf.dbConvMap.forEach(function(b){b.notificationStatus!=y&&S.filterValidConv(b)&&(k+=b.unreadMessageCount)}),this.oldTotalUnreadCount!=k&&(this.oldTotalUnreadCount=k,this.bus.emit(g.m.ConvUnreadMsgCount,{totalUnreadMessageCount:k},d))},w.prototype.onDisConnected=function(){var d=this;this.isConnected=!1,this.econf.msgRetrySendTasks.length&&!this.msgRetryTimer&&(this.msgRetryTimer=setInterval(function(){var D,S,y,k;d.isConnected||(D=Object(E.y)(6000104),S=Date.now(),y=d.econf.cloudSetting.retry.msg_max_timeout,k=d.econf.cloudSetting.retry.room_msg_max_timeout,d.econf.msgRetrySendTasks.forEach(function(b,U){var z=S-b.retryTime;(b.convType==g.c.ConversationType.Room&&0<k&&k<z||b.convType!=g.c.ConversationType.Room&&y<z)&&(d.createInstance(b.convID,b.convType).retrySendMsg(b,!1,D),d.econf.msgRetrySendTasks.splice(U,1))}))},this.econf.cloudSetting.retry.msg_max_timeout/3))},w.prototype.onConnected=function(){for(var d=this,D=(this.isConnected=!0,this.econf.msgRetrySendTasks.filter(function(P){return P.convType!=g.c.ConversationType.Room})),S=this.econf.cloudSetting.retry,y=S.msg_count,k=S.msg_itvl,b=D.length>y&&0<y?y:D.length,U=0,z=0;U<D.length;)setTimeout(function(P,H){for(var Q={},J=P;J<H&&J<D.length;J++)Q[(L=D[J]).convType+L.convID]=J;for(J=P;J<H&&J<D.length;J++){var L,q=Q[(L=D[J]).convType+L.convID]==J;d.createInstance(L.convID,L.convType).retrySendMsg(L,q)}},z*k,U,U+=b),z++},w.prototype.onConnectedRoom=function(d,D){var S=this,y=this.gpMgr.findRoom(d);if(typeof D=="boolean")y&&y.create(g.y.Join,y.groupName,!0);else{var k=g.c.ConversationType.Room,b=this.econf.dbConvMap.get(this.econf.user.userID+k+d);if(b){var U=D.msgSeq,z=D.fetchMsg,P=D.stateSeq;if(D=D.fetchState,P===void 0)for(var H=this.createInstance(d,k),Q=this.econf.msgRetrySendTasks.filter(function(ee){return ee.convID==d&&ee.convType==k}),J=this.econf.cloudSetting.retry,L=J.msg_count,q=J.msg_itvl,B=Q.length>L&&0<L?L:Q.length,Y=0,K=0;Y<Q.length;)setTimeout(function(ee,oe){for(var ae=ee;ae<oe&&ae<Q.length;ae++)H.retrySendMsg(Q[ae],!1)},K*q,Y,Y+=B),K++;b.msgSeq=U,y&&y.sessionID.toString()!=b.roomSessionID?(b.maxSeq=0,b.maxOrderKey=0,b.roomSessionID=y.sessionID.toString(),this.dbMgr.addConversationList([b]),this.dbMgr.clearRoomMessage(d,z)):!b.maxSeq||U||z||(b.maxSeq=0,b.maxOrderKey=0,this.dbMgr.addConversationList([b]),this.dbMgr.clearRoomMessage(d,z)),z&&y&&(P&&(b.maxStatemsgSeq=P),J=D&&P?function(){var ee=b.minStatemsgSeq,oe={room_id:d,room_session_id:y.sessionID,room_user_session_id:y.userSessionID,sub_room_id:y.subRoomID};S.mergeSvrMsgStateList(g.n.H,ee,1,b.maxSeq,oe,b)}:void 0,this.createInstance(d,k).mergeSvrMessageList(g.n.H,J))}else this.createInstance(d,k)}},w.prototype.getConvKey=function(d,D){return this.econf.user.userID+(D||0)+d},w.prototype.getMsgExtraKey=function(d,D,S){return this.econf.user.userID+(D||0)+d+(S||"")},w.prototype.getDBConversation=function(d,D,S){return D=this.econf.dbConvMap.get(d)||{conversationID:D,conversationName:"",conversationAlias:"",conversationAvatarUrl:"",type:S,unreadMessageCount:0,notificationStatus:g.c.ConversationNotificationStatus.Notify,orderKey:0,isPinned:!1,draft:"",isDisabled:!1,mutedExpiredTime:0,marks:[],mentionedInfoList:[],id:d,ownerID:this.econf.user.userID,seq:0,state:g.j.Normal,maxSeq:0,maxOrderKey:0,msgSeq:0,readMsgSeq:0,sendMsgCount:0,deletedMsgCount:0,deletedMsgMaxSeq:0,deletedMsgSeqs:[],maxSendReceiptMsgSeq:0,maxRecvReceiptMsgSeq:0,minStatemsgSeq:0,maxStatemsgSeq:0,muteSeq:0,historyMsgSeq:0},this.econf.dbConvMap.set(d,D),D},w.prototype.createInstance=function(d,D){var S=this.getConvKey(d,D),y=this.convMap.get(S),k=(y||(y=new(D===g.c.ConversationType.Peer?A:D===g.c.ConversationType.Group?x:m).a(d,this.econf,this.bus,this.dbMgr,this.cnMgr),this.convMap.set(S,y),k=this.getDBConversation(S,d,D),D===g.c.ConversationType.Peer&&this.econf.user.userID===d&&(k.state=g.j.Disable,k.conversationName=this.econf.user.userName,k.conversationAvatarUrl=this.econf.user.userAvatarUrl),y.dbConv=k),this.setAssociatedGroup(y,d,D),D==g.c.ConversationType.Peer&&(k=this.econf.dbUserMap.get(d))&&(y.dbConv.conversationName=k.userName,y.dbConv.conversationAvatarUrl=k.userAvatarUrl),this.econf.dbConvMap.get(S));return k&&k!==y.dbConv&&(this.lg.w(i,"setDBConv",{dbConv:k,base:y.dbConv}),y.dbConv=k),this.svrConvAttrMap.pin.has(S)&&(y.dbConv.isPinned=!0,this.updateConvOrderKey(y.dbConv)),D==g.c.ConversationType.Peer&&this.svrConvAttrMap.mute.has(d)&&(y.dbConv.notificationStatus=g.c.ConversationNotificationStatus.DoNotDisturb),this.svrConvAttrMap.mark.has(S)&&(y.dbConv.marks=this.svrConvAttrMap.mark.get(S)),y},w.prototype.emitConvUpdate=function(d,D){var S,y=this;d.length&&(this.dbMgr.addConversationList(d),d.length==1?this.isValidConv(d[0])&&(S={event:g.c.ConversationEvent.Updated,conversation:Object(E.s)(g.h.convKeys,d[0])},this.bus.emit(g.m.ConvChanged,{infoList:[S]},D)):(S=d.filter(function(k){return y.isValidConv(k)}).map(function(k){return{event:g.c.ConversationEvent.Updated,conversation:Object(E.s)(g.h.convKeys,k)}})).length&&this.bus.emit(g.m.ConvChanged,{infoList:S},D))},w.prototype.emitRecvCmdMsgs=function(d,D,S){var y=this,k=[],b=(S=S.map(function(U){var z,P,H=U.msg_info;return D!=g.c.ConversationType.Room&&(H=U.recv_command_info.command_msg_info,z=(U=U.recv_command_info.command_svr_info).sender_user_id,P=U.msg_id,U=U.msg_time,H.sender_user_id=z,H.msg_id=P,H.msg_time=U),k.push(H.msg_id),y.transform2Command(d,D,H)}),D==g.c.ConversationType.Peer?"Peer":D==g.c.ConversationType.Group?"Group":"Room");return S={messageList:S,fromConversationID:d,info:{isOfflineMessage:!1}},this.bus.emit(b.toLowerCase()+"MessageReceived",S),this.bus.emit("receive"+b+"Message",S),k.join()},w.prototype.emitMessageDelete=function(d){var D=this,S={};d.forEach(function(y,k){S[k]=y.join();var b=+k[0],U=(k=k.substring(1),y.shift());0<y.length&&0<(y=U?y.filter(function(z){return U<z}):y).length&&D.createInstance(k,b).onPushMsgDelete(y),0<U&&D.createInstance(k,b).onPushAllMsgDelete(U,!1)}),d.size&&this.lg.i(i,"emitMsgDel",S)},w.prototype.emitMessageReceiptOrRevoke=function(d,D){var S=this,y=typeof D=="boolean",k=D===g.n.P,b=new Map,U=(d.forEach(function(L){var q=L.conversationType+L.conversationID,B=b.get(q)||new Set;B.add(L.conversationSeq),b.set(q,B)}),[]),z=[],P=[],H=[],Q=new Map,J=[];b.forEach(function(L,q){var B=q.substring(1),Y=+q[0],K=[],ee=S.createInstance(B,Y);L=ee.fetchMsgListFromCache(Array.from(L)).then(function(oe){d.forEach(function(ae){var X,re,ie,ge,_e;ae.conversationID==B&&ae.conversationType===Y&&(X=oe.get(ae.conversationSeq))&&(ae.messageID||(ae.messageID=X.messageID,H.push(ae)),ie=(_e=null)==(re=S.econf.dbConvMap.get(S.getConvKey(B,Y)))?void 0:re.lastMessage,ge=ae.receiptStatus,ae.revokeInfo||!ge||!k&&ge==X.receiptStatus||(S.selfReceiptSeqs.indexOf(ae.receiptSeq)==-1&&(ae.convReceipt?U.push(ae):ae.readMemberCount!=0&&z.push(ae)),X.receiptStatus&&(!ae.convReceipt||X.direction==g.c.MessageDirection.Send&&ae.readMemberCount!=-1||X.direction==g.c.MessageDirection.Receive&&ae.readMemberCount==-1)&&(X.receiptStatus!=ge&&(X.receiptStatus=ge,_e=X),ie)&&ie.messageID==X.messageID&&ie.receiptStatus!=ge&&(ie.receiptStatus=ge,Q.set(q,re))),y&&X.type!==g.c.MessageType.Revoke&&ae.revokeInfo&&(ge=S.createRevokeMsg(X,JSON.parse(ae.revokeInfo)),P.push(_e=ge),re)&&Y!=g.c.ConversationType.Room&&(X.direction==g.c.MessageDirection.Receive&&0<re.unreadMessageCount&&X.messageSeq>re.readMsgSeq&&!X.noUnread&&(++re.deletedMsgCount,--re.unreadMessageCount,Q.set(q,re)),ie)&&ie.messageID==X.messageID&&ie.type!=g.c.MessageType.Revoke&&(re.lastMessage=ge,Q.set(q,re)),_e)&&K.push(_e)}),ee.updateMsgCacheList(K)}),J.push(L)}),Promise.all(J).then(function(){var L;S.dbMgr.addMessageExtraList(H),U.length&&(L=S.mapMessageExtra2ReceiptInfo(U,k)).length&&S.bus.emit(g.m.ConvMsgReceipt,{infos:L}),!z.length||y&&D!==!0||(L=S.mapMessageExtra2ReceiptInfo(z,k)).length&&S.bus.emit(g.m.MsgReceipt,{infos:L}),P.length&&S.bus.emit(g.m.MsgRevoke,{messageList:P}),Q.size&&(L="emitReceiptOrRevoke:"+D,S.onUnreadMessageCount(),S.emitConvUpdate(Array.from(Q.values()),L))})},w.prototype.checkMsgEditInfo=function(d){var D=this;Object.keys(d).forEach(function(S){var y=S.substring(1),k=+S[0],b=Object.keys(d[S]).map(function(U){return+U});D.dbMgr.getMessageListBySeqs(y,k,b).then(function(U){var z,P=b.filter(function(H){var Q=U.get(H);if(Q&&Q.type!=g.c.MessageType.Revoke&&(!Q.editSeq||Q.editSeq<d[S][H]))return!0});P.length&&(z=P.map(function(H){return{cur_list_seq:H-1,count:1}}),z={conv_id:y,how:g.n.B,degree:1,reqs:z},D.cnMgr.send(g.d["msg_fetch_"+k],z).then(function(H){U.clear();var Q,J=D.createInstance(y,k);H.msgs||(H.msgs=[]),H.msgs.forEach(function(L){var q=L.msg_svr_info.conv_msg_seq;P.indexOf(q)!=-1&&U.set(q,J.transform2Message(L,!0))}),U.size&&(Q=Array.from(U.values()),D.bus.emit(g.m.MsgEdited,{messageList:Q}),(H=J.dbConv.lastMessage&&U.get(J.dbConv.lastMessage.messageSeq))&&(J.dbConv.lastMessage=H,D.emitConvUpdate([J.dbConv])),D.dbMgr.getReplyMessageListBySeqs(y,k,Array.from(U.keys()),2).then(function(L){L.length&&(L.forEach(function(q){var B;q.repliedInfo&&(B=U.get(q.repliedInfo.messageSeq),D.pb.handleReplyMsgInfo(q,B,!0))}),D.bus.emit(g.m.MsgRepliedInfo,{messageList:L})),J.updateMsgCacheList(L.concat(Q))}))}))})})},w.prototype.mapMessageExtra2ReceiptInfo=function(d,D){var S=this,y=[];return d.forEach(function(k){var b;k.messageID&&(b=k.messageID+k.receiptSeq,D&&S.msgReceiptChangedMap.set(b,!0),!D&&S.msgReceiptChangedMap.get(b)||(b=Math.max(k.readMemberCount,0),y.push({conversationID:k.conversationID,conversationType:k.conversationType,messageID:k.messageID,status:k.receiptStatus,readMemberCount:b,unreadMemberCount:k.unreadMemberCount,isSelfOperated:!(!k.convReceipt||b!=0)})))}),y},w.prototype.handleQueryConvsCallback=function(d,D){var S,y=D.option,k=D.isPinned,b=D.config,U=D.log,z=(D=D.resolve,y&&y.marks||[]),P=y?y.conversationTypes:void 0,H=!!y&&y.isOnlyUnreadConversation,Q=z.indexOf(-1)!=-1,J=z.indexOf(0)!=-1,L=[];d.forEach(function(q){var B,Y;L.find(function(K){return K.type==q.type&&K.conversationID==q.conversationID})||(k&&q.isPinned||!k&&(B=q,!z.length||(Y=!1,B=B.marks?B.marks.slice():[],Q&&(Y=0<B.length),Y=!(!J||B.length)||Y)||B.some(function(K){return z.indexOf(K)!=-1}))&&(Y=q,!P||!P.length||P.indexOf(Y.type)!=-1)&&(B=q,!H||0<B.unreadMessageCount))&&L.push(q)}),y=b.count,d=b.nextConversation,b=0,d&&d.conversationID&&(S=this.getConvKey(d.conversationID,d.type),b=L.findIndex(function(q){return q.id==S})+1),d=b+y,y=L.slice(b,d).map(function(q){return Object(E.s)(g.h.convKeys,q)}),Object.assign(U,{start:b,end:d,total:L.length,count:y.length,isAllMark:Q,isNoneMark:J}),b=k?g.u.QueryPinneds:g.u.QueryConvs,this.lg.i(i,b,U),D({conversationList:y})},w.prototype.mergeSvrConvList=function(d,D){var S=this,y=+this.econf.user.convSeq||0,k=this.econf.mailHBConfig.conv_list_seq,b=this.econf.mailHBConfig.fetch_conv_list,U=!1;if(this.econf.dbConvMap.forEach(function(L){L.type!=g.c.ConversationType.Room&&(L.state!=g.j.Delete&&L.msgSeq&&(!L.lastMessage||L.msgSeq>L.lastMessage.messageSeq)&&(U=!0),S.filterValidConv(L))&&S.createInstance(L.conversationID,L.type)}),!(b&&k&&!(k<=y)||U&&D))return D&&D(new Map);var z={time:new Date,dbSeq:y,hbSeq:k,how:d,fetch:b,logined:this.isLogined,isForce:U},P=1,H=0,Q=new Map,J=function(L){L.list.forEach(function(q){return Q.set(q.id,q)}),P==1&&(H=L.full_list),L.nextFlag&&S.econf.token?S.fetchSvrConv(L.nextFlag,++P,d,H).then(J):(S.econf.user.preVersion=S.st.deviceInfo.sdk_ver,S.dbMgr.updateUserSeq(L.cur,g.z.conv,!0),S.saveConversationList(Q,U,d,z,D))};this.fetchSvrConv(y,P,d,0).then(J)},w.prototype.mergeSvrConvAttrList=function(d,D){var S,y,k,b=this,U={pin:+this.econf.user.convPinnedSeq||0,mute:this.econf.user.muteSeq||0,mark:this.econf.user.convMarkSeq||0},z={pin:this.econf.mailHBConfig.conv_pinned_list_seq,mute:this.econf.mailHBConfig.c2c_mute_max_seq||0,mark:this.econf.mailHBConfig.conv_mark_seq||0},P={time:new Date,how:d,logined:this.isLogined,dbSeq:U,hbSeq:z},H={pin:!1,mute:!1,mark:!1,svrMap:new Map},Q=function(){var J;H.pin&&H.mute&&H.mark&&(J="mergeSvrConvAttr",(z.pin>U.pin||z.mute>U.mute||z.mark>U.mark)&&b.lg.i(i,J,P),d==g.n.H&&H.svrMap.size&&(b.emitConvUpdate(Array.from(H.svrMap.values()),J),b.onUnreadMessageCount()),D())};z.pin>U.pin?(S=1,y=0,k=function(J){J.list.forEach(function(L){b.svrConvAttrMap.pin.add(b.getConvKey(L.conv_id,L.conv_type))}),S==1&&(y=J.full_list),J.nextFlag&&b.econf.token?b.fetchSvrPinned(J.nextFlag,++S,y).then(k):(b.dbMgr.updateUserSeq(J.cur,g.z.pin,!0),y&&b.econf.dbConvMap.size&&b.econf.dbConvMap.forEach(function(L){L.isPinned&&!b.svrConvAttrMap.pin.has(b.getConvKey(L.conversationID,L.type))&&(L.isPinned=!1,b.updateConvOrderKey(L))}),H.pin=!0,Q())},this.fetchSvrPinned(U.pin,S,0).then(k)):(H.pin=!0,Q()),z.mute>U.mute?this.cnMgr.send(g.d.conv_mute_list,null).then(function(J){J.code||(b.svrConvAttrMap.mute.clear(),J.user_ids.forEach(function(L){var q=b.getConvKey(L,g.c.ConversationType.Peer);(q=b.econf.dbConvMap.get(q))?q.notificationStatus!=g.c.ConversationNotificationStatus.DoNotDisturb&&(q.notificationStatus=g.c.ConversationNotificationStatus.DoNotDisturb,H.svrMap.set(q.id,q)):b.svrConvAttrMap.mute.add(L)}),b.dbMgr.updateUserSeq(J.max_mute_seq,g.z.mute,!0),b.econf.dbConvMap.forEach(function(L){L.type==g.c.ConversationType.Peer&&L.notificationStatus==g.c.ConversationNotificationStatus.DoNotDisturb&&J.user_ids.indexOf(L.conversationID)==-1&&(L.notificationStatus=g.c.ConversationNotificationStatus.Notify,H.svrMap.set(L.id,L))})),H.mute=!0,Q()}):(H.mute=!0,Q()),z.mark>U.mark?this.cnMgr.send(g.d.conv_mark_list,{cur_list_seq:U.mark}).then(function(J){J.code||(J.full_list&&b.econf.dbConvMap.size&&b.econf.dbConvMap.forEach(function(L){L.marks&&(L.marks.length=0)}),J.conv_mark_list.forEach(function(L){var q,B=Object(E.w)(L.mark_content),Y=(L=b.getConvKey(L.conv_id,L.conv_type),b.econf.dbConvMap.get(L));Y?(q=Y.marks||[]).length==B.length&&q.join()==B.join()||(Y.marks=B,H.svrMap.set(Y.id,Y)):b.svrConvAttrMap.mark.set(L,B)}),J.max_mark_seq&&(b.econf.user.convMarkSeq=J.max_mark_seq,b.dbMgr.setUser(b.econf.user))),H.mark=!0,Q()}):(H.mark=!0,Q())},w.prototype.mergeSvrC2CMsgList=function(d,D){var S,y,k,b,U,z,P,H=this;return d===g.n.L&&!this.econf.mailHBConfig.fetch_c2c_msg_count||(S=this.econf.user.c2cMsgSeq||0,!(y=this.econf.mailHBConfig.c2c_msg_seq))||y<=S?D():(k=1,b={},U=this.econf.user.deleteAllMsgTime||0,z=[],P=function(Q){var J;H.econf.token&&H.cnMgr&&(Q.msgs||(Q.msgs=[]),Q.msgs.forEach(function(L){var q,B=L.msg_info.conv_id,Y=L.msg_svr_info.c2c_msg_seq,K=L.msg_svr_info.msg_time;S<Y&&U<K&&(b[B]||(b[B]=new Map),Y=H.econf.dbConvMap.get(H.getConvKey(B,0)),q=(K=H.createInstance(B,0)).transform2Message(L,!0),b[B].set(L.msg_svr_info.conv_msg_seq,q),Y||(K.dbConv.state=g.j.Delete),K.dbConv.conversationName||(q.direction==g.c.MessageDirection.Receive?K.dbConv.conversationName=Object(E.g)(L.msg_svr_info.sender_user_name):(Y=H.econf.dbUserMap.get(B))&&Y.userName&&(K.dbConv.conversationName=Y.userName),K.dbConv.conversationName)||z.push(B))}),J=Q.c2c_msg_seq,!Q.fetch_end&&S<J?H.fetchSvrMessage(J,++k,d,J-S,S).then(P):(H.dbMgr.updateUserSeq(Q.svr_c2c_msg_seq,g.z.msg,!0),H.cnMgr.fetchSvrUsers(z,"fetchC2CMsg").then(function(){var L=[];Object.keys(b).forEach(function(q){var B,Y=H.createInstance(q,0),K=(B=Y.dbConv).deletedMsgMaxSeq||0,ee=B.deletedMsgSeqs||[];(B=(b[q].forEach(function(oe){oe=oe.messageSeq,(ee.indexOf(oe)!=-1||oe<=K)&&b[q].delete(oe)}),Y.afterMergeSvrMsg(Array.from(b[q].keys()),b[q])))&&L.push(B)}),L.length?Promise.all(L).then(D):D()})))},void this.fetchSvrMessage(-1,k,d,y-S+1,S).then(P))},w.prototype.mergeMessageReactionList=function(d){var D=this,S={time:new Date},y=[],k=1,b=function(U){return c(D,void 0,void 0,function(){var z,P,H;return u(this,function(Q){return U.code||(z=U.msg_next_reaction_seq,P=U.msg_max_reaction_seq,H=U.reaction_list,U.fetch_end?(H.forEach(function(J){y.push({reactionSeq:J.max_reaction_seq,reactionKey:J.reaction_key,totalCount:J.total_user_count,userList:J.user_reaction,isSelfIncluded:J.include_self})}),this.saveMessageReactionExtra(d,y,P),this.lg.i(i,"mergeSvrReaction",S)):this.fetchSvrMsgReaction(d,z,++k).then(b)),[2]})})};this.fetchSvrMsgReaction(d,d.reactionSeq,k).then(b)},w.prototype.mergeSvrMsgExtraList=function(d,D){var S=this,y=+this.econf.user.msgExtraSeq||0,k=this.econf.mailHBConfig.extra_msg_list_seq;if(!this.lg||!k||k<=y)return D&&D();var b={time:new Date,dbSeq:y,hbSeq:k,how:d},U=1,z=y,P=new Map,H=new Map,Q=new Map,J=function(L){L.list||(L.list=[]);var q=L.fetch_end||Object(E.m)(L.code)?0:L.next_list_seq;z=L.next_list_seq||z,L.list.forEach(function(B){var Y,K;B.type==1?(Y=S.createMessageReceiptItemExtra(H,B),P.set(Y.id,Y)):B.type!=2&&B.type!=3||(Y=B.conv_type+B.conv_id,K=Q.get(Y)||[0],Q.set(Y,K),B.type==2?K.push.apply(K,r([],s(B.del_conv_msg_seqs),!1)):K[0]=Math.max(K[0],B.del_conv_msg_seqs[0]))}),q&&S.econf.token?S.fetchSvrMsgExtra(q,++U,d).then(J):(L=Array.from(P.values()),S.dbMgr.updateUserSeq(z,g.z.ext,!0),S.dbMgr.addMessageExtraList(L),S.dbMgr.addConversationList(Array.from(H.values())),S.emitMessageReceiptOrRevoke(L,d),S.emitMessageDelete(Q),S.lg.i(i,"mergeSvrMsgExtra",b),D&&D())};this.fetchSvrMsgExtra(y,U,d).then(J)},w.prototype.mergeSvrMsgStateList=function(d,D,S,y,k,b){var U=this;if(D===void 0&&(D=0),S===void 0&&(S=0),y===void 0&&(y=0),D=k?D||0:+this.econf.user.c2cMsgStateSeq||0,!k){var z=this.econf.mailHBConfig.c2c_statemsg_seq;if(!this.lg||!z||z<=D)return;S=1,y=this.econf.mailHBConfig.c2c_msg_seq}var P={time:new Date,dbSeq:D,how:d,minMsgSeq:S,maxMsgSeq:y},H=1,Q=D,J=new Map,L={},q=new Map,B=function(Y){Y.statemsg_list||(Y.statemsg_list=[]);var K=Y.fetch_end||Object(E.m)(Y.code)?0:Y.next_statemsg_seq;Q=Y.next_statemsg_seq||Q;for(var ee,oe=0;oe<Y.statemsg_list.length;oe++){var ae,X,re,ie,ge,_e=Y.statemsg_list[oe],ke=_e.conv_id,De=_e.conv_type,Re=_e.conv_msg_seq,we=Object(E.v)(_e.msg_status),Oe=we.revoke,Ae=!!_e.revoke_time;De==g.c.ConversationType.Room&&Ae?(ge=_e.msg_type,J.set(Re,{revokeType:_e.revoke_type,revokeStatus:Oe,revokeTimestamp:_e.revoke_time,operatedUserID:_e.user_id||"",revokeExtendedData:Object(E.g)(_e.payload),originalMessageType:200<=ge&&ge<=400?g.c.MessageType.Custom:ge,originalTextMessageContent:""})):(ae=U.createInstance(ke,De),U.isMsgDel(ae.dbConv,Re,0)||((X=_e.edit_msg_seq)?(re=L[De+ke])?re[Re]=X:L[De+ke]=((re={})[Re]=X,re):(X=Ae?g.c.MessageReceiptStatus.None:we.receipt,re=_e.reaction_seq,we=U.getMsgExtraKey(ke,De,Re),(ie=U.econf.msgExtraMap.get(we))||!re&&!Ae&&X!=g.c.MessageReceiptStatus.Expired&&X!=g.c.MessageReceiptStatus.Failed||((ie=U.createMessageExtra(ke,De,Re)).receiptStatus=X,ie.reactionSeq=0,ie.reactions={}),ie&&(+ie.reactionSeq<re&&U.handleMsgStateReactionBriefs(ie,_e.reaction_briefs),Ae?(ie.receiptStatus=g.c.MessageReceiptStatus.None,ge=_e.msg_type,ie.revokeInfo=JSON.stringify({revokeType:_e.revoke_type,revokeStatus:Oe,revokeTimestamp:_e.revoke_time,operatedUserID:_e.user_id||"",revokeExtendedData:Object(E.g)(_e.payload),originalMessageType:200<=ge&&ge<=400?g.c.MessageType.Custom:ge,originalTextMessageContent:""}),U.revokeMentionedInfoList(ae.dbConv,Re)):X&&(ie.receiptStatus=ie.readMemberCount==-1?g.c.MessageReceiptStatus.Done:X),q.set(we,ie)))))}K&&U.econf.token?U.fetchSvrMsgState(K,++H,d,S,y,k).then(B):(b?(b.minStatemsgSeq=Q,b.maxStatemsgSeq=Math.max(Q,b.maxStatemsgSeq||0),U.dbMgr.addConversationList([b])):U.dbMgr.updateUserSeq(Q,g.z.state,!0),J.size&&b&&(ke=b.conversationID,(ee=U.createInstance(ke,g.c.ConversationType.Room)).fetchMsgListFromCache(Array.from(J.keys())).then(function(Pe){var Ue=[];J.forEach(function(Ne,mt){(mt=Pe.get(mt))&&mt.type!=g.c.MessageType.Revoke&&Ue.push(U.createRevokeMsg(mt,Ne))}),Ue.length&&(U.bus.emit(g.m.MsgRevoke,{messageList:Ue}),ee.updateMsgCacheList(Ue))})),q.size&&(K=Array.from(q.values()),U.emitMessageReceiptOrRevoke(K,d!=g.n.Other),U.dbMgr.addMessageExtraList(K)),U.checkMsgEditInfo(L),U.lg.i(i,"mergeSvrMsgState",P))};this.fetchSvrMsgState(D,H,d,S,y,k).then(B)},w.prototype.mergeSvrDelAllConvMsgs=function(){var d=this.econf.user.deleteAllMsgTime||0,D=this.econf.mailHBConfig.delete_all_msg_time||0;d<D&&(this.updateDelMsgTime(D),this.dbMgr.clearMessage(D))},w.prototype.fetchSvrConv=function(d,D,S,y){var k=this;return this.cnMgr.send(g.d.conv_list,{cur_list_seq:d,count:100,full_pull:y,degree:D,how:S}).then(function(b){var U,z,P,H,Q,J,L;return b.code?{list:[]}:(U=b.conv_list_seq,z=b.max_list_seq,P=b.full_list,Q=(H=b.fetch_end)||z<=U||U<=d||z<=d?0:U,J={},L=b.conv_list.map(function(q){var B=q.conv_id,Y=q.conv_type,K=q.is_del,ee=q.last_msg_del,oe=q.last_msg,ae=q.read_seq,X=q.send_count_after_read,re=q.sub_read_count,ie=(q=k.transform2DBConv(q)).msgSeq,ge=q.lastMessage;return J[Y+B]={m:ie,r:ae,s:X,d:re,is_del:K,last_msg_del:ee,last_msg:oe&&oe.msg_svr_info&&oe.msg_svr_info.conv_msg_seq,msg:ge?ge.orderKey+","+ge.messageSeq+","+ge.messageID:void 0},q}),b.conv_list.length&&k.lg.i(i,"fetchSvrConv",J),{nextFlag:Q,cur:U,max:z,list:L,full_list:P,fetch_end:H})})},w.prototype.fetchSvrPinned=function(d,D,S){return this.cnMgr.send(g.d.conv_pinned_list,{cur_list_seq:d,count:100,full_pull:S,degree:D}).then(function(y){var k,b,U;return y.code?{list:[]}:(k=y.conv_list_seq,b=y.max_list_seq,{nextFlag:(U=y.fetch_end)||b<=k||k<=d||b<=d?0:k,cur:k,max:b,list:y.conv_list,full_list:y.full_list,fetch_end:U})})},w.prototype.fetchSvrMessage=function(d,D,S,y,k){return d={cur_list_seq:d,count:Math.min(100,y),full_pull:S==g.n.L?1:0,degree:S,how:D,dbSeq:k},this.cnMgr.send(g.d.msg_fetch_all_c2c,d,g.g.S)},w.prototype.fetchSvrMsgExtra=function(d,D,S){return this.cnMgr.send(g.d.extra_msglist,{cur_list_seq:d,count:100,full_pull:D,how:S},g.g.S)},w.prototype.fetchSvrMsgState=function(d,D,S,y,k,b){return d={statemsg_seq:d,count:100,degree:D,how:S,min_msg_seq:y,max_msg_seq:k},b&&Object.assign(d,b),D=b?b.conv_id?g.c.ConversationType.Group:g.c.ConversationType.Room:g.c.ConversationType.Peer,this.cnMgr.send(g.d["msg_state_list_"+D],d,g.g.S)},w.prototype.fetchSvrMsgReaction=function(d,D,S){return D={conv_id:d.conversationID,conv_msg_seq:d.conversationSeq,start_reaction_seq:D,degree:S},this.cnMgr.send(g.d["reaction_list_"+d.conversationType],D,g.g.S)},w.prototype.fetchReactionKey=function(d,D,S){return D={conv_id:d.conversationID,conv_msg_seq:d.messageSeq,reaction_key:D,max_reaction_seq:0,is_detail:S},this.cnMgr.send(g.d["get_reaction_"+d.conversationType],D,S?g.g.A:g.g.S)},w.prototype.createMessageReceiptItemExtra=function(d,D){var S=D.conv_id,y=D.conv_type,k=D.conv_msg_seq,b=D.receipt_seq,U=D.read_count,z=Math.max(0,D.unread_count),P=U==-1,H=(D=D.is_conv_read,this.createMessageExtra(S,y,D?0:k));return H.receiptSeq&&H.receiptSeq>b||(H.conversationSeq=k,H.receiptSeq=b,H.readMemberCount=U,H.unreadMemberCount=z,H.convReceipt=D?1:0,(D||P||0<U&&z==0)&&(H.receiptStatus=g.c.MessageReceiptStatus.Done),D&&(H.messageID="",k=d.get(S)||this.createInstance(S,y).dbConv,b=H.conversationSeq,U=k.maxSendReceiptMsgSeq||0,P&&(k.maxRecvReceiptMsgSeq||0)<b?k.maxRecvReceiptMsgSeq=b:!P&&U<b&&(k.maxSendReceiptMsgSeq=b),d.set(S,k))),H},w.prototype.createRevokeMsg=function(d,D){return D=f({type:g.c.MessageType.Revoke,message:"",extendedData:d.extendedData,localExtendedData:d.localExtendedData,isMentionAll:d.isMentionAll,mentionedUserIDs:d.mentionedUserIDs?r([],s(d.mentionedUserIDs),!1):[],clientSid:d.clientSid,clientSeq:d.clientSeq,localMessageID:d.localMessageID,messageID:d.messageID,messageSeq:d.messageSeq,senderUserID:d.senderUserID,timestamp:d.timestamp,conversationID:d.conversationID,conversationType:d.conversationType,direction:d.direction,sentStatus:d.sentStatus,orderKey:d.orderKey,isServerMessage:d.isServerMessage,receiptStatus:g.c.MessageReceiptStatus.None,rootRepliedCount:d.rootRepliedCount,repliedInfo:d.repliedInfo?JSON.parse(JSON.stringify(d.repliedInfo)):void 0},D),d.noUnread&&(D.noUnread=d.noUnread),D},w.prototype.saveMessageRevokeExtra=function(d,D,S){var y,k,b=this,U=d.conversationID,z=d.conversationType,P=this.createInstance(U,z);P.updateMsgCacheList([d]),P.updateMsgStateSeq(D),z!=g.c.ConversationType.Room&&(D=d.messageSeq,y=this.getMsgExtraKey(U,z,D),(k=this.econf.msgExtraMap.get(y))||(k={id:y,ownerID:this.econf.user.userID,conversationID:U,conversationType:z,conversationSeq:D},this.econf.msgExtraMap.set(y,k)),k.messageID=d.messageID,k.revokeInfo=JSON.stringify({revokeType:d.revokeType,revokeStatus:d.revokeStatus,revokeTimestamp:d.revokeTimestamp,operatedUserID:d.operatedUserID,revokeExtendedData:d.revokeExtendedData,originalMessageType:d.originalMessageType,originalTextMessageContent:d.originalTextMessageContent}),this.dbMgr.addMessageExtraList([k]),this.dbMgr.getReplyMessageListBySeqs(U,z,[D],1).then(function(H){H.length&&b.bus.emit(g.m.MsgRepliedInfo,{messageList:H})}),y=P.dbConv.lastMessage,k=!1,d.direction==g.c.MessageDirection.Receive&&0<P.dbConv.unreadMessageCount&&D>P.dbConv.readMsgSeq&&!d.noUnread&&(k=!0,++P.dbConv.deletedMsgCount,--P.dbConv.unreadMessageCount,this.onUnreadMessageCount(S)),(y==null?void 0:y.messageID)==d.messageID&&(k=!0,P.dbConv.lastMessage=d),k=!!this.revokeMentionedInfoList(P.dbConv,D)||k)&&this.emitConvUpdate([P.dbConv],S)},w.prototype.createMessageExtra=function(d,D,S,y){y===void 0&&(y="");var k=this.getMsgExtraKey(d,D,S),b=this.econf.msgExtraMap.get(k);return b||(b={id:k,ownerID:this.econf.user.userID,conversationID:d,conversationType:D,conversationSeq:S,messageID:y,convReceipt:0,receiptStatus:g.c.MessageReceiptStatus.Processing,receiptSeq:0,receiptMemberListSeq:0,readMemberCount:0,unreadMemberCount:0,memberSeqs:{},reactionSeq:0,reactions:{}},this.econf.msgExtraMap.set(k,b)),b.reactions||(b.reactions={}),y&&!b.messageID&&(b.messageID=y),b},w.prototype.saveMessageReactionExtra=function(d,D,S,y,k){var b="saveReactionExtra",U=[],z=this.econf.mailHBConfig.reaction_brief_len;if(this.lg.i(i,b,{reactionInfoList:D,maxReactionSeq:S,noEmit:y,isDetail:k}),S&&S<=d.reactionSeq&&!k)return[];if(S&&(d.reactionSeq=S),D.forEach(function(J){var L=k?J.reactionSeq:((L=d.reactions[J.reactionKey])==null?void 0:L.detailSeq)||0,q=((q=d.reactions[J.reactionKey])==null?void 0:q.userList)||[],B=((B=d.reactions[J.reactionKey])==null?void 0:B.detailUserList)||[],Y=J.userList.length==0&&J.totalCount>z||k?q:J.userList;if(B=k?J.userList:B,k&&(Y=B.slice(0,z)),!(d.reactions[J.reactionKey]&&J.reactionSeq<d.reactions[J.reactionKey].seq)){if(q=!Object(E.a)(Y,q)||J.totalCount!==((q=d.reactions[J.reactionKey])==null?void 0:q.totalCount),+J.reactionSeq>+(d.reactionSeq||0)&&(d.reactionSeq=J.reactionSeq),J.totalCount==0)delete d.reactions[J.reactionKey];else{if(J.totalCount>z&&Y.length<z)return;d.reactions[J.reactionKey]={seq:J.reactionSeq,detailSeq:L,value:"",totalCount:J.totalCount,userList:Y,detailUserList:B,isSelfIncluded:J.isSelfIncluded}}q&&U.push({conversationID:d.conversationID,conversationType:d.conversationType,messageID:d.messageID,reactionType:J.reactionKey,totalCount:J.totalCount,isSelfIncluded:J.isSelfIncluded,userList:Y.map(function(K){return{userID:K.userID}})})}}),this.dbMgr.addMessageExtraList([d]),!y&&0<U.length&&this.bus.emit(g.m.MsgReactions,{reactions:U}),(D=(S=this.createInstance(d.conversationID,d.conversationType)).dbConv.lastMessage)&&D.messageID==d.messageID){var P,H=[];for(P in d.reactions){var Q=d.reactions[P];H.push({conversationID:d.conversationID,conversationType:d.conversationType,messageID:d.messageID,userList:Q.userList,totalCount:Q.totalCount,reactionType:P,isSelfIncluded:Q.isSelfIncluded})}Object(E.a)(D.reactions,H)||(D.reactions=H,this.emitConvUpdate([S.dbConv],b))}return U},w.prototype.updateMarkSeq=function(d){d.sort(function(y,k){return y-k});var D=d.length-1,S=this.econf.user;d[D]-d[0]!=D||S.convMarkSeq&&S.convMarkSeq!=d[0]-1||(S.convMarkSeq=d[D],this.dbMgr.setUser(S))},w.prototype.updateDelMsgTime=function(d,D){var S=this.econf.user;d&&(D||!+S.deleteAllMsgTime||d>S.deleteAllMsgTime)&&(S.deleteAllMsgTime=d,this.dbMgr.setUser(S))},w.prototype.setAssociatedGroup=function(d,D,S){S===g.c.ConversationType.Group?this.gpMgr.initGroupByConv(D):S===g.c.ConversationType.Room&&((S=this.gpMgr.findRoom(D))?d.setAssociatedGroup(S.sessionID,S.userSessionID,S.subRoomID,S.enabledOfflineMsg):d.setAssociatedGroup())},w.prototype.saveConversationList=function(d,D,S,y,k){var b=this,U=new Map,z=new Map,P=(d.forEach(function(Q,J){var L,q,B,Y,K,ee=null,oe=Q.state==g.j.Delete,ae=Q.msgSeq,X=b.econf.dbConvMap.get(J),re=!X||!X.maxOrderKey,ie=!1;X?(L=X.orderKey,q=X.msgSeq||0,B=X.state==g.j.Delete,q<=ae&&(Y=X.mentionedInfoList||[],(K=Q.mentionedInfoList||[]).length!=Y.length)&&(X.mentionedInfoList=K,z.set(J,X),B||(ee=g.c.ConversationEvent.Updated)),oe&&Q.seq&&X.seq<Q.seq&&(Object.assign(X,Q),z.set(J,X)),(ie=q<ae)||X.readMsgSeq<Q.readMsgSeq||!X.lastMessage&&Q.lastMessage?(Object.assign(X,Q),z.set(J,X),ee=B||re?g.c.ConversationEvent.Added:g.c.ConversationEvent.Updated):D&&S==g.n.L&&(Object.assign(X,Q),z.set(J,X)),oe&&!B&&(ee=g.c.ConversationEvent.Deleted),L>Q.orderKey&&(X.orderKey=L),X.maxStatemsgSeq=Q.maxStatemsgSeq):(X=b.getDBConversation(J,Q.conversationID,Q.type),Object.assign(X,Q),z.set(J,X)),X.state!=Q.state&&(X.state=Q.state),X.maxOrderKey||(X.maxOrderKey=ae*g.h.MESSAGE_SEQ_MULTIPLIER),!oe&&0<ae&&re&&(ee=g.c.ConversationEvent.Added),(ee=Q.state==g.j.Disable&&((Y=Q.lastMessage)==null?void 0:Y.type)==g.c.MessageType.Tips?g.c.ConversationEvent.Disabled:ee)!=null&&U.set(J,ee),S==g.n.H&&(K=X.type==g.c.ConversationType.Group&&X.minStatemsgSeq<X.maxStatemsgSeq?function(){b.mergeSvrMsgStateList(S,X.minStatemsgSeq,1,X.msgSeq,{conv_id:X.conversationID},X)}:void 0,ee===g.c.ConversationEvent.Added||ie||X.maxSeq<ae?b.createInstance(X.conversationID,X.type).mergeSvrMessageList(S,K):K&&K())}),"mergeSvrConv"+U.size),H=[];this.econf.dbConvMap.forEach(function(Q){Q.type!=g.c.ConversationType.Peer||Q.conversationName||H.push(Q.conversationID)}),this.cnMgr.fetchSvrUsers(H,P).then(function(){b.dbMgr.addConversationList(Array.from(z.values()));var Q,J=0;b.econf.dbConvMap.forEach(function(L){b.filterValidConv(L)&&(J++,b.createInstance(L.conversationID,L.type))}),y.count=J,b.lg.i(i,P,y),k?k(U):U.size&&(Q=[],U.forEach(function(L,q){q=b.econf.dbConvMap.get(q),L!=g.c.ConversationEvent.Deleted&&!b.isValidConv(q)||Q.push({event:L,conversation:Object(E.s)(g.h.convKeys,q)})}),Q.length)&&b.bus.emit(g.m.ConvChanged,{infoList:Q})})},w.prototype.mergeGroupMessageStatus=function(d,D,S){if(D.length){var y=+d.minStatemsgSeq||0;if(!(H=+d.maxStatemsgSeq||0)||y<H){for(var k=D[0].messageSeq,b=k,U=1;U<D.length;U++){var z=D[U].messageSeq;z<k&&(k=z),b<z&&(b=z)}var P,H=d.conversationID,Q=null;d.type==g.c.ConversationType.Group?Q={conv_id:H}:(P=this.gpMgr.findRoom(H))&&(Q={room_id:H,room_session_id:P.sessionID,room_user_session_id:P.userSessionID,sub_room_id:P.subRoomID}),Q&&this.mergeSvrMsgStateList(S,y,k,b,Q,d)}}},w.prototype.isValidConv=function(d){return!(!d||d.state==g.j.Delete||!d.maxOrderKey)},w.prototype.filterValidConv=function(d,D){var S=d.state!=g.j.Delete&&!!d.maxOrderKey&&d.type!=g.c.ConversationType.Room;return d.type===void 0&&(d.type=g.c.ConversationType.Peer),D?S&&d.isPinned:S},w.prototype.transform2DBConv=function(d){var D,S=d.conv_id,y=d.conv_type,k=d.conv_msg_seq,b=d.send_count_after_read,U=d.sub_read_count,z=this.getConvKey(S,y),P=this.econf.user.userID,H=this.econf.dbConvMap.get(z),Q=d.read_seq;return z={id:z,ownerID:this.econf.user.userID,conversationID:S,type:y,msgSeq:k,readMsgSeq:Q,sendMsgCount:b,deletedMsgCount:U,unreadMessageCount:Math.max(k-Q-b-U,0),orderKey:this.getConversationOrderKey(d.last_msg,d.last_msg_time||d.update_time)},k==Q&&(z.sendMsgCount=0,z.deletedMsgCount=0,z.unreadMessageCount=0),H?(z.isPinned=H.isPinned,this.updateConvOrderKey(z),z.state=!(k>H.msgSeq)&&H.state||0,z.isDisabled=H.isDisabled||!1,z.mutedExpiredTime=H.mutedExpiredTime||0):(z.state=0,z.isDisabled=!1,z.mutedExpiredTime=0),y==g.c.ConversationType.Group&&d.statemsg_seq&&(D=d.statemsg_seq,this.econf.user.preVersion?z.maxStatemsgSeq=D:(b=this.econf.mailHBConfig.state_seq_reduce_num,z.maxStatemsgSeq=b==-1?0:D-b)),d.is_del?(z.state=g.j.Delete,z.seq=d.conv_list_seq,z.mentionedInfoList=[]):this.filterMentionedInfoList(z,d.at_info_list,Math.max(z.readMsgSeq,H?H.readMsgSeq:0),H&&H.deletedMsgSeqs?H.deletedMsgSeqs.slice():[]),Q=H==null?void 0:H.lastMessage,(b=d.last_msg_del?void 0:this.transform2Message(d.last_msg,S,y))&&b.type==g.c.MessageType.Tips&&(b.event==2||b.event==6&&b.targetUserList.find(function(J){return J.userID==P})||b.event==5&&b.operatedUser.userID==P)&&(z.isDisabled=!0,z.state!=g.j.Delete&&(z.state=g.j.Disable),b.event==2?(b.localMessageID=y+String(b.event)+S,b.messageID="",b.orderKey=(k+1)*g.h.MESSAGE_SEQ_MULTIPLIER,z.msgSeq=k+1,z.deletedMsgCount=U+1):b.orderKey=b.messageSeq*g.h.MESSAGE_SEQ_MULTIPLIER,z.maxOrderKey=H?Math.max(H.maxOrderKey,b.orderKey):b.orderKey,this.dbMgr.addMessageList(S,y,[b])),b&&Q?(b.orderKey||(this.dbMgr.checkMessageStatus(b),b.orderKey)||(b.orderKey=b.messageSeq*g.h.MESSAGE_SEQ_MULTIPLIER),(Q.sentStatus!==g.c.MessageSentStatus.Success&&b.timestamp<Q.timestamp||b.orderKey<Q.orderKey||b.editSeq<Q.editSeq)&&(b=Q)):b=b||Q,y==g.c.ConversationType.Peer&&b&&b.receiptStatus==g.c.MessageReceiptStatus.Processing&&H&&(D=b.messageSeq,d=H.maxSendReceiptMsgSeq||0,k=H.maxRecvReceiptMsgSeq||0,b.direction==g.c.MessageDirection.Send&&D<=d||b.direction==g.c.MessageDirection.Receive&&D<=k)&&(b.receiptStatus=g.c.MessageReceiptStatus.Done),H&&b&&(D=b.messageSeq,U=H.deletedMsgMaxSeq||0,S=H.deletedMsgSeqs,H.deletedMsgSeqs&&S.indexOf(D)!=-1||D&&D<=U)&&(b=void 0),(z.lastMessage=b)&&!b.orderKey&&(this.dbMgr.checkMessageStatus(b),b.orderKey||(b.orderKey=b.messageSeq*g.h.MESSAGE_SEQ_MULTIPLIER)),z},w.prototype.filterMentionedInfoList=function(d,D,S,y){this.econf.msgExtraMap.forEach(function(b){b.revokeInfo&&b.conversationID==d.conversationID&&b.conversationType==d.type&&y.push(b.conversationSeq)});var k=[];D.forEach(function(b){var U=b.conv_msg_seq;S<U&&y.indexOf(U)==-1&&k.push({type:b.at_type,fromUserID:b.user_id,messageID:b.msg_id,messageSeq:U})}),d.mentionedInfoList=k},w.prototype.revokeMentionedInfoList=function(d,D){var S=d.mentionedInfoList;return!!(d.readMsgSeq<D&&S&&S.length&&(d=S.findIndex(function(y){return y.messageSeq==D}))!=-1)&&(S.splice(d,1),!0)},w.prototype.getConversationOrderKey=function(d,D){return d&&d.msg_svr_info&&d.msg_svr_info.msg_time||D},w.prototype.transform2Message=function(d,D,S){var y;if(d&&d.msg_info&&d.msg_info.msg_type&&d.msg_svr_info)return y=this.pb.decodeSvrMsg(this.econf,d,D,S),d.msg_info.has_receipt&&y.type!=g.c.MessageType.Revoke&&(y.receiptStatus=g.c.MessageReceiptStatus.Processing,(d=this.econf.msgExtraMap.get(this.getMsgExtraKey(D,S,y.messageSeq)))&&!d.convReceipt&&(y.receiptStatus=d.receiptStatus),this.dbMgr.checkMessageStatus(y)),y.repliedInfo&&this.isMsgDel(this.econf.dbConvMap.get(this.getConvKey(D,S)),y.repliedInfo.messageSeq,y.repliedInfo.sentTime)&&(y.repliedInfo.state=1),y},w.prototype.transform2Command=function(d,D,S){var y=(y=this.econf.dbConvMap.get(this.getConvKey(d,D)))?(y.msgSeq||0)*g.h.MESSAGE_SEQ_MULTIPLIER+1:1,k=S.sender_user_id;return{type:S.msg_type,message:S.msg_type==g.c.MessageType.Barrage?Object(E.g)(S.msg):S.msg,localMessageID:S.msg_id,messageID:S.msg_id,messageSeq:0,orderKey:y,timestamp:S.msg_time,extendedData:S.payload?Object(E.g)(S.payload):void 0,conversationID:d,conversationType:D,senderUserID:k,sentStatus:g.c.MessageSentStatus.Success,direction:k===this.econf.user.userID?g.c.MessageDirection.Send:g.c.MessageDirection.Receive}},w.prototype.syncConvReadSeqToMsgSeq=function(d,D){d.sendMsgCount=0,d.deletedMsgCount=0,d.unreadMessageCount=0,d.readMsgSeq=D||0,d.mentionedInfoList=[],d!==(D=this.createInstance(d.conversationID,d.type)).dbConv&&(D.dbConv=d)},w.prototype.deleteLocalConv=function(d,D){return d.state=g.j.Delete,this.syncConvReadSeqToMsgSeq(d,d.msgSeq),this.convMap.delete(d.id),this.dbMgr.addConversationList([d]),this.onUnreadMessageCount(),this.stgyMgr.modifyConv(d.conversationID,d.type,g.c.ConversationEvent.Deleted),D&&this.lg.i(i,g.u.DelConv,D),Promise.resolve({conversationID:d.conversationID,conversationType:d.type})},w.prototype.deleteAllLocalConv=function(){var d=this,D=0,S=[];return this.econf.dbConvMap.forEach(function(y){y.type!=g.c.ConversationType.Room&&(d.isValidConv(y)&&D++,y.state=g.j.Delete,d.syncConvReadSeqToMsgSeq(y,y.msgSeq),S.push(y))}),this.convMap.clear(),this.dbMgr.addConversationList(S),this.onUnreadMessageCount(),this.stgyMgr.delAllConv(S),D},w.prototype.handleMsgStateReactionBriefs=function(d,D){return c(this,void 0,void 0,function(){var S,y,k,b;return u(this,function(U){switch(U.label){case 0:return D?d.messageID?[3,2]:[4,this.createInstance(d.conversationID,d.conversationType).fetchMsgListFromCache([d.conversationSeq])]:[2];case 1:if(!(S=(S=U.sent()).get(d.conversationSeq)))return[2];d.messageID=S.messageID,U.label=2;case 2:if(y=[],d!=null&&d.reactions)for(b in k=function(z){D.find(function(P){return P.reaction_key==z})||y.push({reactionSeq:d.reactions[z].seq+1,reactionKey:z,totalCount:0,userList:[],isSelfIncluded:!1})},d.reactions)k(b);return D.forEach(function(z){y.push({reactionSeq:z.max_reaction_seq,reactionKey:z.reaction_key,totalCount:z.total_user_count,userList:z.user_reaction,isSelfIncluded:!!z.include_self})}),0<y.length&&this.saveMessageReactionExtra(d,y),[2]}})})},w.prototype.handleCombineFileRsp=function(d,D,S,y,k,b){var U,z=this,P=(D=this.pb.decodeMsgCombineInfo(D,y)).send_user_map,H=[];for(U in D.child.forEach(function(q){q.cb_id=q.cb_id.replace(q.cb_id.substring(8),b.substring(8)),q.parent_id=q.parent_id!="0"&&q.parent_id?q.parent_id.replace(q.parent_id.substring(8),b.substring(8)):b;var B={type:q.msg_type,senderUserID:q.sender_user_id,timestamp:q.msg_time,extendedData:q.extended_data,subType:q.sub_type,searchedContent:q.searched_content,isServerMessage:!!q.is_server,sentStatus:g.c.MessageSentStatus.Success,rootID:k,cbID:q.cb_id,parentID:q.parent_id};B.type==g.c.MessageType.Combine&&(B.combineID=q.cb_id+"-"+k+"-"+S.conversationID),z.pb.decodeMsgBody(z.econf,B,q.msg),S.messageList.find(function(Y){return Y.cbID==B.cbID&&Y.parentID==B.parentID})||S.messageList.push(B)}),this.dbMgr.addMessageList(S.conversationID,S.conversationType,[S]),P){var Q=Object(E.g)(P[U].sender_user_name),J=Object(E.g)(P[U].sender_user_avatar),L=P[U].update_time||0;H.push({userID:U,userName:Q,userAvatarUrl:J,updateTime:L})}this.setDBUser(H),d.messageList=S.messageList.filter(function(q){return q.parentID==b}).map(function(q){return z.pb.handleDBMessage(z.econf,q)})},w.prototype.transformCombineMessage=function(d){var D=this;return new Promise(function(S){return c(D,void 0,void 0,function(){var y,k=this;return u(this,function(b){switch(b.label){case 0:return d.combineID&&d.messageID&&d.messageSeq?[4,this.dbMgr.getMessageByIndexID(d.conversationID,d.conversationType,d.combineID,g.k.CombineID)]:[3,2];case 1:if(y=b.sent())return(d=JSON.parse(JSON.stringify(d))).combineID="",d.aesKey=y.aesKey,d.fileUID=y.fileUID,d.fileName=y.fileName,d.messageList=y.messageList||[],S(d),[2];throw Object(E.y)(a,"The combine message not found in DB to forward.");case 2:return[4,d.messageList.forEach(function(U,z){return c(k,void 0,void 0,function(){var P;return u(this,function(H){switch(H.label){case 0:return U.type!=g.c.MessageType.Combine?[3,2]:[4,this.dbMgr.getMessageByIndexID(U.conversationID,U.conversationType,U.combineID,g.k.CombineID)];case 1:if(!(P=H.sent()))throw Object(E.y)(a,"There are combine messages in the messageList that are not in the DB.");d.messageList[z]=P,H.label=2;case 2:return[2]}})})})];case 3:return b.sent(),S(JSON.parse(JSON.stringify(d))),[2]}})})})},w.prototype.deleteAllLocalConvMsg=function(d){var D=[],S=(this.econf.dbConvMap.forEach(function(y){var k;y.type!=g.c.ConversationType.Room&&(k=y.msgSeq||0,y.sendMsgCount=0,y.deletedMsgCount=0,y.unreadMessageCount=0,y.readMsgSeq=k,y.deletedMsgMaxSeq=k,y.deletedMsgSeqs=[],y.mentionedInfoList=[],y.lastMessage=void 0,D.push(y))}),this.dbMgr.addConversationList(D),this.dbMgr.clearMessage(this.econf.user.deleteAllMsgTime||0),this.dbMgr.deleteMessageExtraList(Array.from(this.econf.msgExtraMap.keys())),this.econf.msgExtraMap.clear(),this.onUnreadMessageCount(),{conversationID:"",conversationType:g.c.ConversationType.Unknown,isDeleteConversationAllMessage:!0,messageList:[],messageDeleteType:2});return this.bus.emit(g.m.MsgDeleted,S),d&&this.lg.i(i,g.u.DelAllConvMsg,d),Promise.resolve()},w.prototype.checkGroupConvMuteExpiredTime=function(){var d=this,D=this.st.getRealClientTimestamp(),S=[];this.econf.dbConvMap.forEach(function(y){var k,b;y.type==g.c.ConversationType.Group&&d.econf.dbGroupMap.has(y.conversationID)&&(k=y.mutedExpiredTime,b=d.econf.dbGroupMap.get(y.conversationID).selfMutedExpiredTime||0,k!=(y.mutedExpiredTime=b=0<b&&b<=D?0:b))&&S.push(y)}),this.emitConvUpdate(S,"checkMuteExpire")},w.prototype.isMsgDel=function(d,D,S){var y,k;return!!d&&(y=this.econf.user.deleteAllMsgTime||0,k=d.deletedMsgMaxSeq||0,S&&S<=y||D<=k||(d.deletedMsgSeqs||[]).indexOf(D)!=-1)},w.prototype.updateConvOrderKey=function(d,D){D&&(d.orderKey=D),d.isPinned&&d.orderKey<2*g.h.CONV_BASE_PIN?d.orderKey+=g.h.CONV_BASE_PIN:!d.isPinned&&d.orderKey>2*g.h.CONV_BASE_PIN&&(d.orderKey-=g.h.CONV_BASE_PIN)},w.prototype.syncConvNameWithPush=function(d,D,S){var y=this;if(d.type==g.c.ConversationType.Peer){var k=d.conversationID,b=this.econf.dbUserMap.get(k);if(D!=this.econf.user.userID&&(d.conversationName=Object(E.g)(S),b)&&(b.userName=d.conversationName,d.conversationAvatarUrl=b.userAvatarUrl),b&&!d.conversationName&&(d.conversationName=b.userName,d.conversationAvatarUrl=b.userAvatarUrl),!d.conversationName)return this.cnMgr.send(g.d.user_fetch,{user_ids:[k]},g.g.S).then(function(U){var z,P,H,Q;(U=U.result&&U.result[0])&&(Q=U.user_id,z=Object(E.g)(U.user_name),P=Object(E.g)(U.avatar),H=Object(E.g)(U.extra),d.conversationName=z,d.conversationAvatarUrl=P,Q=f(f({},b),{userID:Q,userName:z,userAvatarUrl:P,extendedData:H}),Object(E.x)(Q,y.econf,U.updated_at),y.dbMgr.addUserList([Q]))})}else if(d.type==g.c.ConversationType.Group&&!d.conversationName)return this.cnMgr.send(g.d.gp_infos_none,{user_ids:[d.conversationID]}).then(function(U){var z;(U=U.result&&U.result[0])&&(z=U.group_name,U=U.group_avatar,z&&(d.conversationName=z),U)&&(d.conversationAvatarUrl=U)})},w.prototype.getMailHBSeq=function(){var d;return this.econf.mailHBConfig.conv_list_seq?Promise.resolve(this.econf.mailHBConfig.conv_list_seq):(d={conv_sid:this.econf.user.convSeq||"1"},this.cnMgr.send(g.d.conv_hb,d,g.g.S).then(function(D){return D.conv_list_seq}))},w.prototype.printMsg=function(d){return[d.orderKey,d.messageSeq,d.messageID,d.type+(d.subType||0),d.message||d.fileName].join()},w.prototype.fetchServerFile=function(d){return c(this,void 0,void 0,function(){var D,S,y,k,b,U,z;return u(this,function(P){switch(P.label){case 0:return d.type>=g.c.MessageType.Image&&d.type<=g.c.MessageType.Video?typeof(k=d.fileLocalPath)=="string"&&k.startsWith("_http")?[4,fetch(k.substring(1)).then(function(H){return H.blob()})]:[3,2]:[3,3];case 1:(D=P.sent()).name=k.substring(k.lastIndexOf("/")+1),d.fileLocalPath=D,this.lg.i(i,"fetchFile",D.size+D.name),P.label=2;case 2:return[3,8];case 3:if(d.type!==g.c.MessageType.Multiple)return[3,8];for(S={},z=0;z<d.messageInfoList.length;z++)(y=d.messageInfoList[z]).type>=g.c.MessageType.Image&&y.type<=g.c.MessageType.Video&&typeof(k=y.fileLocalPath)=="string"&&k.startsWith("_http")&&(S[k]?S[k].push(z):S[k]=[z]);b=Object.keys(S),U=function(H){var Q,J;return u(this,function(L){switch(L.label){case 0:return Q=b[H],[4,fetch(Q.substring(1)).then(function(q){return q.blob()})];case 1:return(J=L.sent()).name=Q.substring(Q.lastIndexOf("/")+1),S[Q].forEach(function(q){d.messageInfoList[q].fileLocalPath=J}),[2]}})},z=0,P.label=4;case 4:return z<b.length?[5,U(z)]:[3,7];case 5:P.sent(),P.label=6;case 6:return z++,[3,4];case 7:b.length&&this.lg.i(i,"fetchFile",S),P.label=8;case 8:return[2]}})})},w);function w(d,D,S,y,k){var b=this;this.lg=T.a.getInstance().lg,this.pb=T.a.getInstance().pb,this.st=T.a.getInstance().st,this.selfReceiptSeqs=[],this.msgReceiptChangedMap=new Map,this.mergeMsgReceiptSeqs=new Set,this.mergeMsgReceiptMap=new Map,this.mergeMsgReceiptDBConvMap=new Map,this.mergeMsgReceiptTimer=0,this.isLogined=!1,this.isConnected=!0,this.msgRetryTimer=0,this.oldTotalUnreadCount=0,this.svrConvAttrMap={pin:new Set,mute:new Set,mark:new Map},this.querySeqMap={conv:0,pin:0},this.queryConvsTasks=[],this.queryReceiptMemberList=function(U){var z,P;U&&U.length&&(P=U[0].conversationID,b.gpMgr.queryReceiptMembers(U[0],P,z={count:100,nextFlag:0},!1,!1).then(function(){for(var H=1;H<U.length;H++)b.gpMgr.queryReceiptMembers(U[H],P,z,!1,!1)}))},this.convMap=new Map,this.econf=d,this.bus=D,this.cnMgr=S,this.dbMgr=y,this.gpMgr=k,this.stgyMgr=new _.a(D),this.registerInnerEvent()}},function(te,j,C){C.d(j,"a",function(){return E});var O=C(1),T=C(0),_=C(69),E=(g.prototype.start=function(){var x,A=this;this.triggerTimer||(this.convStrategy.start(),!O.p&&window&&"requestIdleCallback"in window?(x=function(m){if(m)for(var f=A.convStrategy.popFrontConv();(0<m.timeRemaining()||m.didTimeout)&&f.length;)A.handleIdleTimeStrategy(1,f.shift())},this.triggerTimer=setInterval(function(){return requestIdleCallback(x)},this.triggerInterval)):this.triggerTimer=setInterval(function(){for(var m=A.convStrategy.popFrontConv();m.length;)A.handleIdleTimeStrategy(0,m.shift())},this.triggerInterval))},g.prototype.stop=function(){this.convStrategy.stop(),this.triggerTimer&&clearInterval(this.triggerTimer),this.triggerTimer=0},g.prototype.initConv=function(x){this.convStrategy.initList(x)},g.prototype.modifyConv=function(x,A,m,f){switch(m){case T.c.ConversationEvent.Added:case T.c.ConversationEvent.Updated:this.convStrategy.insertConv(x,A,f);break;case T.c.ConversationEvent.Disabled:case T.c.ConversationEvent.Deleted:this.convStrategy.removeConv(x,A)}},g.prototype.delAllConv=function(x){var A=this;x.forEach(function(m){return A.convStrategy.removeConv(m.conversationID,m.type)})},g.prototype.updateConvAct=function(x,A,m){this.convStrategy.increaseConvAct(x,A)},g.prototype.handleIdleTimeStrategy=function(x,A){A&&(this.bus.exec(T.m.IIdleFetchConvMsg,A.convID,A.convType,A.todoFlag),this.modifyConv(A.convID,A.convType,T.c.ConversationEvent.Disabled,T.a.FetchAll))},g);function g(x){this.triggerInterval=3e4,this.triggerTimer=null,this.bus=x,this.convStrategy=new _.a}},function(te,j,C){C.d(j,"a",function(){return E});var O=C(0),T=(_.prototype.actionActivities=function(){this.activities++},_);function _(x,A,m){this.inactiveTurn=0,this.activities=0,this.todoFlag=3,this.convID=x,this.convType=A,m==O.a.FetchAll?this.todoFlag=3:m==O.a.FetchMessageList?this.todoFlag=1:m==O.a.FetchMessageStatusList&&(this.todoFlag=2)}g.prototype.start=function(){var x=this;this.sortTask||(this.sortTask=setInterval(function(){x.strategyList.sort(function(A,m){return m.activities-A.activities}),x.strategyList=x.strategyList.filter(function(A){return A.inactiveTurn<x.inactiveRemoveTurn}),x.strategyList.forEach(function(A){A.todoFlag&&A.inactiveTurn++})},this.sortInterval))},g.prototype.stop=function(){this.sortTask&&clearInterval(this.sortTask),this.sortTask=0,this.strategyList.length=0,this.groupConvInfoMap.clear(),this.c2cConvInfoMap.clear()},g.prototype.initList=function(x){var A=this;x.length&&(x.sort(function(m,f){return m.conversationOrderKey-f.conversationOrderKey}),x.forEach(function(m){var f;m.conversationType==O.c.ConversationType.Group&&(f=new T(m.conversationID,m.conversationType,O.a.FetchAll),A.strategyList.push(f),A.groupConvInfoMap.set(m.conversationID,f))}),this.strategyList.sort(function(m,f){return m.activities-f.activities}))},g.prototype.insertConv=function(x,A,m){m=new T(x,A,m),A==O.c.ConversationType.Group?this.groupConvInfoMap.set(x,m):A==O.c.ConversationType.Peer&&this.c2cConvInfoMap.set(x,m),this.strategyList.some(function(f){return x==f.convID&&A==f.convType})||this.strategyList.push(m)},g.prototype.removeConv=function(x,A){A==O.c.ConversationType.Group?this.groupConvInfoMap.delete(x):A==O.c.ConversationType.Peer&&this.c2cConvInfoMap.delete(x);var m=this.strategyList.findIndex(function(f){return x==f.convID&&A==f.convType});m!=-1&&this.strategyList.splice(m,1)},g.prototype.modifyConvTodos=function(x,A,m,f){switch(f){case O.a.FetchAll:A==O.c.ConversationType.Group?(c=this.groupConvInfoMap.get(x),m==O.b.Insert?c.todoFlag|=3:m==O.b.Remove&&(c.todoFlag&=0)):A==O.c.ConversationType.Peer&&(c=this.c2cConvInfoMap.get(x),m==O.b.Insert?c.todoFlag|=3:m==O.b.Remove&&(c.todoFlag&=0));break;case O.a.FetchMessageList:A==O.c.ConversationType.Group?(c=this.groupConvInfoMap.get(x),m==O.b.Insert?c.todoFlag|=3:m==O.b.Remove&&(c.todoFlag&=0)):A==O.c.ConversationType.Peer&&((c=this.c2cConvInfoMap.get(x)).todoFlag|=1,m==O.b.Remove)&&(c.todoFlag&=2);break;case O.a.FetchMessageStatusList:var c;A==O.c.ConversationType.Group?((c=this.groupConvInfoMap.get(x)).todoFlag|=2,m==O.b.Remove&&(c.todoFlag&=1)):A==O.c.ConversationType.Peer&&((c=this.c2cConvInfoMap.get(x)).todoFlag|=2,m==O.b.Remove)&&(c.todoFlag&=1)}},g.prototype.increaseConvAct=function(x,A){var m=this.strategyList.find(function(f){return f.convID==x});m?m.inactiveTurn=0:(m=new T(x,A,O.a.FetchAll),this.strategyList.push(m)),m.actionActivities(),A==O.c.ConversationType.Group&&this.groupConvInfoMap.set(x,m),A==O.c.ConversationType.Peer&&this.c2cConvInfoMap.set(x,m)},g.prototype.popFrontConv=function(){return this.strategyList.slice(0,2)};var E=g;function g(){this.strategyList=[],this.groupConvInfoMap=new Map,this.c2cConvInfoMap=new Map,this.sortInterval=6e4,this.inactiveRemoveTurn=10,this.sortTask=null}},function(te,j,C){C.d(j,"a",function(){return E});var O,T,_=C(0),E=(j=C(13),(C=(O=function(x,A){return(O=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,f){m.__proto__=f}:function(m,f){for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&(m[c]=f[c])}))(x,A)},function(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function m(){this.constructor=x}O(x,A),x.prototype=A===null?Object.create(A):(m.prototype=A.prototype,new m)}))(g,T=j.a),g.prototype.setAssociatedGroup=function(){},g.prototype.getAssociatedReqBody=function(){return null},g.prototype.isFetchMessageWhenLogin=function(x){return!(x===_.n.L&&!this.econf.mailHBConfig.fetch_group_msg_count)},g.prototype.getFetchMessageReqBody=function(x,A,m,f){var c=this.econf.mailHBConfig.fetch_group_msg_count||100;return A<=_.n.L&&(f=Math.min(f,c<0?100:c)),{group_id:this.convID,conv_msg_seq:x,count:f,sort_type:m}},g);function g(x,A,m,f,c){return(x=T.call(this,x,A,m,f,c)||this).dbConv.type=_.c.ConversationType.Group,x.convType=_.c.ConversationType.Group,x.rootReplyMsgMap=new Map,x}},function(te,j,C){C.d(j,"a",function(){return E});var O,T,_=C(0),E=(j=C(13),(C=(O=function(x,A){return(O=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,f){m.__proto__=f}:function(m,f){for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&(m[c]=f[c])}))(x,A)},function(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function m(){this.constructor=x}O(x,A),x.prototype=A===null?Object.create(A):(m.prototype=A.prototype,new m)}))(g,T=j.a),g.prototype.setAssociatedGroup=function(){},g.prototype.getAssociatedReqBody=function(){return null},g.prototype.isFetchMessageWhenLogin=function(x){return!(x===_.n.L&&!this.econf.mailHBConfig.fetch_c2c_msg_count)},g.prototype.getFetchMessageReqBody=function(x,A,m,f){var c=this.econf.mailHBConfig.fetch_c2c_msg_count||100;return A<=_.n.L&&(f=Math.min(f,c<0?100:c)),{conv_id:this.convID,conv_type:this.convType,conv_msg_seq:x,count:f,mode:m,login_fetch:A===_.n.L?1:0}},g);function g(x,A,m,f,c){return(x=T.call(this,x,A,m,f,c)||this).dbConv.type=_.c.ConversationType.Peer,x.convType=_.c.ConversationType.Peer,x.rootReplyMsgMap=new Map,x}},function(te,j,C){C.d(j,"a",function(){return x}),j=C(4);var O,T,_=C.n(j),E=C(0),g=(j=C(13),C=(O=function(m,f){return(O=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,u){c.__proto__=u}:function(c,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(c[s]=u[s])}))(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function c(){this.constructor=m}O(m,f),m.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}),function(){return(g=Object.assign||function(m){for(var f,c=1,u=arguments.length;c<u;c++)for(var s in f=arguments[c])Object.prototype.hasOwnProperty.call(f,s)&&(m[s]=f[s]);return m}).apply(this,arguments)}),x=(C(A,T=j.a),A.prototype.setAssociatedGroup=function(m,f,c,u){this.roomReq.room_session_id=m,this.roomReq.room_user_session_id=f,this.roomReq.sub_room_id=c,this.enabledOfflineMsg=u,m&&!this.dbConv.roomSessionID&&(this.dbConv.roomSessionID=m.toString())},A.prototype.getAssociatedReqBody=function(){return this.roomReq},A.prototype.isFetchMessageWhenLogin=function(m){return!(m===E.n.L&&!this.econf.mailHBConfig.fetch_room_msg_count)&&this.enabledOfflineMsg},A.prototype.getFetchMessageReqBody=function(m,f,c,u){var s;return this.roomReq.room_session_id&&this.roomReq.room_session_id.toNumber()!=0&&this.enabledOfflineMsg?(s=this.econf.mailHBConfig.fetch_room_msg_count||100,f<=E.n.L&&(u=Math.min(u,s<0?100:s)),g(g({},this.roomReq),{room_id:this.convID,conv_msg_seq:m,count:u,sort_type:c})):null},A);function A(m,f,c,u,s){return(m=T.call(this,m,f,c,u,s)||this).roomReq={room_session_id:_.a.fromNumber(0),room_user_session_id:_.a.fromNumber(0),sub_room_id:""},m.enabledOfflineMsg=!1,m.dbConv.type=E.c.ConversationType.Room,m.convType=E.c.ConversationType.Room,m}},function(te,j,C){C.d(j,"a",function(){return g});var O=C(2),T=C(0),_=function(A,m){var f=typeof Symbol=="function"&&A[Symbol.iterator];if(!f)return A;var c,u,s=f.call(A),r=[];try{for(;(m===void 0||0<m--)&&!(c=s.next()).done;)r.push(c.value)}catch(i){u={error:i}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(u)throw u.error}}return r},E=function(A,m,f){if(arguments.length===2)for(var c,u=0,s=m.length;u<s;u++)!c&&u in m||((c=c||Array.prototype.slice.call(m,0,u))[u]=m[u]);return A.concat(c||Array.prototype.slice.call(m))},g=(x.prototype.setContext=function(A){this.context=A},x.prototype.on=function(A,m){this.listenerMap.set(A,m)},x.prototype.off=function(A){A?this.listenerMap.delete(A):(this.listenerMap.clear(),this.innerEvents[T.m.ILogined].length=0,this.innerEvents[T.m.IJoinedGroup].length=0,this.innerEvents[T.m.ILeftGroup].length=0,this.innerEvents[T.m.ISyncGroups].length=0,this.innerEvents[T.m.ISyncGroupInfo].length=0,this.innerEvents[T.m.IUnreadMsgCount].length=0,this.innerEvents[T.m.IConnectedRoom].length=0,this.innerEvents[T.m.IConnected].length=0,this.innerEvents[T.m.IDisConnected].length=0,this.innerEvents[T.m.INetworkChange].length=0,this.innerEvents[T.m.IIdleFetchConvMsg].length=0,this.innerEvents[T.m.ITriggerHB].length=0,this.context=null)},x.prototype.emit=function(A,m,f){var c,u,s=this,r=this.listenerMap.get(A);typeof r=="function"?(f=f?"EV."+A+":"+f:"EV."+A,c=new Date,u=this.createEventLog(A,m),setTimeout(function(){try{r(s.context,m)}catch(i){throw i}finally{u.time=c,O.a.getInstance().lg.i(T.v.Manager,f,u)}},0)):this.logEvents.indexOf(A)!=-1&&(f=f?"0EV."+A+":"+f:"0EV."+A,O.a.getInstance().lg.i(T.v.Manager,f,this.createEventLog(A,m)))},x.prototype.add=function(A,m){this.innerEvents[A].push(m)},x.prototype.remove=function(A,m){var f;m?(f=this.innerEvents[A].findIndex(function(c){return c===m}))!==-1&&this.innerEvents[A].splice(f,1):this.innerEvents[A].length=0},x.prototype.exec=function(A){for(var m,f=[],c=1;c<arguments.length;c++)f[c-1]=arguments[c];this.unlogEvents.indexOf(A)==-1&&(m=f.length<=1?f[0]:f,O.a.getInstance().lg.i(T.v.Manager,"IE."+A,m)),this.innerEvents[A].forEach(function(u){return u.apply(void 0,E([],_(f),!1))})},x.prototype.createEventLog=function(A,m){return A==T.m.ConvChanged?m.infoList.reduce(function(f,c){var u=c.event;return(c=c.conversation)&&(c.unreadMessageCount&&(f.unread[c.type+c.conversationID]=c.unreadMessageCount),f.ev[c.type+c.conversationID]=u),f},{unread:{},ev:{},infoList:m.infoList}):m},x);function x(){var A;this.listenerMap=new Map,this.logEvents=[T.m.ConnState,T.m.RoomState,T.m.GroupState,T.m.ConvChanged,T.m.ConvUnreadMsgCount],this.unlogEvents=[T.m.ITriggerHB,T.m.IConnectedRoom,T.m.IIdleFetchConvMsg,T.m.IConnected,T.m.IDisConnected],this.innerEvents=((A={})[T.m.ILogined]=[],A[T.m.IJoinedGroup]=[],A[T.m.ILeftGroup]=[],A[T.m.ISyncGroups]=[],A[T.m.ISyncGroupInfo]=[],A[T.m.IUnreadMsgCount]=[],A[T.m.IConnectedRoom]=[],A[T.m.IConnected]=[],A[T.m.IDisConnected]=[],A[T.m.INetworkChange]=[],A[T.m.IIdleFetchConvMsg]=[],A[T.m.ITriggerHB]=[],A)}},function(te,j,C){C.d(j,"a",function(){return f});var O=C(2),T=C(1),_=C(0),E=function(){return(E=Object.assign||function(u){for(var s,r=1,i=arguments.length;r<i;r++)for(var a in s=arguments[r])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u}).apply(this,arguments)},g=function(u,s){var r=typeof Symbol=="function"&&u[Symbol.iterator];if(!r)return u;var i,a,o=r.call(u),l=[];try{for(;(s===void 0||0<s--)&&!(i=o.next()).done;)l.push(i.value)}catch(h){a={error:h}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return l},x=function(u,s,r){if(arguments.length===2)for(var i,a=0,o=s.length;a<o;a++)!i&&a in s||((i=i||Array.prototype.slice.call(s,0,a))[a]=s[a]);return u.concat(i||Array.prototype.slice.call(s))},A=_.v.Friend,m=6000007,f=(c.prototype.destroy=function(){this.onLogout(),this.cnMgr=null,this.bus=null,this.lg=null},c.prototype.onLogout=function(){this.blacklist.clear(),this.dbFriendMap.clear(),this.dbFriendAppMap.clear()},c.prototype.addBlacklist=function(u){var s=this,r={time:new Date,userIDs:u};return this.cnMgr.send(_.d.bl_add,{user_ids:u}).then(function(i){if(i.code)return r.error=Object(T.y)(6000007,i.message,i.code),s.lg.w(A,_.u.AddBlacklist,r),Promise.reject(r.error);s.lg.i(A,_.u.AddBlacklist,r);var a=[];return i.black_list.forEach(function(o){var l,h={userID:o.user_base_info.user_id,userName:Object(T.g)(o.user_base_info.user_name),userAvatarUrl:Object(T.g)(o.user_base_info.avatar)};Object(T.x)(h,s.econf,o.user_base_info.update_time),s.blacklist.get(h.userID)||i.err_list.some(function(R){return R.user_id==h.userID})||(l={userID:h.userID,createTime:o.create_time},s.blacklist.set(h.userID,l),a.push(l),s.dbMgr.updateUserSeq(o.black_list_seq,_.z.bl))}),s.dbMgr.addBeanList(a,_.l.Blacklist),s.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Added,userList:a.map(function(o){return Object(T.u)(o.userID,s.econf)})}),{errorUserList:i.err_list.map(function(o){return{userID:o.user_id,reason:o.sub_code}})}})},c.prototype.removeBlacklist=function(u){var s=this,r={time:new Date,userIDs:u};return this.cnMgr.send(_.d.bl_del,{user_ids:u}).then(function(i){if(i.code)return r.error=Object(T.y)(6000007,i.message,i.code),s.lg.w(A,_.u.RemoveBlacklist,r),Promise.reject(r.error);s.lg.i(A,_.u.RemoveBlacklist,r);var a=[];return i.black_list.forEach(function(o){var l=s.blacklist.get(o.user_id);l&&!i.err_list.some(function(h){return h.user_id==l.userID})&&(a.push(l.userID),s.blacklist.delete(l.userID),s.dbMgr.updateUserSeq(o.apply_list_seq,_.z.bl))}),s.dbMgr.delBeanList(a,_.l.Blacklist),s.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Removed,userList:a.map(function(o){return Object(T.u)(o,s.econf)})}),{errorUserList:i.err_list.map(function(o){return{userID:o.user_id,reason:o.sub_code}})}})},c.prototype.checkBlacklist=function(u){return Promise.resolve({isUserInBlacklist:this.blacklist.has(u)})},c.prototype.queryBlacklist=function(u){var s,r,i=this,a=Array.from(this.blacklist.values()).sort(function(h,R){return R.createTime-h.createTime}),o={config:u,total:a.length,count:0},l=u.count;return u=(u=u.nextFlag||0)||0,l<a.length?(s=u*l,u=(r=(u+1)*l)>=a.length?0:u+1,a=a.slice(s,r),o.start=s,o.end=r):(u*l>a.length&&(a=[]),u=0),l==0&&(u=0),o.count=a.length,this.lg.i(A,_.u.QueryBlacklist,o),Promise.resolve({blacklist:a.map(function(h){return Object(T.u)(h.userID,i.econf)}),nextFlag:u})},c.prototype.onPushBlacklistAdded=function(u){var s,r=this;u.black_list.length&&(s=[],u.black_list.forEach(function(i){var a,o={userID:i.user_base_info.user_id,userName:Object(T.g)(i.user_base_info.user_name),userAvatarUrl:Object(T.g)(i.user_base_info.avatar)};Object(T.x)(o,r.econf,i.user_base_info.update_time),r.blacklist.has(o.userID)||(a={userID:o.userID,createTime:i.create_time},r.blacklist.set(o.userID,a),s.push(o.userID),r.dbMgr.updateUserSeq(i.black_list_seq,_.z.bl))}),this.dbMgr.addBeanList(Array.from(this.blacklist.values()),_.l.Blacklist),this.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Added,userList:s.map(function(i){return Object(T.u)(i,r.econf)})}))},c.prototype.onPushBlacklistDeleted=function(u){var s,r=this;u.black_list.length&&(s=[],u.black_list.forEach(function(i){var a=i.user_id;r.blacklist.get(a)&&(s.push(a),r.blacklist.delete(a),r.dbMgr.updateUserSeq(i.apply_list_seq,_.z.bl))}),this.dbMgr.delBeanList(s,_.l.Blacklist),this.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Removed,userList:s.map(function(i){return Object(T.u)(i,r.econf)})}))},c.prototype.addFriend=function(u,s){var r,i=this,a={time:new Date,userID:u,config:s},o=[];for(r in s.friendAttributes)o.push({key:r,value:s.friendAttributes[r]});return u={user_base_info:{user_id:u},remark:(s==null?void 0:s.friendAlias)||"",attributes:o,wording:(s==null?void 0:s.wording)||""},this.cnMgr.send(_.d.fd_add,{friend_infos:[u]}).then(function(l){if(l.code||l.err_list.length)return h=l.code||l.err_list[0].sub_code,a.error=Object(T.y)(m,l.message,h),i.lg.w(A,_.u.AddFriend,a),Promise.reject(a.error);i.dbMgr.updateUserSeq((h=l.friend_infos[0])==null?void 0:h.friend_list_seq,_.z.fd),(h=l.friend_infos[0])!=null&&h.wording&&l.apply_status_change_list[0]&&(l.apply_status_change_list[0].wording=l.friend_infos[0].wording),i.handleApplicationChanged(l.apply_status_change_list,!0);var h=i.getFriendFromServer(l.friend_infos[0]);return i.addFriendCallback([h]),{friendInfo:h}})},c.prototype.sendFriendApply=function(u,s){var r,i=this,a={time:new Date,userID:u,config:s},o=[];for(r in s.friendAttributes)o.push({key:r,value:s.friendAttributes[r]});return u={friend_infos:[{user_base_info:{user_id:u},remark:s.friendAlias,attributes:o,wording:s.wording}],offline_info:Object(T.f)(s.pushConfig)},this.cnMgr.send(_.d.fd_apply,u).then(function(l){var h,R;return l.code||l.err_list.length?(R=l.code||l.err_list[0].sub_code,a.error=Object(T.y)(m,l.message,R),i.lg.w(A,_.u.SendFriendApp,a),Promise.reject(a.error)):(l.apply_infos[0]?h=i.getFriendAppFromServer(l.apply_infos[0]):(R=i.getFriendFromServer(l.friend_infos[0]),i.addFriendCallback([R]),h={applyUser:{userID:R.userID,userName:R.userName,userAvatarUrl:R.userAvatarUrl},wording:R.wording,createTime:R.createTime,updateTime:R.createTime,type:_.c.FriendApplicationType.Sent,state:_.c.FriendApplicationState.Waiting},R=l.friend_infos[0].friend_list_seq,i.dbMgr.updateUserSeq(R,_.z.fd)),l.apply_infos.length&&(R=i.dbFriendAppMap.get(h.applyUser.userID),i.handleApplicationChanged(l.apply_infos,!!R)),{applicationInfo:h})})},c.prototype.deleteFriends=function(u,s){var r=this,i={user_ids:u,delete_type:(s==null?void 0:s.type)||0},a={time:new Date,userIDs:u,config:s};return this.cnMgr.send(_.d.fd_del,i).then(function(o){var l,h,R;return o.code?(R=o.code||o.apply_status_change_list[0].status,a.error=Object(T.y)(m,o.message,R),r.lg.w(A,_.u.DelFriends,a),Promise.reject(a.error)):(l=o.apply_status_change_list.map(function(w){return{userID:w.user_id,reason:w.status}}),h=[],(R=u.filter(function(w){return!l.find(function(d){return d.userID==w})})).forEach(function(w){var d=r.dbFriendMap.get(w);d&&h.push(d),r.dbFriendMap.delete(w)}),R.length&&r.dbMgr.delBeanList(R,_.l.Friend),h.length&&(r.emitConvChanged(h,!0),r.bus.emit(_.m.FriendList,{action:_.c.FriendListChangeAction.Deleted,friendList:h})),{errorUserList:l})})},c.prototype.checkFriendsRelation=function(u,s){var r=this,i={time:new Date,userIDs:u,config:s};return u={user_ids:u,delete_type:(s==null?void 0:s.type)||_.c.FriendRelationCheckType.Both},this.cnMgr.send(_.d.fd_check,u).then(function(a){return a.code?(i.error=Object(T.y)(m,a.message,a.code),r.lg.w(A,_.u.CheckFriends,i),Promise.reject(i.error)):{relationInfos:a.successes.map(function(o){return{userID:o.user_id,type:r.transFriendRelation(o.sub_code)}}),errorUserList:((a=a.fails)==null?void 0:a.map(function(o){return{userID:o.user_id,reason:o.sub_code}}))||[]}})},c.prototype.updateFriendAlias=function(u,s){var r,i=this;return this.dbFriendMap.has(s)?(r={time:new Date,userID:s,alias:u},this.cnMgr.send(_.d.fd_mdf_remark,{key:s,value:u||""}).then(function(a){var o,l=i.dbFriendMap.get(s);return a.code||!l?(o=a.code?m:6000812,r.error=Object(T.y)(o,a.message,a.code),i.lg.w(A,_.u.UpdateFriendAlias,r),Promise.reject(r.error)):(i.dbMgr.updateUserSeq(a.conv_list_seq,_.z.fd),l.friendAlias=u,i.bus.emit(_.m.FriendInfo,{friendList:[E({},l)]}),i.emitConvChanged([l]),i.dbMgr.addBeanList([l],_.l.Friend),{friendInfo:l})})):Promise.reject(Object(T.y)(6000001,"Friend: "+s+" not found."))},c.prototype.updateFriendAttr=function(u,s){var r=this;if(!this.dbFriendMap.has(s))return Promise.reject(Object(T.y)(6000001,"Friend: "+s+" not found."));var i={time:new Date,userID:s,attributes:u},a=[],o=this.dbFriendMap.get(s);if(o)for(var l in u)o.friendAttributes[l]!==u[l]&&a.push({key:l,value:u[l]});return this.cnMgr.send(_.d.fd_mdf_attr,{user_id:s,attributes:a,action:0}).then(function(h){var R;return h.code||!o?(R=h.code?m:6000812,i.error=Object(T.y)(R,h.message,h.code),r.lg.w(A,_.u.UpdateFriendAlias,i),Promise.reject(i.error)):(r.dbMgr.updateUserSeq(h.friend_list_seq,_.z.fd),o.friendAttributes=Object.assign(o.friendAttributes,u),r.bus.emit(_.m.FriendInfo,{friendList:[E({},o)]}),r.dbMgr.addBeanList([o],_.l.Friend),{friendInfo:o})})},c.prototype.acceptFriendApply=function(u,s){var r=this,i={time:new Date,userID:u,config:s};if(this.checkFriendAppDB(u,i,_.u.AcceptFriendApp))return Promise.reject(i.error);var a=[];if(s!=null&&s.friendAttributes)for(var o in s.friendAttributes)a.push({key:o,value:s.friendAttributes[o]});var l={user_id:u,remark:(s==null?void 0:s.friendAlias)||"",attributes:a,offline_info:Object(T.f)(s==null?void 0:s.pushConfig)};return this.cnMgr.send(_.d.fd_accept,l).then(function(h){if(h.code)return i.error=Object(T.y)(m,h.message,h.code),r.lg.w(A,_.u.AcceptFriendApp,i),Promise.reject(i.error);r.dbMgr.updateUserSeq(h.apply_list_seq,_.z.fdApp),r.dbMgr.updateUserSeq(h.friend.friend_list_seq,_.z.fd),h=r.getFriendFromServer(h.friend);var R=(r.addFriendCallback([h]),r.dbFriendAppMap.get(u));return R&&(R.state=_.c.FriendApplicationState.Accepted,r.dbMgr.addBeanList([R],_.l.FriendApp),r.bus.emit(_.m.FriendAppUpd,{applicationList:[E({},R)]})),{friendInfo:h}})},c.prototype.rejectFriendApply=function(u,s){var r=this,i={call_id:u,offline_info:Object(T.f)(s==null?void 0:s.pushConfig)},a={time:new Date,userID:u,config:s};return this.checkFriendAppDB(u,a,_.u.RejectFriendApp)?Promise.reject(a.error):this.cnMgr.send(_.d.fd_refuse,i).then(function(o){if(o.code)return a.error=Object(T.y)(m,o.message,o.code),r.lg.w(A,_.u.RejectFriendApp,a),Promise.reject(a.error);r.dbMgr.updateUserSeq(o.conv_list_seq,_.z.fdApp);var l=r.dbFriendAppMap.get(u);return l&&(l.state=_.c.FriendApplicationState.Rejected,l.updateTime=o.conv_msg_seq,r.dbMgr.addBeanList([l],_.l.FriendApp),o=E({},l),r.bus.emit(_.m.FriendAppUpd,{applicationList:[o]})),o={userID:u,userName:"",userAvatarUrl:""},{userInfo:(l==null?void 0:l.applyUser)||o}})},c.prototype.queryFriendsInfo=function(u){var s=this,r=[],i=[];return u.forEach(function(a){var o=s.dbFriendMap.get(a);o?(s.updateUserInfo(o),r.push(o)):i.push({userID:a,reason:6000812})}),Promise.resolve({friendInfos:r,errorUserList:i})},c.prototype.queryFriendList=function(u){var s,r,i=Array.from(this.dbFriendMap.values()).sort(function(o,l){return l.createTime-o.createTime}),a=(i.length,u.count);return u=(u=u.nextFlag||0)||0,a<i.length?(s=u*a,u=(r=(u+1)*a)>=i.length?0:u+1,i=i.slice(s,r)):(u*a>i.length&&(i=[]),u=0),a==0&&(u=0),i.length,Promise.resolve({friendList:i,nextFlag:u})},c.prototype.queryFriendApplyList=function(u){var s,r,i=this,a=Array.from(this.dbFriendAppMap.values()).sort(function(l,h){return h.createTime-l.createTime}),o=(a.length,u.count);return u=(u=u.nextFlag||0)||0,o<a.length?(s=u*o,u=(r=(u+1)*o)>=a.length?0:u+1,a=a.slice(s,r)):(u*o>a.length&&(a=[]),u=0),o==0&&(u=0),a.length,a.forEach(function(l){return i.updateUserInfo(l.applyUser)}),Promise.resolve({applicationList:a,nextFlag:u})},c.prototype.searchFriends=function(u){var s=this;return new Promise(function(r){var i=u.keywords.filter(function(D){return typeof D=="string"&&D&&D.trim().length}).map(function(D){return D.toLocaleLowerCase()});if(!i.length)return r({nextFlag:0,friendInfoList:[]});var a=[],o=u.isAlsoMatchFriendAlias,l=(s.dbFriendMap.forEach(function(D){var S=D.userName,y=D.friendAlias;(i.every(function(k){return Object(T.d)(S,k)})||o&&i.every(function(k){return Object(T.d)(y,k)}))&&a.push(D)}),a.sort(function(D,S){return D.createTime-S.createTime}),a.length),h=u.nextFlag,R=((R=a[a.length-1])==null?void 0:R.createTime)||0,w=0,d=(R=(0<h&&h<R?w=a.findIndex(function(D){return D.createTime==h}):R<=h&&R&&(w=a.length-1),w+Math.min(_.h.MAX_QUERY_PAGE_COUNT,u.count)),((d=a[R])==null?void 0:d.createTime)||0);a=a.slice(w,R),w={dbCount:s.dbFriendMap.size,start:w,end:R,total:l,count:a.length,nextFlag:d,config:u},s.lg.i(A,_.u.SearchFriend,w),r({nextFlag:d,friendInfoList:a})})},c.prototype.onPushFriendAdded=function(u,s){var r=this,i=[],a=[];(s=s!==void 0&&s)?(i=u.friend_infos,a=u.apply_status_changes_list):(i.push(u.friend_info),u.apply_status_change&&(u.friend_info.wording&&(u.apply_status_change.wording=u.friend_info.wording),a.push(u.apply_status_change))),this.handleApplicationChanged(a,!0),s=i.map(function(o){return r.getFriendFromServer(o)}),this.addFriendCallback(s)},c.prototype.onPushFriendDeleted=function(u,s){var r=this,i=[],a=((s=s!==void 0&&s)?u.friend_infos.forEach(function(o){i.push(o.user_base_info.user_id)}):i.push(u.user_id),[]);i.forEach(function(o){var l=r.dbFriendMap.get(o);l&&a.push(l),r.dbFriendMap.delete(o)}),this.dbMgr.delBeanList(i,_.l.Friend),this.emitConvChanged(a,!0),a.length&&this.bus.emit(_.m.FriendList,{action:_.c.FriendListChangeAction.Deleted,friendList:a})},c.prototype.onPushFriendAllDeleted=function(u){var s=this,r=u.conv_list_seq,i=u.conv_msg_seq,a=[];this.dbFriendMap.forEach(function(o){var l=o.seq;r<l&&l<i&&(a.push(o),s.dbFriendMap.delete(o.userID))}),this.emitConvChanged(a,!0),this.dbMgr.delBeanList(a.map(function(o){return o.userID}),_.l.Friend)},c.prototype.onPushFriendRemarkUpdated=function(u){this.dbMgr.updateUserSeq(u.seq,_.z.fd);var s=this.dbFriendMap.get(u.key);s&&(s.friendAlias=u.value,this.dbMgr.addBeanList([s],_.l.Friend),this.bus.emit(_.m.FriendInfo,{friendList:[s]}),this.emitConvChanged([s]))},c.prototype.onPushFriendAttrMdf=function(u){this.dbMgr.updateUserSeq(u.friend_list_seq,_.z.fd);var s,r=this.dbFriendMap.get(u.user_id);r&&(s=r.friendAttributes,u.attributes.forEach(function(i){u.action==0?s[i.key]=i.value||"":u.action==1&&delete s[i.key]}),this.dbMgr.addBeanList([r],_.l.Friend),this.bus.emit(_.m.FriendInfo,{friendList:[r]}))},c.prototype.onPushFriendApply=function(u,s){var r=this,i=[];if(s=s!==void 0&&s){if(i=u.apply_infos,u.friends.length)return s=u.friends.map(function(a){return r.getFriendFromServer(a)}),void this.addFriendCallback(s)}else i.push(u.apply_info);this.handleApplicationChanged(i)},c.prototype.onPushFriendAccept=function(u){this.dbMgr.updateUserSeq(u.friend_list_seq,_.z.fd),this.dbMgr.updateUserSeq(u.apply_list_seq,_.z.fdApp),u=this.getFriendFromServer(u.friend_info),this.addFriendCallback([u]),(u=this.dbFriendAppMap.get(u.userID))&&(u.state=_.c.FriendApplicationState.Accepted,this.dbMgr.addBeanList([u],_.l.FriendApp),this.bus.emit(_.m.FriendAppUpd,{applicationList:[u]}))},c.prototype.onPushFriendReject=function(u){this.dbMgr.updateUserSeq(u.apply_list_seq,_.z.fdApp);var s=this.dbFriendAppMap.get(u.user_id);s&&(s.state=_.c.FriendApplicationState.Rejected,s.updateTime=u.update_time,this.dbMgr.addBeanList([s],_.l.FriendApp),this.bus.emit(_.m.FriendAppUpd,{applicationList:[s]}))},c.prototype.registerInnerEvent=function(){this.bus.add(_.m.ILogined,this.onLogined.bind(this)),this.bus.add(_.m.IConnected,this.onConnected.bind(this)),this.bus.add(_.m.ITriggerHB,this.onTriggerHB.bind(this))},c.prototype.onLogined=function(u){var s=this;if(u)return this.onLogout();var r=this.st.getRealClientTimestamp();this.dbMgr.getBeanList(_.l.Blacklist).then(function(i){i.forEach(function(a){return s.blacklist.set(a.userID,a)})}),this.dbMgr.getBeanList(_.l.Friend).then(function(i){i.forEach(function(a){s.updateUserInfo(a),s.dbFriendMap.set(a.userID,a)})}),this.dbMgr.getBeanList(_.l.FriendApp).then(function(i){var a=s.econf.mailHBConfig.apply_expired_duration;i.forEach(function(o){r-o.createTime>a&&(o.state=_.c.FriendApplicationState.Expired),s.updateUserInfo(o.applyUser),s.dbFriendAppMap.set(o.applyUser.userID,o)})}),this.mergeSvrBlacklist(_.n.L),this.mergeSvrFriendList(_.n.L),this.mergeSvrFriendAppList(_.n.L)},c.prototype.onConnected=function(){this.mergeSvrBlacklist(_.n.H,"onConnected"),this.mergeSvrFriendList(_.n.H,"onConnected"),this.mergeSvrFriendAppList(_.n.H,"onConnected")},c.prototype.onTriggerHB=function(){this.mergeSvrBlacklist(_.n.H,"hb"),this.mergeSvrFriendList(_.n.H,"hb"),this.mergeSvrFriendAppList(_.n.H,"hb")},c.prototype.emitConvChanged=function(u,s){var r=this,i=(s===void 0&&(s=!1),[]),a=[];u.forEach(function(o){var l=r.econf.user.userID+_.c.ConversationType.Peer+o.userID;(l=r.econf.dbConvMap.get(l))&&l.state!=_.j.Delete&&l.maxOrderKey&&(l.conversationAlias!==o.friendAlias||s)&&(l.conversationAlias=s?"":o.friendAlias,a.push(l),o={event:_.c.ConversationEvent.Updated,conversation:Object(T.s)(_.h.convKeys,l)},i.push(o))}),i.length&&(this.dbMgr.addConversationList(a),this.bus.emit(_.m.ConvChanged,{infoList:i}))},c.prototype.addFriendCallback=function(u){u.length&&(this.bus.emit(_.m.FriendList,{action:_.c.FriendListChangeAction.Added,friendList:u}),this.dbMgr.addBeanList(u,_.l.Friend),this.emitConvChanged(u))},c.prototype.handleApplicationChanged=function(u,s){var r=this,i=(s===void 0&&(s=!1),[]),a=[];u.forEach(function(o){var l=r.getFriendAppFromServer(o),h=r.dbFriendAppMap.get(o.user_id);r.dbMgr.updateUserSeq(o.apply_list_seq,_.z.fdApp),h?!s&&l.type===h.type&&l.state===h.state&&l.updateTime===h.updateTime||(Object.assign(h,l),r.dbFriendAppMap.set(h.applyUser.userID,h),a.push(l)):l.state==_.c.FriendApplicationState.Waiting&&(i.push(l),r.dbFriendAppMap.set(l.applyUser.userID,l))}),this.dbMgr.addBeanList(x(x([],g(i),!1),g(a),!1),_.l.FriendApp),i.length&&this.bus.emit(_.m.FriendAppList,{applicationList:i,action:_.c.FriendApplicationListChangeAction.Added}),a.length&&this.bus.emit(_.m.FriendAppUpd,{applicationList:a})},c.prototype.fetchSvrFriend=function(u,s,r,i,a){return r={cur_list_seq:u,count:100,full_pull:0,degree:0,how:r},(a=a!==void 0&&a)?r.full_pull=s:(r.full_pull=i,r.degree=s),i=a?_.d.fd_apply_list:_.d.fd_list,this.cnMgr.send(i,r,_.g.S).then(function(o){var l,h,R;return o.code?{cur:0,list:[]}:(l=o.cur_list_seq,h=o.max_list_seq,{nextFlag:(R=o.fetch_end)||h<=l||l<=u||h<=u?0:l,cur:l,max:h,fetch_end:R,full_list:o.full_list,count:o.friend_count,list:a?o.apply_list:o.friends})})},c.prototype.mergeSvrFriendList=function(u,s){var r,i,a,o,l,h,R,w=this,d=+this.econf.user.friendSeq||0,D=this.econf.mailHBConfig.friend_list_seq;!D||D<=d||(r={time:new Date,dbSeq:d,hbSeq:D,how:u,action:s},i=1,a=0,o=new Map,l=new Map,h=new Map,R=function(S){var y,k;(a=i==1?S.full_list:a)&&w.dbFriendMap.size&&(w.dbFriendMap.forEach(function(b){return h.set(b.userID,b)}),w.dbMgr.delBeanList([],_.l.Friend,!0),w.dbFriendMap.clear()),S.list.forEach(function(b){var U,z,P=b.info.user_base_info.user_id,H=w.dbFriendMap.get(P);b.is_del?(o.delete(P),l.delete(P),H&&h.set(P,H)):(h.delete(P),U=w.getFriendFromServer(b.info),H?(P=Object.keys(U.friendAttributes),z=!1,P.length!==Object.keys(H.friendAttributes).length&&(z=!0),P.forEach(function(Q){U.friendAttributes[Q]!==H.friendAttributes[Q]&&(z=!0)}),U.friendAlias===H.friendAlias&&U.userName===H.userName&&U.userAvatarUrl===H.userAvatarUrl&&U.wording===H.wording&&!z||l.set(U.userID,U)):o.set(U.userID,U))}),S.nextFlag&&w.econf.token?w.fetchSvrFriend(S.nextFlag,++i,u,a).then(R):(h.size&&(y=Array.from(h.values()),w.bus.emit(_.m.FriendList,{friendList:y,action:_.c.FriendListChangeAction.Deleted}),w.dbMgr.delBeanList(y.map(function(b){return b.userID}),_.l.Friend),w.emitConvChanged(y,!0)),y=Array.from(o.values()),o.size&&w.bus.emit(_.m.FriendList,{friendList:y,action:_.c.FriendListChangeAction.Added}),l.size&&(k=Array.from(l.values()),w.bus.emit(_.m.FriendInfo,{friendList:k}),y.push.apply(y,x([],g(k),!1))),w.dbMgr.addBeanList(y,_.l.Friend),w.emitConvChanged(y),w.dbMgr.updateUserSeq(S.cur||S.max,_.z.fd,!0),w.lg.i(A,"mergeSvrFd",r))},this.fetchSvrFriend(d,i,u,0).then(R))},c.prototype.mergeSvrFriendAppList=function(u,s){var r,i,a,o,l,h=this,R=+this.econf.user.friendAppSeq||0,w=this.econf.mailHBConfig.friend_apply_list_seq;!w||w<=R||(r={time:new Date,dbSeq:R,hbSeq:w,how:u,action:s},i=1,a=[],o=[],l=function(d){var D,S;d.list.forEach(function(y){var k=h.getFriendAppFromServer(y);h.dbFriendAppMap.has(y.user_id)?h.friendAppHasChanged(k)&&o.push(k):a.push(k)}),d.nextFlag&&h.econf.token?h.fetchSvrFriend(d.nextFlag,++i,u,0,!0).then(l):(a.length&&(h.dbFriendAppMap.size?(D=a.filter(function(y){return!h.dbFriendAppMap.has(y.applyUser.userID)}),S=a.filter(function(y){return h.dbFriendAppMap.has(y.applyUser.userID)&&h.friendAppHasChanged(y)}),D.length&&h.bus.emit(_.m.FriendAppList,{applicationList:D,action:_.c.FriendApplicationListChangeAction.Added}),S.length&&h.bus.emit(_.m.FriendAppUpd,{applicationList:S})):h.bus.emit(_.m.FriendAppList,{applicationList:x([],g(a),!1),action:_.c.FriendApplicationListChangeAction.Added})),o.length&&h.bus.emit(_.m.FriendAppUpd,{applicationList:o}),h.dbMgr.addBeanList(x(x([],g(a),!1),g(o),!1),_.l.FriendApp),x(x([],g(a),!1),g(o),!1).forEach(function(y){h.dbFriendAppMap.set(y.applyUser.userID,y)}),h.dbMgr.updateUserSeq(d.cur||d.max,_.z.fdApp,!0),h.lg.i(A,"mergeSvrFdApp",r))},this.fetchSvrFriend(R,i,u,0,!0).then(l))},c.prototype.transApplyType=function(u){return u==0?_.c.FriendApplicationType.None:u==1?_.c.FriendApplicationType.Received:u==2?_.c.FriendApplicationType.Sent:u==3?_.c.FriendApplicationType.Both:_.c.FriendApplicationType.None},c.prototype.transApplyState=function(u){return u==2?_.c.FriendApplicationState.Accepted:u==3?_.c.FriendApplicationState.Rejected:u==4?_.c.FriendApplicationState.Expired:u==5?_.c.FriendApplicationState.Disabled:_.c.FriendApplicationState.Waiting},c.prototype.transFriendRelation=function(u){return u==2?_.c.UserRelationType.SingleHave:u==3?_.c.UserRelationType.BothAllNo:u==4?_.c.UserRelationType.BothSelfHave:u==5?_.c.UserRelationType.BothOtherHave:u==6?_.c.UserRelationType.BothAllHave:_.c.UserRelationType.SingleNo},c.prototype.getFriendFromServer=function(u){var s=u.attributes.reduce(function(r,i){return r[i.key]=i.value||"",r},{});return s={userID:u.user_base_info.user_id,userName:Object(T.g)(u.user_base_info.user_name),userAvatarUrl:Object(T.g)(u.user_base_info.avatar),createTime:+u.create_time,wording:u.wording,friendAlias:u.remark,friendAttributes:s||{},seq:u.friend_list_seq},this.dbFriendMap.set(s.userID,s),s},c.prototype.getFriendAppFromServer=function(u){var s=this.dbFriendAppMap.get(u.user_id);return{applyUser:{userID:u.user_id,userName:u.user_name?Object(T.g)(u.user_name):(s==null?void 0:s.applyUser.userName)||"",userAvatarUrl:u.avatar?Object(T.g)(u.avatar):(s==null?void 0:s.applyUser.userAvatarUrl)||""},wording:u.wording?Object(T.g)(u.wording):(s==null?void 0:s.wording)||"",createTime:u.create_time||(s==null?void 0:s.createTime)||0,updateTime:u.update_time||(s==null?void 0:s.updateTime)||0,type:u.app_type!==void 0?this.transApplyType(u.app_type):(s==null?void 0:s.type)||_.c.FriendApplicationType.None,state:u.status!==void 0?this.transApplyState(u.status):(s==null?void 0:s.state)||_.c.FriendApplicationState.Waiting}},c.prototype.checkFriendAppDB=function(u,s,r){if(!this.dbFriendAppMap.get(u))return s.error=Object(T.y)(6000001,"Friend apply: "+u+" not found."),this.lg.w(A,r,s),s.error},c.prototype.mergeSvrBlacklist=function(u,s){var r,i,a,o,l,h=this,R=+this.econf.user.blacklistSeq||0,w=this.econf.mailHBConfig.black_list_seq;!w||w<=R||(r={time:new Date,dbSeq:R,hbSeq:w,how:u,action:s},i=1,a=0,o=new Map,l=function(d){var D,S,y;d.list.forEach(function(k){return o.set(k.info.user_base_info.user_id,k)}),i==1&&(a=d.full_list),d.nextFlag&&h.econf.token?h.fetchSvrBlacklist(d.nextFlag,++i,u,a).then(l):(D=new Map,S=new Map,o.forEach(function(k,b){var U={userID:b,userName:Object(T.g)(k.info.user_base_info.user_name),userAvatarUrl:Object(T.g)(k.info.user_base_info.avatar),createTime:k.info.create_time};a&&(h.blacklist.has(b)?S:D).set(b,U),k.is_del?S.set(b,U):h.blacklist.has(b)||D.set(b,U)}),a&&h.blacklist.size&&h.blacklist.forEach(function(k,b){S.has(b)?S.delete(b):S.set(b,Object(T.u)(b,h.econf))}),h.dbMgr.updateUserSeq(w,_.z.bl,!0),D.size&&((y=Array.from(D.values())).forEach(function(k){return h.blacklist.set(k.userID,k)}),h.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Added,userList:y}),h.dbMgr.addBeanList(y,_.l.Blacklist)),S.size&&((y=Array.from(S.values())).forEach(function(k){return h.blacklist.delete(k.userID)}),h.bus.emit(_.m.BlacklistUpd,{action:_.c.BlacklistChangeAction.Removed,userList:y}),h.dbMgr.delBeanList(Array.from(S.keys()),_.l.Blacklist)),h.lg.i(A,"mergeSvrBl",r))},this.fetchSvrBlacklist(R,i,u,0).then(l))},c.prototype.fetchSvrBlacklist=function(u,s,r,i){return this.cnMgr.send(_.d.bl_fetch,{cur_list_seq:u,count:100,full_pull:i,degree:s,how:r},_.g.S).then(function(a){var o,l,h;return a.code?{cur:0,list:[]}:(o=a.cur_list_seq,l=a.max_list_seq,{nextFlag:(h=a.fetch_end)||l<=o||o<=u||l<=u?0:o,cur:o,max:l,list:a.blacklists,fetch_end:h,full_list:a.full_list})})},c.prototype.friendAppHasChanged=function(u){var s=this.dbFriendAppMap.get(u.applyUser.userID);return s.wording!==u.wording||s.state!==u.state||s.type!==u.type||s.updateTime!==u.updateTime},c.prototype.updateUserInfo=function(u){var s=this.econf.dbUserMap.get(u.userID),r=this.dbFriendMap.get(u.userID);s&&(u.userName=s.userName!==u.userName?s.userName||"":u.userName,u.userAvatarUrl=s.userAvatarUrl!==u.userAvatarUrl?s.userAvatarUrl||"":u.userAvatarUrl),r&&(r.userName=u.userName,r.userAvatarUrl=u.userAvatarUrl,this.dbMgr.addBeanList([r],_.l.Friend))},c);function c(u,s,r,i){this.lg=O.a.getInstance().lg,this.st=O.a.getInstance().st,this.blacklist=new Map,this.dbFriendMap=new Map,this.dbFriendAppMap=new Map,this.econf=u,this.bus=s,this.cnMgr=r,this.dbMgr=i,this.registerInnerEvent()}},function(te,j,C){C.d(j,"a",function(){return m});var O=C(2),T=C(1),_=C(0),E=C(19),g=C(76),x=function(){return(x=Object.assign||function(c){for(var u,s=1,r=arguments.length;s<r;s++)for(var i in u=arguments[s])Object.prototype.hasOwnProperty.call(u,i)&&(c[i]=u[i]);return c}).apply(this,arguments)},A=_.v.Group,m=(f.prototype.destroy=function(){this.onLogout(),this.cnMgr=null,this.bus=null,this.lg=null,this.econf=null},f.prototype.onLogout=function(){this.roomMap.forEach(function(c){return c.destroy(!0)}),this.groupMap.forEach(function(c){return c.destroy()}),this.roomMap.clear(),this.groupMap.clear(),this.groupDelMap.clear(),this.dbGroupApplyMap.clear(),this.roomIDs.clear(),this.groupLogined=!1,this.groupApplyLogined=!1,this.querySeqMap.group=0,this.querySeqMap.groupApply=0,this.queryGroupsTasks.length=0,this.queryGroupApplysTasks.length=0},f.prototype.findRoom=function(c){return this.roomMap.get(c)},f.prototype.initGroupByConv=function(c){var u=this.groupMap.get(c);u||(u=new E.a(c,this.econf,this.bus,this.dbMgr,this.cnMgr),this.groupMap.set(c,u),c=this.econf.dbGroupMap.get(c),u.setDBGroup(this.dbGroupApplyMap,c))},f.prototype.createRoom=function(c,u,s,r,i){var a,o,l=this;if(c==_.y.Switch){if(!(o=this.roomMap.get(s))||s==u.roomID)return a={code:6000001,message:s==u.roomID?"The fromRoomID and the target room id are the same.":"Room is not exist or not in the room by fromRoomID: "+s},this.lg.i(A,_.u.SwitchRoom,{fromRoomID:s,roomInfo:u,error:a}),Promise.reject(a);o={room_id:s,room_session_id:o.sessionID,room_user_session_id:o.userSessionID,sub_room_id:o.subRoomID}}return this.createRoomInstance(u.roomID).create(c,u.roomName,r,o,i).then(function(h){return c==_.y.Switch&&((o=l.roomMap.get(s))&&o.destroy(!0),l.roomMap.delete(s)),h})},f.prototype.leaveRoom=function(c){var u=this,s=this.findRoom(c);return s?s.quit().then(function(){return u.roomMap.delete(c),{roomID:c}}):Promise.resolve({roomID:c})},f.prototype.leaveAllRoom=function(){var c=this;return this.cnMgr.send(_.d.rm_quit_all,{}).then(function(u){var s;return u.code?(s=Object(T.y)(6000306,u.message,u.code),Promise.reject(s)):(s=u.room_list.map(function(r){var i=r.room_id,a=(r=r.room_session_id,c.findRoom(i));return a&&r.eq(a.sessionID)&&(c.bus.emit(_.m.RoomState,{roomID:i,state:_.c.RoomState.Disconnected,event:_.c.RoomEvent.Success,extendedData:""}),c.roomMap.delete(i)),i}),c.lg.i(_.v.Room,_.u.LeaveAllRoom),{roomIDs:s})})},f.prototype.queryRoomMemberList=function(c,u){var s=this.createNoRoomError(c,_.u.QueryRoomMemberList);return s?Promise.reject(s):this.findRoom(c).queryPageMember(u)},f.prototype.queryRoomMembers=function(c,u){var s=this.createNoRoomError(u,_.u.QueryRoomMembers);return s?Promise.reject(s):this.findRoom(u).queryMembers(c)},f.prototype.queryRoomAllAttr=function(c){var u=this.createNoRoomError(c,_.u.QueryRoomAllAttr);return u?Promise.reject(u):this.findRoom(c).queryAllAttr()},f.prototype.setRoomAttr=function(c,u,s){var r=this.createNoRoomError(u,_.u.SetRoomAttr);return r?Promise.reject(r):this.findRoom(u).setAttr(c,s)},f.prototype.delRoomAttr=function(c,u,s){var r=this.createNoRoomError(u,_.u.DelRoomAttr);return r?Promise.reject(r):this.findRoom(u).delAttr(c,s)},f.prototype.beginRoomAttr=function(c,u){this.createRoomInstance(c).beginAttr(u)},f.prototype.endRoomAttr=function(c){var u=this.createNoRoomError(c,_.u.EndRoomAttr);return u?Promise.reject(u):this.findRoom(c).endAttr()},f.prototype.setRoomMembersAttr=function(c,u,s,r){var i=this.createNoRoomError(s,_.u.SetRoomMembersAttr);return i?Promise.reject(i):this.findRoom(s).setMembersAttr(c,u,r)},f.prototype.queryRoomMembersAttr=function(c,u){var s=this.createNoRoomError(u,_.u.QueryRoomMembersAttr);return s?Promise.reject(s):this.findRoom(u).queryMembersAttr(c)},f.prototype.queryRoomMemberAttrs=function(c,u){var s=this.createNoRoomError(c,_.u.QueryRoomMemberAttrs);return s?Promise.reject(s):this.findRoom(c).queryMemberAttrs(u)},f.prototype.queryRoomOnlineMemberCount=function(c){var u=this.createNoRoomError(c,_.u.QueryRoomMemberCount);return u?Promise.reject(u):this.findRoom(c).queryMemberCount()},f.prototype.onPushRoomKickout=function(c){var u,s=c.room_id,r=this.findRoom(s);r&&(u=r.enabledOfflineMsg,r=r.onPushKickout(c),this.roomMap.delete(s),r)&&(c=this.econf.dbConvMap.get(this.econf.user.userID+_.c.ConversationType.Room+s))&&(c.maxSeq=0,c.msgSeq=0,c.maxOrderKey=0,c.roomSessionID="",this.dbMgr.addConversationList([c]),this.dbMgr.clearRoomMessage(s,u))},f.prototype.onPushRoomUser=function(c,u){var s=this.findRoom(c.room_id);s&&s.onPushEnter(c,u)},f.prototype.onPushRoomAttrMdf=function(c){var u=this.findRoom(c.room_id);u&&u.onPushAttrMdf(c)},f.prototype.onPushRoomUserAttrMdf=function(c){var u=this.findRoom(c.room_id);u&&u.onPushUserAttrMdf(c)},f.prototype.createGroup=function(c,u,s){var r=this,i=String(c.groupID||"").trim()||Object(T.k)(),a=this.createInstance(i,c.groupName,c.groupAvatarUrl);return a.create(c,u,s).then(function(o){return r.groupMap.delete(i),r.groupDelMap.delete(i),r.groupDelMap.delete(a.groupID),r.groupMap.set(a.groupID,a),r.dbMgr.updateUserSeq(a.dbGroup.groupSeq,_.z.gp),o}).catch(function(o){throw o&&o.code&&o.code!=6000524&&(r.groupMap.delete(i),r.groupMap.delete(a.groupID),a.destroy()),o})},f.prototype.joinGroup=function(c,u,s){var r=this,i=this.createInstance(u);return i.join(c,s).then(function(a){if(a){if(r.groupDelMap.delete(u),r.dbMgr.updateUserSeq(i.dbGroup.groupSeq,_.z.gp),c)return a}else r.groupMap.delete(u),i.destroy();return{groupID:u}}).catch(function(a){throw a&&a.code&&a.code!=6000522&&(r.groupMap.delete(u),i.destroy()),a})},f.prototype.leaveGroup=function(c){return this.quitGroup(c,_.d.gp_quit,_.u.LeaveGroup,6000506)},f.prototype.dismissGroup=function(c){return this.quitGroup(c,_.d.gp_destroy,_.u.DismissGroup,6000504)},f.prototype.queryGroupList=function(){var c=this;return new Promise(function(u){var s,r={seq:++c.querySeqMap.group,time:new Date,logined:c.groupLogined,count:0};c.groupLogined?c.econf.isDBLoaded?(s=Array.from(c.econf.dbGroupMap.values()),u(c.handleQueryGroupsCallback(s,r))):c.dbMgr.getBeanListByOwnerID(_.l.Group).then(function(i){u(c.handleQueryGroupsCallback(i,r))}):c.queryGroupsTasks.push({log:r,resolve:u})})},f.prototype.updateGroupInfo=function(c,u,s){return this.createInstance(u).update(c,s)},f.prototype.queryGroupInfo=function(c){return this.createInstance(c).query()},f.prototype.setGroupAttr=function(c,u){return this.createInstance(u).updateAttr(c)},f.prototype.delGroupAttr=function(c,u){return this.createInstance(u).updateAttr(c)},f.prototype.queryGroupAttr=function(c,u){return this.createInstance(c).queryAttr(u)},f.prototype.muteGroup=function(c,u){return this.createInstance(c).mute(u)},f.prototype.updateGroupAlias=function(c,u){return this.createInstance(u).updateAlias(c)},f.prototype.setGroupMemberNickname=function(c,u,s){return this.createInstance(s).setMemberInfo(u,c,_.r.Nickname)},f.prototype.setGroupMemberRole=function(c,u,s){return this.createInstance(s).setMemberInfo(u,c,_.r.Role)},f.prototype.transferGroupOwner=function(c,u){return this.createInstance(u).transferOwner(c)},f.prototype.queryGroupMemberInfo=function(c,u){return this.createInstance(u).queryMemberInfo(c)},f.prototype.inviteToGroup=function(c,u,s,r){return this.createInstance(s).inviteUsers(c,u,r)},f.prototype.kickGroupMembers=function(c,u){return this.createInstance(u).kickMembers(c)},f.prototype.queryGroupMembers=function(c,u){return this.createInstance(c).queryMemberList(u)},f.prototype.queryGroupMemberCount=function(c){return this.createInstance(c).queryMemberCount()},f.prototype.muteGroupMembers=function(c,u,s,r){return r=c?r&&!isNaN(r.duration)?+r.duration:-1:0,this.createInstance(s).muteMembers(c,u,r)},f.prototype.queryGroupMemberMutedList=function(c,u){return this.createInstance(c).queryMemberMutedList(u)},f.prototype.queryReceiptMembers=function(c,u,s,r,i){var a=this.econf.user.userID+_.c.ConversationType.Group+u+c.messageSeq,o=this.econf.msgExtraMap.get(a);return o?(o.messageID||(o.messageID=c.messageID),o.memberSeqs||(o.memberSeqs={})):(o={id:a,ownerID:this.econf.user.userID,conversationID:u,conversationType:_.c.ConversationType.Group,conversationSeq:c.messageSeq,messageID:c.messageID,receiptStatus:c.receiptStatus,memberSeqs:{}},this.econf.msgExtraMap.set(a,o)),this.createInstance(u).queryReceiptMemberList(c,o,s,r,i)},f.prototype.searchGroups=function(c){var u=this;return new Promise(function(s){var r=c.keywords.filter(function(o){return typeof o=="string"&&o&&o.trim().length}).map(function(o){return o.toLocaleLowerCase()});if(!r.length)return s({nextFlag:0,groupSearchInfoList:[]});var i=new Date,a=c.isAlsoMatchGroupMemberUserName;u.dbMgr.searchGroups(r,a,c.isAlsoMatchGroupMemberNickname,function(o,l){var h=[],R=(Array.from(u.econf.dbGroupMap.values()).sort(function(b,U){return Number(b.groupSeq)-Number(U.groupSeq)}).forEach(function(b){var U,z=b.groupID,P=b.groupName,H=b.groupAvatarUrl;b=b.groupSeq,r.every(function(Q){return Object(T.d)(P,Q)})&&(U=o.filter(function(Q){return Q.ownerID==z}).map(function(Q){var J=u.econf.dbUserMap.get(Q.userID),L=Q.operatedUser;return L&&Object.assign(L,Object(T.u)(L.userID,u.econf)),{userID:Q.userID,userName:(J==null?void 0:J.userName)||"",userAvatarUrl:(J==null?void 0:J.userAvatarUrl)||"",memberNickname:Q.memberNickname||"",memberRole:Q.memberRole||0,muteExpiredTime:Q.muteExpiredTime||0,groupEnterInfo:{enterTime:Q.enterTime||0,enterType:Q.enterType||_.c.GroupEnterType.Unknown,operatedUser:L}}}),h.push({groupInfo:{groupID:z,groupName:P,groupAvatarUrl:H},userList:U,seq:+b||0}))}),h.length),w=u.econf.dbGroupMap.size,d=o.length,D=0,S=(D=c.nextFlag?h.findIndex(function(b){return c.nextFlag===b.seq})+1:D)+Math.min(_.h.MAX_SEARCH_PAGE_COUNT,c.count),y=h[S],k=(h=h.slice(D,S),y=y?h[h.length-1].seq:0,h.length);u.lg.i(_.v.Database,_.u.SearchGroup,{time:i,dbCount:l,start:D,end:S,total:R,totalGroup:w,totalUser:d,count:k,nextFlag:y,config:c}),s({nextFlag:y,groupSearchInfoList:h})})})},f.prototype.updateGroupVerifyMode=function(c,u,s){return this.createInstance(u).updateVerifyMode(c,s)},f.prototype.acceptGroupApply=function(c,u,s,r){return this.createInstance(s).acceptApply(c,u,r)},f.prototype.rejectGroupApply=function(c,u,s,r){var i=this,a={time:new Date},o=c?_.u.RejectGroupJoinApp:_.u.RejectGroupInviteApp,l=c?_.d.gp_apply_reject:_.d.gp_invite_reject;return r={group_id:s,user_id:u,offline_info:Object(T.f)(r==null?void 0:r.pushConfig)},this.cnMgr.send(l,r).then(function(h){var R,w,d,D,S;return h.code?(a.error=Object(T.y)(6000502,h.message,h.code),i.lg.w(A,o,a),Promise.reject(a.error)):(S=c?_.c.GroupApplicationType.Join:_.c.GroupApplicationType.BeInvite,R=(R=i.groupMap.get(s))==null?void 0:R.dbMbMap.get(i.econf.user.userID),w=i.econf.dbGroupMap.get(s),d=i.dbGroupApplyMap.get(i.getApplyID(S,s,u)),D=c?{groupID:s,groupName:(w==null?void 0:w.groupName)||"",groupAvatarUrl:(w==null?void 0:w.groupAvatarUrl)||""}:x(x({},d==null?void 0:d.groupInfo),{groupID:s}),S={type:S,state:_.c.GroupApplicationState.Rejected,updateTime:h.apply_group_info.update_time,createTime:0,wording:"",seq:c?(w==null?void 0:w.dataSeq)||0:(d==null?void 0:d.seq)||0,groupInfo:D,applyUser:Object(T.u)(u,i.econf),operatedUser:c?x(x({},Object(T.u)(i.econf.user.userID,i.econf)),{memberRole:R?R.memberRole:_.s.Admin,memberNickname:R?R.memberNickname:""}):void 0},i.syncGroupApplyMap(s,S),i.bus.emit(_.m.GroupAppUpd,{applicationList:[S]}),i.updateGroupApplySeq(c?s:"",h.apply_group_info.apply_list_seq),i.lg.i(A,o,a),c?{groupID:s,userID:u}:{groupID:s,inviterUserID:u})})},f.prototype.queryGroupApplyList=function(c){var u=this;return new Promise(function(s){var r={seq:++u.querySeqMap.groupApply,time:new Date,logined:u.groupApplyLogined,config:c,count:0};u.groupApplyLogined?u.mergeSvrGroupApplyList("",_.n.B,function(){s(u.handleQueryGroupApplysCallback(c,r))}):u.queryGroupApplysTasks.push({config:c,log:r,resolve:s})})},f.prototype.onPushGroupCreate=function(c){this.groupDelMap.delete(c.group_id),this.createInstance(c.group_id,c.group_name).onPushCreate(c)},f.prototype.onPushGroupJoin=function(c,u){var s=u?_.c.GroupMemberEvent.Joined:_.c.GroupMemberEvent.Invited;u=u?_.c.GroupEvent.Joined:_.c.GroupEvent.Invited,this.groupDelMap.delete(c.group_id),this.createInstance(c.group_id,c.group_name).onPushJoin(c,s,u)},f.prototype.onPushGroupDestroy=function(c,u){this.deleteGroup(c,u)},f.prototype.onPushGroupDataModify=function(c){this.groupDelMap.delete(c.group_id);var u=this.createInstance(c.group_id);u.onPushModify(c),this.econf.dbGroupMap.set(u.groupID,u.dbGroup)},f.prototype.onPushGroupAttrMdf=function(c){this.groupDelMap.delete(c.group_id);var u=this.createInstance(c.group_id);u.onPushAttrMdf(c),this.econf.dbGroupMap.set(u.groupID,u.dbGroup)},f.prototype.onPushGroupOwnerTransfer=function(c){this.groupDelMap.delete(c.group_id);var u=this.createInstance(c.group_id);u.onPushOwnerTransfer(c),this.econf.dbGroupMap.set(u.groupID,u.dbGroup)},f.prototype.onPushGroupMemberChange=function(c){this.groupDelMap.delete(c.group_id);var u=this.createInstance(c.group_id);u.onPushMemberChange(c),this.econf.dbGroupMap.set(u.groupID,u.dbGroup)},f.prototype.onPushGroupEnterApply=function(c){var u=this,s=c.group_id,r=this.econf.dbGroupMap.get(s);if(r){for(var i=this.econf.user.userID,a=[],o=[],l=[],h=[r.groupAppSeq||0],R=(c.list.forEach(function(w){h.push(w.apply_list_seq);var d,D,S,y,k,b,U=w.apply_status;!U||U<1||6<U||(d=U==1||U==3||U==4?_.c.GroupApplicationType.Join:_.c.GroupApplicationType.Invite)==_.c.GroupApplicationType.Invite&&w.op_user.user_id!=i||(D=(S=w.base_info).user_id,b=S.user_name,y=S.avatar,S=S.update_time,b={userID:D,userName:Object(T.g)(b),userAvatarUrl:Object(T.g)(y)},Object(T.x)(b,u.econf,S),d==_.c.GroupApplicationType.Join&&w.op_user&&(b=(y=w.op_user).user_id,S=y.user_name,k=y.role,y=y.group_nick_name,(k=x(x({},Object(T.u)(b,u.econf)),{memberRole:k,memberNickname:y})).userName||(k.userName=Object(T.g)(S))),b={type:d,state:u.getGroupApplyState(U),createTime:w.create_time,updateTime:w.update_time,wording:w.wording,seq:r.dataSeq,groupInfo:{groupID:s,groupName:r.groupName,groupAvatarUrl:r.groupAvatarUrl},applyUser:Object(T.u)(D,u.econf),operatedUser:k},(u.checkGroupApplyCreateTime(b)?l:o).push(b),a.push(b))}),this.syncGroupApplyMap(s),o.length&&(c=_.c.GroupApplicationListChangeAction.Added,this.bus.emit(_.m.GroupAppList,{action:c,applicationList:o})),l.length&&this.bus.emit(_.m.GroupAppUpd,{applicationList:l}),h.sort(function(w,d){return w-d}),0);R<h.length&&h[R]+1==h[R+1];R++);R&&this.updateGroupApplySeq(s,h[R],!0)}},f.prototype.onPushGroupApply=function(c){var u,s,r,i=c.apply_info.apply_status;!i||i<1||6<i||(u=i==1||i==3||i==4?_.c.GroupApplicationType.Join:_.c.GroupApplicationType.BeInvite,r=(s=c.apply_info).base_info.user_id,!c.group_info||i!=3&&i!=5||(c.group_info.op_user=s.op_user,this.onPushGroupJoin(c.group_info,u==_.c.GroupApplicationType.Join)),c=Object(T.u)(this.econf.user.userID,this.econf),s.op_user&&u==_.c.GroupApplicationType.BeInvite&&!(c=Object(T.u)(s.op_user.user_id,this.econf)).userName&&(c.userName=Object(T.g)(s.op_user.user_name)),(i={type:u,state:this.getGroupApplyState(i),updateTime:s.update_time,createTime:s.create_time,wording:s.wording,seq:s.base_info.update_time,groupInfo:{groupID:r,groupName:s.base_info.user_name,groupAvatarUrl:Object(T.g)(s.base_info.avatar)},applyUser:c,operatedUser:u==_.c.GroupApplicationType.Join&&s.op_user?x(x({},Object(T.u)(s.op_user.user_id,this.econf)),{memberRole:s.op_user.role,memberNickname:s.op_user.group_nick_name}):void 0}).operatedUser&&!i.operatedUser.userName&&s.op_user&&(i.operatedUser.userName=Object(T.g)(s.op_user.user_name)),this.syncGroupApplyMap(r,i)?this.bus.emit(_.m.GroupAppUpd,{applicationList:[i]}):(c=_.c.GroupApplicationListChangeAction.Added,this.bus.emit(_.m.GroupAppList,{action:c,applicationList:[i]})),this.updateGroupApplySeq("",s.apply_list_seq))},f.prototype.onLogined=function(c){var u=this;if(c)return this.onLogout();var s=this.st.getRealClientTimestamp();this.econf.dbGroupMap.forEach(function(r){return u.initGroupInstance(r)}),this.dbMgr.getBeanList(_.l.GroupApp).then(function(r){var i=u.econf.mailHBConfig.apply_expired_duration;r.forEach(function(a){a.state==_.c.GroupApplicationState.Waiting&&s-a.createTime>i&&(a.state=_.c.GroupApplicationState.Expired);var o=((o=a.operatedUser)&&Object.assign(o,Object(T.u)(o.userID,u.econf)),{type:a.type,state:a.state,createTime:a.createTime,updateTime:a.updateTime,wording:a.wording,seq:a.seq,groupInfo:a.groupInfo,applyUser:Object(T.u)(a.applyUser,u.econf),operatedUser:o}),l=u.econf.dbGroupMap.get(a.groupInfo.groupID);l&&(o.seq=l.dataSeq,o.groupInfo.groupName=l.groupName,o.groupInfo.groupAvatarUrl=l.groupAvatarUrl),u.dbGroupApplyMap.set(a.id,o)})}),this.groupLogined=!1,this.groupApplyLogined=!1,this.mergeSvrGroupList(_.n.L,function(r){u.groupLogined=!0,u.queryGroupsTasks.forEach(function(i){return i.resolve(u.handleQueryGroupsCallback(r,i.log))}),u.queryGroupsTasks.length=0,u.syncGroupInfo(_.n.L)}),this.mergeSvrGroupApplyList("",_.n.L,function(){u.groupApplyLogined=!0,u.queryGroupApplysTasks.forEach(function(r){return r.resolve(u.handleQueryGroupApplysCallback(r.config,r.log))}),u.queryGroupApplysTasks.length=0})},f.prototype.onConnected=function(){var c=this;this.roomMap.forEach(function(u){return u.create(_.y.Join,u.groupName,!0)}),this.mergeSvrGroupList(_.n.H,function(){return c.syncGroupInfo(_.n.H)}),this.mergeSvrGroupApplyList("",_.n.H)},f.prototype.onDisConnected=function(c){this.roomMap.forEach(function(u){return u.onDisConnected(c)}),this.groupMap.forEach(function(u){return u.onDisConnected()})},f.prototype.syncGroupInfo=function(c){for(var u=this,s=Array.from(this.econf.dbGroupMap.keys()),r=[],i=0;i<s.length;i+=100){var a={user_ids:s.slice(i,i+100)};a=this.cnMgr.send(_.d.gp_infos,a,_.g.S),r.push(a)}Promise.all(r).then(function(o){var l=void 0,h=new Set,R=[],w=(o.forEach(function(d){d.code||d.group_infos.forEach(function(D){var S=D.group_id,y=D.history_msg_seq,k=D.group_name||"",b=Object(T.g)(D.group_avatar),U=D.remark,z=(k&&b||((l=l||{})[S]=k+","+(b?b.length:0)),h.add(S),u.econf.dbGroupMap.get(S));D.type==1?(u.groupDelMap.set(S,{groupName:k,groupAvatarUrl:b,groupAlias:U}),u.syncDisabledConv(S,y),u.econf.dbGroupMap.delete(S)):z&&(k&&(z.groupName=k),b&&(z.groupAvatarUrl=b),U&&(z.groupAlias=U),z.totalMemberCount=D.member_count,y&&(z.historyMsgSeq=y),u.syncToConv(z),k=u.initGroupInstance(z),c==_.n.L&&u.econf.isNewDB||(b=!z.dataSeq||D.group_data_seq>z.dataSeq,U=!z.memberSeq||D.all_member_seq>z.memberSeq,y=(y=D.user_apply_list_seq||0)&&(y>z.groupAppSeq||!z.groupAppSeq),(b||U||y)&&((l=l||{})[S]=(l[S]||"")+",d="+ +b+",m="+ +U+",a="+ +y,R.push({instance:k,dataSeq:b,memberSeq:U,applySeq:y}))))})}),l&&u.lg.i(A,"groupInfos",l),s.filter(function(d){return!h.has(d)}));o=R.length||w.length?function(){var d,D;u.cnMgr&&(R.forEach(function(S){var y;S.instance&&S.instance.cnMgr&&(y=S.instance.groupID,S.dataSeq&&u.cnMgr.send(_.d.gp_data,{group_id:y},_.g.S).then(function(k){k.code||S.instance.queryGroupInfoCallback(k)}),S.memberSeq&&S.instance.mergeSvrMemberList(c),S.applySeq)&&u.mergeSvrGroupApplyList(y,c)}),w.length)&&(d=[],D=w.map(function(S){return u.cnMgr.send(_.d.gp_data,{group_id:S},_.g.S).then(function(y){(y=Object(T.y)(0,y.message,y.code).code)!=6000523&&y!=6000521||(u.econf.dbGroupMap.delete(S),d.push(S))})}),Promise.all(D).then(function(){var S,y;d.length&&(u.dbMgr.deleteGroupList(d),S=[],y=[],d.forEach(function(k){(k=u.syncDisabledConv(k,0))&&(S.push(k),k.state!=_.j.Delete)&&k.maxOrderKey&&y.push({event:_.c.ConversationEvent.Disabled,conversation:Object(T.s)(_.h.convKeys,k)})}),S.length&&u.dbMgr.addConversationList(S),y.length)&&u.bus.emit(_.m.ConvChanged,{infoList:y},"disable")}))}:void 0,u.bus.exec(_.m.ISyncGroups,c==_.n.H,u.groupDelMap,o)})},f.prototype.handleQueryGroupsCallback=function(c,u){var s=this,r=[];return c.forEach(function(i){s.groupDelMap.get(i.groupID)||(r.push({baseInfo:{groupID:i.groupID,groupName:i.groupName,groupAvatarUrl:i.groupAvatarUrl},groupAlias:i.groupAlias,notificationStatus:i.notificationStatus}),s.createInstance(i.groupID))}),u.count=r.length,this.lg.i(A,_.u.QueryGroups,u),{groupList:r}},f.prototype.handleQueryGroupApplysCallback=function(c,u){(a=Array.from(this.dbGroupApplyMap.values())).sort(function(o,l){return l.createTime-o.createTime});var s=a.length,r=c.nextFlag||0,i=(c=r+c.count)<s?c:0,a=a.slice(r,c);return Object.assign(u,{start:r,end:c,total:s,count:a.length,nextFlag:i}),this.lg.i(A,_.u.QueryGroupApps,u),{applicationList:a,nextFlag:i}},f.prototype.registerInnerEvent=function(){this.bus.add(_.m.ILogined,this.onLogined.bind(this)),this.bus.add(_.m.IConnected,this.onConnected.bind(this)),this.bus.add(_.m.IDisConnected,this.onDisConnected.bind(this))},f.prototype.createRoomInstance=function(c){var u=this.findRoom(c);return u||(u=new g.a(c,this.econf,this.bus,this.dbMgr,this.cnMgr),this.roomMap.set(c,u),this.roomIDs.add(c)),u},f.prototype.createInstance=function(c,u,s){var r=this.groupMap.get(c),i=(r||(r=new E.a(c,this.econf,this.bus,this.dbMgr,this.cnMgr),this.groupMap.set(c,r),i=this.econf.dbGroupMap.get(c)||{id:this.econf.user.userID+c,ownerID:this.econf.user.userID,groupID:c,groupName:u||"",groupAvatarUrl:s||"",groupNotice:"",groupAlias:"",notificationStatus:_.c.GroupMessageNotificationStatus.Notify,attributes:{},mutedInfo:{mode:0,expiredTime:0,roles:[]},verifyInfo:{joinMode:_.c.GroupJoinMode.Any,inviteMode:_.c.GroupInviteMode.Any,beInviteMode:_.c.GroupBeInviteMode.None},createTime:0,maxMemberCount:0,totalMemberCount:0,dataSeq:0,attributeSeq:0,memberSeq:0,groupSeq:0,groupAppSeq:0,historyMsgSeq:0,memberAllSeq:0,memberSeqs:{},selfMutedExpiredTime:0},r.setDBGroup(this.dbGroupApplyMap,i)),u&&(r.dbGroup.groupName=u),s&&(r.dbGroup.groupAvatarUrl=s),this.econf.dbGroupMap.get(c));return i&&i!==r.dbGroup&&(this.lg.w(A,"setDBGroup",{dbGroup:i,base:r.dbGroup}),r.setDBGroup(this.dbGroupApplyMap,i)),r},f.prototype.initGroupInstance=function(c){var u=this.groupMap.get(c.groupID);return u||(u=new E.a(c.groupID,this.econf,this.bus,this.dbMgr,this.cnMgr),c.dataSeq||(c.dataSeq=0),c.attributeSeq||(c.attributeSeq=0),c.memberSeq||(c.memberSeq=0),c.groupSeq||(c.groupSeq=0),u.setDBGroup(this.dbGroupApplyMap,c),this.groupMap.set(c.groupID,u)),u},f.prototype.deleteGroup=function(c,u){var s,r,i,a,o=c.group_id,l=this.groupMap.get(o);l?(c.op_user||(c.op_user={user_id:this.econf.user.userID,user_name:this.econf.user.userName}),c.op_user.role||(i=l.dbMbMap.get(c.op_user.user_id))&&(c.op_user.role=i.memberRole,c.op_user.group_nick_name=i.memberNickname),r=(i=c.op_user).user_id,a=i.group_nick_name,s=i.role,r={userID:r},(i=i.user_name)&&(r.userName=Object(T.g)(i)),a&&(r.memberNickname=a),s&&(r.memberRole=s),i=Object(T.t)(l.dbMbMap.get(this.econf.user.userID),this.econf),a=void 0,this.econf.mailHBConfig.group_tips&&u==_.c.GroupEvent.Dismissed&&(a={type:_.c.MessageType.Tips,event:u,operatedUser:r}),this.bus.exec(_.m.ILeftGroup,o,0,a),this.bus.emit(_.m.GroupState,{state:_.c.GroupState.Quit,event:u,groupInfo:l.createGroupFullInfo(),operatedInfo:r}),this.bus.emit(_.m.GroupMemberState,{groupID:o,state:_.c.GroupMemberState.Quit,event:u==_.c.GroupEvent.KickedOut?_.c.GroupMemberEvent.KickedOut:_.c.GroupMemberEvent.Left,userList:[i],operatedInfo:r}),l.dbMbMap.clear()):this.bus.exec(_.m.ILeftGroup,o),this.dbMgr.deleteGroupList([o]),this.groupDelMap.set(o,{groupName:"",groupAvatarUrl:"",groupAlias:""}),this.econf.dbGroupMap.delete(o),this.dbMgr.updateUserSeq(c.conv_list_seq,_.z.gp)},f.prototype.quitGroup=function(c,u,s,r){var i=this,a={time:new Date,groupID:c};return this.cnMgr.send(u,{group_id:c}).then(function(o){return o.code?(a.error=Object(T.y)(r,o.message,o.code),i.lg.w(A,s,a),Promise.reject(a.error)):(o.group_id=c,o.op_user={user_id:i.econf.user.userID,user_name:i.econf.user.userName},i.deleteGroup(o,u===_.d.gp_destroy?_.c.GroupEvent.Dismissed:_.c.GroupEvent.Left),i.lg.i(A,s,a),{groupID:c})})},f.prototype.fetchSvrGroup=function(c,u,s,r){return this.cnMgr.send(_.d.gp_list,{cur_list_seq:c,count:100,full_pull:r,degree:u,how:s},_.g.S).then(function(i){var a,o,l;return i.code?{list:[]}:(a=i.cur_list_seq,o=i.max_list_seq,{nextFlag:(l=i.fetch_end)||o<=a||a<=c||o<=c?0:a,cur:a,max:o,list:i.groups,fetch_end:l,full_list:i.full_list})})},f.prototype.fetchSvrGroupApply=function(c,u,s,r){var i=c?_.d.gp_apply_list:_.d.gp_self_apply_list,a=r==_.n.B?_.g.A:_.g.S;return this.cnMgr.send(i,{group_id:c,cur_list_seq:u,count:100,full_pull:s,how:r},a).then(function(o){var l,h,R;return o.code?{list:[]}:(l=o.cur_list_seq,h=o.max_list_seq,{nextFlag:(R=o.fetch_end)||h<=l||l<=u||h<=u?0:l,cur:l,max:h,list:o.list,fetch_end:R})})},f.prototype.mergeSvrGroupList=function(c,u){var s=this,r=+this.econf.user.groupSeq||0,i=this.econf.mailHBConfig.group_list_seq;if(!this.econf.mailHBConfig.fetch_group_list||!i||i<=r)return u&&u(Array.from(this.econf.dbGroupMap.values()));var a={time:new Date,dbSeq:r,hbSeq:i,how:c},o=1,l=0,h=[],R=new Set,w=function(d){o==1&&(l=d.full_list)&&s.econf.dbGroupMap.forEach(function(D,S){return R.add(S)}),d.list.forEach(function(D){var S,y,k,b,U=D.group_id,z=D.history_msg_seq,P=D.group_name||"",H=Object(T.g)(D.group_avatar),Q=D.remark;P&&H||(a[U]=P+","+(H?H.length:0)),D.type==1?(s.groupDelMap.set(U,{groupName:P,groupAvatarUrl:H,groupAlias:Q}),s.syncDisabledConv(U,z),s.econf.dbGroupMap.has(U)?(R.add(U),s.econf.dbGroupMap.delete(U),c==_.n.H&&h.push({state:_.c.GroupState.Quit,event:_.c.GroupEvent.Left,operatedInfo:{},groupInfo:{baseInfo:{groupID:U,groupName:P}}})):R.delete(U)):(R.delete(U),S=D.member_count,y=D.not_notify?_.c.GroupMessageNotificationStatus.Disturb:_.c.GroupMessageNotificationStatus.Notify,b=s.econf.dbGroupMap.has(U),k=s.econf.dbGroupMap.get(U)||{id:s.econf.user.userID+U,ownerID:s.econf.user.userID,groupID:U,groupName:P,groupAvatarUrl:H,notificationStatus:y,totalMemberCount:S,groupNotice:"",groupAlias:Q,attributes:{},mutedInfo:{mode:0,expiredTime:0,roles:[]},verifyInfo:{joinMode:_.c.GroupJoinMode.Any,inviteMode:_.c.GroupInviteMode.Any,beInviteMode:_.c.GroupBeInviteMode.None},createTime:0,maxMemberCount:0,dataSeq:0,attributeSeq:0,memberSeq:0,groupSeq:0,groupAppSeq:0,historyMsgSeq:0,memberAllSeq:0,memberSeqs:{},selfMutedExpiredTime:0},b?(k.notificationStatus=y,P&&(k.groupName=P),H&&(k.groupAvatarUrl=H),Q&&(k.groupAlias=Q),S&&(k.totalMemberCount=S)):(s.econf.dbGroupMap.set(U,k),c==_.n.H&&h.push({state:_.c.GroupState.Enter,event:_.c.GroupEvent.Joined,operatedInfo:{},groupInfo:{baseInfo:{groupID:U,groupName:P,groupAvatarUrl:H},notificationStatus:y}})),z&&(k.historyMsgSeq=z),k.attributes||(k.attributes={}),(b=D.user_apply_list_seq)&&(b>k.groupAppSeq||!k.groupAppSeq)&&s.mergeSvrGroupApplyList(U,c),s.syncToConv(k))}),d.nextFlag&&s.econf.token?s.fetchSvrGroup(d.nextFlag,++o,c,l).then(w):(R.size&&s.dbMgr.deleteGroupList(Array.from(R)),s.dbMgr.updateUserSeq(d.cur||i,_.z.gp,!0),d=Array.from(s.econf.dbGroupMap.values()),s.dbMgr.addGroupList(d),h.length&&h.forEach(function(D){return s.bus.emit(_.m.GroupState,D)}),s.lg.i(A,"mergeSvrGp",a),u&&u(d))};this.fetchSvrGroup(r,o,c,0).then(w)},f.prototype.mergeSvrGroupApplyList=function(c,u,s){var r=this,i=c?((i=this.econf.dbGroupMap.get(c))==null?void 0:i.groupAppSeq)||0:this.econf.user.groupAppSeq||0,a=this.econf.mailHBConfig.group_apply_list_seq;if(!c&&(!a||a<=i))return s&&s();var o={time:new Date,dbSeq:i,hbSeq:a,how:u,dbCount:this.dbGroupApplyMap.size},l=this.econf.mailHBConfig.apply_expired_duration,h=this.econf.user.userID,R=1,w=0,d={groupID:c,groupName:"",groupAvatarUrl:""},D=(c&&(a=this.econf.dbGroupMap.get(c),w=(a==null?void 0:a.dataSeq)||0,d.groupName=(a==null?void 0:a.groupName)||"",d.groupAvatarUrl=(a==null?void 0:a.groupAvatarUrl)||""),function(S){var y=r.st.getRealClientTimestamp();S.list.forEach(function(k){var b,U,z,P=k==null?void 0:k.apply_status;!P||P<1||6<P||(b=P==1||P==3||P==4?_.c.GroupApplicationType.Join:c?_.c.GroupApplicationType.Invite:_.c.GroupApplicationType.BeInvite)==_.c.GroupApplicationType.Invite&&k.op_user.user_id!=h||(U=c||k.base_info.user_id,b!=_.c.GroupApplicationType.Join||c?b==_.c.GroupApplicationType.BeInvite?(z=Object(T.u)(k.op_user.user_id,r.econf)).userName||(z.userName=Object(T.g)(k.op_user.user_name)):(z=Object(T.u)(k.base_info.user_id,r.econf)).userName||(z.userName=Object(T.g)(k.base_info.user_name)):z=Object(T.u)(h,r.econf),(P={type:b,state:r.getGroupApplyState(P),createTime:k.create_time,updateTime:k.update_time,wording:k.wording||"",seq:c?w:k.base_info.update_time,groupInfo:c?d:{groupID:U,groupName:Object(T.g)(k.base_info.user_name),groupAvatarUrl:Object(T.g)(k.base_info.avatar)},applyUser:z,operatedUser:b==_.c.GroupApplicationType.Join&&k.op_user?x(x({},Object(T.u)(k.op_user.user_id,r.econf)),{memberRole:k.op_user.role,memberNickname:k.op_user.group_nick_name}):void 0}).operatedUser&&!P.operatedUser.userName&&k.op_user&&(P.operatedUser.userName=Object(T.g)(k.op_user.user_name)),P.state==_.c.GroupApplicationState.Waiting&&l<y-P.createTime&&(P.state=_.c.GroupApplicationState.Expired),r.dbGroupApplyMap.set(r.getApplyID(b,U,z.userID),P))}),S.nextFlag&&r.econf.token?r.fetchSvrGroupApply(c,S.nextFlag,++R,u).then(D):(r.updateGroupApplySeq(c,S.cur,!0),r.dbMgr.addGroupApplyList(Array.from(r.dbGroupApplyMap.values())),r.lg.i(A,"mergeSvrGpApp",o),s&&s())});this.fetchSvrGroupApply(c,i,R,u).then(D)},f.prototype.updateGroupApplySeq=function(c,u,s){c?(c=this.econf.dbGroupMap.get(c))&&u&&(s||!c.groupAppSeq||c.groupAppSeq+1==u)&&(c.groupAppSeq=u,this.dbMgr.addGroupList([c])):u&&this.dbMgr.updateUserSeq(u,_.z.gpApp)},f.prototype.createNoRoomError=function(c,u){var s;if(!this.findRoom(c))return s=Object(T.y)(6000321),this.lg.w(_.v.Room,u,{error:s,roomID:c}),s},f.prototype.getApplyID=function(c,u,s){return c+"_"+u+"_"+s},f.prototype.getGroupApplyState=function(c){return c==1||c==2?_.c.GroupApplicationState.Waiting:c==3||c==5?_.c.GroupApplicationState.Accepted:c==4||c==6?_.c.GroupApplicationState.Rejected:_.c.GroupApplicationState.Disabled},f.prototype.checkGroupApplyCreateTime=function(c){var u=this.getApplyID(c.type,c.groupInfo.groupID,c.applyUser.userID),s=this.dbGroupApplyMap.get(u);return this.dbGroupApplyMap.set(u,c),s&&(c.wording=c.wording||s.wording,!s.createTime||c.createTime&&s.state!=_.c.GroupApplicationState.Accepted&&s.state!=_.c.GroupApplicationState.Rejected||(c.createTime=s.createTime)),!!s},f.prototype.syncGroupApplyMap=function(c,u){u=!!u&&this.checkGroupApplyCreateTime(u);var s=Array.from(this.dbGroupApplyMap.values()).filter(function(i){return i.groupInfo.groupID==c}),r=s[0];return s.forEach(function(i){i.seq>r.seq&&(r=i)}),s.forEach(function(i){i.seq=r.seq,i.groupInfo=r.groupInfo}),this.dbMgr.addGroupApplyList(s),u},f.prototype.syncToConv=function(c){var u=this.econf.user.userID+_.c.ConversationType.Group+c.groupID;(u=this.econf.dbConvMap.get(u))&&(u.conversationName=c.groupName,u.conversationAvatarUrl=c.groupAvatarUrl,u.historyMsgSeq=c.historyMsgSeq)},f.prototype.syncDisabledConv=function(c,u){return c=this.econf.user.userID+_.c.ConversationType.Group+c,(c=this.econf.dbConvMap.get(c))&&(c.state!=_.j.Delete&&(c.state=_.j.Disable),c.isDisabled=!0,u)&&(c.historyMsgSeq=u),c},f);function f(c,u,s,r){this.lg=O.a.getInstance().lg,this.st=O.a.getInstance().st,this.groupLogined=!1,this.groupApplyLogined=!1,this.querySeqMap={group:0,groupApply:0},this.queryGroupsTasks=[],this.queryGroupApplysTasks=[],this.econf=c,this.bus=u,this.cnMgr=s,this.dbMgr=r,this.roomIDs=new Set,this.roomMap=new Map,this.groupMap=new Map,this.groupDelMap=new Map,this.dbGroupApplyMap=new Map,this.registerInnerEvent()}},function(te,j,C){C.d(j,"a",function(){return A});var O=C(2),T=C(1),_=C(0),E=function(){return(E=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var r in c=arguments[u])Object.prototype.hasOwnProperty.call(c,r)&&(f[r]=c[r]);return f}).apply(this,arguments)},g=(j=function(f,c,u,s){var r,i=arguments.length,a=i<3?c:s===null?s=Object.getOwnPropertyDescriptor(c,u):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(f,c,u,s);else for(var o=f.length-1;0<=o;o--)(r=f[o])&&(a=(i<3?r(a):3<i?r(c,u,a):r(c,u))||a);return 3<i&&a&&Object.defineProperty(c,u,a),a},_.v.Room),x="mergeUser",A=(m.prototype.destroy=function(f){this.stopHB(),this.reset(),f&&this.state!==_.c.RoomState.Disconnected&&this.emitState(_.c.RoomState.Disconnected,_.c.RoomEvent.Success),this.dbMgr=null,this.cnMgr=null,this.bus=null,this.econf=null},m.prototype.create=function(f,c,u,s,r){var i=this;if(this.state===_.c.RoomState.Connected&&f==_.y.Join&&!u)return R={roomID:this.groupID,roomName:this.groupName,state:this.state},this.lg.i(g,_.u.JoinRoom,R),Promise.resolve({roomInfo:{baseInfo:{roomID:this.groupID,roomName:this.groupName}}});var a={time:new Date,roomID:this.groupID,roomName:c,state:this.state,config:r},o=(this.state==_.c.RoomState.Disconnected&&(R=_.c.RoomEvent.ActiveEnter,f==_.y.Create?R=_.c.RoomEvent.ActiveCreate:f==_.y.Switch&&(R=_.c.RoomEvent.ActiveSwitch),this.emitState(_.c.RoomState.Connecting,R)),f==_.y.Join&&u===!0),l=_.d.rm_enter,h=f==_.y.Join?_.u.JoinRoom:_.u.EnterRoom;switch(f){case _.y.Create:l=_.d.rm_create,h=_.u.CreateRoom;break;case _.y.Switch:l=_.d.rm_switch,h=_.u.SwitchRoom}var R={room_id:this.groupID,room_name:Object(T.j)(c||this.groupName),room_user_session_id:this.userSessionID||0,create_if_not_exist:f==_.y.Enter||f==_.y.Switch&&u,sub_room_id:this.subRoomID,last_room:f==_.y.Switch?s:void 0,sdk_action:f};return this.addAttr(R,r),u=this.econf.cloudSetting.req_to.room_life,this.cnMgr.send(l,R,o?_.g.S:_.g.A,u).then(function(w){a.state_=i.state;var d,D=f==_.y.Create?6000303:6000304,S=w.code;return S?(d=S==103032||S==103035||S==103015,S===6000105||d?i.cnMgr.send(_.d.rm_check,{room_id:i.groupID}).then(function(y){var k=y.code;return k?(a.error=Object(T.y)(D,y.message,k),f==_.y.Create&&d&&(a.error.code=6000323),i.handleEnterError(f,k),o||i.lg.w(g,h,a),Promise.reject(a.error)):(f==_.y.Create&&(i.localSeq=1),i.groupName=Object(T.g)(y.room_name),i.handleEnterRsp(f,y,o,r),f==_.y.Create&&d?(a.error=Object(T.y)(0,w.message,S),a.error.code=6000323,i.lg.w(g,h,a),Promise.reject(a.error)):(a.roomName=i.groupName,o||i.lg.i(g,h,a),{roomInfo:{baseInfo:{roomID:i.groupID,roomName:i.groupName}}}))}):(a.error=Object(T.y)(D,w.message,S),i.handleEnterError(f,S),o||i.lg.w(g,h,a),Promise.reject(a.error))):(f==_.y.Create&&(i.localSeq=1),i.groupName=c||Object(T.g)(w.room_name),i.handleEnterRsp(f,w,o,r),a.roomName=i.groupName,o||i.lg.i(g,h,a),{roomInfo:{baseInfo:{roomID:i.groupID,roomName:i.groupName}}})})},m.prototype.quit=function(){var f,c=this,u={time:new Date,roomID:this.groupID,state:this.state};return this.state===_.c.RoomState.Disconnected?(this.lg.i(g,_.u.LeaveRoom,u),this.destroy(!1),Promise.resolve()):(f={room_id:this.groupID,room_session_id:this.sessionID,room_user_session_id:this.userSessionID,sub_room_id:this.subRoomID},this.cnMgr.send(_.d.rm_quit,f).then(function(s){if(u.state_=c.state,s.code)return u.error=Object(T.y)(6000306,s.message,s.code),c.lg.w(g,_.u.LeaveRoom,u),Promise.reject(u.error);c.emitState(_.c.RoomState.Disconnected,_.c.RoomEvent.Success),c.lg.i(g,_.u.LeaveRoom,u),c.destroy(!1)}))},m.prototype.queryPageMember=function(f){var c=this,u=E({time:new Date,roomID:this.groupID},f);return this.fetchPageUser(Math.min(100,0|f.count),f.nextFlag,_.g.A).then(function(s){c.lg.i(g,_.u.QueryRoomMemberList,u);var r=s.users.map(function(i){return c.createUser(i)});return{roomID:c.groupID,memberList:r,nextFlag:s.pos_flag}})},m.prototype.queryMembers=function(f){var c=this,u={time:new Date,roomID:this.groupID,userIDs:f},s=[];return f=f.filter(function(r){return!!Object(T.n)(r)||(s.push({userID:r,reason:6000001}),!1)}),f=Array.from(new Set(f)),f={room_id:this.groupID,room_session_id:this.sessionID,room_user_session_id:this.userSessionID,sub_room_id:this.subRoomID,user_ids:f},this.cnMgr.send(_.d.rm_userinfos,f).then(function(r){if(r.code)return u.error=Object(T.y)(6000310,r.message,r.code),c.lg.w(g,_.u.QueryRoomMembers,u),Promise.reject(u.error);r.err_list.forEach(function(o){return s.push({userID:o.user_id,reason:o.sub_code})});var i=[],a=r.result.map(function(o){return o.avatar||c.econf.dbUserMap.get(o.user_id)||i.push(o.user_id),c.createUser(o)});return i.length?c.cnMgr.fetchSvrUsers(i,"roomUser").then(function(){return a.forEach(function(o){var l=c.econf.dbUserMap.get(o.userID);l&&(o.userAvatarUrl=l.userAvatarUrl)}),c.lg.i(g,_.u.QueryRoomMembers,u),{roomID:c.groupID,memberList:a,errorUserList:s}}):(c.lg.i(g,_.u.QueryRoomMembers,u),{roomID:c.groupID,memberList:a,errorUserList:s})})},m.prototype.queryMemberCount=function(){var f={roomID:this.groupID,count:this.totalMemberCount};return this.lg.i(g,_.u.QueryRoomMemberCount,f),Promise.resolve(f)},m.prototype.queryAllAttr=function(f){var c=this,u=(f===void 0&&(f=!1),{time:new Date,roomID:this.groupID}),s=(this.queryAttrFlag=!0,new Date().getTime()),r=0,i=(this.queryAttrTask.length&&(i=this.queryAttrTask[this.queryAttrTask.length-1],s-i<this.mergeConfig.attrPullInterval)&&(r=this.mergeConfig.attrPullInterval-(s-i)+10),this.queryAttrTask.push(s),{room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID,attributes:{attribute_seq:this.stRoomAttributes.attribute_seq||0,attributes:[]}}),a=this.cnMgr.send(_.d.rm_attr,i).then(function(o){return o.code?(u.error=Object(T.y)(6000333,o.message,o.code),c.lg.w(g,_.u.QueryRoomAllAttr,u),Promise.reject(u.error)):(c.queryAttrTask=c.queryAttrTask.filter(function(l){return l!==s}),c.queryAllAttrRsp(o,f))});return r?new Promise(function(o){setTimeout(function(){c.cnMgr&&a.then(o)},r)}):a},m.prototype.setAttr=function(f,c){var u=this;if(this.batchFlag)return new Promise(function(o,l){return u.batchAttr(o,l,f)});var s,r,i=[];for(s in f)s&&(r={action:0,attribute:{key:s,value:f[s].toString(),seq:++this.attrItemSeq,auto_delete:c.isDeleteAfterOwnerLeft?1:0}},this.localAttrKeySeqMap[s]=r.attribute.seq,i.push(r));var a={room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID,force_modify:c.isForce?1:0,set_member:c.isUpdateOwner?1:0,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:0,attributes:i};return this.mdfAttr(f,a)},m.prototype.delAttr=function(f,c){var u,s=this;return this.batchFlag?new Promise(function(r,i){return s.batchAttr(r,i,f)}):(u=[],f.forEach(function(r){var i=s.stRoomAttributes.attributes.find(function(a){return a.key==r});i={action:1,attribute:{key:r,value:(i==null?void 0:i.value)||"",seq:++s.attrItemSeq,auto_delete:1}},s.localAttrKeySeqMap[r]=i.attribute.seq,u.push(i)}),c={room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID,force_modify:c.isForce?1:0,set_member:1,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:0,attributes:u},this.mdfAttr({},c))},m.prototype.beginAttr=function(f){this.batchFlag=!0,this.batchOperationConfig=f,this.batchRoomAttributes.length=0},m.prototype.endAttr=function(){var f,c,u,s=this,r=(this.batchFlag=!1,{time:new Date,roomID:this.groupID});return this.batchRoomAttributes.length?(f=[],c={},this.batchRoomAttributes.forEach(function(i){var a={action:i.action,attribute:{key:i.key,value:i.value.toString(),seq:++s.attrItemSeq,auto_delete:s.batchOperationConfig.isDeleteAfterOwnerLeft?1:0}};i.action||(c[i.key]=i.value),s.localAttrKeySeqMap[a.attribute.key]=a.attribute.seq,f.push(a)}),u={room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID,force_modify:this.batchOperationConfig.isForce?1:0,set_member:this.batchOperationConfig.isUpdateOwner?1:0,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:1,attributes:f},this.mdfAttr(c,u,!0).then(function(){return s.batchOperationConfig=null,s.batchRoomAttributes.length=0,s.batchAttributesMap.clear(),s.batchIndex=0,s.lg.i(g,_.u.EndRoomAttr,r),{roomID:s.groupID}})):(r.error=Object(T.y)(6000331),this.lg.w(g,_.u.EndRoomAttr,r),Promise.reject(r.error))},m.prototype.setMembersAttr=function(f,c,u){var s,r=this,i={roomID:this.groupID,attributes:f,userIDs:c,config:u},a=[],o=(c=c.filter(function(h){return!!Object(T.n)(h)||(a.push(h),!1)}),c=Array.from(new Set(c)),{room_id:this.groupID,room_session_id:this.sessionID,room_user_session_id:this.userSessionID,sub_room_id:this.subRoomID,force_modify:1,auto_save:u.isDeleteAfterOwnerLeft==null||u.isDeleteAfterOwnerLeft?0:1,op_fail_fast:0,attributes:{user_ids:c,modify_attribute:[]}});for(s in f){this.userAttrSeq++;var l={action:0,attribute:{key:s,value:f[s],seq:this.userAttrSeq}};o.attributes.modify_attribute.push(l)}return this.cnMgr.send(_.d.rm_user_attr_mdf,o).then(function(h){var R,w;return h.code?(i.error=Object(T.y)(6000350,h.message,h.code),r.lg.w(g,_.u.SetRoomMembersAttr,i),Promise.reject(i.error)):(R=(w=function(d,D){var S=typeof Symbol=="function"&&d[Symbol.iterator];if(!S)return d;var y,k,b=S.call(d),U=[];try{for(;(D===void 0||0<D--)&&!(y=b.next()).done;)U.push(y.value)}catch(z){k={error:z}}finally{try{y&&!y.done&&(S=b.return)&&S.call(b)}finally{if(k)throw k.error}}return U}(r.mergeSvrUserAttr(h,f),2))[0],w=w[1],h.user_err_list.forEach(function(d){return a.push(d.user_id)}),h.user_err_list.length&&!w.length?(h=Object(T.y)(6000350,h.message,h.code),Promise.reject(h)):(r.bus.emit(_.m.RoomMemberAttr,{roomID:r.groupID,infos:R,operatedInfo:{userID:r.econf.user.userID}}),i.setInfos=w,r.lg.i(g,_.u.SetRoomMembersAttr,i),{roomID:r.groupID,infos:w,errorUserList:a}))})},m.prototype.queryMembersAttr=function(f){var c=this,u={roomID:this.groupID,userIDs:f},s={room_id:this.groupID,room_session_id:this.sessionID,room_user_session_id:this.userSessionID,sub_room_id:this.subRoomID,req_attributes:[]};return f.forEach(function(r){var i=c.userAttributeMap.get(r);r={user_id:r,user_attributes_seq:i?i.seq:0},s.req_attributes.push(r)}),this.cnMgr.send(_.d.rm_user_attr,s).then(function(r){return r.code?(u.error=Object(T.y)(6000301,r.message,r.code),c.lg.w(g,_.u.QueryRoomMembersAttr,u),Promise.reject(u.error)):(r=c.mergeSvrUserAttr(r)[0].map(function(i){return i.attributesInfo}),u.infos=r,c.lg.i(g,_.u.QueryRoomMembersAttr,u),{roomID:c.groupID,infos:r})})},m.prototype.queryMemberAttrs=function(f){var c=this,u={roomID:this.groupID,config:f};return f={room_id:this.groupID,room_session_id:this.sessionID,room_user_session_id:this.userSessionID,sub_room_id:this.subRoomID,pos_flag:f.nextFlag||"",count:f.count},this.cnMgr.send(_.d.rm_user_attr_list,f).then(function(s){var r;return s.code?(u.error=Object(T.y)(6000301,s.message,s.code),c.lg.w(g,_.u.QueryRoomMemberAttrs,u),Promise.reject(u.error)):(r=c.mergeSvrUserAttr(s)[0].map(function(i){return i.attributesInfo}),u.infos=r,c.lg.i(g,_.u.QueryRoomMemberAttrs,u),{roomID:c.groupID,infos:r,nextFlag:s.pos_flag})})},m.prototype.onDisConnected=function(f){f?(this.stopHB(),this.emitState(_.c.RoomState.Disconnected,_.c.RoomEvent.NetworkDisconnected)):this.emitState(_.c.RoomState.Connecting,_.c.RoomEvent.NetworkInterrupted)},m.prototype.onPushKickout=function(f){var c=[0,_.c.RoomEvent.KickedOut,_.c.RoomEvent.RoomNotExist,_.c.RoomEvent.KickedOutByOtherDevice];return this.emitState(_.c.RoomState.Disconnected,c[f.reason]||0,JSON.stringify(f)),this.destroy(!1),f.reason==2},m.prototype.onPushEnter=function(f,c){this.totalMemberCount=f.user_count;var u=this.createUser(f);this.isMergeUser?this.waitingMergeUser(f.userlist_seq,u,c?"enter":"quit"):(c=c?_.m.RoomMemberJoined:_.m.RoomMemberLeft,this.bus.emit(c,{roomID:f.room_id,memberList:[u]}))},m.prototype.onPushAttrMdf=function(f){var c,u,s,r=this,i=(this.lg.i(g,"onPushAttr",this.stRoomAttributes),f.attributes),a=f.attributes_seq;this.queryAttrFlag?this.batchPushQueue.push(f):(c=((f=this.stRoomAttributes)==null?void 0:f.attribute_seq)||0,a&&(u={delete:{},set:{}},1<a-c?this.queryAllAttr(!0):(i.forEach(function(o){var l;c++,o.seq?((l=r.stRoomAttributes.attributes.find(function(h){return h.key==o.key}))?(l.value=o.value,l.seq=o.seq):r.stRoomAttributes.attributes.push(o),u.set[o.key]=o.value):r.stRoomAttributes.attributes.length&&(r.stRoomAttributes.attributes.find(function(h){return h.key==o.key})&&(u.delete[o.key]=""),r.stRoomAttributes.attributes=r.stRoomAttributes.attributes.filter(function(h){return h.key!==o.key}))}),this.stRoomAttributes.attribute_seq=a,f=[],Object.keys(u.set).length&&(s={action:_.c.RoomAttributesUpdateAction.Set,roomAttributes:u.set},f.push(s)),Object.keys(u.delete).length&&(s={action:_.c.RoomAttributesUpdateAction.Delete,roomAttributes:u.delete},f.push(s)),i.length&&(a=1<f.length?_.m.RoomAttrBatch:_.m.RoomAttr,this.bus.emit(a,{roomID:this.groupID,infos:f})))))},m.prototype.onPushUserAttrMdf=function(f){f.user_attributes=f.push_attributes,this.bus.emit(_.m.RoomMemberAttr,{roomID:this.groupID,infos:this.mergeSvrUserAttr(f)[0],operatedInfo:{userID:f.user_id}})},m.prototype.createFrequencyLimitError=function(f){var c=Object(T.y)(6000004),u={roomID:this.groupID,error:c};return this.lg.w(g,f,u),c},m.prototype.mdfAttr=function(f,c,u){var s=this;return u===void 0&&(u=!1),this.cnMgr.send(_.d.rm_attr_mdf,c).then(function(r){function i(d){u&&(s.batchAttributesMap.forEach(function(S){S.reject&&S.reject(d)}),s.batchOperationConfig=null,s.batchRoomAttributes.length=0,s.batchAttributesMap.clear(),s.batchIndex=0);var D={error:d,local:s.stRoomAttributes};return s.lg.w(g,"mdfAttr",D),Promise.reject(d)}var a,o,l,h,R,w;return r.code?i(Object(T.y)(6000331,r.message,r.code)):r.err_list.length&&r.err_list.length==c.attributes.length?i(Object(T.y)(6000331)):(a=r.attributes.attributes,u&&(o=[],a.forEach(function(d){var D=o.findIndex(function(S){return S.key==d.key});d.seq?(D!=-1&&o.splice(D,1),o.push(d)):D!=-1?o.splice(D,1):o.push(d)}),a=o),s.stRoomAttributes.attribute_seq=r.attributes.attribute_seq,l={delete:{},set:{}},a.forEach(function(d){d=E({},d);var D=s.stRoomAttributes.attributes.findIndex(function(y){return y.key==d.key}),S=s.stRoomAttributes.attributes[D];S?d.seq?(S.value=f[S.key].toString(),S.seq=d.seq,l.delete[S.key]!==void 0&&delete l.delete[S.key],l.set[S.key]=S.value):(s.stRoomAttributes.attributes.splice(D,1),l.delete[S.key]=""):d.seq&&(d.value=f[d.key].toString(),s.stRoomAttributes.attributes.push(d),l.delete[d.key]!==void 0&&delete l.delete[d.key],l.set[d.key]=d.value)}),h=[],Object.keys(l.set).length&&(w={action:_.c.RoomAttributesUpdateAction.Set,roomAttributes:l.set},h.push(w)),Object.keys(l.delete).length&&(w={action:_.c.RoomAttributesUpdateAction.Delete,roomAttributes:l.delete},h.push(w)),s.lg.i(g,"operaAttr",{local:s.stRoomAttributes,map:l,attrs:a}),R=r.err_list.map(function(d){return d.key}),u&&s.batchAttributesMap.forEach(function(d){var D,S,y,k,b,U;R.length?(D=R[0],y=!1,S={},!Array.isArray(d.data)&&D in d.data&&!a.some(function(z){return z.value==d.data[D]})||Array.isArray(d.data)&&d.data.indexOf(D)!=-1?(y=!0,k=[],d.action==_.c.RoomAttributesUpdateAction.Delete&&(b=d.data.findIndex(function(z){return z==D}))!==-1&&(k=d.data.slice(b)),d.action==_.c.RoomAttributesUpdateAction.Set&&(k=Object.keys(d.data)),d.resolve&&d.resolve({roomID:s.groupID,errorKeys:k}),S={attributeList:a,data:d.data}):y?(d.action==_.c.RoomAttributesUpdateAction.Delete&&(U=d.data.slice()),d.action==_.c.RoomAttributesUpdateAction.Set&&(U=Object.keys(d.data)),d.resolve&&d.resolve({roomID:s.groupID,errorKeys:U})):(S.error=!1,d.resolve&&d.resolve({roomID:s.groupID,errorKeys:R})),s.lg.i(g,"operaAttr",S)):d.resolve&&d.resolve({roomID:s.groupID,errorKeys:[]})}),a.length&&(w=u?_.m.RoomAttrBatch:_.m.RoomAttr,s.bus.emit(w,{roomID:s.groupID,infos:h})),{roomID:s.groupID,errorKeys:R})})},m.prototype.mergeSvrUserAttr=function(f,c){var u=this,s=[],r=[];return f.user_attributes.forEach(function(i){var a=i.user_id,o=i.attributes,l=i.err_list,h={},R=u.userAttributeMap.get(a)||{seq:0,attribute:[]};if(i.user_attributes_seq>R.seq)R.seq=i.user_attributes_seq,o.forEach(function(S){var y=R.attribute.find(function(k){return k.key==S.key});y?(y.value=S.value,h[S.key]=S.value):(R.attribute.push(E(E({},S),{value:S.value||""})),h[S.key]=S.value||"")});else if(c)for(w in c)(S=>{var y=c[S],k=R.attribute.find(function(b){return b.key==S});k?k.value=y:R.attribute.push({key:S,value:y}),h[S]=y})(w);else R.attribute.forEach(function(S){h[S.key]=S.value});if(u.userAttributeMap.set(a,R),(o.length||i.user_attributes_seq)&&s.push({attributesInfo:{userID:a,attributes:h}}),c){var w,d=l.map(function(S){return S.key}),D={};for(w in c)d.indexOf(w)==-1&&(D[w]=h[w]);r.push({errorKeys:d,attributesInfo:{userID:a,attributes:D}})}}),[s,r]},m.prototype.queryAllAttrRsp=function(f,c){var u={isSeqUpdate:c=c!==void 0&&c,local:this.stRoomAttributes,batchPushQueue:this.batchPushQueue};if(this.lg.i(g,_.u.QueryRoomAllAttr,u),this.queryAttrFlag=!1,this.batchPushQueue.length)try{this.mergeStAttr(f.attributes)}catch(a){u={error:!0,stack:(a==null?void 0:a.message)||(a==null?void 0:a.stack),action:"catch mergeStAttr"},this.lg.i(g,_.u.QueryRoomAllAttr,u)}else{var s,r,i={delete:{},set:{}};u=(this.stRoomAttributes.attribute_seq=f.attributes.attribute_seq,f.attributes.attributes.length?((s=this.stRoomAttributes.attributes).map(function(a){a.seq=0}),f.attributes.attributes.forEach(function(a){var o=s.findIndex(function(l){return l.key==a.key});o!==-1?a.seq&&(s[o].seq=a.seq,s[o].value!==a.value)&&(i.set[a.key]=a.value,s[o].value=a.value):a.key&&(i.set[a.key]=a.value,s.push(E(E({},a),{value:a.value})))}),this.stRoomAttributes.attributes=s.filter(function(a){return a.seq==0&&(i.delete[a.key]=""),a.seq!==0})):(this.stRoomAttributes.attributes.forEach(function(a){i.delete[a.key]=""}),this.stRoomAttributes.attributes=[]),[]),f=(Object.keys(i.set).length&&(r={action:_.c.RoomAttributesUpdateAction.Set,roomAttributes:i.set},u.push(r)),Object.keys(i.delete).length&&(r={action:_.c.RoomAttributesUpdateAction.Delete,roomAttributes:i.delete},u.push(r)),{isSeqUpdate:c,local:this.stRoomAttributes,infoList:u}),this.lg.i(g,_.u.QueryRoomAllAttr,f),c&&u.length&&(this.lg.i(g,"attrUpdated",i),r=1<u.length?_.m.RoomAttrBatch:_.m.RoomAttr,this.bus.emit(r,{roomID:this.groupID,infos:u}))}return{roomID:this.groupID,roomAttributes:this.getRecordFromStRoomAttributes()}},m.prototype.addAttr=function(f,c){if(c&&Object.prototype.toString.call(c.roomAttributes)=="[object Object]"){var u,s,r=[];for(u in c.roomAttributes)u&&(s={key:u,value:c.roomAttributes[u].toString(),seq:++this.attrItemSeq,auto_delete:1},r.push(s),this.localAttrKeySeqMap[u]=s.seq);r.length&&(f.attributes=r)}c&&c.roomDestroyDelayTime&&(f.destroy_delay=+c.roomDestroyDelayTime)},m.prototype.batchAttr=function(f,c,u){var s=this;if(this.batchRoomAttributes||(this.batchRoomAttributes=[]),Array.isArray(u)){var r=_.c.RoomAttributesUpdateAction.Delete;this.batchAttributesMap.set(++this.batchIndex,{action:r,data:u,resolve:f,reject:c}),u.forEach(function(o){return s.batchRoomAttributes.push({action:r,key:o,value:""})})}else{var i,a=_.c.RoomAttributesUpdateAction.Set;for(i in this.batchAttributesMap.set(++this.batchIndex,{action:a,data:u,resolve:f,reject:c}),u)this.batchRoomAttributes.push({action:a,key:i,value:u[i]})}this.lg.i(g,"bmdfAttr",{param:u,batch:JSON.stringify(this.batchRoomAttributes)})},m.prototype.mergeStAttr=function(f){this.batchPushQueue.sort(function(h,R){return h.attribute_seq-R.attribute_seq});var c=this.batchPushQueue.findIndex(function(h){return h.attribute_seq>=f.attribute_seq}),u=(this.batchPushQueue=this.batchPushQueue.slice(c),this.batchPushQueue.unshift(f),this.batchPushQueue[this.batchPushQueue.length-1].attribute_seq),s={delete:{},set:{}},r=this.stRoomAttributes.attributes;for(r.map(function(h){h.seq=0}),c={localAttributes:r,batchPushQueue:this.batchPushQueue},this.lg.i(g,"mergeAttr",c);this.batchPushQueue.length;){var i=(a=this.batchPushQueue.shift()).attributes,a=a.attribute_seq;u&&a&&a<u||i.forEach(function(h){var R;h&&(R=r.find(function(w){return w.key==h.key}),r.findIndex(function(w){return w.key==h.key})!==-1?h.seq&&(R.seq=h.seq,R.value!==h.value)&&(s.set[R==null?void 0:R.key]=h.value,R.value=h.value):h.key&&h.seq&&(s.set[h.key]=h.value,r.push(E(E({},h),{value:h.value}))))})}var o,l=[];this.stRoomAttributes.attributes=r.filter(function(h){return h.seq==0&&(s.delete[h.key]=""),h.seq!==0}),Object.keys(s.set).length&&(o={action:_.c.RoomAttributesUpdateAction.Set,roomAttributes:s.set},l.push(o)),Object.keys(s.delete).length&&(o={action:_.c.RoomAttributesUpdateAction.Delete,roomAttributes:s.delete},l.push(o)),c={local:this.stRoomAttributes,infoList:l},this.lg.i(g,"mergeAttr",c),l.length&&this.bus.emit(_.m.RoomAttr,{roomID:this.groupID,infos:l}),this.stRoomAttributes.attribute_seq=u},m.prototype.getRecordFromStRoomAttributes=function(){var f;return this.stRoomAttributes.attributes.length?(f={},this.stRoomAttributes.attributes.forEach(function(c){f[c.key]=c.value}),f):{}},m.prototype.checkRoomAttributesUpdateByHb=function(f){var c=this;this.stRoomAttributes&&f.attribute_seq>this.stRoomAttributes.attribute_seq+1&&(this.attrTimer=setTimeout(function(){c.lg&&c.queryAllAttr()},this.mergeConfig.attrMergeTimeout))},m.prototype.fetchPageUser=function(f,c,u){var s=this;return f={room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID,count:f,pos_flag:c,expect_seq:this.localSeq},this.cnMgr.send(_.d.rm_userlist,f,u).then(function(r){if(r.code)return r.users=[],r;s.totalMemberCount=r.user_count,s.localSeq=r.userlist_seq;var i=[];return r.users.forEach(function(a){a.avatar||s.econf.dbUserMap.get(a.user_id)||i.push(a.user_id)}),i.length?s.cnMgr.fetchSvrUsers(i,"roomPageUser").then(function(){return r.users.forEach(function(a){var o=s.econf.dbUserMap.get(a.user_id);o&&(a.avatar=o.userAvatarUrl)}),r}):r})},m.prototype.emitState=function(f,c,u){this.state=f,this.bus.emit(_.m.RoomState,{roomID:this.groupID,state:f,event:c,extendedData:u||""})},m.prototype.handleEnterError=function(f,c){var u=this.state==_.c.RoomState.Connected&&c==103032?_.c.RoomState.Connected:_.c.RoomState.Disconnected,s=_.c.RoomEvent.EnterFailed;c===6000105?s=_.c.RoomEvent.NetworkDisconnected:f==_.y.Create?s=_.c.RoomEvent.CreateFailed:f==_.y.Switch&&(s=_.c.RoomEvent.SwitchFailed),this.emitState(u,u==_.c.RoomState.Connected?_.c.RoomEvent.ActiveCreate:s),c==51011&&(this.stopHB(),this.reset())},m.prototype.handleEnterRsp=function(f,c,u,s){this.subRoomID=c.sub_room_id,this.sessionID=c.room_session_id,this.userSessionID=c.room_user_session_id,this.enabledOfflineMsg=!!c.enabled_offline_msg,this.emitState(_.c.RoomState.Connected,_.c.RoomEvent.Success);var r=c.conv_msg_seq;this.bus.exec(_.m.IConnectedRoom,this.groupID,{msgSeq:r,fetchMsg:this.enabledOfflineMsg&&!!r&&u}),this.totalMemberCount=c.user_count||1,this.startHB(c.room_info_interval),this.mergeConfig.listPullInterval=c.userlist_interval,this.mergeConfig.listMergeTimeout=c.userlist_merge_timeout,this.mergeConfig.attrPullInterval=c.attributes_pull_interval,this.mergeConfig.attrMergeTimeout=c.attributes_merge_timeout,this.isMergeUser=c.userlist_enable==1,this.destroyDelay=c.destroy_delay||0,this.isMergeUser&&(f==_.y.Create?(r={userID:this.econf.user.userID,userName:this.econf.user.userName,userAvatarUrl:this.econf.user.userAvatarUrl},this.userMap.set(r.userID,r),this.bus.emit(_.m.RoomMemberJoined,{roomID:this.groupID,memberList:[E({},r)]})):c.userlist_seq!=this.localSeq&&this.fetchAllUser()),this.emitAttr(c.attributes,s)},m.prototype.emitAttr=function(f,c){var u;f!=null&&f.attributes&&c!=null&&c.roomAttributes&&(u=c.roomAttributes,f.attributes.forEach(function(s){s.seq&&(s.value=u[s.key])})),this.stRoomAttributes=f||{attributes:[]},this.stRoomAttributes.attributes.length&&(c={action:_.c.RoomAttributesUpdateAction.Set,roomAttributes:this.getRecordFromStRoomAttributes()},this.bus.emit(_.m.RoomAttr,{roomID:this.groupID,infos:[c]}))},m.prototype.hbCallback=function(f){var c,u=this;this.lg&&(c={room_id:this.groupID,room_session_id:this.sessionID,sub_room_id:this.subRoomID},this.cnMgr.sendHB(_.d.rm_info,c).then(function(s){if(Object(_.A)(s.code))return u.stopHB();if(s.code){if(s.code==6000105&&u.hbTimeoutCount++,s.timeoutCount=u.hbTimeoutCount,u.hbTimeoutCount>=_.h.hbTimeoutMaxCount)u.stopHB(),u.emitState(_.c.RoomState.Connecting,_.c.RoomEvent.NetworkInterrupted);else if(s.code==1||_.h.needReloginCodeList.indexOf(s.code)!=-1){u.stopHB();var r=_.c.RoomEvent.NetworkDisconnected;switch(s.code){case 103015:r=_.c.RoomEvent.ConnectTimeout;break;case 103021:r=_.c.RoomEvent.RoomNotExist}u.emitState(_.c.RoomState.Disconnected,r)}s.state=u.state}else{u.hbTimeoutCount=0,u.totalMemberCount=s.user_count,u.subRoomID=s.sub_room_id;var i=s.max_conv_msg_seq;u.bus.exec(_.m.IConnectedRoom,u.groupID,{msgSeq:i,fetchMsg:u.enabledOfflineMsg&&!!i,stateSeq:s.statemsg_seq||0,fetchState:f}),s.ulist_to&&(u.mergeConfig.listMergeTimeout=s.ulist_to),s.ulist_itvl&&(u.mergeConfig.listPullInterval=s.ulist_itvl),u.checkRoomAttributesUpdateByHb(s),u.lg.hbLog.push({id:u.groupID,time:new Date().toLocaleTimeString("zh-CN"),seq:i,st:s.statemsg_seq})}}))},m.prototype.startHB=function(f){!f||f<0||(this.hbCallback(!0),this.stopHB(),this.hbTimer=setInterval(this.hbCallback.bind(this),f))},m.prototype.stopHB=function(){this.hbTimer&&clearInterval(this.hbTimer),this.hbTimeoutCount=0,this.hbTimer=0},m.prototype.reset=function(){this.localSeq=0,this.sessionID=0,this.attrItemSeq=0,this.isMergeUser=!1,this.totalMemberCount=0,this.userMap.clear()},m.prototype.createUser=function(f){return{userID:f.user_id,userName:Object(T.g)(f.user_name),userAvatarUrl:f.avatar?Object(T.g)(f.avatar):((f=this.econf.dbUserMap.get(f.user_id))==null?void 0:f.userAvatarUrl)||""}},m.prototype.fetchAllUser=function(){var f=this,c={time:new Date,event:"fetchAllUser",roomID:this.groupID,localSeq:this.localSeq,totalMemberCount:this.totalMemberCount},u=[],s=function(a){a.users.forEach(function(o){return u.push(f.createUser(o))}),a.pos_flag&&f.cnMgr?f.fetchPageUser(100,a.pos_flag,_.g.S).then(s):(f.updateUserList(u),c.localSeq_=f.localSeq,c.tatalMemberCount_=f.totalMemberCount,f.lg.i(g,x,c))},r=Date.now(),i=this.lastFetchAllUserTime+this.mergeConfig.listPullInterval;setTimeout(function(){f.lastFetchAllUserTime=r,f.cnMgr&&f.fetchPageUser(100,"",_.g.S).then(s)},r<i?i-r:0)},m.prototype.waitingMergeUser=function(f,c,u){var s,r,i,a=this;f<=this.localSeq?this.lg.i(g,x,{roomID:this.groupID,event:"dropMerge",action:u,seq:f,localSeq:this.localSeq,totalMemberCount:this.totalMemberCount}):f!=this.localSeq+1||this.mergeTimer?(this.mergeSeqList.indexOf(f)==-1&&this.mergeSeqList.push(f),s=c.userID,i=this.mergeUserList.findIndex(function(o){return o.userID==s}),u=="enter"&&i==-1?this.mergeUserList.push(c):u=="quit"&&i!=-1&&this.mergeUserList.splice(i,1),this.mergeTimer||(r={roomID:this.groupID,event:"waitingPush",action:u,seq:f,localSeq:this.localSeq,totalMemberCount:this.totalMemberCount},this.mergeSeqList.indexOf(this.localSeq)==-1&&this.mergeSeqList.push(this.localSeq),this.mergeTimer=setTimeout(function(){var o;a.lg&&(a.mergeSeqList.sort(),o=a.mergeSeqList.length-1,(o=a.mergeSeqList[o]-a.mergeSeqList[0]==o)?a.updateUserList(a.mergeUserList):a.fetchAllUser(),Object.assign(r,{time:a.mergeConfig.listMergeTimeout,localSeq_:a.localSeq,tatalMemberCount_:a.totalMemberCount,continuous:o,mergeSeqList:a.mergeSeqList}),a.lg.i(g,x,r),a.mergeTimer=0,a.mergeSeqList.length=0,a.mergeUserList.length=0)},this.mergeConfig.listMergeTimeout))):(this.localSeq=f,i=this.userMap.has(c.userID),u!="enter"||i?u=="quit"&&i&&(this.userMap.delete(c.userID),this.bus.emit(_.m.RoomMemberLeft,{roomID:this.groupID,memberList:[E({},c)]})):(this.userMap.set(c.userID,c),this.bus.emit(_.m.RoomMemberJoined,{roomID:this.groupID,memberList:[E({},c)]})),c={roomID:this.groupID,event:"continuousMerge",action:u,has:i,seq:f,localSeq:this.localSeq,totalMemberCount:this.totalMemberCount},this.lg.i(g,x,c))},m.prototype.updateUserList=function(f){var c=this,u=f.map(function(i){return i.userID}),s=Array.from(this.userMap.values()),r=(f=f.filter(function(i){var a=!c.userMap.has(i.userID);return a&&c.userMap.set(i.userID,E({},i)),a}),s.filter(function(i){var a=u.indexOf(i.userID)==-1;return a&&c.userMap.delete(i.userID),a}));f.length&&this.bus.emit(_.m.RoomMemberJoined,{roomID:this.groupID,memberList:f}),r.length&&this.bus.emit(_.m.RoomMemberLeft,{roomID:this.groupID,memberList:r}),s={roomID:this.groupID,event:"updateMember",localSeq:this.localSeq,totalMemberCount:this.totalMemberCount,mergeIds:u,beginLocalIds:s.map(function(i){return i.userID}),endLocalIDs:Array.from(this.userMap.keys()),joinedUserIDs:f.map(function(i){return i.userID}),leftUserIDs:r.map(function(i){return i.userID})},this.lg.i(g,x,s)},j([Object(T.o)(_.h.get_user_attribute_qps,_.h.get_user_attribute_interval,_.u.QueryRoomMembersAttr)],m.prototype,"queryMembersAttr",null),j([Object(T.o)(_.h.get_user_attribute_qps,_.h.get_user_attribute_interval,_.u.QueryRoomMemberAttrs)],m.prototype,"queryMemberAttrs",null),m);function m(f,c,u,s,r){this.type=_.c.ConversationType.Room,this.state=_.c.RoomState.Disconnected,this.subRoomID="",this.enabledOfflineMsg=!1,this.destroyDelay=0,this.userMap=new Map,this.userAttributeMap=new Map,this.totalMemberCount=0,this.isMergeUser=!1,this.mergeTimer=0,this.mergeSeqList=[],this.mergeUserList=[],this.mergeConfig={listMergeTimeout:0,listPullInterval:0,attrMergeTimeout:0,attrPullInterval:0},this.lastFetchAllUserTime=0,this.hbTimer=0,this.hbTimeoutCount=0,this.localSeq=0,this.userAttrSeq=0,this.attrItemSeq=0,this.stRoomAttributes={attributes:[],attribute_seq:0},this.localAttrKeySeqMap={},this.batchOperationConfig=null,this.batchRoomAttributes=[],this.batchAttributesMap=new Map,this.batchIndex=0,this.batchFlag=!1,this.batchPushQueue=[],this.queryAttrFlag=!1,this.attrTimer=null,this.queryAttrTask=[],this.lg=O.a.getInstance().lg,this.groupID=f,this.econf=c,this.bus=u,this.dbMgr=s,this.cnMgr=r}},function(te,j,C){C.d(j,"a",function(){return u}),j=C(4);var O=C.n(j),T=C(2),_=C(1),E=C(0),g=function(){return(g=Object.assign||function(r){for(var i,a=1,o=arguments.length;a<o;a++)for(var l in i=arguments[a])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r}).apply(this,arguments)},x=function(r,i){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var o,l,h=a.call(r),R=[];try{for(;(i===void 0||0<i--)&&!(o=h.next()).done;)R.push(o.value)}catch(w){l={error:w}}finally{try{o&&!o.done&&(a=h.return)&&a.call(h)}finally{if(l)throw l.error}}return R},A=function(r,i,a){if(arguments.length===2)for(var o,l=0,h=i.length;l<h;l++)!o&&l in i||((o=o||Array.prototype.slice.call(i,0,l))[l]=i[l]);return r.concat(o||Array.prototype.slice.call(i))},m=E.v.User,f=6000007,c=6000101,u=(Object.defineProperty(s.prototype,"renewTokenTimeout",{get:function(){return 30},enumerable:!1,configurable:!0}),s.prototype.destroy=function(){this.onLogout(),this.cnMgr.saveSessionID(),this.cnMgr=null,this.bus=null,this.lg=null,this.st=null,this.dr=null,this.crypto=null,this.econf=null},s.prototype.onLogout=function(){this.dbMgr.unloadDB(),this.lastLoginExecutor.notSendError=null,this.lastLoginExecutor.seq=0,this.lastLoginExecutor.tasks.length=0,this.cnMgr.stop(),this.stopUserHB(!0),this.stopMailHB(),this.econf.token="",this.updateLocalToken("",0),this.st.unInitEngine(this.econf.handle)},s.prototype.login=function(r,i){var a,o=this,l=i.userName,h=i.token,R=i.isOfflineLogin,w=x(Object(_.l)(h,0),2),d=w[0],D=w[1];if(d||this.lastLoginExecutor.notSendError)return w={error:a=this.lastLoginExecutor.notSendError||Object(_.y)(d),expireTime:new Date(1e3*D).toLocaleString()},this.lg.w(m,E.u.Login,w),Promise.reject(a);if(this.loginState==E.c.ConnectionState.Reconnecting||this.loginState==E.c.ConnectionState.Connecting)return new Promise(function(k,b){var U;o.econf.user.userID==r?(o.lastLoginExecutor.token=h,o.lastLoginExecutor.expireTime=D,U={seq:++o.lastLoginExecutor.seq,time:new Date,action:"apicall",userID:r,expireTime:D},o.lastLoginExecutor.tasks.push({log:U,resolve:k,reject:b})):(k={error:U=Object(_.y)(6000111),userID:r,oldUserID:o.econf.user.userID},o.lg.w(m,E.u.Login,k),b(U))});if(this.loginState==E.c.ConnectionState.Connected)return this.econf.user.userID!==r?(d={error:a=Object(_.y)(6000111),userID:r,oldUserID:this.econf.user.userID},this.lg.w(m,E.u.Login,d),Promise.reject(a)):(this.updateSvrToken(h,D),this.emitConnState(E.c.ConnectionState.Connected,E.c.ConnectionEvent.ActiveLogin),this.lg.i(m,E.u.Login,"logged in"),Promise.resolve());this.econf.user.userID=r,l&&(this.econf.user.userName=l),this.lastLoginExecutor.token=h,this.lastLoginExecutor.expireTime=D,this.dbMgr.setUserID(r),this.lg.init(this.econf.appID+"",r,l),this.initDataReport(h);var S={seq:0,time:new Date,userID:r,userName:l,expireTime:new Date(1e3*D).toLocaleString()},y=(this.loginState=E.c.ConnectionState.Connecting,this.loginConsumeds.length=0,this.hasLogout);return this.hasLogout=!1,R?(this.cnMgr.create(y,!0),this.lastLoginExecutor.push=!1,this.updateLocalToken(h,D),this.startCheckTokenExpireTime(D),this.emitConnState(E.c.ConnectionState.Connected,E.c.ConnectionEvent.Success),this.econf.convSid||(this.econf.convSid=Date.now()+""),this.loadDB(h,!0,!1,S)):new Promise(function(k,b){S.seq=++o.lastLoginExecutor.seq,o.lastLoginExecutor.tasks.push({log:S,resolve:k,reject:b}),o.lastLoginExecutor.customStatus=i.customStatus,o.cnMgr.create(y,!0).then(function(){return o.sendLoginReq(E.g.A,S,!0,!0)}).catch(function(U){throw o.lastLoginExecutor.customStatus="",S.error=U,S.url=o.cnMgr.urls[0],U&&U.code||((U=U||Object(_.y)(c)).code=U.code||c,U.mesaage=U.stack||U.message,o.lg.upload("loginerr"),o.dr.reportSDKEvent("/sdk/log",{error_message:"API.login:"+U.mesaage})),o.loginExecutorTask(U),U})})},s.prototype.logout=function(){var r=this,i=(this.hasLogout=!0,this.st.streamID);return this.lg.i(m,E.u.Logout,{state:this.loginState,streamID:i}),this.loginState!=E.c.ConnectionState.Disconnected&&this.econf.user.userID?(this.emitConnState(E.c.ConnectionState.Disconnected,E.c.ConnectionEvent.Success),this.cnMgr.send(E.d.sw_logout,{msg:this.k1SignLogoutBuffer}).then(function(a){a&&a.code||r.cnMgr.close(i)})):Promise.resolve()},s.prototype.renewToken=function(r){var i,a=this,o=x(Object(_.l)(r,this.econf.tokenExpireTime),2),l=o[0],h=o[1];return l?(o={error:Object(_.y)(l),expireTime:new Date(1e3*h).toLocaleString()},this.lg.w(m,E.u.RenewToken,o),Promise.reject(o.error)):(l=Date.now())-this.lastRenewTokenTime<500?(o=Object(_.y)(6000004),this.lg.w(m,E.u.RenewToken,o),Promise.reject(o)):(i={time:this.lastRenewTokenTime=l},o={user_name:Object(_.j)(r),sdk_duration:h-Math.floor(Date.now()/1e3)},this.cnMgr.send(E.d.sw_renew_token,o).then(function(R){return R.code?(i.error=Object(_.y)(6000103,R.message,R.code),a.lg.w(m,E.u.RenewToken,i),Promise.reject(i.error)):(a.econf.token=r,a.updateLocalToken(r,h),a.startCheckTokenExpireTime(h),a.lg.i(m,E.u.RenewToken,i),{token:r})}))},s.prototype.updateUser=function(r,i,a){var o=this,l=((h={time:new Date})[i]=a,h),h={user_name:Object(_.j)(a),set_flag:r};return this.cnMgr.send(E.d.user_mdf,h).then(function(R){return R.code?(l.error=Object(_.y)(f,R.message,R.code),o.lg.w(m,E.u.UpdateUser,l),Promise.reject(l.error)):(o.econf.user[i]=a,o.updateUserInfoSeq(R.conv_list_seq,!0),o.lg.i(m,E.u.UpdateUser,l),(R={})[i]=a,R)})},s.prototype.updateStatus=function(r){var i=this,a={time:new Date,customStatus:r};return this.cnMgr.send(E.d.user_mdf_status,{key:r}).then(function(o){return o.code?(a.error=Object(_.y)(f,o.message,o.code),i.lg.w(m,E.u.UpdateUserStatus,a),Promise.reject(a.error)):(o.custom_status=r,o.last_change_time_custom=o.last_change_time,delete o.last_change_time,i.onPushSelfStatus(E.n.B,o),i.lg.i(m,E.u.UpdateUserStatus,a),{customStatus:r})})},s.prototype.updateRule=function(r){var i=this,a={time:new Date,offlinePushRule:r};return r.onlinePlatforms=r.onlinePlatforms?A([],x(new Set(r.onlinePlatforms)),!1):[],r.notToReceiveOfflinePushPlatforms=r.notToReceiveOfflinePushPlatforms?A([],x(new Set(r.notToReceiveOfflinePushPlatforms)),!1):[],this.cnMgr.send(E.d.user_rule_mdf,{user_rule:{online:r.onlinePlatforms,disable_push:r.notToReceiveOfflinePushPlatforms}}).then(function(o){return o.code?(a.error=Object(_.y)(f,o.message,o.code),i.lg.w(m,E.u.UpdateUserRule,a),Promise.reject(a.error)):(i.econf.user.userRule={offlinePushRule:g({},r)},a.isUpdSeq=i.updateUserInfoSeq(o.conv_list_seq,!0),i.lg.i(m,E.u.UpdateUserRule,a),i.dbMgr.setUser(i.econf.user),i.bus.emit(E.m.UserRule,{userRule:g({},i.econf.user.userRule)}),{offlinePushRule:r})})},s.prototype.querySelf=function(){var r={userFullInfo:{baseInfo:{userID:this.econf.user.userID,userName:this.econf.user.userName,userAvatarUrl:this.econf.user.userAvatarUrl},extendedData:this.econf.user.extendedData},userStatus:g({},this.econf.user.userStatus),userRule:g({},this.econf.user.userRule)};return Promise.resolve({selfUserInfo:r})},s.prototype.subscribeStatus=function(r,i,a){var o=this,l={time:new Date,sub:r,total:i.length,count:0};return this.cnMgr.send(r?E.d.user_sub:E.d.user_unsub,{user_ids:i,delete_type:a}).then(function(h){if(h.code)return l.error=Object(_.y)(f,h.message,h.code),o.lg.w(m,E.u.SubscribeStatus,l),Promise.reject(l.error);o.onPushUserStatus(h);var R,w,d=h.err_list.map(function(D){return{userID:D.user_id,reason:D.sub_code}});return r||(w=i,d.length&&(R=d.map(function(D){return D.userID}),w=i.filter(function(D){return R.indexOf(D)==-1})),w.length&&(w.forEach(function(D){return o.dbSubUserMap.delete(D)}),o.dbMgr.delBeanList(w,E.l.SubUser))),l.count=h.succ_list.length,o.lg.i(m,E.u.SubscribeStatus,l),{errorUserList:d}})},s.prototype.queryStatus=function(r){var i=this,a={time:new Date,total:r.length,count:0};return this.cnMgr.send(E.d.user_status,{user_ids:r}).then(function(o){var l;return o.code?(a.error=Object(_.y)(f,o.message,o.code),i.lg.w(m,E.u.QueryStatus,a),Promise.reject(a.error)):(l=o.succ_list.map(function(h){return{userID:h.user_id,customStatus:h.custom_status,onlineStatus:h.user_status,onlinePlatforms:i.getPlatforms(h.user_devices),lastUpdateTime:Math.max(h.last_change_time,h.last_change_time_custom),lastOnlineStatusUpdateTime:h.last_change_time,lastCustomStatusUpdateTime:h.last_change_time_custom}}),o=o.err_list.map(function(h){return{userID:h.user_id,reason:h.sub_code}}),a.count=l.length,i.lg.i(m,E.u.QueryStatus,a),{userStatusList:l,errorUserList:o})})},s.prototype.querySubscriber=function(r){var i=this,a={time:new Date,total:0,count:0,userIDs:r};return new Promise(function(o){i.fetchUserStatus(E.n.B,function(){var l=i.st.getRealClientTimestamp()/1e3|0,h=[];i.dbSubUserMap.forEach(function(R){var w;R.expiredTime>l&&(!r||!r.length||r.some(function(d){return d==R.userID}))&&(delete(w=g({},R)).expiredTime,h.push({userStatus:w,subscribeExpiredTime:R.expiredTime}))}),a.total=i.dbSubUserMap.size,a.count=h.length,i.lg.i(m,E.u.QuerySubscriber,a),o({userStatusSubscriptionList:h})})})},s.prototype.reportZPNs=function(){var r=this.econf.ZPNsPushID;r&&this.loginState==E.c.ConnectionState.Connected&&this.cnMgr.send(E.d.user_zpns,{key:r})},s.prototype.onConnected=function(r){var i,a;this.connRetry||!r&&!this.needRelogin||(i=this.econf.token||this.lastLoginExecutor.token,a=this.econf.tokenExpireTime||this.lastLoginExecutor.expireTime,i&&a&&(a="onConnected",this.needRelogin&&(this.needRelogin=!1,a+=E.d.swp_kickout.cmd),this.doLogin(i,r,a,!0)))},s.prototype.onDisConnected=function(r){r?(this.stopUserHB(r),this.stopMailHB(),this.emitConnState(E.c.ConnectionState.Disconnected,E.c.ConnectionEvent.LoginTimeout),this.bus.emit(E.m.Error,Object(_.y)(6000104))):this.emitConnState(E.c.ConnectionState.Reconnecting,E.c.ConnectionEvent.LoginInterrupted),this.bus.exec(E.m.IDisConnected,r)},s.prototype.onPushRedirect=function(r){r&&r.length&&(this.lastLoginExecutor.push=!0,this.createConnection(r,E.d.swp_redirect.cmd))},s.prototype.onPushKickout=function(r){var i,a;r.seq==1?this.needRelogin=!0:(i={reason:r.code,message:r.key},a=E.c.ConnectionEvent.KickedOut,r.code==2&&(a=E.c.ConnectionEvent.Unregistered,this.clearDB()),this.closeConnection(a,JSON.stringify(i)))},s.prototype.onPushAccesshub=function(r){var i,a=this;r._type==19||r._type==20?(this.PCEstablished._type==20&&this.econf.token&&this.econf.tokenExpireTime&&(i={time:new Date,action:"MSG_TYPE_PC_BROKEN"},this.loginState=E.c.ConnectionState.Reconnecting,this.cnMgr.create(!1).then(function(){return a.sendLoginReq(E.g.S,i)}).catch(function(o){a.loginExecutorTask(o||Object(_.y)(c))})),Object.assign(this.PCEstablished,r)):r._type==30&&r.reason==20010&&(this.handleLoginRedirect(!0,6000014),this.bus.emit(E.m.Error,Object(_.y)(6000014)))},s.prototype.onPushSelfInfo=function(r){var i=this.econf.user,a=!1,o=((o=r.set_flag)==1&&r.hasOwnProperty("userName")?((l=Object(_.g)(r.userName))!=i.userName&&(a=!0),i.userName=l):o==10&&r.hasOwnProperty("extendedData")?((l=Object(_.g)(r.extendedData))!=i.extendedData&&(a=!0),i.extendedData=l):o==16&&r.hasOwnProperty("userAvatarUrl")&&((l=Object(_.g)(r.userAvatarUrl))!=i.userAvatarUrl&&(a=!0),i.userAvatarUrl=l),a&&(o={baseInfo:{userID:i.userID,userName:i.userName,userAvatarUrl:i.userAvatarUrl},extendedData:i.extendedData},this.bus.emit(E.m.UserInfo,{info:o})),((l=r.rule)==null?void 0:l.user_custom_push)||((a=r.rule)==null?void 0:a.app_custom_push)),l=this.isUserRuleUpdate(o.online,o.disable_push);o&&l&&(i.userRule={offlinePushRule:{notToReceiveOfflinePushPlatforms:o.disable_push,onlinePlatforms:o.online}},this.bus.emit(E.m.UserRule,{userRule:g({},i.userRule)})),this.updateUserInfoSeq(r.user_info_seq),this.dbMgr.setUser(i)},s.prototype.onPushSelfStatus=function(r,i){var a;i.code||((a=this.econf.user.userStatus)&&!a.onlinePlatforms&&(a.onlinePlatforms=[]),this.econf.user.userStatus={userID:this.econf.user.userID,customStatus:i.custom_status,onlinePlatforms:this.getPlatforms(i.user_devices),lastUpdateTime:Math.max(i.last_change_time||0,i.last_change_time_custom),lastCustomStatusUpdateTime:i.last_change_time_custom,lastOnlineStatusUpdateTime:0,onlineStatus:E.c.UserOnlineStatus.Unknown},this.econf.user.userStatusSeq=i.user_status_seq,this.dbMgr.setUser(this.econf.user),i=this.econf.user.userStatus,r!=E.n.L&&a&&a.onlinePlatforms.join()==i.onlinePlatforms.join()&&a.customStatus==i.customStatus)||this.bus.emit(E.m.UserStatus,{userStatusList:[i]})},s.prototype.onPushUserStatus=function(r){var i,a,o,l=this;r.succ_list.length&&(i=[],a=[],o=[],r.succ_list.forEach(function(h){var R,w,d=h.user_id;h.is_del?(i.push(d),l.dbSubUserMap.delete(d)):(R={userID:d,customStatus:h.custom_status,onlineStatus:h.user_status,onlinePlatforms:l.getPlatforms(h.user_devices),lastUpdateTime:Math.max(h.last_change_time,h.last_change_time_custom),lastOnlineStatusUpdateTime:h.last_change_time,lastCustomStatusUpdateTime:h.last_change_time_custom},w=l.dbSubUserMap.get(d),h=g(g({},R),{expiredTime:h.expire_time}),w&&w.lastUpdateTime==h.lastUpdateTime&&w.customStatus==h.customStatus&&w.onlineStatus==h.onlineStatus&&w.onlinePlatforms.join()==h.onlinePlatforms.join()?w&&w.expiredTime!=h.expiredTime&&(a.push(h),l.dbSubUserMap.set(d,h)):(o.push(R),a.push(h),l.dbSubUserMap.set(d,h)))}),i.length&&this.dbMgr.delBeanList(i,E.l.SubUser),a.length&&this.dbMgr.addBeanList(a,E.l.SubUser),o.length)&&this.bus.emit(E.m.UserStatus,{userStatusList:o}),this.updateUserSubSeq(!1,r.max_seq,r.min_seq)},s.prototype.initDataReport=function(r,i){var a=(o=x(this.st.fetchZGLogConfig(),2))[0],o=o[1];if(this.lg.setUploadURL(a),this.lg.renewToken(r),this.dr.init(this.econf.appID),this.dr.start(this.econf.user.userID,r,i?o:void 0),i){for(var l=[this.loginConsumeds[0]-i],h=this.loginConsumeds.length-1;0<h;h--)l[h]=this.loginConsumeds[h]-this.loginConsumeds[h-1];r=(a=this.st.advancedConfig.geoFence).id,o=a.dispatch,a=a.host,r=g({times:l.join(),id:r,dispatch:o,host:a},this.PCEstablished),this.lg.i(E.v.Connection,"fetchSetting",r),this.dr.reportSDKEvent("/sdk/init",{time_consumed:Date.now()-i,error_message:r.times,sdk_config:JSON.stringify(r)})}},s.prototype.createConnection=function(r,i,a){var o=this,l={time:new Date,action:i,serveres:r};return(i=r[0].indexOf("wss://")==0)&&(this.cnMgr.urls=r),this.dr.reportSDKEvent("/sdk/conn",{error_message:r.join()}),this.handleLoginRedirect(!1),this.loginState=E.c.ConnectionState.Connecting,this.cnMgr.create(i).then(function(){return o.sendLoginReq(E.g.S,l,a)}).catch(function(h){throw o.handleLoginRedirect(!0),o.loginExecutorTask(h||Object(_.y)(c)),h})},s.prototype.doLogin=function(r,i,a,o){var l=this,h={time:new Date,isReconnect:i,retry:o,action:a};this.connRetry=!0,this.loginState=E.c.ConnectionState.Reconnecting,this.sendLoginReq(E.g.S,h).then(function(){var R;l.connRetry=!1,i&&(l.initMailHB().then(function(){l.onTriggerHB(),l.bus.exec(E.m.IConnected)}),R=l.st.fetchZGLogConfig()[1],l.dr.start(l.econf.user.userID,r,R))}).catch(function(R){o&&R&&Object(_.m)(R.code)?l.doLogin(r,i,a,!1):(l.connRetry=!1,l.loginExecutorTask(R||Object(_.y)(c)))})},s.prototype.sendLoginReq=function(r,i,a,o){var l,h,R=this,w=this.econf.tokenExpireTime||this.lastLoginExecutor.expireTime,d=w-Math.floor(Date.now()/1e3);return this.lastLoginExecutor.notSendError||d<1?(i.error=this.lastLoginExecutor.notSendError||Object(_.y)(6000106),i.expireTime=new Date(1e3*w).toLocaleString(),Promise.reject(i.error)):(l=this.econf.token||this.lastLoginExecutor.token,a||this.emitConnState(this.loginState,E.c.ConnectionEvent.ActiveLogin),this.econf.serverUserID=O.a.fromNumber(0),this.cnMgr.sendNoRsp(E.d.sw_handshake.cmd,this.st.deviceInfo,r),a&&(this.loginConsumeds.push(Date.now()),this.cnMgr.sendDispatch(l),this.st.startSyncRemoteConfig(this.cnMgr,this.econf.handle,l).then(function(D){D&&R.bus.exec(E.m.INetworkChange,"fetchSetting")})),h=g(g({},this.st.deviceInfo),{custom_status:this.lastLoginExecutor.customStatus,user_name:Object(_.j)(this.econf.user.userName),client_stamp:Object(_.j)(this.crypto.generateNonce()),k1_sign:this.crypto.generateK1Sign(this.econf),login_token:Object(_.j)(l),sdk_action:i.action,sdk_duration:d,sdk_server_ip:this.cnMgr.urls[0],sdk_session_timeout:!a&&this.econf.sessionID?this.hbMap.timeout:void 0}),!a&&this.econf.sessionID&&this.hbMap.timeout>Date.now()?h.old_session_id=this.econf.sessionID:a&&this.cnMgr.sessionID&&(h.old_session_id=O.a.fromString(this.cnMgr.sessionID)),this.reloginTokenBuffer&&(h.relogin_token=this.reloginTokenBuffer),this.econf.ZPNsPushID&&(h.zpns_push_id=this.econf.ZPNsPushID),this.econf.cryptoConfig.key2=null,d=this.cnMgr.send(E.d.sw_login,h,r),o&&(this.lastLoginExecutor.reqSeq=h._seq),d.then(function(D){var S=D.code;if(S){if((k=D.redirect_server)&&k.length)return R.createConnection(k,"redirect login error code: "+S,a);if(S==50106||S==50107)return S==50106&&(R.econf.sessionID=void 0),R.sendLoginReq(E.g.S,i,a,o);if(Object(_.m)(S)&&R.lastLoginExecutor.push)return;R.lastLoginExecutor.push=!1,R.lastLoginExecutor.customStatus="";var y=Object(_.y)(S),k=(String(S).indexOf("6000")==-1&&(k=R.econf.appID+","+R.econf.user.userID+": "+D.message,y=Object(_.y)(f,k,S)),1e3*w);return S==50111&&k&&k<Date.now()?R.closeConnection(E.c.ConnectionEvent.TokenExpired,"Token expired with "+S):S==102005?R.closeConnection(E.c.ConnectionEvent.KickedOut,"Kicked out with"+S):Object(_.m)(S)||(R.lastLoginExecutor.notSendError=y,setTimeout(function(){return R.lastLoginExecutor.notSendError=null},1e4),R.emitConnState(E.c.ConnectionState.Disconnected,E.c.ConnectionEvent.LoginInterrupted)),i.error=y,a||R.lg.w(m,"login",i),Promise.reject(y)}if(S!=0){if(!a&&D.register_time>R.econf.user.registerTime)return R.clearDB(),R.closeConnection(E.c.ConnectionEvent.Unregistered,""),Promise.reject(Object(_.y)(6000011));R.crypto.decryptK2Sign(D.k2_sign,R.econf),a&&o&&R.reportZPNs(),R.reloginTokenBuffer=D.relogin_token,R.k1SignLogoutBuffer=R.crypto.md5Bytes(h.k1_sign),R.econf.sessionID=D.rspHeader.session_id,R.econf.serverUserID=D.rspHeader.user_nid,R.econf.controls=D.rspHeader.controls,R.st.serverOffsetTime=D.server_timestamp-Date.now(),R.econf.user.registerTime=D.register_time||0,R.econf.convSid||(R.econf.convSid=D.server_timestamp+""),R.lastLoginExecutor.push=!1,R.lastLoginExecutor.customStatus="",R.startUserHB(D.hb_interval,D.hb_timeout),R.startMailHB(),R.econf.token=l,R.updateLocalToken(l,w),R.startCheckTokenExpireTime(w);try{var b=JSON.parse(D.im_conf_json);i.im_conf_json=b,R.setMailHBConfig(b)}catch{}if(R.handleLoginRedirect(!0),a||!R.econf.isDBLoaded)return R.loadDB(l,!!a,!0,i);R.loginEnd(!1,i)}}))},s.prototype.updateLocalToken=function(r,i){this.econf.tokenExpireTime=i,this.dr.start(this.econf.user.userID,r),this.lg.renewToken(r)},s.prototype.updateSvrToken=function(r,i){var a,o=this;r&&this.econf.tokenExpireTime<i&&(a={user_name:Object(_.j)(r),sdk_duration:i-Math.floor(Date.now()/1e3)},this.cnMgr.send(E.d.sw_renew_token,a,E.g.S).then(function(l){l.code||(o.econf.token=r,o.updateLocalToken(r,i),o.startCheckTokenExpireTime(i))}))},s.prototype.startUserHB=function(r,i){var a=this;!r||r<0||(this.hbMap.timeout=1.5*i+Date.now(),this.stopUserHB(!1),this.hbMap.userTimer=setInterval(function(){a.lg&&a.cnMgr.sendHB(E.d.sw_hb,void 0).then(function(o){if(Object(E.A)(o.code))return a.stopUserHB(!0);o.code?(o.code==6000105&&a.hbMap.userTimeoutCount++,o.timeoutCount=a.hbMap.userTimeoutCount,(o.code==1||o.code==50012||E.h.needReloginCodeList.indexOf(o.code)!=-1||a.hbMap.userTimeoutCount>=E.h.hbTimeoutMaxCount)&&(a.stopUserHB(!1),a.onConnected(!0)),o.state=a.loginState):o.server_timestamp&&(a.hbMap.userTimeoutCount=0,a.st.serverOffsetTime=o.server_timestamp-Date.now(),o.hb_timeout==i&&(a.hbMap.timeout=1.5*o.hb_timeout+Date.now()),Object.assign(a.econf.mailHBConfig,o.zim_payload),a.fetchSelfStatus(E.n.H))})},r))},s.prototype.stopUserHB=function(r){this.hbMap.userTimer&&clearInterval(this.hbMap.userTimer),this.hbMap.userTimeoutCount=0,this.hbMap.userTimer=0,r&&(this.renewTokenTimer&&clearTimeout(this.renewTokenTimer),this.expireTokenTimer&&clearTimeout(this.expireTokenTimer),this.renewTokenTimer=0,this.expireTokenTimer=0)},s.prototype.startMailHB=function(){var r=this,i=this.econf.mailHBConfig.usermail_hb_interval;!i||i<0||(this.stopMailHB(),this.hbMap.mailTimer=setInterval(function(){var a;r.lg&&(a={conv_sid:r.econf.user.convSeq||"1"},r.cnMgr.sendHB(E.d.conv_hb,a).then(function(o){if(Object(E.A)(o.code))return r.stopMailHB();o.code?(o.code==6000105&&r.hbMap.mailTimeoutCount++,o.timeoutCount=r.hbMap.mailTimeoutCount,(o.code==1||r.hbMap.mailTimeoutCount>=E.h.hbTimeoutMaxCount||E.h.needReloginCodeList.indexOf(o.code)!=-1)&&r.stopMailHB()):(r.setMailHBConfig(o,!0),r.onTriggerHB(),r.bus.exec(E.m.ITriggerHB))}))},i))},s.prototype.onTriggerHB=function(){this.fetchSelfInfo(E.n.H),this.fetchUserStatus(E.n.H)},s.prototype.stopMailHB=function(){this.hbMap.mailTimer&&clearInterval(this.hbMap.mailTimer),this.hbMap.mailTimeoutCount=0,this.hbMap.mailTimer=0},s.prototype.fetchSelfInfo=function(r){var i=this,a=this.econf.user.userInfoSeq||0,o=this.econf.mailHBConfig.user_info_seq;(!o||o<=a)&&r!==E.n.L||this.cnMgr.send(E.d.user_rule,{dbSeq:a,hbSeq:o,how:r},E.g.S).then(function(l){var h,R,w,d,D;l.code||(D={userID:l.base_info.user_id,userName:d=Object(_.g)(l.base_info.user_name),userAvatarUrl:h=Object(_.g)(l.base_info.avatar),extendedData:R=Object(_.g)(l.base_info.extra)},(w=i.econf.user).userName||(w.userName=""),w.userAvatarUrl||(w.userAvatarUrl=""),w.extendedData||(w.extendedData=""),w.userName===d&&w.userAvatarUrl===h&&w.extendedData===R||(Object(_.x)(D,i.econf,l.base_info.updated_at),w.userName=d,w.userAvatarUrl=h,w.extendedData=R,d={baseInfo:{userID:D.userID,userName:D.userName,userAvatarUrl:D.userAvatarUrl},extendedData:D.extendedData},i.dbMgr.setUser(w),i.bus.emit(E.m.UserInfo,{info:d})),(D=((h=l.rule)==null?void 0:h.user_custom_push)||((R=l.rule)==null?void 0:R.app_custom_push))&&i.isUserRuleUpdate(D.online,D.disable_push)&&(i.econf.user.userRule={offlinePushRule:{notToReceiveOfflinePushPlatforms:D.disable_push,onlinePlatforms:D.online}},i.dbMgr.setUser(i.econf.user),i.bus.emit(E.m.UserRule,{userRule:g({},i.econf.user.userRule)})),i.updateUserInfoSeq(l.base_info.user_info_seq,!0))})},s.prototype.fetchSelfStatus=function(r){var i=this.econf.user.userStatusSeq||0,a=this.econf.mailHBConfig.user_status_seq;(!a||a<=i)&&r!==E.n.L||this.cnMgr.send(E.d.user_self_status,{dbSeq:i,hbSeq:a,how:r},E.g.S).then(this.onPushSelfStatus.bind(this,r))},s.prototype.fetchUserStatus=function(r,i){var a=this,o=this.econf.user.subscribeSeq||0,l=this.econf.mailHBConfig.subscribe_seq;if(!l||l<=o)return i&&i();this.cnMgr.send(E.d.user_sub_list,{cur_list_seq:o,hbSeq:l,how:r},E.g.S).then(function(h){if(h.code)return i&&i();h.full_pull&&(a.dbSubUserMap.clear(),a.dbMgr.delBeanList([],E.l.SubUser,!0));var R=[],w=h.succ_list.map(function(d){var D={userID:d.user_id,customStatus:d.custom_status,onlineStatus:d.user_status,onlinePlatforms:a.getPlatforms(d.user_devices),lastUpdateTime:Math.max(d.last_change_time,d.last_change_time_custom),lastOnlineStatusUpdateTime:d.last_change_time,lastCustomStatusUpdateTime:d.last_change_time_custom};return d=g(g({},D),{expiredTime:d.expire_time}),R.push(d),a.dbSubUserMap.set(d.userID,d),D});a.dbMgr.addBeanList(R,E.l.SubUser),a.updateUserSubSeq(!0,h.max_seq,0),w.length&&a.bus.emit(E.m.UserStatus,{userStatusList:w}),i&&i()})},s.prototype.isUserRuleUpdate=function(r,i){var a,o=A([],x(((a=(a=this.econf.user.userRule)==null?void 0:a.offlinePushRule)==null?void 0:a.onlinePlatforms)||[]),!1),l=A([],x(((a=(a=this.econf.user.userRule)==null?void 0:a.offlinePushRule)==null?void 0:a.notToReceiveOfflinePushPlatforms)||[]),!1);return!(o.every(function(h){return r.includes(h)})&&r.every(function(h){return o.includes(h)})&&l.every(function(h){return i.includes(h)})&&i.every(function(h){return l.includes(h)}))},s.prototype.startCheckTokenExpireTime=function(r){var i=this,a=(this.renewTokenTimer&&clearTimeout(this.renewTokenTimer),this.expireTokenTimer&&clearTimeout(this.expireTokenTimer),Math.min(2073600,r-Math.floor(Date.now()/1e3)));a<this.renewTokenTimeout?(this.lg.i(m,"token","token will expire: "+a),this.bus.emit(E.m.TokenExpire,{second:a})):this.renewTokenTimer=setTimeout(function(){i.lg&&(i.lg.i(m,"token","token will expire: "+a),i.bus.emit(E.m.TokenExpire,{second:i.renewTokenTimeout}))},1e3*(a-this.renewTokenTimeout)),this.expireTokenTimer=setTimeout(function(){return i.closeConnection(E.c.ConnectionEvent.TokenExpired,"Token expired for timer "+a)},1e3*(a-2))},s.prototype.emitConnState=function(r,i,a){this.loginState=r,this.bus.emit(E.m.ConnState,{state:r,event:i,extendedData:a||""})},s.prototype.handleLoginRedirect=function(r,i){i===void 0&&(i=0),this.lastLoginExecutor.reqSeq&&this.cnMgr.responseReq(this.lastLoginExecutor.reqSeq,r,i),r&&(this.lastLoginExecutor.reqSeq=0)},s.prototype.closeConnection=function(r,i){this.dr.reportSDKEvent("/sdk/conn",{error_message:"event:"+r+", "+i}),this.onLogout(),this.cnMgr.close(this.st.streamID),this.emitConnState(E.c.ConnectionState.Disconnected,r,i)},s.prototype.setMailHBConfig=function(r,i){var a=r.user_info_seq,o=r.c2c_msg_seq,l=r.conv_list_seq,h=r.group_list_seq,R=r.call_list_seq,w=r.friend_list_seq,d=r.friend_apply_list_seq,D=r.black_list_seq,S=r.conv_pinned_list_seq,y=r.c2c_statemsg_seq,k=r.extra_msg_list_seq,b=r.c2c_mute_max_seq,U=r.group_apply_list_seq,z=r.history_c2c_msg_seq,P=r.conv_mark_seq,H=r.subscribe_seq;r=function(Q,J){var L={};for(B in Q)Object.prototype.hasOwnProperty.call(Q,B)&&J.indexOf(B)<0&&(L[B]=Q[B]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,B=Object.getOwnPropertySymbols(Q);q<B.length;q++)J.indexOf(B[q])<0&&Object.prototype.propertyIsEnumerable.call(Q,B[q])&&(L[B[q]]=Q[B[q]]);return L}(r,["user_info_seq","c2c_msg_seq","conv_list_seq","group_list_seq","call_list_seq","friend_list_seq","friend_apply_list_seq","black_list_seq","conv_pinned_list_seq","c2c_statemsg_seq","extra_msg_list_seq","c2c_mute_max_seq","group_apply_list_seq","history_c2c_msg_seq","conv_mark_seq","subscribe_seq"]),Object.assign(this.econf.mailHBConfig,r),a&&(this.econf.mailHBConfig.user_info_seq=a),o&&(this.econf.mailHBConfig.c2c_msg_seq=o),l&&(this.econf.mailHBConfig.conv_list_seq=l),h&&(this.econf.mailHBConfig.group_list_seq=h),R&&(this.econf.mailHBConfig.call_list_seq=R),w&&(this.econf.mailHBConfig.friend_list_seq=w),d&&(this.econf.mailHBConfig.friend_apply_list_seq=d),D&&(this.econf.mailHBConfig.black_list_seq=D),S&&(this.econf.mailHBConfig.conv_pinned_list_seq=S),y&&(this.econf.mailHBConfig.c2c_statemsg_seq=y),k&&(this.econf.mailHBConfig.extra_msg_list_seq=k),b&&(this.econf.mailHBConfig.c2c_mute_max_seq=b),U&&(this.econf.mailHBConfig.group_apply_list_seq=U),z&&(this.econf.mailHBConfig.history_c2c_msg_seq=z),P&&(this.econf.mailHBConfig.conv_mark_seq=P),H&&(this.econf.mailHBConfig.subscribe_seq=H),i&&this.lg.hbLog.push({id:"_hb",time:new Date().toLocaleTimeString("zh-CN"),sub:H,c2c:o,conv:l,group:h,call:R})},s.prototype.loginEnd=function(r,i){this.emitConnState(E.c.ConnectionState.Connected,E.c.ConnectionEvent.Success),r||this.lg.i(m,"login",i),this.loginExecutorTask(),this.updateSvrToken(this.lastLoginExecutor.token,this.lastLoginExecutor.expireTime),this.lastLoginExecutor.token=""},s.prototype.loginExecutorTask=function(r){var i=this;this.lastLoginExecutor.tasks.forEach(function(a){var o=a.log,l=a.resolve;r?(0,a.reject)(r):l(),i.lg.i(m,E.u.Login,o)}),this.lastLoginExecutor.tasks.length=0},s.prototype.initSelf=function(r){var i=this,a=this.econf.user.userID,o=r.find(function(l){return l.userID==a});o?(o.userName=this.econf.user.userName||o.userName,o.deleteAllMsgTime||(o.deleteAllMsgTime=0),o.registerTime||(o.registerTime=0),o.userRule||(o.userRule={offlinePushRule:{onlinePlatforms:[],notToReceiveOfflinePushPlatforms:[]}}),this.lg.i(m,"getDBUser",o)):o={userID:a,userName:this.econf.user.userName,registerTime:0,deleteAllMsgTime:0,userRule:{offlinePushRule:{onlinePlatforms:[],notToReceiveOfflinePushPlatforms:[]}},userInfoSeq:0,userStatusSeq:0,convSeq:0,groupSeq:0,c2cMsgSeq:0,msgExtraSeq:0,c2cMsgStateSeq:0,callSeq:0,convPinnedSeq:0,convMarkSeq:0,muteSeq:0,friendSeq:0,friendAppSeq:0,blacklistSeq:0,groupAppSeq:0},o.userStatus={userID:a,customStatus:"",onlineStatus:E.c.UserOnlineStatus.Unknown,onlinePlatforms:[],lastUpdateTime:0,lastOnlineStatusUpdateTime:0,lastCustomStatusUpdateTime:0},this.econf.user.registerTime&&this.econf.user.registerTime>o.registerTime&&(this.clearDB(),o.registerTime=this.econf.user.registerTime),o.userName||(o.userName=""),o.userAvatarUrl||(o.userAvatarUrl=""),o.extendedData||(o.extendedData=""),Object.assign(this.econf.user,o),r.forEach(function(l){return i.econf.dbUserMap.set(l.userID,l)}),this.econf.dbUserMap.set(this.econf.user.userID,this.econf.user)},s.prototype.initMailHB=function(){var r=this,i={conv_sid:this.econf.user.convSeq||"1"};return this.cnMgr.send(E.d.conv_hb,i,E.g.S).then(function(a){a.code||r.setMailHBConfig(a)})},s.prototype.updateUserInfoSeq=function(r,i){var a=this.econf.user;return!(!r||!i&&a.userInfoSeq&&a.userInfoSeq+1!=r||a.userInfoSeq&&a.userInfoSeq>r||(a.userInfoSeq=r,this.dbMgr.setUser(this.econf.user),0))},s.prototype.updateUserSubSeq=function(r,i,a){var o=this.econf.user;!i||!r&&o.subscribeSeq&&o.subscribeSeq+1!=a||(o.subscribeSeq=i,this.dbMgr.setUser(this.econf.user))},s.prototype.loadDB=function(r,i,a,o){function l(){return a&&h.loginConsumeds.push(Date.now()),Promise.all([h.dbMgr.getUserList().then(function(R){return h.initSelf(R)}),h.dbMgr.getBeanListByOwnerID(E.l.Group),h.dbMgr.getBeanListByOwnerID(E.l.Conv),h.dbMgr.getBeanListByOwnerID(E.l.MessageExtra)]).then(function(R){h.loginConsumeds.push(Date.now()),h.initDataReport(r,o.time.getTime()),a&&h.fetchLogReportWhiteList(r),R[1].forEach(function(w){return h.econf.dbGroupMap.set(w.groupID,w)}),R[2].forEach(function(w){w.isDisabled||(w.isDisabled=!1),w.mutedExpiredTime||(w.mutedExpiredTime=0),w.marks||(w.marks=[]),w.mentionedInfoList||(w.mentionedInfoList=[]),w.isPinned&&w.orderKey<2*E.h.CONV_BASE_PIN?w.orderKey+=E.h.CONV_BASE_PIN:!w.isPinned&&w.orderKey>2*E.h.CONV_BASE_PIN&&(w.orderKey-=E.h.CONV_BASE_PIN),h.econf.dbConvMap.set(w.id,w)}),R[3].forEach(function(w){return h.econf.msgExtraMap.set(w.id,w)}),h.econf.isNewDB=!h.econf.user.convSeq,h.econf.token=r,h.bus.exec(E.m.ILogined),h.econf.isDBLoaded=!0,h.loginEnd(i,o),h.dbMgr.getBeanList(E.l.SubUser).then(function(w){w.forEach(function(d){return h.dbSubUserMap.set(d.userID,d)})}),h.dbMgr.loadDB(),setTimeout(function(){h.fetchSelfStatus(E.n.L),h.fetchSelfInfo(E.n.L),h.fetchUserStatus(E.n.L)},1e3)})}var h=this;return a?(this.loginConsumeds.push(Date.now()),this.initMailHB().then(l)):l()},s.prototype.clearDB=function(){this.dbSubUserMap.clear(),this.bus.exec(E.m.ILogined,!0);var r=this.econf.user;r.userInfoSeq=0,r.userStatusSeq=0,r.convSeq=0,r.groupSeq=0,r.c2cMsgSeq=0,r.msgExtraSeq=0,r.c2cMsgStateSeq=0,r.convPinnedSeq=0,r.convMarkSeq=0,r.callSeq=0,r.friendSeq=0,r.friendAppSeq=0,r.blacklistSeq=0,r.muteSeq=0,r.groupAppSeq=0,r.subscribeSeq=0,r.userAvatarUrl="",r.extendedData="",r.deleteAllMsgTime=0,r.userRule={offlinePushRule:{}},this.dbMgr.clearDB(g({},r))},s.prototype.fetchLogReportWhiteList=function(r){var i,a=this,o={product:"zim",biz_type:1,appid:this.econf.appID+"",uin:encodeURIComponent(this.econf.user.userID),token:encodeURIComponent(r),timestamp:Date.now()+"",deviceid:this.st.deviceInfo.device_id},l=(r=Object.keys(o).map(function(R){return R+"="+o[R]}).join("&"),this.st.fetchZGLogWhitelistHost()),h=l+"/zglog/whitelist?"+r;_.p?_.p.request({url:h,data:r,success:function(R){try{var w=typeof R.data=="string"?JSON.parse(R.data):R.data;w&&w.code==0&&a.lg.upload("whitelist"),a.dr.reportSDKEvent("/sdk/log_whitelist",{error_message:l+JSON.stringify(w)})}catch{}}}):((i=new XMLHttpRequest).onreadystatechange=function(){if(i.readyState==4&&(200<=i.status&&i.status<300||i.status==304))try{var R=JSON.parse(i.responseText);R&&R.code==0&&a.lg.upload("whitelist"),a.dr.reportSDKEvent("/sdk/log_whitelist",{error_message:l+JSON.stringify(R)})}catch{}},i.open("GET",h,!0),i.send())},s.prototype.getPlatforms=function(r){for(var i=Object(_.w)(O.a.fromNumber(r||0),!1),a=0;a<i.length;a++){var o=(o=i[a])==1?E.c.PlatformType.Win:o==2?E.c.PlatformType.IPhoneOS:o==4?E.c.PlatformType.Android:o==8?E.c.PlatformType.MacOS:o==16?E.c.PlatformType.Linux:o==32?E.c.PlatformType.Web:o==64?E.c.PlatformType.MiniProgram:o==256?E.c.PlatformType.IPadOS:o==512?E.c.PlatformType.OHOS:E.c.PlatformType.Unknown;i[a]=o}return i},s);function s(r,i,a,o){this.hbMap={timeout:0,userTimer:0,userTimeoutCount:0,mailTimer:0,mailTimeoutCount:0},this.loginState=E.c.ConnectionState.Disconnected,this.connRetry=!1,this.hasLogout=!1,this.loginConsumeds=[],this.needRelogin=!1,this.lastLoginExecutor={notSendError:null,reqSeq:0,push:!1,token:"",expireTime:0,customStatus:"",seq:0,tasks:[]},this.lastRenewTokenTime=0,this.PCEstablished={_type:0},this.lg=T.a.getInstance().lg,this.dr=T.a.getInstance().dr,this.st=T.a.getInstance().st,this.crypto=T.a.getInstance().crypto,this.econf=r,this.bus=i,this.cnMgr=a,this.dbMgr=o,this.dbSubUserMap=new Map}},function(te,j,C){te.exports=(O=>{var T=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function _(s,r){var i=s[0],a=s[1],o=s[2],l=s[3];a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&o|~a&l)+r[0]-680876936|0)<<7|i>>>25)+a|0)&a|~i&o)+r[1]-389564586|0)<<12|l>>>20)+i|0)&i|~l&a)+r[2]+606105819|0)<<17|o>>>15)+l|0)&l|~o&i)+r[3]-1044525330|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&o|~a&l)+r[4]-176418897|0)<<7|i>>>25)+a|0)&a|~i&o)+r[5]+1200080426|0)<<12|l>>>20)+i|0)&i|~l&a)+r[6]-1473231341|0)<<17|o>>>15)+l|0)&l|~o&i)+r[7]-45705983|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&o|~a&l)+r[8]+1770035416|0)<<7|i>>>25)+a|0)&a|~i&o)+r[9]-1958414417|0)<<12|l>>>20)+i|0)&i|~l&a)+r[10]-42063|0)<<17|o>>>15)+l|0)&l|~o&i)+r[11]-1990404162|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&o|~a&l)+r[12]+1804603682|0)<<7|i>>>25)+a|0)&a|~i&o)+r[13]-40341101|0)<<12|l>>>20)+i|0)&i|~l&a)+r[14]-1502002290|0)<<17|o>>>15)+l|0)&l|~o&i)+r[15]+1236535329|0)<<22|a>>>10)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&l|o&~l)+r[1]-165796510|0)<<5|i>>>27)+a|0)&o|a&~o)+r[6]-1069501632|0)<<9|l>>>23)+i|0)&a|i&~a)+r[11]+643717713|0)<<14|o>>>18)+l|0)&i|l&~i)+r[0]-373897302|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&l|o&~l)+r[5]-701558691|0)<<5|i>>>27)+a|0)&o|a&~o)+r[10]+38016083|0)<<9|l>>>23)+i|0)&a|i&~a)+r[15]-660478335|0)<<14|o>>>18)+l|0)&i|l&~i)+r[4]-405537848|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&l|o&~l)+r[9]+568446438|0)<<5|i>>>27)+a|0)&o|a&~o)+r[14]-1019803690|0)<<9|l>>>23)+i|0)&a|i&~a)+r[3]-187363961|0)<<14|o>>>18)+l|0)&i|l&~i)+r[8]+1163531501|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a&l|o&~l)+r[13]-1444681467|0)<<5|i>>>27)+a|0)&o|a&~o)+r[2]-51403784|0)<<9|l>>>23)+i|0)&a|i&~a)+r[7]+1735328473|0)<<14|o>>>18)+l|0)&i|l&~i)+r[12]-1926607734|0)<<20|a>>>12)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a^o^l)+r[5]-378558|0)<<4|i>>>28)+a|0)^a^o)+r[8]-2022574463|0)<<11|l>>>21)+i|0)^i^a)+r[11]+1839030562|0)<<16|o>>>16)+l|0)^l^i)+r[14]-35309556|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a^o^l)+r[1]-1530992060|0)<<4|i>>>28)+a|0)^a^o)+r[4]+1272893353|0)<<11|l>>>21)+i|0)^i^a)+r[7]-155497632|0)<<16|o>>>16)+l|0)^l^i)+r[10]-1094730640|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a^o^l)+r[13]+681279174|0)<<4|i>>>28)+a|0)^a^o)+r[0]-358537222|0)<<11|l>>>21)+i|0)^i^a)+r[3]-722521979|0)<<16|o>>>16)+l|0)^l^i)+r[6]+76029189|0)<<23|a>>>9)+o|0,a=((a+=((o=((o+=((l=((l+=((i=((i+=(a^o^l)+r[9]-640364487|0)<<4|i>>>28)+a|0)^a^o)+r[12]-421815835|0)<<11|l>>>21)+i|0)^i^a)+r[15]+530742520|0)<<16|o>>>16)+l|0)^l^i)+r[2]-995338651|0)<<23|a>>>9)+o|0,a=((a+=((l=((l+=(a^((i=((i+=(o^(a|~l))+r[0]-198630844|0)<<6|i>>>26)+a|0)|~o))+r[7]+1126891415|0)<<10|l>>>22)+i|0)^((o=((o+=(i^(l|~a))+r[14]-1416354905|0)<<15|o>>>17)+l|0)|~i))+r[5]-57434055|0)<<21|a>>>11)+o|0,a=((a+=((l=((l+=(a^((i=((i+=(o^(a|~l))+r[12]+1700485571|0)<<6|i>>>26)+a|0)|~o))+r[3]-1894986606|0)<<10|l>>>22)+i|0)^((o=((o+=(i^(l|~a))+r[10]-1051523|0)<<15|o>>>17)+l|0)|~i))+r[1]-2054922799|0)<<21|a>>>11)+o|0,a=((a+=((l=((l+=(a^((i=((i+=(o^(a|~l))+r[8]+1873313359|0)<<6|i>>>26)+a|0)|~o))+r[15]-30611744|0)<<10|l>>>22)+i|0)^((o=((o+=(i^(l|~a))+r[6]-1560198380|0)<<15|o>>>17)+l|0)|~i))+r[13]+1309151649|0)<<21|a>>>11)+o|0,a=((a+=((l=((l+=(a^((i=((i+=(o^(a|~l))+r[4]-145523070|0)<<6|i>>>26)+a|0)|~o))+r[11]-1120210379|0)<<10|l>>>22)+i|0)^((o=((o+=(i^(l|~a))+r[2]+718787259|0)<<15|o>>>17)+l|0)|~i))+r[9]-343485551|0)<<21|a>>>11)+o|0,s[0]=i+s[0]|0,s[1]=a+s[1]|0,s[2]=o+s[2]|0,s[3]=l+s[3]|0}function E(s){for(var r=[],i=0;i<64;i+=4)r[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return r}function g(s){for(var r=[],i=0;i<64;i+=4)r[i>>2]=s[i]+(s[i+1]<<8)+(s[i+2]<<16)+(s[i+3]<<24);return r}function x(s){for(var r,i,a,o,l=s.length,h=[1732584193,-271733879,-1732584194,271733878],R=64;R<=l;R+=64)_(h,E(s.substring(R-64,R)));for(r=(s=s.substring(R-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=0;R<r;R+=1)i[R>>2]|=s.charCodeAt(R)<<(R%4<<3);if(i[R>>2]|=128<<(R%4<<3),55<R)for(_(h,i),R=0;R<16;R+=1)i[R]=0;return o=(o=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),o=parseInt(o[1],16)||0,i[14]=a,i[15]=o,_(h,i),h}function A(s){for(var r=0;r<s.length;r+=1)s[r]=(i=>{for(var a="",o=0;o<4;o+=1)a+=T[i>>8*o+4&15]+T[i>>8*o&15];return a})(s[r]);return s.join("")}{let s=function(r,i){return(r=0|r||0)<0?Math.max(r+i,0):Math.min(r,i)};var u=s;A(x("hello")),typeof ArrayBuffer>"u"||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(r,i){var a=this.byteLength,o=(r=s(r,a),a);return(o=i!==void 0?s(i,a):o)<r?new ArrayBuffer(0):(i=o-r,a=new ArrayBuffer(i),o=new Uint8Array(a),r=new Uint8Array(this,r,i),o.set(r),a)})}function m(s){return/[\u0080-\uFFFF]/.test(s)?unescape(encodeURIComponent(s)):s}function f(s){for(var r=[],i=s.length,a=0;a<i-1;a+=2)r.push(parseInt(s.substr(a,2),16));return String.fromCharCode.apply(String,r)}function c(){this.reset()}return c.prototype.append=function(s){return this.appendBinary(m(s)),this},c.prototype.appendBinary=function(s){this._buff+=s,this._length+=s.length;for(var r=this._buff.length,i=64;i<=r;i+=64)_(this._hash,E(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},c.prototype.end=function(s){for(var r,i=this._buff,a=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<a;l+=1)o[l>>2]|=i.charCodeAt(l)<<(l%4<<3);return this._finish(o,a),r=A(this._hash),s&&(r=f(r)),this.reset(),r},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(s){return this._buff=s.buff,this._length=s.length,this._hash=s.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(s,r){var i,a=r;if(s[a>>2]|=128<<(a%4<<3),55<a)for(_(this._hash,s),a=0;a<16;a+=1)s[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),r=parseInt(r[1],16)||0,s[14]=i,s[15]=r,_(this._hash,s)},c.hash=function(s,r){return c.hashBinary(m(s),r)},c.hashBinary=function(s,r){return s=A(x(s)),r?f(s):s},(c.ArrayBuffer=function(){this.reset()}).prototype.append=function(s){i=this._buff.buffer,a=s,(o=new Uint8Array(i.byteLength+a.byteLength)).set(new Uint8Array(i)),o.set(new Uint8Array(a),i.byteLength);var r,i,a,o,l=o,h=l.length;for(this._length+=s.byteLength,r=64;r<=h;r+=64)_(this._hash,g(l.subarray(r-64,r)));return this._buff=r-64<h?new Uint8Array(l.buffer.slice(r-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(s){for(var r,i=this._buff,a=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<a;l+=1)o[l>>2]|=i[l]<<(l%4<<3);return this._finish(o,a),r=A(this._hash),s&&(r=f(r)),this.reset(),r},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var s,r=c.prototype.getState.call(this);return r.buff=(s=r.buff,String.fromCharCode.apply(null,new Uint8Array(s))),r},c.ArrayBuffer.prototype.setState=function(s){return s.buff=((r,i)=>{for(var a=r.length,o=new ArrayBuffer(a),l=new Uint8Array(o),h=0;h<a;h+=1)l[h]=r.charCodeAt(h);return l})(s.buff),c.prototype.setState.call(this,s)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(s,r){return s=A((i=>{for(var a,o,l,h,R=i.length,w=[1732584193,-271733879,-1732584194,271733878],d=64;d<=R;d+=64)_(w,g(i.subarray(d-64,d)));for(a=(i=d-64<R?i.subarray(d-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;d<a;d+=1)o[d>>2]|=i[d]<<(d%4<<3);if(o[d>>2]|=128<<(d%4<<3),55<d)for(_(w,o),d=0;d<16;d+=1)o[d]=0;return h=(h=8*R).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(h[2],16),h=parseInt(h[1],16)||0,o[14]=l,o[15]=h,_(w,o),w})(new Uint8Array(s))),r?f(s):s},c})()},function(te,j,C){C.d(j,"a",function(){return A});var O=C(80),T=C(1),_=C(0),E=function(){return(E=Object.assign||function(f){for(var c,u=1,s=arguments.length;u<s;u++)for(var r in c=arguments[u])Object.prototype.hasOwnProperty.call(c,r)&&(f[r]=c[r]);return f}).apply(this,arguments)},g=function(f,c){var u=typeof Symbol=="function"&&f[Symbol.iterator];if(!u)return f;var s,r,i=u.call(f),a=[];try{for(;(c===void 0||0<c--)&&!(s=i.next()).done;)a.push(s.value)}catch(o){r={error:o}}finally{try{s&&!s.done&&(u=i.return)&&u.call(i)}finally{if(r)throw r.error}}return a},x=function(f,c,u){if(arguments.length===2)for(var s,r=0,i=c.length;r<i;r++)!s&&r in c||((s=s||Array.prototype.slice.call(c,0,r))[r]=c[r]);return f.concat(s||Array.prototype.slice.call(c))},A=(m.prototype.encodeReq=function(f,c,u){var s=((i=f.cmd!=_.d.sw_handshake.cmd&&f.cmd!=_.d.sw_login.cmd)||(f.flags[0]=0),this.encode(this.pb.zim.Header,f)),r=s.length,i=(c=this.encode(this.getProtoBean(f.cmd,"req"),c),(c=i?this.crypto.encrypt(c,u.cryptoConfig.key2,u.cryptoConfig.iv2):c).length);return(u=new Uint8Array(7+r+i))[0]=33,u[1]=r>>8,u[2]=r-(u[1]<<8),u.set(new Uint8Array(new Int32Array([i]).buffer).reverse(),3),u.set(s,7),u.set(c,7+r),this.encodeHubPCUpwardMessage(f,u)},m.prototype.decodeHubRsp=function(f,c){return f==21?this.decode(this.pb.hub.PCDownwardMessage,c.slice(13)).payload:(f=this.accesshubDecodeTypeMap[f])&&this.decode(this.pb.hub[f],c.slice(13))},m.prototype.decodeRspHeader=function(f){var c=(f[1]<<8)+f[2];return[this.decode(this.pb.zim.Header,f.slice(7,7+c)),c]},m.prototype.decodeRspBody=function(f,c,u,s){var r,i=this;if(f=f.slice(7+u),c!=_.d.sw_login.cmd)try{f=this.crypto.decrypt(f,s.cryptoConfig.key2,s.cryptoConfig.iv2)}catch{r=!0}var a=[];u=this.getProtoBean(c,"rsp");try{var o=this.decode(u,f);return c===_.d.swp_list.cmd&&o.push_requests&&o.push_requests.forEach(function(l){a.push(l.sub_cmd),l.msg_body=i.decode(i.getProtoBean(l.sub_cmd,"rsp"),l.msg_body)}),o}catch{return E({code:1,message:s="Error for Rsp decrypt or PB decode"+(r?" 1":""),subCmds:a},new u)}},m.prototype.encodeMsgBody=function(f,c){var u="VideoMsgBody";switch(f){case _.c.MessageType.Combine:u="StMsgCombineInfo";break;case _.c.MessageType.Multiple:u="StMultipleMsgContent";break;case _.c.MessageType.Image:u="PictureMsgBody"}return this.encode(this.pb.zim[u],c)},m.prototype.decodeMsgBody=function(f,c,u){var s,r,i,a=this,o=c.type;o>=_.c.MessageType.Image&&o<=_.c.MessageType.Video?Object.assign(c,this.decodeMediaMsgBody(u,!c.isServerMessage,o)):o==_.c.MessageType.Multiple?(i=this.decode(this.pb.zim.StMultipleMsgContent,u).msgs,c.messageInfoList=i.map(function(l){return a.decodeMsgLiteBody(l,l.is_upload)})):o==_.c.MessageType.Revoke?(r=this.decode(this.pb.zim.StRevokeContent,u),i=Object(T.v)(r.msg_status).revoke,s=r.msg_type,Object.assign(c,{revokeType:r.revoke_type,revokeStatus:i,revokeTimestamp:r.revoke_time,operatedUserID:r.user_id||"",revokeExtendedData:Object(T.g)(r.payload),originalMessageType:200<=s&&s<=400?_.c.MessageType.Custom:s,originalTextMessageContent:""})):o==_.c.MessageType.Combine?(r=this.decode(this.pb.zim.StMsgCombineInfo,u),Object.assign(c,{messageList:c.messageList||[],title:r.title,summary:r.summary,aesKey:r.file_body.media_duration,fileName:r.file_body.file_name||"",fileSize:+r.file_body.file_size||0,fileUID:r.file_body.file_uid,fileDownloadUrl:this.setFileProxyHost(!c.isServerMessage,r.file_body.file_download_url)}),c.combineID||(i=c.aesKey||this.crypto.generateNonce(),c.combineID="0-"+c.conversationType+"_"+c.localMessageID+"_"+i+"-"+c.conversationID)):o==_.c.MessageType.Tips?(c.direction=_.c.MessageDirection.Receive,Object.assign(c,this.decodeTipsMsgBody(f,u))):o==_.c.MessageType.Text||o==_.c.MessageType.Custom?c.message=Object(T.g)(u):(c.type=_.c.MessageType.Unknown,c.message=Array.from(u))},m.prototype.decodeSvrMsg=function(f,c,u,s,r){var i=c.msg_info,a=(c=c.msg_svr_info,i.msg_type),o=c.sender_user_id,l=c.edit;return(a={type:200<=a&&a<=400?_.c.MessageType.Custom:a,messageID:c.msg_id,timestamp:c.msg_time,extendedData:i.payload?Object(T.g)(i.payload):"",messageSeq:c.conv_msg_seq,conversationID:u,conversationType:s,senderUserID:o,sentStatus:_.c.MessageSentStatus.Success,direction:o===f.user.userID?_.c.MessageDirection.Send:_.c.MessageDirection.Receive,isUserInserted:!1,isServerMessage:!!c.is_server,receiptStatus:_.c.MessageReceiptStatus.None,isMentionAll:!!i.at_all,mentionedUserIDs:i.at||[],clientSeq:i.msg_client_info?i.msg_client_info.client_msg_seq:0,clientSid:i.msg_client_info?i.msg_client_info.conv_sid:""}).localMessageID=a.clientSid&&a.clientSeq?s+(i.msg_client_info.local_msg_id||a.clientSid+a.clientSeq):s+a.messageID,s||(a.c2cSeq=c.c2c_msg_seq||0),l&&(a.editSeq=l.edit_msg_seq||0,a.editedTime=l.edit_time||0,a.editorUserID=l.edit_user||""),i.no_unread&&a.direction==_.c.MessageDirection.Receive&&(a.noUnread=!0),this.decodeMsgBody(f,a,i.msg),a.type==_.c.MessageType.Custom&&(a.subType=i.sub_msg_type||0,a.searchedContent=i.searched_content),s==_.c.ConversationType.Unknown&&(a.isBroadcastMessage=!0),a.isBroadcastMessage||a.type==_.c.MessageType.Tips||s==_.c.ConversationType.Room||(this.handleReactionList(f,a,c.reactions),i.reply_info&&this.handleSvrReplyMsg(a,i.reply_info,r),r&&(a.rootRepliedCount=r.get(a.messageSeq)||0)),a},m.prototype.handleDBMessage=function(f,c){return c&&(c.type==_.c.MessageType.Combine?(delete(c=E(E({},c),{messageList:[]})).aesKey,delete c.fileDownloadUrl,delete c.fileName,delete c.fileSize,delete c.fileUID,delete c.rootID,delete c.cbID,delete c.parentID,c):(c.message&&(!c.type||c.type==_.c.MessageType.Tips&&c.event==0)&&(this.decodeMsgBody(f,c,new Uint8Array(c.message)),c.message=""),E({},c)))},m.prototype.handleReplyMsgInfo=function(f,c,u){if(f.repliedInfo&&c){var s,r=((f=f.repliedInfo).messageSeq=c.messageSeq,f.messageID=c.messageID,f.senderUserID=c.senderUserID,f.sentTime=c.timestamp,c.type);if(f.messageInfo){if(r==_.c.MessageType.Revoke)return void(f.messageInfo.type!=_.c.MessageType.Revoke&&(f.messageInfo={type:r}));if(!u)return}r==_.c.MessageType.Text||r==_.c.MessageType.Custom?(s={type:r,message:c.message},r==_.c.MessageType.Custom&&(s.subType=c.subType,s.searchedContent=c.searchedContent)):r==_.c.MessageType.Multiple?s={type:r,messageInfoList:JSON.parse(JSON.stringify(c.messageInfoList))}:r>=_.c.MessageType.Image&&r<=_.c.MessageType.Video?(s={type:r,fileUID:c.isServerMessage?"":c.fileUID,fileSize:c.fileSize,fileName:c.fileName,fileDownloadUrl:c.fileDownloadUrl},r==_.c.MessageType.Image?(s.thumbnailDownloadUrl=c.thumbnailDownloadUrl,s.largeImageDownloadUrl=c.largeImageDownloadUrl,s.originalImageWidth=c.originalImageWidth,s.originalImageHeight=c.originalImageHeight,s.thumbnailWidth=c.thumbnailWidth,s.thumbnailHeight=c.thumbnailHeight,s.largeImageWidth=c.largeImageWidth,s.largeImageHeight=c.largeImageHeight):r==_.c.MessageType.Audio?s.audioDuration=c.audioDuration:r==_.c.MessageType.Video&&(s.videoDuration=c.videoDuration,s.videoFirstFrameDownloadUrl=c.videoFirstFrameDownloadUrl,s.videoFirstFrameWidth=c.videoFirstFrameWidth,s.videoFirstFrameHeight=c.videoFirstFrameHeight)):s=r==_.c.MessageType.Combine?{type:r,title:c.title,summary:c.summary}:{type:r},f.messageEditSeq=c.editSeq,f.messageInfo=s}},m.prototype.handleSvrReplyMsg=function(f,c,u){var s=c.root_msg_seq;if(u&&u.set(s,Math.max(u.get(s)||0,c.reply_count)),s!=f.messageSeq){if(u=200<=c.msg_type&&c.msg_type<=400?_.c.MessageType.Custom:c.msg_type,f.repliedInfo){if(u==_.c.MessageType.Revoke)return void(f.repliedInfo.messageInfo.type!=_.c.MessageType.Revoke&&(f.repliedInfo.messageInfo={type:u}));if(!c.msg_edit_seq)return}f.repliedInfo={state:0,messageSeq:c.msg_seq,messageID:c.msg_id,senderUserID:c.sender_user_id,sentTime:c.msg_time,messageInfo:this.decodeMsgLiteBody(c,!c.is_server),messageEditSeq:c.msg_edit_seq||0,rootMessageSeq:s,rootMessageID:c.root_msg_id}}},m.prototype.encodeMsgCombineInfo=function(f,c){var u;return f=this.encode(this.pb.zim.MsgCombineInfo,f),(u=this.crypto).encrypt.apply(u,x([f],g(this.crypto.generateKeyIV(c)),!1))},m.prototype.decodeMsgCombineInfo=function(f,c){var u;return f=(u=this.crypto).decrypt.apply(u,x([f],g(this.crypto.generateKeyIV(c)),!1)),this.decode(this.pb.zim.MsgCombineInfo,f)},m.prototype.encodeCloseStream=function(f){var c=this.encode(this.pb.hub.CloseConnection,{reason:f});return{streamID:f,data:this.createHubBody(2,c)}},m.prototype.encodeHubHTTP=function(f,c,u,s,r){var i=u.url.replace(/^(https?):\/\/[\w\-\.]+\//,"/"),a=(a=u.headers)&&Object.keys(a).map(function(o){return{name:o,val:String(a[o])}});return f=E({txid:f,appid:c.appID,id_name:c.user.userID,location:i,service_no:r,method_no:u.method=="GET"?1:2,headers:a,body:s?Object(T.j)(JSON.stringify(s)):null},this.accesshubConf),c=this.encode(this.pb.hub.HTTPRequest,f),this.createHubBody(4,c)},m.prototype.encodeHubGetAppConf=function(f,c,u){return f=E(E({txid:f,appid:c.appID,id_name:c.user.userID,token:u||c.token,config_key:"init"},this.accesshubConf),{is_special_customer:0}),u=this.encode(this.pb.hub.GetAppConfigRequest,f),this.createHubBody(23,u)},m.prototype.encodeHubGetSvrAddr=function(f,c){return f=E({txid:f,appid:c.appID,id_name:c.user.userID},this.accesshubConf),this.st.advancedConfig.geoFence.type&&(f.geofencing_type=this.st.advancedConfig.geoFence.type,f.geofencings=this.st.advancedConfig.geoFence.areas),c=this.encode(this.pb.hub.GetSvraddrRequest,f),this.createHubBody(39,c)},m.prototype.encodeHubDispatch=function(f,c){return f=E({txid:f,appid:c.appID,id_name:c.user.userID},this.accesshubConf),this.st.advancedConfig.geoFence.type&&(f.geofencing_type=this.st.advancedConfig.geoFence.type,f.geofencings=this.st.advancedConfig.geoFence.areas),c=this.encode(this.pb.hub.AccesshubDispatchRequest,f),this.createHubBody(26,c)},m.prototype.encodeHubPCUpwardMessage=function(f,c){return f=E({txid:f.seq,appid:f.app_id,id_name:f.user_id,payload:c,service_no:9,wss_message_type:1,wss_path:"/ws"},this.accesshubConf),this.st.advancedConfig.geoFence.type&&(f.geofencing_type=this.st.advancedConfig.geoFence.type,f.geofencings=this.st.advancedConfig.geoFence.areas),c=this.encode(this.pb.hub.PCUpwardMessage,f),this.createHubBody(17,c)},m.prototype.createHubBody=function(f,c){var u=new Uint8Array(13+c.length);return u[0]=175,u[1]=0,u[2]=f>>8,u[3]=f-(u[2]<<8),u.set(new Uint8Array(new Int32Array([c.length]).buffer).reverse(),4),f=f==17?this.st.streamID:this.st.streamID+1,u.set(new Uint8Array(new Int32Array([f]).buffer).reverse(),8),u[12]=0,u.set(c,13),u},m.prototype.encode=function(f,c){return f?f.e(new f(c)).finish():[]},m.prototype.decode=function(f,c){return f?f.d(c||[]):{}},m.prototype.getProtoBean=function(f,c){return c=(f=this.protoBeanMap[f])&&f[c],c=this.pb.zim[c],f.ext&&Object.assign(c,f.ext),c},m.prototype.setFileProxyHost=function(f,c){var u=this.st.advancedConfig.geoFence.host.fileproxy;return f&&u&&c?c.replace(this.st.advancedConfig.geoFence.reg,u+"$4"):c},m.prototype.decodeMediaMsgBody=function(f,c,u){var s,r=u==_.c.MessageType.Image?"PictureMsgBody":"VideoMsgBody",i=null;try{i=this.decode(this.pb.zim[r],f)}catch{try{i=JSON.parse(Object(T.g)(f))}catch{}}if(i)return c=c&&!!i.file_uid,r=this.setFileProxyHost(c,i.file_download_url||""),f={type:u,fileUID:c?i.file_uid:"",fileName:i.file_name||"",fileSize:+i.file_size||0,fileDownloadUrl:r},u==_.c.MessageType.Image?((s=i.large_image_download_url)?f.largeImageDownloadUrl=this.setFileProxyHost(c,s):i.large&&(f.largeImageDownloadUrl=r+i.large),(s=i.thumbnail_download_url)?f.thumbnailDownloadUrl=this.setFileProxyHost(c,s):i.thumbnail&&(f.thumbnailDownloadUrl=r+i.thumbnail),f.originalImageWidth=i.origin_width||0,f.originalImageHeight=i.origin_height||0,f.thumbnailWidth=i.small_width||0,f.thumbnailHeight=i.small_height||0,f.largeImageWidth=i.big_width||0,f.largeImageHeight=i.big_height||0):u==_.c.MessageType.Audio?f.audioDuration=+i.media_duration||0:u==_.c.MessageType.Video&&(f.videoDuration=+i.media_duration||0,(s=i.video_first_frame_download_url)?f.videoFirstFrameDownloadUrl=this.setFileProxyHost(c,s):i.thumbnail&&(f.videoFirstFrameDownloadUrl=r+i.thumbnail),f.videoFirstFrameWidth=i.frame_width||0,f.videoFirstFrameHeight=i.frame_height||0),f},m.prototype.decodeTipsMsgBody=function(f,c){var u=this.decode(this.pb.zim.StTipsMsgContent,c),s=u.type,r=u.op_user_info,i=u.target_users,a=0,o=(s<10?a=s:s<30?a=8:s<50&&(a=7),{});if(o.event=a,o.operatedUser=E(E({},Object(T.u)(r.room_id,f)),{userName:r.message,memberRole:r.reason,memberNickname:r.sub_room_id}),o.targetUserList=i.map(function(D){return E(E({},Object(T.u)(D.room_id,f)),{userName:D.message,memberRole:D.reason,memberNickname:D.sub_room_id})}),a==0&&(o.message=c),a==7){var l=u.group_data_flag,h=u.group_notice,R=u.group_name,w=Object(T.g)(u.group_avatar),d={};switch(s){case 30:switch(l){case 1:d.type=3,d.groupName=R;break;case 2:d.type=2,d.groupNotice=h;break;case 4:d.type=4,d.groupAvatarUrl=w;break;default:d.type=1,d.groupDataFlag=l,R&&(d.groupName=R),h&&(d.groupNotice=h),w&&(d.groupAvatarUrl=w)}break;case 34:d.type=5,d.groupMutedInfo=Object(T.e)(u.forbid,this.st.getRealClientTimestamp())}o.changeInfo=d}else if(a==8){switch(d={},s){case 11:d.type=10,d.memberRole=_.s.Owner;break;case 12:d.type=11,d.memberRole=u.role;break;case 13:d.type=12,d.muteExpiredTime=u.forbid_expire_time}o.changeInfo=d}return o},m.prototype.decodeMsgLiteBody=function(f,c){var u=this,s=200<=f.msg_type&&f.msg_type<=400?200:f.msg_type;return s>=_.c.MessageType.Image&&s<=_.c.MessageType.Video?this.decodeMediaMsgBody(f.msg,c,s):s==_.c.MessageType.Multiple?{type:s,messageInfoList:this.decode(this.pb.zim.StMultipleMsgContent,f.msg).msgs.map(function(r){return u.decodeMsgLiteBody(r,r.is_upload)})}:s==_.c.MessageType.Combine?((c=this.decode(this.pb.zim.StMsgCombineInfo,f.msg)).type=s,c):(c={type:s},s!=_.c.MessageType.Revoke&&(c.message=Object(T.g)(f.msg),s==_.c.MessageType.Custom)&&(c.subType=f.msg_type-200,c.searchedContent=f.searched_content),c)},m.prototype.handleReactionList=function(f,c,u){var s,r,i;u&&c.type!=_.c.MessageType.Revoke?(s=u.is_detail,r=[],i=f.mailHBConfig.reaction_brief_len,(u=u.reaction_list)&&u.forEach(function(a){var o=a.user_reaction.slice(0,i).map(function(l){return{userID:l.userID}});(o={conversationID:c.conversationID,conversationType:c.conversationType,messageID:c.messageID,userList:o,totalCount:a.total_user_count,reactionType:a.reaction_key,isSelfIncluded:!1}).isSelfIncluded=s?o.userList.some(function(l){return l.userID==f.user.userID}):!!a.include_self,r.push(o)}),c.reactions=r):c.reactions=[]},m);function m(f,c){this.crypto=f,this.st=c,this.pb=O.a,this.protoBeanMap=Object.values(_.d).reduce(function(u,s){return s.cmd.indexOf("/")!=0&&(s.cmd="/im/"+s.cmd),u[s.cmd]=s,u},{}),this.accesshubDecodeTypeMap={5:"HTTPResponse",40:"GetSvraddrResponse",24:"GetAppConfigResponse",27:"AccesshubDispatchResponse",3:"CloseConnection",22:"Redirect",19:"PCEstablished",30:"PushException"},this.accesshubConf={mode_no:1,sdk_type:4,zegoconn_version:3,zegoconn_run_env:T.p?2:1}}},function(te,j,C){C.d(j,"a",function(){return d}),j=C(4),j=C.n(j),(C=C(10)).util.Long=j.a,C.configure();let O=C.Reader,T=C.Writer;O.c=O.create,T.c=T.create;var _=T.prototype.bool,E=(T.prototype.bl=function(e){return _.call(this,e)},T.prototype.bytes),g=(T.prototype.b=function(e){return E.call(this,e)},T.prototype.int32),x=(T.prototype.i=function(e){return g.call(this,e)},T.prototype.int64),A=(T.prototype.i6=function(e){return x.call(this,e)},T.prototype.uint32),m=(T.prototype.u=function(e){return A.call(this,e)},T.prototype.uint64),f=(T.prototype.u6=function(e){return m.call(this,e)},T.prototype.string),c=(T.prototype.s=function(e){return f.call(this,e)},T.prototype.fork),u=(T.prototype.f=function(e){return c.call(this,e)},T.prototype.ldelim),s=(T.prototype.l=function(e){return u.call(this,e)},O.prototype.bool),r=(O.prototype.bl=function(e){return s.call(this,e)},O.prototype.bytes),i=(O.prototype.b=function(e){return r.call(this,e)},O.prototype.int32),a=(O.prototype.i=function(e){return i.call(this,e)},O.prototype.int64),o=(O.prototype.i6=function(e){return e?+a.call(this).toString():a.call(this)},O.prototype.uint32),l=(O.prototype.u=function(e){return o.call(this,e)},O.prototype.uint64),h=(O.prototype.u6=function(e){return e?+l.call(this).toString():l.call(this)},O.prototype.string),R=(O.prototype.s=function(e){return h.call(this,e)},O.prototype.skipType);function w(e,M){if(M)for(let V=Object.keys(M),v=0;v<V.length;++v)M[V[v]]&&(e[V[v]]=M[V[v]])}O.prototype.sk=function(e){return R.call(this,e)};let d=C.roots.default||(C.roots.default={});function D(e){w(this,e)}function S(e){w(this,e)}function y(){this.headers=[],this.txid=0}function k(e){w(this,e)}function b(){}function U(){}function z(){this.groups=[],this.opt_ports=[],this.wss_groups=[]}function P(){this.txid=0}function H(){}function Q(e){w(this,e)}function J(){this.txid=0}function L(){}function q(e){w(this,e)}function B(){this.txid=0}function Y(){}function K(e){w(this,e)}function ee(){this.txid=0,this.groups=[],this.opt_ports=[],this.wss_groups=[]}function oe(){}function ae(){this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[]}function X(){}function re(){}function ie(){}function ge(){}function _e(e){w(this,e)}function ke(){this.server_timestamp=0}function De(e){w(this,e)}function Re(e){w(this,e)}function we(){this.server_ips=[],this.redirect_server=[],this.server_timestamp=0,this.register_time=0}function Oe(){this.push_requests=[],this.send_time=0}function Ae(){}function Pe(e){w(this,e)}function Ue(e){this.conv_sid="",this.client_msg_seq=0,w(this,e)}function Ne(e){w(this,e)}function mt(e){w(this,e)}function gt(e){w(this,e)}function Rt(e){this.msgs=[],w(this,e)}function ps(e){w(this,e)}function hr(e){w(this,e)}function fs(e){this.send_user_map={},this.child=[],w(this,e)}function St(e){w(this,e)}function Gt(e){w(this,e)}function ot(e){w(this,e)}function Ht(){this.msg_id="",this.msg_time=0}function Ye(){}function qs(e){this.at=[],w(this,e)}function Xt(){this.msg_id="",this.conv_msg_seq=0,this.c2c_msg_seq=0,this.msg_time=0}function Wt(){}function hs(){this.msglist_seq=0}function Kt(){}function Js(e){w(this,e)}function ms(){this.err_list=[],this.new_err_list=[],this.call_seq=0,this.call_list_seq=0,this.create_time=0}function Dt(e){w(this,e)}function qt(){this.err_list=[],this.new_err_list=[],this.call_seq=0,this.call_list_seq=0,this.call_user_session_id=0}function He(){this.user_state=0,this.accept_time=0,this.quit_time=0,this.residue_timeout_time=0,this.user_session_id=0}function rs(){this.user_list=[],this.call_seq=0,this.now_time=0}function Or(){this.calls=[],this.cur_list_seq=0,this.max_list_seq=0}function Lr(){this.call_user_list=[],this.create_time=0,this.call_list_seq=0,this.call_status=0,this.now_time=0,this.destroy_time=0,this.accept_time=0,this.quit_time=0,this.invite_time=0}function Is(e){w(this,e)}function mr(){this.err_list=[],this.call_seq=0,this.call_user_session_id=0}function gs(e){w(this,e)}function Qt(){this.call_list_seq=0,this.talk_time=0,this.quit_time=0,this.call_seq=0,this.call_user_session_id=0}function Xs(){this.user_state_list=[],this.accept_time=0,this.create_time=0}function _s(){this.user_state_list=[],this.call_seq=0,this.call_list_seq=0,this.create_time=0,this.call_user_session_id=0}function dt(){this.call_seq=0,this.call_list_seq=0,this.accept_time=0,this.call_user_session_id=0}function It(){this.call_seq=0,this.call_list_seq=0,this.accept_time=0,this.call_user_session_id=0}function Ps(){this.user_ids=[],this.call_seq=0,this.call_list_seq=0,this.call_user_session_id=0}function vn(){this.user_state_list=[],this.create_time=0,this.call_seq=0,this.call_list_seq=0,this.call_user_session_id=0}function Wn(){this.call_seq=0,this.accept_time=0,this.quit_time=0,this.call_user_session_id=0}function $n(){this.call_list_seq=0,this.talk_time=0,this.destroy_time=0,this.call_user_session_id=0}function bn(){this.call_seq=0,this.call_user_session_id=0}function Ws(){this.user_state_list=[],this.timeout=0,this.call_seq=0,this.call_user_session_id=0}function Gr(e){this.invitees=[],this.call_id="",this.caller="",this.session_id=0}function vs(){this.msg_id="",this.conv_msg_seq=0}function As(){this.conv_type=0,this.conv_list_seq=0,this.conv_msg_seq=0,this.read_seq=0,this.send_count_after_read=0,this.last_del_msg_seq=0,this.statemsg_seq=0,this.receipt_max_conv_msg_seq=0,this.at_max_conv_msg_seq=0,this.at_all_max_conv_msg_seq=0,this.update_time=0,this.sub_read_count=0,this.last_revoke_msg_seq=0,this.last_msg_time=0,this.at_info_list=[],this.group_tips_msg_type=0}function $s(){this.conv_list=[],this.conv_list_seq=0,this.max_list_seq=0,this.max_del_conv_list_seq=0}function ws(e){w(this,e)}function _t(){this.msgs=[],this.max_conv_msg_seq=0,this.next_conv_msg_seq=0}function yn(){this.msgs=[],this.c2c_msg_seq=0,this.svr_c2c_msg_seq=0}function Mn(e){w(this,e)}function Rs(){}function ns(){this.conv_list_seq=0,this.conv_msg_seq=0,this.conv_pinned_list_seq=0}function ei(e){w(this,e)}function Sn(e){w(this,e)}function kn(){this.conv_msg_seq2_receipt_seq={}}function ti(){this.read_members=[],this.unread_members=[],this.cur_member_all_seq=0}function Ts(){this.list=[],this.next_list_seq=0}function gr(){this.conv_type=0,this.conv_msg_seq=0,this.receipt_seq=0}function is(){this.read_count=0,this.unread_count=0}function Cn(){this.del_conv_msg_seqs=[]}function Dn(){this.PushItems=[]}function er(){this.conv_type=0,this.conv_msg_seq=0,this.receipt_seq=0,this.read_count=0,this.unread_count=0}function qn(e){w(this,e)}function In(e){w(this,e)}function Ji(){this.statemsg_list=[],this.next_statemsg_seq=0}function si(){this.conv_type=0,this.conv_msg_seq=0,this.statemsg_seq=0,this.reaction_seq=0}function Zt(){this.reaction_briefs=[]}function ri(e){w(this,e)}function Xi(){this.user_status_seq=0,this.custom_status="",this.last_change_time=0,this.last_change_time_custom=0}function jr(){this.revoke_time=0,this.revoke_type=0}function ni(){this.conv_type=0,this.statemsg_seq=0}function zr(e){w(this,e)}function Wi(){}function Vt(){this.at_list=[]}function An(){this.headers={},this.forms={}}function ii(e){w(this,e)}function wn(){}function tr(){}function Rn(e){this.file_list=[],w(this,e)}function N(){this.rsp_list={}}function ne(){this.rsp_list={}}function $(){this.member_data_seq=0,this.forbid_expire_time=0}function pe(){this.group_create_time=0}function le(){this.conv_msg_seq=0,this.group_list_seq=0,this.group_data_seq=0,this.history_msg_seq=0}function de(){this.member_seq=0,this.group_list_seq=0}function ye(e){w(this,e)}function Me(){this.members=[],this.error_users=[],this.member_all_seq=0,this.group_list_seq=0,this.group_data_seq=0,this.group_attribute_seq=0}function xe(e){this.value="",this.seq=0,w(this,e)}function Te(e){this.attributes=[],w(this,e)}function We(e){this.seq=0,this.attributes=[],w(this,e)}function Qe(){this.group_data_seq=0,this.forbid_expire_time=0,this.forbid_list=[]}function jt(){}function Tt(){this.result=[],this.err_list=[]}function xs(e){w(this,e)}function Tn(){this.fail_keys=[]}function sr(e){w(this,e)}function os(e){w(this,e)}function _r(e){w(this,e)}function as(){this.member_all_seq=0,this.group_list_seq=0,this.group_data_seq=0,this.group_attribute_seq=0,this.conv_msg_seq=0,this.history_msg_seq=0}function zt(e){w(this,e)}function xt(){}function bs(e){w(this,e)}function at(){this.members=[],this.error_users=[],this.apply_users=[],this.member_all_seq=0,this.group_data_seq=0,this.group_attribute_seq=0}function Es(){this.list=[]}function Fs(){this.error_users=[],this.member_all_seq=0}function $i(e){w(this,e)}function Bt(){this.event_type=0}function rr(){this.change_list=[],this.member_all_seq=0,this.cur_list_seq=0}function xn(){this.members=[],this.deleted_members=[]}function Br(){this.cur_seq=0,this.old_seq=0}function da(){this.members=[]}function oi(e){w(this,e)}function ai(){}function Nr(e){w(this,e)}function En(){}function eo(){this.group_list_seq=0,this.group_data_seq=0,this.all_member_seq=0,this.attribute_seq=0,this.member_count=0,this.history_msg_seq=0}function pa(){this.group_infos=[],this.fail_keys=[]}function fa(){this.groups=[],this.cur_list_seq=0,this.max_list_seq=0}function ha(e){w(this,e)}function ui(){}function ma(){this.members=[],this.member_all_seq=0}function ga(){}function _a(){this.members=[],this.change_type=0,this.member_all_seq=0}function va(){this.forbid_expire_time=0,this.forbid_list=[]}function ba(){}function ci(e){w(this,e)}function ya(){this.modify_type=0,this.group_data_seq=0}function Ma(){this.member_all_seq=0}function Sa(){this.conv_msg_seq=0,this.history_msg_seq=0}function ka(){this.list=[]}function li(){}function Ca(){this.conv_msg_seq=[]}function Da(e){w(this,e)}function qa(){this.msgs={}}function di(e){w(this,e)}function Ia(){}function Aa(){this.msgs={}}function wa(){this.audit_info=[]}function Ra(e){w(this,e)}function Ta(){this.send_count_after_read=0}function xa(e){w(this,e)}function Ea(){}function Ua(e){w(this,e)}function Oa(){this.msg_id=""}function pi(e){w(this,e)}function Pr(){this.msgs=[],this.next_conv_msg_seq=0,this.max_conv_msg_seq=0}function to(e){this.msg_id="",this.msg_time=0,w(this,e)}function so(e){w(this,e)}function ro(){this.cur_reaction_seq=0,this.user_total_count=0}function no(e){w(this,e)}function io(){this.succ_list=[],this.error_list=[]}function oo(e){w(this,e)}function vr(e){w(this,e)}function La(){this.reaction_list=[],this.conv_msg_seq=0,this.msg_next_reaction_seq=0,this.msg_max_reaction_seq=0}function Ga(e){w(this,e)}function ja(){this.user_reaction=[],this.max_reaction_seq=0,this.total_user_count=0}function ao(){this.conv_type=0,this.msg_reactions=[]}function uo(){this.reaction_infos=[],this.conv_msg_seq=0,this.start_reaction_seq=0,this.end_reaction_seq=0}function Fr(){this.send_count_after_read=0,this.receipt_seq=0}function Hr(e){w(this,e)}function za(){this.msgs=[],this.max_conv_msg_seq=0,this.next_conv_msg_seq=0,this.fetch_end=0}function Un(){this.conv_type=0,this.conv_pinned_list_seq=0}function co(){this.conv_msg_seq=0,this.group_list_seq=0,this.history_msg_seq=0}function lo(){this.del_conv_msg_seqs=[],this.conv_type=0,this.max_del_conv_msg_seq=0}function fi(e){w(this,e)}function hi(){this.state_list=[],this.next_state_seq=0}function po(){this.conv_type=0,this.conv_msg_seq=0,this.state_seq=0}function fo(){}function ho(){}function Ba(){}function Na(){}function Pa(){this.send_count_after_read=0}function Fa(e){w(this,e)}function Ha(){this.conv_msg_seq=0}function Yt(e){w(this,e)}function Kr(){this.conv_msg_seq=0}function mo(){this.conv_msg_seq=0}function mi(e){w(this,e)}function go(e){w(this,e)}function _o(){this.users=[]}function On(e){this.updated_at=0,this.user_info_seq=0,w(this,e)}function vo(e){this.online=[],this.disable_push=[],w(this,e)}function br(){this.user_info_seq=0}function Ln(e){w(this,e)}function Qr(){}function gi(e){w(this,e)}function bo(){}function Hs(e){this.value="",w(this,e)}function yr(e){w(this,e)}function Gn(e){this.attributes=[],w(this,e)}function yo(e){w(this,e)}function Ks(e){w(this,e)}function Mo(){this.err_list=[]}function So(e){w(this,e)}function ko(e){w(this,e)}function Ka(){this.user_attributes=[],this.user_err_list=[]}function Qa(e){w(this,e)}function Co(e){this.attributes=[],this.err_list=[],w(this,e)}function Do(e){w(this,e)}function qo(e){w(this,e)}function _i(){this.user_attributes=[]}function us(){}function Io(){}function $t(){this.attributes=[]}function es(){this.push_attributes=[]}function Mr(){this.result=[],this.err_list=[]}function jn(e){w(this,e)}function zn(){}function Bn(){this.reaction_list=[],this.msg_max_reaction_seq=0}function vi(){this.user_reaction=[],this.max_reaction_seq=0,this.total_user_count=0}function Sr(){}function Ao(){this.user_state=0,this.user_session_id=0,this.extended_data="",this.accept_time=0,this.quit_time=0,this.residue_timeout_time=0,this.call_state_list=[]}function Nn(){this.room_list=[]}function kr(e){w(this,e)}function Za(){this.msgs=[],this.fail_list=[]}function Jt(e){w(this,e)}function bi(){this.apply_list_seq="0"}function Us(){this.friend_infos=[],this.apply_status_change_list=[],this.err_list=[]}function yi(e){this.update_time=0,w(this,e)}function Pn(){this.apply_list_seq=0,this.apply_status=0,this.wording="",this.create_time=0,this.update_time=0}function Qs(e){this.attributes=[],this.friend_list_seq="0",this.wording="",this.remark="",this.create_time=0,w(this,e)}function Mi(){this.apply_infos=[],this.err_list=[],this.friend_infos=[]}function Si(){this.app_type=0,this.status=0,this.attributes=[],this.apply_list_seq=0,this.create_time=0,this.update_time=0,this.user_info_update_time=0}function Cr(e){w(this,e)}function Dr(){this.apply_list_seq="0",this.apply_update_time=0}function Zr(e){this.user_ids=[],this.delete_type=0,w(this,e)}function Fn(e){w(this,e)}function ts(){this.friends=[],this.friend_count=0}function ss(){this.is_del=!1}function nr(){this.apply_list=[],this.cur_list_seq=0,this.max_list_seq=0}function Os(e){w(this,e)}function Ls(){this.succ_keys=[],this.fail_keys=[],this.friend_list_seq="0"}function ir(){this.successes=[],this.fails=[]}function ki(e){this.sub_code=0,this.relation=0,w(this,e)}function Ci(){this.black_list=[],this.err_list=[]}function Di(){this.black_list=[],this.err_list=[]}function Et(){this.blacklists=[],this.cur_list_seq=0,this.max_list_seq=0}function pt(){}function Je(){this.black_list_seq=0,this.create_time=0}function or(){this.friend_list_seq="0"}function ys(){this.friend_infos=[],this.apply_status_changes_list=[]}function qi(){this.apply_list_seq=0}function ar(){this.apply_infos=[],this.friends=[]}function wo(){this.friend_list_seq="0",this.apply_list_seq="0",this.apply_update_time=0}function Ro(){this.user_id="",this.apply_list_seq="0",this.update_time=0}function Vr(){this.attributes=[],this.action=0,this.friend_list_seq="0"}function Yr(){this.black_list=[]}function To(){this.black_list=[]}function Jr(){this.max_mute_seq=0,this.user_ids=[]}function Ii(){}function ur(e){w(this,e)}function Gs(){this.mute_info=[],this.error_user_list=[]}function Zs(e){this.mute_info=[],w(this,e)}function js(){this.target_users=[]}function Ai(e){w(this,e)}function wi(){this.succ_list=[],this.fail_list=[]}function qr(e){this.conv_type=0,this.mark_content=0,w(this,e)}function Hn(){}function cr(){this.conv_mark_list=[]}function At(){this.succ_list=[]}function Kn(){this.custom_status="",this.user_status=0,this.user_devices=0,this.expire_time=0,this.last_change_time=0,this.last_change_time_custom=0}function xo(){this.succ_list=[],this.err_list=[],this.min_seq=0,this.max_seq=0}function Va(){this.succ_list=[],this.err_list=[]}function Ya(){this.custom_status="",this.last_change_time=0,this.last_change_time_custom=0}function Ja(){this.succ_list=[]}d.hub=((j={}).HTTPRequest=(D.e=function(e,M){if(M=M||T.c(),e.txid&&M.u(8).u6(e.txid),e.appid&&M.u(16).u(e.appid),e.mode&&M.u(34).s(e.mode),e.id_name&&M.u(42).s(e.id_name),e.stick&&M.u(58).s(e.stick),e.service&&M.u(66).s(e.service),e.location&&M.u(74).s(e.location),e.method&&M.u(82).s(e.method),e.headers&&e.headers.length)for(let V=0;V<e.headers.length;++V)d.hub.HTTPRequest.HTTPHeader.e(e.headers[V],M.u(90).f()).l();return e.body&&M.u(98).b(e.body),e.mode_no&&M.u(112).i(e.mode_no),e.service_no&&M.u(120).i(e.service_no),e.method_no&&M.u(128).i(e.method_no),e.sdk_type&&M.u(136).i(e.sdk_type),e.zegoconn_run_env&&M.u(144).i(e.zegoconn_run_env),e.zegoconn_version&&M.u(152).u(e.zegoconn_version),M},D.HTTPHeader=(S.e=function(e,M){return M=M||T.c(),e.name&&M.u(10).s(e.name),e.val&&M.u(18).s(e.val),M},S.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.HTTPRequest.HTTPHeader;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.name=e.s();break;case 2:v.val=e.s();break;default:e.sk(7&Z)}}return v},S),D),j.HTTPResponse=(y.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.HTTPResponse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.txid=e.u6(1);break;case 2:v.headers.push(d.hub.HTTPRequest.HTTPHeader.d(e,e.u()));break;case 3:v.status_code=e.i();break;case 4:v.body=e.b();break;default:e.sk(7&Z)}}return v},y),j.PCUpwardMessage=(k.e=function(e,M){if(M=M||T.c(),e.txid&&M.u(8).u6(e.txid),e.appid&&M.u(16).u(e.appid),e.mode_no&&M.u(32).i(e.mode_no),e.id_name&&M.u(42).s(e.id_name),e.service_no&&M.u(48).i(e.service_no),e.payload&&M.u(66).b(e.payload),e.sdk_type&&M.u(72).i(e.sdk_type),e.wss_message_type&&M.u(80).u(e.wss_message_type),e.wss_path&&M.u(90).s(e.wss_path),e.zegoconn_version&&M.u(104).u(e.zegoconn_version),e.zegoconn_run_env&&M.u(112).i(e.zegoconn_run_env),e.geofencing_type&&M.u(136).u(e.geofencing_type),e.geofencings&&e.geofencings.length)for(let V=0;V<e.geofencings.length;++V)M.u(144).u(e.geofencings[V]);return M},k),j.PCDownwardMessage=(b.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.PCDownwardMessage;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.payload=e.b();break;case 2:v.wss_message_type=e.u();break;default:e.sk(7&Z)}}return v},b),j.PCEstablished=(U.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.PCEstablished;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.elapse=e.u();break;case 2:v.from=e.u();break;default:e.sk(7&Z)}}return v},U),j.Redirect=(z.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.Redirect;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.rand=e.s();break;case 2:v.secret=e.s();break;case 3:v.groups.push(d.hub.AccesshubDispatchGroup.d(e,e.u()));break;case 4:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.opt_ports.push(e.u());else v.opt_ports.push(e.u());break;case 5:v.wss_groups.push(d.hub.WssAccesshubDispatchGroup.d(e,e.u()));break;default:e.sk(7&Z)}}return v},z),j.PushException=(P.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.PushException;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.reason=e.i();break;case 2:v.msg=e.s();break;case 3:v.txid=e.u6(1);break;default:e.sk(7&Z)}}return v},P),j.CloseConnection=(H.e=function(e,M){return M=M||T.c(),e.reason&&M.u(8).i(e.reason),e.msg&&M.u(18).s(e.msg),e.action&&M.u(24).i(e.action),M},H.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.CloseConnection;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.reason=e.i();break;case 2:v.msg=e.s();break;case 3:v.action=e.i();break;default:e.sk(7&Z)}}return v},H),j.GetSvraddrRequest=(Q.e=function(e,M){if(M=M||T.c(),e.txid&&M.u(8).u6(e.txid),e.appid&&M.u(16).u(e.appid),e.mode_no&&M.u(32).i(e.mode_no),e.id_name&&M.u(42).s(e.id_name),e.sdk_type&&M.u(48).i(e.sdk_type),e.zegoconn_run_env&&M.u(56).i(e.zegoconn_run_env),e.zegoconn_version&&M.u(64).u(e.zegoconn_version),e.geofencing_type&&M.u(80).u(e.geofencing_type),e.geofencings&&e.geofencings.length)for(let V=0;V<e.geofencings.length;++V)M.u(88).u(e.geofencings[V]);return M},Q),j.GetSvraddrResponseData=(J.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.GetSvraddrResponseData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.txid=e.u6(1);break;case 2:v.geofencing_id=e.u();break;case 3:v.svraddr_ver=e.u();break;case 5:v.zegons=e.s();break;case 7:v.accesshub=e.s();break;case 9:v.logreport=e.s();break;case 11:v.detaillog=e.s();break;case 13:v.stunsvr=e.s();break;case 15:v.zimfile=e.s();break;case 17:v.accesshub_sni=e.s();break;case 18:v.accesshub_web=e.s();break;case 19:v.logreport_web=e.s();break;default:e.sk(7&Z)}}return v},J),j.GetSvraddrResponse=(L.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.GetSvraddrResponse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.i();break;case 2:v.message=e.s();break;case 3:Object.assign(v,d.hub.GetSvraddrResponseData.d(e,e.u()));break;default:e.sk(7&Z)}}return v},L),j.GetAppConfigRequest=(q.e=function(e,M){return M=M||T.c(),e.txid&&M.u(8).u6(e.txid),e.appid&&M.u(16).u(e.appid),e.mode_no&&M.u(32).i(e.mode_no),e.id_name&&M.u(42).s(e.id_name),e.config_key&&M.u(50).s(e.config_key),e.token&&M.u(82).s(e.token),e.sdk_type&&M.u(88).i(e.sdk_type),e.zegoconn_version&&M.u(96).u(e.zegoconn_version),e.zegoconn_run_env&&M.u(104).i(e.zegoconn_run_env),e.is_special_customer&&M.u(128).u(e.is_special_customer),M},q),j.GetAppConfigResponseData=(B.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.GetAppConfigResponseData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.txid=e.u6(1);break;case 2:Object.assign(v,d.hub.InitConfig.d(e.b()));break;case 3:v.ts=e.u6();break;case 4:v.etag=e.u();break;default:e.sk(7&Z)}}return v},B),j.GetAppConfigResponse=(Y.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.GetAppConfigResponse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.i();break;case 2:v.message=e.s();break;case 3:Object.assign(v,d.hub.GetAppConfigResponseData.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Y),j.AccesshubDispatchRequest=(K.e=function(e,M){if(M=M||T.c(),e.txid&&M.u(8).u6(e.txid),e.appid&&M.u(16).u(e.appid),e.mode_no&&M.u(32).i(e.mode_no),e.id_name&&M.u(42).s(e.id_name),e.sdk_type&&M.u(48).i(e.sdk_type),e.zegoconn_version&&M.u(56).u(e.zegoconn_version),e.zegoconn_run_env&&M.u(64).i(e.zegoconn_run_env),e.geofencing_type&&M.u(88).u(e.geofencing_type),e.geofencings&&e.geofencings.length)for(let V=0;V<e.geofencings.length;++V)M.u(96).u(e.geofencings[V]);return M},K),j.AccesshubDispatchResponseData=(ee.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.AccesshubDispatchResponseData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.txid=e.u6(1);break;case 2:v.rand=e.s();break;case 3:v.secret=e.s();break;case 4:v.groups.push(d.hub.AccesshubDispatchGroup.d(e,e.u()));break;case 5:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.opt_ports.push(e.u());else v.opt_ports.push(e.u());break;case 6:v.wss_groups.push(d.hub.WssAccesshubDispatchGroup.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ee),j.AccesshubDispatchResponse=(oe.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.AccesshubDispatchResponse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.i();break;case 2:v.message=e.s();break;case 3:Object.assign(v,d.hub.AccesshubDispatchResponseData.d(e,e.u()));break;default:e.sk(7&Z)}}return v},oe),j.AccesshubDispatchGroup=(ae.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.AccesshubDispatchGroup;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group=e.s();break;case 2:v.quic_nodes.push(e.s());break;case 3:v.mtcp_nodes.push(e.s());break;case 4:v.wss_nodes.push(e.s());break;default:e.sk(7&Z)}}return v},ae),j.WssAccesshubDispatchGroup=(X.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.WssAccesshubDispatchGroup;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group=e.s();break;case 2:v.host=e.s();break;case 3:v.main_domain=e.s();break;default:e.sk(7&Z)}}return v},X),j.AppConfig=(re.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.AppConfig;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.test_id=e.i();break;case 2:v.domain=e.s();break;case 3:v.flexible_domain=e.s();break;case 4:v.replace_flexible_domain=e.s();break;default:e.sk(7&Z)}}return v},re),j.InitConfig=(ie.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.hub.InitConfig;e.pos<V;){var Z=e.u();Z>>>3==1?Object.assign(v,d.hub.AppConfig.d(e,e.u())):e.sk(7&Z)}return v},ie),j),d.zim=((C={}).CodeMsg=(ge.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CodeMsg;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;default:e.sk(7&Z)}}return v},ge),C.Header=(_e.e=function(e,M){return M=M||T.c(),e.cmd&&M.u(10).s(e.cmd),e.seq&&M.u(16).u(e.seq),e.timestamp&&M.u(24).i6(e.timestamp),e.app_id&&M.u(32).u(e.app_id),e.user_id&&M.u(42).s(e.user_id),e.session_id&&M.u(48).i6(e.session_id),e.user_nid&&M.u(56).i6(e.user_nid),e.controls&&M.u(66).b(e.controls),e.product&&M.u(72).i(e.product),e.flags&&M.u(82).b(e.flags),e.caller_type&&M.u(88).i(e.caller_type),M},_e.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.Header;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.cmd=e.s();break;case 2:v.seq=e.u();break;case 3:v.timestamp=e.i6(1);break;case 4:v.app_id=e.u();break;case 5:v.user_id=e.s();break;case 6:v.session_id=e.i6();break;case 7:v.user_nid=e.i6();break;case 8:v.controls=e.b();break;case 9:v.product=e.i();break;case 10:v.flags=e.b();break;case 11:v.caller_type=e.i();break;default:e.sk(7&Z)}}return v},_e),C.HbRsp=(ke.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.HbRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.heartbeat_interval=e.u();break;case 4:v.hb_timeout=e.u();break;case 5:v.server_timestamp=e.i6(1);break;case 6:var Ie=d.zim.StMsgClientInfo.d(e,e.b());v.zim_payload={user_status_seq:+Ie.conv_sid};break;default:e.sk(7&Z)}}return v},ke),C.HandshakeReq=(De.e=function(e,M){if(M=M||T.c(),e.term_type&&M.u(8).i(e.term_type),e.net_type&&M.u(16).i(e.net_type),e.sdk_ver&&M.u(24).u(e.sdk_ver),e.forward_ip&&e.forward_ip.length)for(let V=0;V<e.forward_ip.length;++V)M.u(34).s(e.forward_ip[V]);return e.device_id&&M.u(42).s(e.device_id),e.server_addr&&M.u(50).s(e.server_addr),e.channel_index&&M.u(56).u(e.channel_index),M},De),C.LoginReq=(Re.e=function(e,M){return M=M||T.c(),e.sdk_ver&&M.u(8).u(e.sdk_ver),e.user_name&&M.u(18).b(e.user_name),e.term_type&&M.u(24).i(e.term_type),e.net_type&&M.u(32).i(e.net_type),e.device_id&&M.u(42).s(e.device_id),e.server_ip&&M.u(50).s(e.server_ip),e.channel_index&&M.u(56).u(e.channel_index),e.client_stamp&&M.u(66).b(e.client_stamp),e.k1_sign&&M.u(74).b(e.k1_sign),e.login_token&&M.u(82).b(e.login_token),e.relogin_token&&M.u(90).b(e.relogin_token),e.zpns_push_id&&M.u(98).s(e.zpns_push_id),e.login_sign&&M.u(106).b(e.login_sign),e.old_session_id&&M.u(120).i6(e.old_session_id),e.custom_status&&M.u(130).s(e.custom_status),M},Re),C.LoginRsp=(we.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.LoginRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.k2_sign=e.b();break;case 4:v.hb_interval=e.u();break;case 5:v.hb_timeout=e.u();break;case 6:v.server_timestamp=e.i6(1);break;case 7:v.redirect_server_ip=e.s();break;case 8:v.server_ips.push(e.s());break;case 9:v.login_server_ip=e.s();break;case 10:v.relogin_token=e.b();break;case 11:v.redirect_server.push(e.s());break;case 12:v.usermail_hb_interval=e.u();break;case 13:v.fetch_c2c_msg_list=e.i();break;case 14:v.fetch_conv_list=e.i();break;case 15:v.fetch_conv_msg_list=e.i();break;case 16:v.fetch_group_list=e.i();break;case 17:v.im_conf_json=e.s();break;case 19:v.register_time=e.i6(1);break;default:e.sk(7&Z)}}return v},we),C.PushListRequest=(Oe.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushListRequest;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.push_requests.push(d.zim.PushRequest.d(e,e.u()));break;case 2:v.qos_flag=e.u();break;case 3:v.send_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Oe),C.PushRequest=(Ae.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRequest;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.sub_cmd=e.s();break;case 2:v.msg_body=e.b();break;case 3:v.sender_user_id=e.s();break;case 4:v.msg_id=e.s();break;case 5:v.sender_user_nid=e.u6();break;default:e.sk(7&Z)}}return v},Ae),C.PushListRsp=(Pe.e=function(e,M){if(M=M||T.c(),e.code&&M.u(8).u(e.code),e.message&&M.u(18).s(e.message),e.push_responses&&e.push_responses.length)for(let V=0;V<e.push_responses.length;++V)d.zim.StGroupAttribute.e(e.push_responses[V],M.u(26).f()).l();return e.server_send_time&&M.u(32).i6(e.server_send_time),M},Pe),C.StMsgClientInfo=(Ue.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StMsgClientInfo(e)),M=M||T.c(),e.conv_sid&&M.u(8).i6(e.conv_sid),e.client_msg_seq&&M.u(16).i6(e.client_msg_seq),e.old_seq&&M.u(24).i6(e.old_seq),e.local_msg_id&&M.u(32).i6(e.local_msg_id),M},Ue.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgClientInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_sid=e.i6().toString();break;case 2:v.client_msg_seq=e.i6(1);break;case 3:v.old_seq=e.i6(1);break;case 4:v.local_msg_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},Ue),C.StOfflinePushInfo=(Ne.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StOfflinePushInfo(e)),M=M||T.c(),e.enable_push&&M.u(8).i(e.enable_push),e.title&&M.u(18).s(e.title),e.content&&M.u(26).s(e.content),e.payload&&M.u(34).s(e.payload),e.pushStrategyId&&M.u(42).s(e.pushStrategyId),e.custom_map)for(let v=Object.keys(e.custom_map),Z=0;Z<v.length;++Z){var V=e.custom_map[v[Z]];V&&M.u(50).f().u(10).s(v[Z]).u(18).s(V).l()}return e.enable_force_push&&M.u(72).i(e.enable_force_push),M},Ne.d=function(e,M,V){e instanceof O||(e=O.c(e));let v,Z,Ie=M===void 0?e.len:e.pos+M,ze=new d.zim.StOfflinePushInfo;for(;e.pos<Ie;){var ct=e.u();switch(ct>>>3){case 1:ze.enable_push=e.i();break;case 2:ze.title=e.s();break;case 3:ze.content=e.s();break;case 4:ze.payload=e.s();break;case 5:ze.pushStrategyId=e.s();break;case 6:ze.custom_map||(ze.custom_map={});var ft=e.u()+e.pos;for(v="",Z="";e.pos<ft;){var Ri=e.u();switch(Ri>>>3){case 1:v=e.s();break;case 2:Z=e.s();break;default:e.sk(7&Ri)}}ze.custom_map[v]=Z;break;case 7:ze.priority=e.i();break;case 9:ze.enable_force_push=e.i();break;default:e.sk(7&ct)}}return V?ze:void 0},Ne),C.PictureMsgBody=(mt.e=function(e,M){return M=M||T.c(),e.version&&M.u(10).s(e.version),e.file_type&&M.u(16).i(e.file_type),e.file_uid&&M.u(26).s(e.file_uid),e.file_name&&M.u(34).s(e.file_name),e.file_size&&M.u(42).s(e.file_size),e.file_download_url&&M.u(50).s(e.file_download_url),e.large_image_download_url&&M.u(58).s(e.large_image_download_url),e.thumbnail_download_url&&M.u(66).s(e.thumbnail_download_url),e.large&&M.u(74).s(e.large),e.thumbnail&&M.u(82).s(e.thumbnail),e.origin_width&&M.u(88).u(e.origin_width),e.origin_height&&M.u(96).u(e.origin_height),e.big_width&&M.u(104).u(e.big_width),e.big_height&&M.u(112).u(e.big_height),e.small_width&&M.u(120).u(e.small_width),e.small_height&&M.u(128).u(e.small_height),M},mt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PictureMsgBody;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.version=e.s();break;case 2:v.file_type=e.i();break;case 3:v.file_uid=e.s();break;case 4:v.file_name=e.s();break;case 5:v.file_size=e.s();break;case 6:v.file_download_url=e.s();break;case 7:v.large_image_download_url=e.s();break;case 8:v.thumbnail_download_url=e.s();break;case 9:v.large=e.s();break;case 10:v.thumbnail=e.s();break;case 11:v.origin_width=e.u();break;case 12:v.origin_height=e.u();break;case 13:v.big_width=e.u();break;case 14:v.big_height=e.u();break;case 15:v.small_width=e.u();break;case 16:v.small_height=e.u();break;default:e.sk(7&Z)}}return v},mt),C.VideoMsgBody=(gt.e=function(e,M){return M=M||T.c(),e.version&&M.u(10).s(e.version),e.file_type&&M.u(16).i(e.file_type),e.file_uid&&M.u(26).s(e.file_uid),e.file_name&&M.u(34).s(e.file_name),e.file_size&&M.u(42).s(e.file_size),e.file_download_url&&M.u(50).s(e.file_download_url),e.media_duration&&M.u(58).s(e.media_duration),e.video_first_frame_download_url&&M.u(66).s(e.video_first_frame_download_url),e.thumbnail&&M.u(74).s(e.thumbnail),e.frame_width&&M.u(80).u(e.frame_width),e.frame_height&&M.u(88).u(e.frame_height),M},gt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.VideoMsgBody;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.version=e.s();break;case 2:v.file_type=e.i();break;case 3:v.file_uid=e.s();break;case 4:v.file_name=e.s();break;case 5:v.file_size=e.s();break;case 6:v.file_download_url=e.s();break;case 7:v.media_duration=e.s();break;case 8:v.video_first_frame_download_url=e.s();break;case 9:v.thumbnail=e.s();break;case 10:v.frame_width=e.u();break;case 11:v.frame_height=e.u();break;default:e.sk(7&Z)}}return v},gt),C.StMultipleMsgContent=(Rt.e=function(e,M){if(M=M||T.c(),e.msgs&&e.msgs.length)for(let V=0;V<e.msgs.length;++V)d.zim.StMultipleMsgInfo.e(e.msgs[V],M.u(10).f()).l();return M},Rt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMultipleMsgContent;e.pos<V;){var Z=e.u();Z>>>3==1?v.msgs.push(d.zim.StMultipleMsgInfo.d(e,e.u())):e.sk(7&Z)}return v},Rt),C.StMultipleMsgInfo=(ps.e=function(e,M){return M=M||T.c(),e.msg_type&&M.u(8).i(e.msg_type),e.index&&M.u(16).i(e.index),e.msg&&M.u(26).b(e.msg),e.searched_content&&M.u(34).s(e.searched_content),e.is_upload&&M.u(40).u(e.is_upload),M},ps.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMultipleMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_type=e.i();break;case 2:v.index=e.i();break;case 3:v.msg=e.b();break;case 4:v.searched_content=e.s();break;case 5:v.is_upload=e.u();break;default:e.sk(7&Z)}}return v},ps),C.StMsgCombineInfo=(hr.e=function(e,M){return M=M||T.c(),e.title&&M.u(10).s(e.title),e.summary&&M.u(18).s(e.summary),e.file_body&&d.zim.VideoMsgBody.e(e.file_body,M.u(26).f()).l(),M},hr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgCombineInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.title=e.s();break;case 2:v.summary=e.s();break;case 3:v.file_body=d.zim.VideoMsgBody.d(e,e.u());break;default:e.sk(7&Z)}}return v},hr),C.MsgCombineInfo=(fs.e=function(e,M){if(M=M||T.c(),e.send_user_map)for(let V=Object.keys(e.send_user_map),v=0;v<V.length;++v)M.u(10).f().u(10).s(V[v]),d.zim.SendUserInfo.e(e.send_user_map[V[v]],M.u(18).f()).l().l();if(e.child&&e.child.length)for(let V=0;V<e.child.length;++V)d.zim.StConvMsgInfoTree.e(e.child[V],M.u(18).f()).l();return M},fs.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.MsgCombineInfo;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:var ct=e.u()+e.pos;for(V="",v=null;e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.s();break;case 2:v=d.zim.SendUserInfo.d(e,e.u());break;default:e.sk(7&ft)}}Ie.send_user_map[V]=v;break;case 2:Ie.child.push(d.zim.StConvMsgInfoTree.d(e,e.u()));break;default:e.sk(7&ze)}}return Ie},fs),C.StConvMsgInfoTree=(St.e=function(e,M){return M=M||T.c(),e.msg_type&&M.u(8).i(e.msg_type),e.msg&&M.u(18).b(e.msg),e.sender_user_id&&M.u(26).s(e.sender_user_id),e.msg_time&&M.u(32).i6(e.msg_time),e.sub_type&&M.u(40).i6(e.sub_type),e.searched_content&&M.u(50).s(e.searched_content),e.extended_data&&M.u(58).s(e.extended_data),e.cb_id&&M.u(66).s(e.cb_id),e.root_id&&M.u(72).u(e.root_id),e.parent_id&&M.u(82).s(e.parent_id),e.is_server&&M.u(88).u(e.is_server),e.root_conv_type&&M.u(96).u(e.root_conv_type),e.root_send_user_id&&M.u(106).s(e.root_send_user_id),e.root_conv_id&&M.u(114).s(e.root_conv_id),e.real_root_id&&M.u(120).i6(e.real_root_id),M},St.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StConvMsgInfoTree;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_type=e.i();break;case 2:v.msg=e.b();break;case 3:v.sender_user_id=e.s();break;case 4:v.msg_time=e.i6(1);break;case 5:v.sub_type=e.i6(1);break;case 6:v.searched_content=e.s();break;case 7:v.extended_data=e.s();break;case 8:v.cb_id=e.s();break;case 9:v.root_id=e.u().toString();break;case 10:v.parent_id=e.s();break;case 11:v.is_server=e.u();break;case 12:v.root_conv_type=e.u();break;case 13:v.root_send_user_id=e.s();break;case 14:v.root_conv_id=e.s();break;case 15:v.real_root_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},St),C.SendUserInfo=(Gt.e=function(e,M){return M=M||T.c(),e.sender_user_name&&M.u(10).b(e.sender_user_name),e.sender_user_avatar&&M.u(18).b(e.sender_user_avatar),e.update_time&&M.u(24).i6(e.update_time),M},Gt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SendUserInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.sender_user_name=e.b();break;case 2:v.sender_user_avatar=e.b();break;case 3:v.update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Gt),C.StCommandMsgInfo=(ot.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StCommandMsgInfo(e)),M=M||T.c(),e.msg_type&&M.u(8).i(e.msg_type),e.msg&&M.u(18).b(e.msg),e.priority_type&&M.u(24).i(e.priority_type),e.payload&&M.u(34).b(e.payload),e.conv_id&&M.u(42).s(e.conv_id),M},ot.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StCommandMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_type=e.i();break;case 2:v.msg=e.b();break;case 3:v.priority_type=e.i();break;case 4:v.payload=e.b();break;case 5:v.conv_id=e.s();break;default:e.sk(7&Z)}}return v},ot),C.StCommandSvrInfo=(Ht.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StCommandSvrInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_id=e.i6().toString();break;case 2:v.sender_user_id=e.s();break;case 3:v.sender_user_name=e.b();break;case 4:v.msg_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Ht),C.StRecvCommandInfo=(Ye.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StRecvCommandInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.command_msg_info=d.zim.StCommandMsgInfo.d(e,e.u());break;case 2:v.command_svr_info=d.zim.StCommandSvrInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Ye),C.StConvMsgInfo=(qs.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StConvMsgInfo(e)),M=M||T.c(),e.msg_type&&M.u(8).i(e.msg_type),e.msg&&M.u(18).b(e.msg),e.priority_type&&M.u(24).i(e.priority_type),e.conv_id&&M.u(34).s(e.conv_id),e.msg_client_info&&d.zim.StMsgClientInfo.e(e.msg_client_info,M.u(42).f()).l(),e.payload&&M.u(50).b(e.payload),e.offline_push&&d.zim.StOfflinePushInfo.e(e.offline_push,M.u(58).f()).l(),e.has_receipt&&M.u(80).i(e.has_receipt),e.at&&e.at.length)for(let V=0;V<e.at.length;++V)M.u(90).s(e.at[V]);return e.at_all&&M.u(96).bl(e.at_all),e.sub_msg_type&&M.u(104).i(e.sub_msg_type),e.searched_content&&M.u(122).s(e.searched_content),e.reply_info&&d.zim.StMsgReplyInfo.e(e.reply_info,M.u(146).f()).l(),M},qs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StConvMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_type=e.i();break;case 2:v.msg=e.b();break;case 3:v.priority_type=e.i();break;case 4:v.conv_id=e.s();break;case 5:v.msg_client_info=d.zim.StMsgClientInfo.d(e,e.u());break;case 6:v.payload=e.b();break;case 7:v.offline_push=d.zim.StOfflinePushInfo.d(e,e.u());break;case 8:v.pack_count=e.i();break;case 9:v.pack_index=e.i();break;case 10:v.has_receipt=e.i();break;case 11:v.at.push(e.s());break;case 12:v.at_all=e.bl();break;case 13:v.sub_msg_type=e.i();break;case 14:v.save=e.i();break;case 15:v.searched_content=e.s();break;case 17:v.sender_unaware=e.i();break;case 18:v.reply_info=d.zim.StMsgReplyInfo.d(e,e.u());break;case 19:v.no_unread=e.bl();break;default:e.sk(7&Z)}}return v},qs),C.StMsgSvrInfo=(Xt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgSvrInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_id=e.i6().toString();break;case 2:v.conv_msg_seq=e.i6(1);break;case 3:v.c2c_msg_seq=e.i6(1);break;case 4:v.sender_user_id=e.s();break;case 5:v.sender_user_name=e.b();break;case 6:v.msg_time=e.i6(1);break;case 7:v.has_content=e.i();break;case 9:v.msg_rsp=e.b();break;case 10:v.version=e.u();break;case 11:v.is_server=e.u();break;case 12:v.reactions=d.zim.StReactions.d(e,e.u());break;case 13:v.edit=d.zim.StEditInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Xt),C.StRecvMsgInfo=(Wt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StRecvMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_info=d.zim.StConvMsgInfo.d(e,e.u());break;case 2:v.msg_svr_info=d.zim.StMsgSvrInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Wt),C.FetchMsgInfo=(hs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_body=e.b();break;case 2:v.msg_dyn_info=d.zim.MsgDynInfo.d(e,e.u());break;case 3:v.msglist_seq=e.i6(1);break;default:e.sk(7&Z)}}M=d.zim.StRecvMsgInfo.d(v.msg_body);var{msg_status:Ie,has_receipt:ze,reply_count:ct,edit_msg_seq:ft}=(M.msg_svr_info.conv_msg_seq?M.msg_svr_info.c2c_msg_seq=v.msglist_seq:M.msg_svr_info.conv_msg_seq=v.msglist_seq,v.msg_dyn_info);return M.msg_info.msg_status=Ie,M.msg_info.has_receipt=ze,ft&&M.msg_svr_info.edit&&(M.msg_svr_info.edit.edit_msg_seq=ft),ct&&M.msg_info.reply_info&&(M.msg_info.reply_info.reply_count=ct),M},hs),C.MsgDynInfo=(Kt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.MsgDynInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_status=e.i();break;case 2:v.has_receipt=e.bl()?1:0;break;case 3:v.reply_count=e.u();break;case 4:v.edit_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Kt),C.CallReq=(Js.e=function(e,M){if(M=M||T.c(),e.call_id&&M.u(10).s(e.call_id),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(18).s(e.user_ids[V]);return e.timeout&&M.u(24).i(e.timeout),e.payload&&M.u(34).b(e.payload),e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(42).f()).l(),e.call_mode&&M.u(48).i(e.call_mode),e.check_ack_timeout&&M.u(56).bl(e.check_ack_timeout),M},Js),C.CallRsp=(ms.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.timeout=e.i();break;case 4:v.call_id=e.s();break;case 5:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 6:v.call_seq=e.i6(1);break;case 7:v.call_list_seq=e.i6(1);break;case 8:v.create_time=e.i6(1);break;case 9:v.new_err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ms),C.CallCancelReq=(Dt.e=function(e,M){if(M=M||T.c(),e.call_id&&M.u(10).s(e.call_id),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(18).s(e.user_ids[V]);return e.state&&M.u(24).i(e.state),e.extended_data&&M.u(34).b(e.extended_data),e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(42).f()).l(),M},Dt),C.CallCancelRsp=(qt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallCancelRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 4:v.call_seq=e.i6(1);break;case 5:v.call_list_seq=e.i6(1);break;case 6:v.new_err_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 7:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},qt),C.CallUserInfo=(He.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallUserInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_state=e.u();break;case 3:v.extended_data=e.b();break;case 4:v.is_timeout=e.i6(1);break;case 5:v.accept_time=e.i6(1);break;case 6:v.quit_time=e.i6(1);break;case 7:v.residue_timeout_time=e.i6(1);break;case 8:v.user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},He),C.CallInfoRsp=(rs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.user_list.push(d.zim.CallUserInfo.d(e,e.u()));break;case 4:v.call_seq=e.i6(1);break;case 5:v.now_time=e.i6(1);break;default:e.sk(7&Z)}}return v},rs),C.CallListRsp=(Or.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.calls.push(d.zim.CallInfo.d(e,e.u()));break;case 6:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},Or),C.CallInfo=(Lr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 3:v.create_time=e.i6(1);break;case 4:v.call_list_seq=e.i6(1);break;case 5:v.call_status=e.i6(1);break;case 6:v.call_user_list.push(d.zim.UserMailCallUserInfo.d(e,e.u()));break;case 7:v.now_time=e.i6(1);break;case 8:v.call_mode=e.i();break;case 9:v.payload=e.b();break;case 10:v.destroy_time=e.i6(1);break;case 11:v.accept_time=e.i6(1);break;case 12:v.quit_time=e.i6(1);break;case 13:v.user_timeout=e.i();break;case 14:v.invite_time=e.i6(1);break;case 15:v.inviter=e.s();break;default:e.sk(7&Z)}}return v},Lr),C.CallInviteReq=(Is.e=function(e,M){if(M=M||T.c(),e.call_id&&M.u(10).s(e.call_id),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(18).s(e.user_ids[V]);return e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(26).f()).l(),M},Is),C.CallInviteRsp=(mr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallInviteRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.call_id=e.s();break;case 4:v.call_seq=e.i6(1);break;case 5:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 6:v.timeout=e.i();break;case 7:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},mr),C.CallQuitReq=(gs.e=function(e,M){return M=M||T.c(),e.call_id&&M.u(10).s(e.call_id),e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(18).f()).l(),e.payload&&M.u(26).b(e.payload),M},gs),C.CallQuitRsp=(Qt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallQuitRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.call_list_seq=e.i6(1);break;case 4:v.talk_time=e.i6(1);break;case 5:v.quit_time=e.i6().toString();break;case 6:v.call_seq=e.i6(1);break;case 7:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},Qt),C.CallEnterRsp=(Xs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallEnterRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.call_seq=e.i6(1);break;case 4:v.timeout=e.i();break;case 5:v.create_time=e.i6(1);break;case 6:v.call_list_seq=e.i6(1);break;case 7:v.caller=e.s();break;case 8:v.accept_time=e.i6(1);break;case 9:v.extended_data=e.b();break;case 10:v.user_state_list.push(d.zim.CallUserInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Xs),C.PushCallInvited=(_s.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallInvited;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.timeout=e.i();break;case 3:v.caller=e.s();break;case 4:v.payload=e.b();break;case 5:v.call_seq=e.i6(1);break;case 6:v.call_list_seq=e.i6(1);break;case 7:v.user_state_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 8:v.call_mode=e.i();break;case 9:v.create_time=e.i6(1);break;case 10:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},_s),C.PushCallAccept=(dt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallAccept;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.invitee=e.s();break;case 3:v.caller=e.s();break;case 4:v.extended_data=e.b();break;case 5:v.call_seq=e.i6(1);break;case 6:v.call_list_seq=e.i6(1);break;case 7:v.accept_time=e.i6(1);break;case 9:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},dt),C.PushCallRefuse=(It.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallRefuse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.invitee=e.s();break;case 3:v.caller=e.s();break;case 4:v.call_state=e.u();break;case 5:v.extended_data=e.b();break;case 6:v.call_seq=e.i6(1);break;case 7:v.call_list_seq=e.i6(1);break;case 9:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},It),C.PushCallCancel=(Ps.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallCancel;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 4:v.state=e.i();break;case 5:v.extended_data=e.b();break;case 6:v.call_seq=e.i6(1);break;case 7:v.call_list_seq=e.i6(1);break;case 9:v.user_ids.push(e.s());break;case 10:v.operator=e.s();break;case 11:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},Ps),C.PushOnCallInvited=(vn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushOnCallInvited;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.create_time=e.i6(1);break;case 3:v.timeout=e.i();break;case 4:v.caller=e.s();break;case 5:v.invitee=e.s();break;case 6:v.call_seq=e.i6(1);break;case 7:v.call_list_seq=e.i6(1);break;case 8:v.payload=e.b();break;case 9:v.user_state_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 11:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},vn),C.PushCallQuit=(Wn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallQuit;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.invitee=e.s();break;case 3:v.caller=e.s();break;case 4:v.call_seq=e.i6(1);break;case 5:v.payload=e.b();break;case 6:v.accept_time=e.i6(1);break;case 7:v.quit_time=e.i6(1);break;case 8:v.call_user_session_id=e.i6().toString();break;case 9:v.call_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Wn),C.PushCallDestroy=($n.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallDestroy;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 3:v.call_list_seq=e.i6(1);break;case 4:v.payload=e.b();break;case 5:v.talk_time=e.i6(1);break;case 6:v.destroy_time=e.i6(1);break;case 7:v.operator=e.s();break;case 8:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},$n),C.PushCallAck=(bn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallAck;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 3:v.invitee=e.s();break;case 4:v.call_seq=e.i6(1);break;case 6:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},bn),C.PushCallEnter=(Ws.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallEnter;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 3:v.create_time=e.i6(1);break;case 4:v.enter_time=e.i6(1);break;case 5:v.call_list_seq=e.i6(1);break;case 6:v.call_payload=e.b();break;case 7:v.call_seq=e.i6(1);break;case 8:v.payload=e.b();break;case 9:v.user_id=e.s();break;case 10:v.user_state_list.push(d.zim.UserMailCallUserInfo.d(e,e.u()));break;case 11:v.timeout=e.i();break;case 12:v.call_user_session_id=e.i6().toString();break;default:e.sk(7&Z)}}return v},Ws),C.PushCallAckTimeout=(Gr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCallAckTimeout;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.call_id=e.s();break;case 2:v.caller=e.s();break;case 3:v.session_id=e.i6().toString();break;case 4:v.invitees.push(e.s());break;default:e.sk(7&Z)}}return v},Gr),C.AtInfo=(vs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.AtInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_id=e.i6().toString();break;case 2:v.user_id=e.s();break;case 3:v.conv_msg_seq=e.i6(1);break;case 4:v.at_type=e.i();break;default:e.sk(7&Z)}}return v},vs),C.ConvInfo=(As.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ConvInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.conv_list_seq=e.i6(1);break;case 4:v.conv_msg_seq=e.i6(1);break;case 5:v.read_seq=e.i6(1);break;case 6:v.is_del=e.bl();break;case 7:v.last_msg=d.zim.StRecvMsgInfo.d(e,e.u());break;case 8:v.send_count_after_read=e.i6(1);break;case 9:v.last_msg_del=e.bl();break;case 10:v.last_del_msg_seq=e.i6(1);break;case 11:v.statemsg_seq=e.i6(1);break;case 12:v.receipt_max_conv_msg_seq=e.i6(1);break;case 13:v.at_max_conv_msg_seq=e.i6(1);break;case 14:v.at_all_max_conv_msg_seq=e.i6(1);break;case 15:v.update_time=e.i6(1);break;case 16:v.sub_read_count=e.i6(1);break;case 17:v.last_revoke_msg_seq=e.i6(1);break;case 18:v.last_msg_time=e.i6(1);break;case 19:v.at_info_list.push(d.zim.AtInfo.d(e,e.u()));break;case 20:v.group_tips_msg_type=e.i();break;default:e.sk(7&Z)}}return v},As),C.GetConvListRsp=($s.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetConvListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.conv_list.push(d.zim.ConvInfo.d(e,e.u()));break;case 4:v.conv_list_seq=e.i6(1);break;case 5:v.max_list_seq=e.i6(1);break;case 6:v.full_list=e.i();break;case 7:v.fetch_end=e.i();break;case 8:v.max_del_conv_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},$s),C.FetchConvMsgReq=(ws.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_type&&M.u(16).i(e.conv_type),e.conv_msg_seq&&M.u(24).i6(e.conv_msg_seq),e.count&&M.u(32).i(e.count),e.mode&&M.u(40).i(e.mode),e.login_fetch&&M.u(48).i(e.login_fetch),e.how&&M.u(56).i(e.how),e.degree&&M.u(64).u(e.degree),M},ws),C.FetchConvMsgRsp=(_t.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchConvMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.max_conv_msg_seq=e.i6(1);break;case 4:v.next_conv_msg_seq=e.i6(1);break;case 5:v.msgs.push(d.zim.FetchMsgInfo.d(e,e.u()));break;case 6:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},_t),C.FetchC2CMsgRsp=(yn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchC2CMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.msgs.push(d.zim.FetchMsgInfo.d(e,e.u()));break;case 4:v.c2c_msg_seq=e.i6(1);break;case 5:v.svr_c2c_msg_seq=e.i6(1);break;case 6:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},yn),C.UpdateReadSeqReq=(Mn.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_type&&M.u(16).i(e.conv_type),e.read_seq&&M.u(24).i6(e.read_seq),M},Mn),C.UserMailHbRsp=(Rs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.UserMailHbRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.conv_list_seq=e.i6(1);break;case 4:v.group_list_seq=e.i6(1);break;case 5:v.c2c_msg_seq=e.i6(1);break;case 7:v.seq_fallback_timeout=e.u();break;case 8:v.msg_to=e.u();break;case 9:v.msg_itvl=e.u();break;case 10:v.list_to=e.u();break;case 11:v.list_itvl=e.u();break;case 12:v.conv_to=e.u();break;case 13:v.conv_itvl=e.u();break;case 14:v.group_to=e.u();break;case 15:v.group_itvl=e.u();break;case 16:v.c2c_statemsg_seq=e.i6(1);break;case 17:v.extra_msg_list_seq=e.i6(1);break;case 18:v.conv_pinned_list_seq=e.i6(1);break;case 19:v.call_list_seq=e.i6(1);break;case 20:v.friend_list_seq=e.i6(1);break;case 21:v.friend_apply_list_seq=e.i6(1);break;case 22:v.black_list_seq=e.i6(1);break;case 23:v.delete_all_msg_time=e.i6(1);break;case 24:v.apply_expired_duration=e.i6(1);break;case 25:v.c2c_mute_max_seq=e.i6(1);break;case 26:v.user_info_seq=e.i6(1);break;case 27:v.group_apply_list_seq=e.i6(1);break;case 28:v.history_c2c_msg_seq=e.i6(1);break;case 29:v.conv_mark_seq=e.i6(1);break;case 30:v.subscribe_seq=e.u6(1);break;case 31:v.client_c2c_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Rs),C.ConvDelRsp=(ns.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ConvDelRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.conv_list_seq=e.i6(1);break;case 4:v.conv_msg_seq=e.i6(1);break;case 5:v.conv_pinned_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},ns),C.ConvDelMsgByMsgIdReq=(ei.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_type&&M.u(16).i(e.conv_type),e.msg_ids&&e.msg_ids.length){M.u(26).f();for(let V=0;V<e.msg_ids.length;++V)M.i6(e.msg_ids[V]);M.l()}return M},ei),C.C2CReadReceiptReq=(Sn.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&e.conv_msg_seq.length){M.u(18).f();for(let V=0;V<e.conv_msg_seq.length;++V)M.i6(e.conv_msg_seq[V]);M.l()}return M},Sn),C.C2CReadReceiptRsp=(kn.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.C2CReadReceiptRsp;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:Ie.code=e.u();break;case 2:Ie.message=e.s();break;case 3:var ct=e.u()+e.pos;for(V=0,v=0;e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.i6(1);break;case 2:v=e.i6(1);break;default:e.sk(7&ft)}}Ie.conv_msg_seq2_receipt_seq[V]=v;break;default:e.sk(7&ze)}}return Ie},kn),C.GetGroupReadReceiptDetailRsp=(ti.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetGroupReadReceiptDetailRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.read_members.push(e.i6(1));else v.read_members.push(e.i6(1));break;case 4:if((7&Z)==2)for(var ze=e.u()+e.pos;e.pos<ze;)v.unread_members.push(e.i6(1));else v.unread_members.push(e.i6(1));break;case 5:v.next_list_seq=e.u();break;case 6:v.read_count=e.sint32();break;case 7:v.unread_count=e.sint32();break;case 8:v.fetch_end=e.u();break;case 9:v.cur_member_all_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},ti),C.GetExtraMsgListRsp=(Ts.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetExtraMsgListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.list.push(d.zim.ExtraMsgContent.d(e,e.u()));break;case 4:v.next_list_seq=e.i6(1);break;case 5:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},Ts),C.ExtraMsgContent=(gr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ExtraMsgContent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.conv_msg_seq=e.i6(1);break;case 4:v.receipt_seq=e.i6(1);break;case 5:v.type=e.i();break;case 6:Object.assign(v,d.zim.StReceiptContent.d(e,e.u()));break;case 7:case 8:Object.assign(v,d.zim.StDeleteContent.d(e,e.u()));break;default:e.sk(7&Z)}}return v},gr),C.StReceiptContent=(is.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StReceiptContent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.read_count=e.sint32();break;case 2:v.unread_count=e.sint32();break;case 3:v.is_conv_read=e.u();break;default:e.sk(7&Z)}}return v},is),C.StDeleteContent=(Cn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StDeleteContent;e.pos<V;){var Z=e.u();if(Z>>>3==1)if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.del_conv_msg_seqs.push(e.i6(1));else v.del_conv_msg_seqs.push(e.i6(1));else e.sk(7&Z)}return v},Cn),C.PushReadReceipt=(Dn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushReadReceipt;e.pos<V;){var Z=e.u();Z>>>3==1?v.PushItems.push(d.zim.PushReadReceipt.PushItem.d(e,e.u())):e.sk(7&Z)}return v},Dn.PushItem=(er.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushReadReceipt.PushItem;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_msg_seq=e.i6(1);break;case 2:v.conv_id=e.s();break;case 3:v.conv_type=e.i();break;case 4:v.read_count=e.sint32();break;case 5:v.unread_count=e.sint32();break;case 6:v.receipt_seq=e.i6(1);break;case 7:v.is_conv_read=e.u();break;default:e.sk(7&Z)}}return v},er),Dn),C.GetStatemsgListReq=(qn.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.statemsg_seq&&M.u(16).i6(e.statemsg_seq),e.count&&M.u(24).sint32(e.count),e.degree&&M.u(32).u(e.degree),e.max_msg_seq&&M.u(40).i6(e.max_msg_seq),e.min_msg_seq&&M.u(48).i6(e.min_msg_seq),M},qn),C.RoomStatemsgListReq=(In.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.statemsg_seq&&M.u(32).i6(e.statemsg_seq),e.count&&M.u(40).sint32(e.count),e.degree&&M.u(48).u(e.degree),e.max_msg_seq&&M.u(56).i6(e.max_msg_seq),e.min_msg_seq&&M.u(64).i6(e.min_msg_seq),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},In),C.GetStatemsgListRsp=(Ji.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetStatemsgListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.statemsg_list.push(d.zim.StStatemsgContent.d(e,e.u()));break;case 4:v.next_statemsg_seq=e.i6(1);break;case 5:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},Ji),C.StStatemsgContent=(si.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.StStatemsgContent;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:Ie.conv_msg_seq=e.i6(1);break;case 2:Ie.msg_status=e.i();break;case 3:Ie.statemsg_seq=e.i6(1);break;case 4:Ie.conv_id=e.s();break;case 5:Ie.conv_type=e.i();break;case 6:Object.assign(Ie,d.zim.StRevokeContent.d(e.b()));break;case 7:Ie.reaction_seq=e.i6(1);break;case 8:var ct=e.u()+e.pos;for(V=0,v=[];e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.i();break;case 2:v=e.b();break;default:e.sk(7&ft)}}V==1?Ie.reaction_briefs=d.zim.StStateMsgReactionBrief.d(v).reaction_briefs:V==2&&(Ie.edit_msg_seq=Number(d.zim.StMsgClientInfo.d(v).conv_sid));break;default:e.sk(7&ze)}}return Ie},si),C.StStateMsgReactionBrief=(Zt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StStateMsgReactionBrief;e.pos<V;){var Z=e.u();Z>>>3==1?v.reaction_briefs.push(d.zim.StReactionBrief.d(e,e.u())):e.sk(7&Z)}return v},Zt),C.RevokeMsgReq=(ri.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.offline_push&&d.zim.StOfflinePushInfo.e(e.offline_push,M.u(26).f()).l(),e.payload&&M.u(34).b(e.payload),M},ri),C.GetUserStatusRsp=(Xi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetUserStatusRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.user_status_seq=e.i6(1);break;case 4:v.user_devices=e.i();break;case 5:v.last_change_time=e.i6(1);break;case 6:v.custom_status=e.s();break;case 7:v.user_status=e.i();break;case 8:v.last_change_time_custom=e.i6(1);break;default:e.sk(7&Z)}}return v.last_change_time_custom&&v.last_change_time_custom<1e10&&(v.last_change_time_custom*=1e3),v},Xi),C.StRevokeContent=(jr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StRevokeContent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.revoke_time=e.i6(1);break;case 3:v.msg_type=e.i();break;case 4:v.revoke_type=e.u();break;case 5:v.payload=e.b();break;case 6:v.msg_status=e.i();break;default:e.sk(7&Z)}}return v},jr),C.PushMsgRevoke=(ni.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushMsgRevoke;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.recv_msg_info=d.zim.StRecvMsgInfo.d(e,e.u());break;case 2:v.msg_status=e.i();break;case 3:v.statemsg_seq=e.i6(1);break;case 4:v.conv_type=e.i();break;default:e.sk(7&Z)}}return v},ni),C.EditMsgReq=(zr.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.msg_type&&M.u(24).i(e.msg_type),e.edit_type&&M.u(32).i(e.edit_type),e.msg&&M.u(42).b(e.msg),e.payload&&M.u(50).b(e.payload),e.at_list&&e.at_list.length)for(let V=0;V<e.at_list.length;++V)M.u(58).s(e.at_list[V]);if(e.is_at_all&&M.u(64).bl(e.is_at_all),e.sub_msg_type&&M.u(72).i(e.sub_msg_type),e.searched_content&&M.u(82).s(e.searched_content),e.audit_list&&e.audit_list.length){M.u(90).f();for(let V=0;V<e.audit_list.length;++V)M.i(e.audit_list[V]);M.l()}return e.msg_id&&M.u(96).i6(e.msg_id),M},zr),C.EditMsgRsp=(Wi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.EditMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.state_msg_seq=e.i6(1);break;case 4:v.edit_msg_seq=e.i6(1);break;case 5:v.edit_time=e.i6(1);break;case 6:v.msg_rsp=e.b();break;default:e.sk(7&Z)}}return v},Wi),C.PushMsgEdit=(Vt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushMsgEdit;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_msg_seq=e.i6(1);break;case 3:v.msg_type=e.i();break;case 4:v.msg=e.b();break;case 5:v.conv_type=e.i();break;case 6:v.state_msg_seq=e.i6(1);break;case 7:v.edit_msg_seq=e.i6(1);break;case 8:v.edit_user=e.s();break;case 9:v.at_list.push(e.s());break;case 10:v.is_at_all=e.bl();break;case 11:v.sub_msg_type=e.i();break;case 12:v.payload=e.b();break;case 13:v.edit_time=e.i6(1);break;case 14:v.searched_content=e.s();break;case 15:v.edit_type=e.i6(1);break;default:e.sk(7&Z)}}return v},Vt),C.HttpRequest=(An.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.HttpRequest;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:Ie.url=e.s();break;case 2:Ie.method=e.s();break;case 3:var ct=e.u()+e.pos;for(V="",v="";e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.s();break;case 2:v=e.s();break;default:e.sk(7&ft)}}Ie.headers[V]=v;break;case 4:var Ri=e.u()+e.pos;for(V="",v="";e.pos<Ri;){var Eo=e.u();switch(Eo>>>3){case 1:V=e.s();break;case 2:v=e.s();break;default:e.sk(7&Eo)}}Ie.forms[V]=v;break;default:e.sk(7&ze)}}return Ie},An),C.FileUploadReq=(ii.e=function(e,M){return M=M||T.c(),e.md5&&M.u(10).s(e.md5),e.file_type&&M.u(16).i(e.file_type),e.name&&M.u(26).s(e.name),e.size&&M.u(32).i6(e.size),e.duration&&M.u(40).i6(e.duration),M},ii),C.FileUploadRsp=(wn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FileUploadRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.state=e.u();break;case 4:v.upload_req=d.zim.HttpRequest.d(e,e.u());break;default:e.sk(7&Z)}}return v},wn),C.FileProcessRsp=(tr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FileProcessRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.state=e.u();break;case 4:v.download_url=e.s();break;default:e.sk(7&Z)}}return v},tr),C.FileListUploadReq=(Rn.e=function(e,M){if(M=M||T.c(),e.file_list&&e.file_list.length)for(let V=0;V<e.file_list.length;++V)d.zim.FileUploadReq.e(e.file_list[V],M.u(10).f()).l();return M},Rn),C.FileListUploadRsp=(N.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.FileListUploadRsp;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:Ie.code=e.u();break;case 2:Ie.message=e.s();break;case 3:var ct=e.u()+e.pos;for(V="",v=null;e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.s();break;case 2:v=d.zim.FileUploadRsp.d(e,e.u());break;default:e.sk(7&ft)}}Ie.rsp_list[V]=v;break;default:e.sk(7&ze)}}return Ie},N),C.FileListProcessRsp=(ne.d=function(e,M){e instanceof O||(e=O.c(e));let V,v,Z=M===void 0?e.len:e.pos+M,Ie=new d.zim.FileListProcessRsp;for(;e.pos<Z;){var ze=e.u();switch(ze>>>3){case 1:Ie.code=e.u();break;case 2:Ie.message=e.s();break;case 3:var ct=e.u()+e.pos;for(V="",v=null;e.pos<ct;){var ft=e.u();switch(ft>>>3){case 1:V=e.s();break;case 2:v=d.zim.FileProcessRsp.d(e,e.u());break;default:e.sk(7&ft)}}Ie.rsp_list[V]=v;break;default:e.sk(7&ze)}}return Ie},ne),C.StGroupMemberData=($.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupMemberData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.member_data_seq=e.i6(1);break;case 2:v.user_name=e.s();break;case 3:v.group_nick_name=e.s();break;case 4:v.role=e.i();break;case 5:v.mute=e.i();break;case 6:v.not_notify=e.i();break;case 7:v.not_recv_msg=e.i();break;case 8:v.user_avatar=e.b();break;case 9:v.forbid_expire_time=e.i6(1);break;case 10:v.enter_type=e.i();break;case 11:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 12:v.enter_time=e.i6(1);break;case 13:v.remark=e.s();break;case 14:v.update_user_time=e.i6(1);break;default:e.sk(7&Z)}}return v},$),C.GroupData=(pe.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.group_avatar=e.b();break;case 4:v.group_notice=e.s();break;case 5:v.group_create_time=e.i6(1);break;case 6:v.member_count=e.u();break;case 7:v.forbid_info=d.zim.GroupForbid.d(e,e.u());break;case 8:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;default:e.sk(7&Z)}}return v},pe),C.FirstJoinGroup=(le.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FirstJoinGroup;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_msg_seq=e.i6(1);break;case 2:v.group_list_seq=e.i6(1);break;case 3:v.group_data_seq=e.i6(1);break;case 4:Object.assign(v,d.zim.GroupData.d(e,e.u()));break;case 5:v.member=d.zim.StGroupMember.d(e,e.u());break;case 6:v.history_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},le),C.StGroupMember=(de.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupMember;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_nid=e.i6();break;case 3:v.member_seq=e.i6(1);break;case 4:v.member_data=d.zim.StGroupMemberData.d(e,e.u());break;case 5:v.attributes=d.zim.StGroupAttributes.d(e,e.u());break;case 6:v.group_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},de),C.GroupCreateReq=(ye.e=function(e,M){if(M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.group_name&&M.u(18).s(e.group_name),e.group_notice&&M.u(26).s(e.group_notice),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(34).s(e.user_ids[V]);if(e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(42).f()).l();return e.group_avatar&&M.u(50).b(e.group_avatar),e.limit_info&&d.zim.StGroupLimit.e(e.limit_info,M.u(58).f()).l(),M},ye),C.GroupCreateRsp=(Me.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupCreateRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.group_id=e.s();break;case 4:v.members.push(d.zim.StGroupMember.d(e,e.u()));break;case 5:v.member_all_seq=e.i6(1);break;case 6:v.error_users.push(d.zim.ErrorUser.d(e,e.u()));break;case 7:v.group_list_seq=e.i6(1);break;case 8:v.group_data_seq=e.i6(1);break;case 9:v.group_attribute_seq=e.i6(1);break;case 10:v.member_count=e.u();break;case 11:v.group_create_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Me),C.StGroupAttribute=(xe.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StGroupAttribute(e)),M=M||T.c(),e.key&&M.u(10).s(e.key),e.value&&M.u(18).s(e.value),e.seq&&M.u(24).i6(e.seq),M},xe.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupAttribute;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.key=e.s();break;case 2:v.value=e.s();break;case 3:v.seq=e.i6(1);break;default:e.sk(7&Z)}}return v},xe),C.StModifyGroupAttribute=(Te.e=function(e,M){if(M=M||T.c(),e.action&&M.u(8).i(e.action),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(18).f()).l();return M},Te.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StModifyGroupAttribute;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.action=e.i();break;case 2:v.attributes.push(d.zim.StGroupAttribute.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Te),C.StGroupAttributes=(We.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StGroupAttributes(e)),M=M||T.c(),e.seq&&M.u(8).i6(e.seq),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(18).f()).l();return M},We.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupAttributes;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.seq=e.i6(1);break;case 2:v.attributes.push(d.zim.StGroupAttribute.d(e,e.u()));break;default:e.sk(7&Z)}}return v},We),C.GroupDataRsp=(Qe.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupDataRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.group_name=e.s();break;case 4:v.group_notice=e.s();break;case 5:v.group_data_seq=e.i6(1);break;case 6:v.group_avatar=e.b();break;case 7:v.is_all_forbid=e.bl();break;case 8:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.forbid_list.push(e.i());else v.forbid_list.push(e.i());break;case 9:v.forbid_expire_time=e.i6(1);break;case 10:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;case 11:v.group_create_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Qe),C.GroupSimpleInfo=(jt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupSimpleInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.group_avatar=e.s();break;case 4:v.member_exist=e.bl();break;case 5:v.group_exist=e.bl();break;case 6:v.group_member_count=e.u();break;default:e.sk(7&Z)}}return v},jt),C.GroupSimpleInfoRsp=(Tt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupSimpleInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.result.push(d.zim.GroupSimpleInfo.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Tt),C.GroupModifyAttributeReq=(xs.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.attributes&&d.zim.StModifyGroupAttribute.e(e.attributes,M.u(18).f()).l(),M},xs),C.GroupModifyAttributeRsp=(Tn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupModifyAttributeRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.attributes=d.zim.StGroupAttributes.d(e,e.u());break;case 4:v.fail_keys.push(d.zim.StGroupAttribute.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Tn),C.GroupGetAttributesReq=(sr.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.attributes&&d.zim.StGroupAttributes.e(e.attributes,M.u(18).f()).l(),M},sr),C.GroupSetForbidReq=(os.e=function(e,M){if(M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.is_all_forbid&&M.u(16).bl(e.is_all_forbid),e.forbid_list&&e.forbid_list.length){M.u(26).f();for(let V=0;V<e.forbid_list.length;++V)M.i(e.forbid_list[V]);M.l()}return e.duration&&M.u(32).i(e.duration),M},os),C.ModifyGroupLimitReq=(_r.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.set_flag&&M.u(16).u(e.set_flag),e.limit_info&&d.zim.StGroupLimit.e(e.limit_info,M.u(26).f()).l(),M},_r),C.GroupEnterRsp=(as.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupEnterRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.group_name=e.s();break;case 4:v.properties=d.zim.StGroupAttributes.d(e,e.u());break;case 5:v.member=d.zim.StGroupMember.d(e,e.u());break;case 6:v.member_all_seq=e.i6(1);break;case 7:v.group_list_seq=e.i6(1);break;case 8:v.group_data_seq=e.i6(1);break;case 9:v.group_attribute_seq=e.i6(1);break;case 10:v.conv_msg_seq=e.i6(1);break;case 11:v.member_count=e.u();break;case 12:v.group_avatar=e.b();break;case 13:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;case 14:v.group_create_time=e.i6(1);break;case 15:v.forbid_info=d.zim.GroupForbid.d(e,e.u());break;case 16:v.group_notice=e.s();break;case 17:v.history_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},as),C.GroupApplyAccept=(zt.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.user_id&&M.u(18).s(e.user_id),e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(26).f()).l(),M},zt),C.GroupApplyRsp=(xt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupApplyRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.apply_group_info=d.zim.StApplyUser.d(e,e.u(),d.zim.GroupApplyRsp.isGroup);break;case 4:v.group_info=d.zim.FirstJoinGroup.d(e,e.u());break;default:e.sk(7&Z)}}return v},xt),C.GroupInviteReq=(bs.e=function(e,M){if(M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(18).s(e.user_ids[V]);if(e.user_infos&&e.user_infos.length)for(let V=0;V<e.user_infos.length;++V)d.zim.StGroupAttribute.e(e.user_infos[V],M.u(26).f()).l();return e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(34).f()).l(),M},bs),C.GroupInviteRsp=(at.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupInviteRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.member_all_seq=e.i6(1);break;case 4:v.members.push(d.zim.StGroupMember.d(e,e.u()));break;case 5:v.error_users.push(d.zim.ErrorUser.d(e,e.u()));break;case 6:v.group_data_seq=e.i6(1);break;case 7:v.group_attribute_seq=e.i6(1);break;case 8:v.member_count=e.u();break;case 9:v.apply_users.push(d.zim.StApplyUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},at),C.UserApplyListRsp=(Es.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.UserApplyListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.fetch_end=e.i();break;case 6:v.list.push(d.zim.StApplyUser.d(e,e.u()),d.zim.UserApplyListRsp.isGroup);break;default:e.sk(7&Z)}}return v},Es),C.GroupKickOutRsp=(Fs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupKickOutRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.member_all_seq=e.i6(1);break;case 4:v.error_users.push(d.zim.ErrorUser.d(e,e.u()));break;case 5:v.member_count=e.u();break;default:e.sk(7&Z)}}return v},Fs),C.GroupGetMembersReq=($i.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.cur_list_seq&&M.u(16).i6(e.cur_list_seq),e.count&&M.u(24).u(e.count),e.full_pull&&M.u(32).i(e.full_pull),e.degree&&M.u(40).u(e.degree),M},$i),C.StGroupMemberChangeEvent=(Bt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupMemberChangeEvent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.member=d.zim.StGroupMember.d(e,e.u());break;case 3:v.event_type=e.i();break;default:e.sk(7&Z)}}return v},Bt),C.GroupGetMembersRsp=(rr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupGetMembersRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.member_all_seq=e.i6(1);break;case 4:v.change_list.push(d.zim.StGroupMemberChangeEvent.d(e,e.u()));break;case 5:v.full_list=e.i();break;case 6:v.cur_list_seq=e.i6(1);break;case 7:v.fetch_end=e.i();break;case 8:v.member_count=e.u();break;default:e.sk(7&Z)}}return v},rr),C.GetGroupMembersByMemberSeqRsp=(xn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetGroupMembersByMemberSeqRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.members.push(d.zim.StGroupMember.d(e,e.u()));break;case 4:v.deleted_members.push(d.zim.StGroupMember.d(e,e.u()));break;default:e.sk(7&Z)}}return v},xn),C.SimpleMember=(Br.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SimpleMember;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.cur_seq=e.i6(1);break;case 3:v.old_seq=e.i6(1);break;case 4:v.is_del=e.bl();break;default:e.sk(7&Z)}}return v},Br),C.GetGroupMembersByMemberAllSeqRsp=(da.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetGroupMembersByMemberAllSeqRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.members.push(d.zim.SimpleMember.d(e,e.u()));break;case 4:v.next_seq=e.i6(1);break;case 5:v.fetch_end=e.bl();break;default:e.sk(7&Z)}}return v},da),C.GroupMemberDataReq=(oi.e=function(e,M){if(M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.user_id&&M.u(18).s(e.user_id),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(26).f()).l();return M},oi),C.GroupMemberDataRsp=(ai.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupMemberDataRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.member=d.zim.StGroupMember.d(e,e.u());break;default:e.sk(7&Z)}}return v},ai),C.GroupSetMemberRoleReq=(Nr.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.user_id&&M.u(18).s(e.user_id),e.role&&M.u(24).i(e.role),M},Nr),C.GroupUpdate=(En.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupUpdate;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.type=e.i();break;case 2:v.info=d.zim.GroupInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v.info.type=v.type,v.info},En),C.GroupInfo=(eo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.group_list_seq=e.i6(1);break;case 4:v.group_data_seq=e.i6(1);break;case 5:v.all_member_seq=e.i6(1);break;case 6:v.attribute_seq=e.i6(1);break;case 7:v.not_notify=e.bl();break;case 8:v.member_count=e.u();break;case 9:v.group_avatar=e.b();break;case 10:v.user_apply_list_seq=e.i6(1);break;case 11:v.history_msg_seq=e.i6(1);break;case 12:v.remark=e.s();break;default:e.sk(7&Z)}}return v},eo),C.GroupInfosRsp=(pa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupInfosRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.group_infos.push(d.zim.GroupUpdate.d(e,e.u()));break;case 4:v.fail_keys.push(d.zim.StGroupAttribute.d(e,e.u()));break;default:e.sk(7&Z)}}return v},pa),C.GroupListRsp=(fa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.groups.push(d.zim.GroupUpdate.d(e,e.u()));break;case 6:v.full_list=e.i();break;case 7:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},fa),C.GroupMuteReq=(ha.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.enable&&M.u(16).bl(e.enable),M},ha),C.GroupOperator=(ui.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupOperator;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_name=e.b();break;case 3:v.group_nick_name=e.s();break;case 4:v.role=e.i();break;default:e.sk(7&Z)}}return v.user_id?v:null},ui),C.PushCreateGroup=(ma.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushCreateGroup;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.members.push(d.zim.StGroupMember.d(e,e.u()));break;case 4:v.member_all_seq=e.i6(1);break;case 5:v.attributes=d.zim.StGroupAttributes.d(e,e.u());break;case 6:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 7:v.member_count=e.u();break;case 8:v.group_avatar=e.b();break;case 9:v.group_list_seq=e.i6(1);break;case 10:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;case 11:v.group_create_time=e.i6(1);break;case 12:v.group_notice=e.s();break;default:e.sk(7&Z)}}return v},ma),C.PushModifyGroupAttribute=(ga.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushModifyGroupAttribute;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.attributes=d.zim.StGroupAttributes.d(e,e.u());break;case 3:v.op_user=d.zim.GroupOperator.d(e,e.u());break;default:e.sk(7&Z)}}return v},ga),C.PushGroupMemberChange=(_a.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushGroupMemberChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.member_all_seq=e.i6(1);break;case 3:v.members.push(d.zim.StGroupMember.d(e,e.u()));break;case 4:v.change_type=e.i();break;case 5:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 6:v.new_owner_id=e.s();break;case 7:v.member_count=e.u();break;default:e.sk(7&Z)}}return v},_a),C.GroupForbid=(va.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupForbid;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.is_all_forbid=e.bl();break;case 2:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.forbid_list.push(e.i());else v.forbid_list.push(e.i());break;case 3:v.forbid_expire_time=e.i6(1);break;default:e.sk(7&Z)}}return v},va),C.StGroupData=(ba.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_avatar=e.b();break;case 2:v.group_name=e.s();break;case 3:v.group_notice=e.s();break;default:e.sk(7&Z)}}return v},ba),C.StGroupLimit=(ci.e=function(e,M){return M=M||T.c(),e.maxMemberCount&&M.u(8).i(e.maxMemberCount),e.joinMode&&M.u(16).i(e.joinMode),e.inviteMode&&M.u(24).i(e.inviteMode),e.beInviteMode&&M.u(32).i(e.beInviteMode),M},ci.d=function(e,M){e instanceof O||(e=O.c(e));var V=M===void 0?e.len:e.pos+M,v=new d.zim.StGroupLimit;for(v.maxMemberCount=0,v.joinMode=0,v.inviteMode=0,v.beInviteMode=0;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.maxMemberCount=e.i();break;case 2:v.joinMode=e.i();break;case 3:v.inviteMode=e.i();break;case 4:v.beInviteMode=e.i();break;default:e.sk(7&Z)}}return v},ci),C.PushModifyGroupData=(ya.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushModifyGroupData;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 3:v.group_data_seq=e.i6(1);break;case 4:case 5:v.value=e.s();break;case 7:v.value=e.b();break;case 8:v.value=d.zim.GroupForbid.d(e,e.u());break;case 9:v.value=d.zim.StGroupLimit.d(e,e.u());break;case 10:v.value=d.zim.StGroupData.d(e,e.u());break;case 6:v.modify_type=e.i();break;default:e.sk(7&Z)}}return v},ya),C.PushGroupOwnerTransfer=(Ma.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushGroupOwnerTransfer;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.user_id=e.s();break;case 3:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 4:v.member_all_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Ma),C.PushGroupInvite=(Sa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushGroupInvite;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.group_notice=e.s();break;case 4:v.op_user=d.zim.GroupOperator.d(e,e.u());break;case 5:v.conv_msg_seq=e.i6(1);break;case 6:v.member_count=e.u();break;case 7:v.group_avatar=e.b();break;case 8:v.group_list_seq=e.i6(1);break;case 9:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;case 10:v.forbid_info=d.zim.GroupForbid.d(e,e.u());break;case 11:v.group_create_time=e.i6(1);break;case 12:v.member=d.zim.StGroupMember.d(e,e.u());break;case 13:v.history_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Sa),C.PushApplyUserStateChange=(ka.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushApplyUserStateChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.list.push(d.zim.StApplyUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ka),C.PushApplyGroupStateChange=(li.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushApplyGroupStateChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.apply_info=d.zim.StApplyUser.d(e,e.u(),!0);break;case 2:v.group_info=d.zim.FirstJoinGroup.d(e,e.u());break;default:e.sk(7&Z)}}return v},li),C.FetchReplyListRsp=(Ca.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchReplyListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.total_count=e.u();break;case 4:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.conv_msg_seq.push(e.i6(1));else v.conv_msg_seq.push(e.i6(1));break;case 5:v.root_info=d.zim.MuteInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Ca),C.BatchFetchConvMsgReq=(Da.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.how&&M.u(16).i(e.how),e.degree&&M.u(24).u(e.degree),e.login_fetch&&M.u(32).i(e.login_fetch),e.reqs&&e.reqs.length)for(let V=0;V<e.reqs.length;++V)d.zim.FriendListReq.e(e.reqs[V],M.u(42).f()).l();return M},Da),C.BatchFetchConvMsgRsp=(qa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.BatchFetchConvMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.max_conv_msg_seq=e.i6(1);break;case 4:v.fetch_end=e.i();break;case 5:var Ie=d.zim.StFetchConvMsgResult.d(e,e.u());Object.assign(v.msgs,Ie.msgs);break;default:e.sk(7&Z)}}return v.msgs=Object.values(v.msgs),v},qa),C.StMsgReplyInfo=(di.e=function(e,M){return M=M||T.c(),e.root_msg_seq&&M.u(8).i6(e.root_msg_seq),e.root_msg_id&&M.u(16).i6(e.root_msg_id),e.msg_seq&&M.u(24).i6(e.msg_seq),e.msg_id&&M.u(32).i6(e.msg_id),e.sender_user_id&&M.u(42).s(e.sender_user_id),e.msg_time&&M.u(48).i6(e.msg_time),e.is_server&&M.u(56).u(e.is_server),e.msg_type&&M.u(64).i(e.msg_type),e.msg&&M.u(74).b(e.msg),e.reply_count&&M.u(80).u(e.reply_count),e.msg_edit_seq&&M.u(88).u(e.msg_edit_seq),M},di.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgReplyInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.root_msg_seq=e.i6(1);break;case 2:v.root_msg_id=e.i6().toString();break;case 3:v.msg_seq=e.i6(1);break;case 4:v.msg_id=e.i6().toString();break;case 5:v.sender_user_id=e.s();break;case 6:v.msg_time=e.i6(1);break;case 7:v.is_server=e.u();break;case 8:v.msg_type=e.i();break;case 9:v.msg=e.b();break;case 10:e.u();break;case 11:v.msg_edit_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},di),C.StEditInfo=(Ia.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StEditInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.edit_msg_seq=e.i6(1);break;case 2:v.edit_user=e.s();break;case 3:v.edit_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Ia),C.StFetchConvMsgResult=(Aa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StFetchConvMsgResult;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:var Ie=d.zim.FetchMsgInfo.d(e,e.u());v.msgs[Ie.msg_svr_info.conv_msg_seq]=Ie;break;case 4:v.next_conv_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Aa),C.StAuditInfo=(wa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StAuditInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.filtered_text=e.s();break;case 2:v.audit_info.push(d.zim.StOfflinePushInfo.d(e,e.u(),!0));break;default:e.sk(7&Z)}}return v},wa),C.C2CMsgReq=(Ra.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.msg_info&&d.zim.StConvMsgInfo.e(e.msg_info,M.u(18).f()).l(),e.fetch_peer_user_info&&M.u(24).i(e.fetch_peer_user_info),M},Ra),C.C2CMsgRsp=(Ta.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.C2CMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.msg_svr_info=d.zim.StMsgSvrInfo.d(e,e.u());break;case 4:v.peer_user_name=e.b();break;case 5:v.send_count_after_read=e.i6(1);break;case 6:v.conv_disable=e.bl();break;case 7:v.peer_user_avatar=e.b();break;case 8:v.msg_status=e.i();break;case 9:v.audit_info=e.s();break;case 10:v.audit_message_info=d.zim.StAuditInfo.d(e,e.u());break;case 11:v.reply_count=e.u();break;default:e.sk(7&Z)}}return v},Ta),C.C2CCommandReq=(xa.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.command_msg_info&&d.zim.StCommandMsgInfo.e(e.command_msg_info,M.u(18).f()).l(),M},xa),C.C2CCommandReqRsp=(Ea.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.C2CCommandReqRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.command_svr_info=d.zim.StCommandSvrInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Ea),C.RoomMsgReq=(Ua.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.msg_info&&d.zim.StConvMsgInfo.e(e.msg_info,M.u(34).f()).l(),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},Ua),C.RoomMsgRsp=(Oa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.msg_id=e.i6().toString();break;case 4:v.msg_svr_info=d.zim.StMsgSvrInfo.d(e,e.u());break;case 5:v.audit_info=e.s();break;case 6:v.audit_message_info=d.zim.StAuditInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Oa),C.RoomMsglistReq=(pi.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.conv_msg_seq&&M.u(32).i6(e.conv_msg_seq),e.count&&M.u(40).i(e.count),e.sort_type&&M.u(48).i(e.sort_type),e.how&&M.u(64).i(e.how),e.degree&&M.u(72).u(e.degree),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},pi),C.RoomMsglistRsp=(Pr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomMsglistRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.next_conv_msg_seq=e.i6(1);break;case 4:v.max_conv_msg_seq=e.i6(1);break;case 6:v.msgs.push(d.zim.FetchMsgInfo.d(e,e.u()));break;case 7:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},Pr),C.StMsgInfo=(to.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StMsgInfo(e)),M=M||T.c(),e.msg_type&&M.u(8).i(e.msg_type),e.msg&&M.u(18).b(e.msg),e.priority_type&&M.u(24).i(e.priority_type),e.msg_id&&M.u(32).i6(e.msg_id),e.sender_user_id&&M.u(42).s(e.sender_user_id),e.msg_time&&M.u(48).i6(e.msg_time),e.payload&&M.u(58).b(e.payload),M},to.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.msg_type=e.i();break;case 2:v.msg=e.b();break;case 3:v.priority_type=e.i();break;case 4:v.msg_id=e.i6().toString();break;case 5:v.sender_user_id=e.s();break;case 6:v.msg_time=e.i6(1);break;case 7:v.payload=e.b();break;default:e.sk(7&Z)}}return v},to),C.RoomCommandMsgReq=(so.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.command_msg_info&&d.zim.StMsgInfo.e(e.command_msg_info,M.u(34).f()).l(),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},so),C.StReaction=(ro.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StReaction;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.reaction_key=e.s();break;case 2:v.cur_reaction_seq=e.i6(1);break;case 3:v.user_total_count=e.i();break;default:e.sk(7&Z)}}return v},ro),C.SetReactionReq=(no.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.reaction_into_map)for(let V=Object.keys(e.reaction_into_map),v=0;v<V.length;++v)M.u(26).f().u(10).s(V[v]),d.zim.C2CReadReceiptReq.e(e.reaction_into_map[V[v]],M.u(18).f()).l().l();return e.operate_type&&M.u(32).i(e.operate_type),M},no),C.SetReactionRsp=(io.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SetReactionRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.succ_list.push(d.zim.StReaction.d(e,e.u()));break;case 4:v.error_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},io),C.DelReactionReq=(oo.e=function(e,M){if(M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.reaction_key&&e.reaction_key.length)for(let V=0;V<e.reaction_key.length;++V)M.u(26).s(e.reaction_key[V]);return M},oo),C.ReactionListReq=(vr.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.degree&&M.u(16).u(e.degree),e.conv_msg_seq&&M.u(24).i6(e.conv_msg_seq),e.start_reaction_seq&&M.u(32).i6(e.start_reaction_seq),M},vr),C.ReactionListRsp=(La.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ReactionListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.fetch_end=e.u();break;case 4:v.conv_msg_seq=e.i6(1);break;case 5:v.msg_next_reaction_seq=e.i6(1);break;case 6:v.msg_max_reaction_seq=e.i6(1);break;case 7:v.reaction_list.push(d.zim.StReactionBrief.d(e,e.u()));break;default:e.sk(7&Z)}}return v},La),C.ReactionInfoReq=(Ga.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.reaction_key&&M.u(26).s(e.reaction_key),e.max_reaction_seq&&M.u(32).i6(e.max_reaction_seq),e.is_detail&&M.u(40).bl(e.is_detail),M},Ga),C.ReactionInfoRsp=(ja.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ReactionInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.max_reaction_seq=e.i6(1);break;case 4:v.total_user_count=e.u();break;case 5:v.user_reaction.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 6:v.include_self=e.bl();break;default:e.sk(7&Z)}}return v.user_reaction=v.user_reaction.map(Ie=>({userID:Ie.key,seq:+Ie.seq.toString()})),v.user_reaction.sort((Ie,ze)=>Ie.seq-ze.seq),v},ja),C.PushMsgReaction=(ao.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushMsgReaction;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.msg_reactions.push(d.zim.StPushMsgReaction.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ao),C.StPushMsgReaction=(uo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StPushMsgReaction;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_msg_seq=e.i6(1);break;case 2:v.start_reaction_seq=e.i6(1);break;case 3:v.end_reaction_seq=e.i6(1);break;case 4:v.reaction_infos.push(d.zim.StReactionBrief.d(e,e.u()));break;default:e.sk(7&Z)}}return v},uo),C.GroupMsgRsp=(Fr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GroupMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.msg_svr_info=d.zim.StMsgSvrInfo.d(e,e.u());break;case 4:v.send_count_after_read=e.i6(1);break;case 5:v.msg_status=e.i();break;case 6:v.receipt_seq=e.i6(1);break;case 7:v.unread_count=e.sint32();break;case 8:v.audit_info=e.s();break;case 9:v.audit_message_info=d.zim.StAuditInfo.d(e,e.u());break;case 10:v.reply_count=e.u();break;default:e.sk(7&Z)}}return v},Fr),C.FetchGroupMsgList=(Hr.e=function(e,M){return M=M||T.c(),e.group_id&&M.u(10).s(e.group_id),e.conv_msg_seq&&M.u(16).i6(e.conv_msg_seq),e.count&&M.u(24).i(e.count),e.sort_type&&M.u(32).i(e.sort_type),e.max_conv_msg_seq&&M.u(40).i6(e.max_conv_msg_seq),e.how&&M.u(48).i(e.how),e.degree&&M.u(56).u(e.degree),M},Hr),C.FetchGroupMsgListRsp=(za.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchGroupMsgListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.max_conv_msg_seq=e.i6(1);break;case 4:v.next_conv_msg_seq=e.i6(1);break;case 5:v.msgs.push(d.zim.FetchMsgInfo.d(e,e.u()));break;case 6:v.fetch_end=e.i6(1);break;default:e.sk(7&Z)}}return v},za),C.PushPinnedConvChange=(Un.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushPinnedConvChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.conv_pinned_list_seq=e.i6(1);break;case 4:v.pinned_type=e.i();break;default:e.sk(7&Z)}}return v},Un),C.PushEnterGroup=(co.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushEnterGroup;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.group_id=e.s();break;case 2:v.group_name=e.s();break;case 3:v.group_notice=e.s();break;case 4:v.conv_msg_seq=e.i6(1);break;case 5:v.member_count=e.u();break;case 6:v.group_avatar=e.b();break;case 7:v.group_list_seq=e.i6(1);break;case 8:v.user_id=e.s();break;case 9:v.member=d.zim.StGroupMember.d(e,e.u());break;case 10:v.properties=d.zim.StGroupAttributes.d(e,e.u());break;case 11:v.group_create_time=e.i6(1);break;case 12:v.limit_info=d.zim.StGroupLimit.d(e,e.u());break;case 13:v.forbid_info=d.zim.GroupForbid.d(e,e.u());break;case 14:v.history_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},co),C.PushDelConvMsg=(lo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushDelConvMsg;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.is_del_all=e.u();break;case 4:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.del_conv_msg_seqs.push(e.i6(1));else v.del_conv_msg_seqs.push(e.i6(1));break;case 5:v.max_del_conv_msg_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},lo),C.GetMsgStateListReq=(fi.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.state_seq&&M.u(16).i6(e.state_seq),e.count&&M.u(24).sint32(e.count),e.degree&&M.u(32).u(e.degree),e.max_msg_seq&&M.u(40).i6(e.max_msg_seq),e.min_msg_seq&&M.u(48).i6(e.min_msg_seq),M},fi),C.GetMsgStateListRsp=(hi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetMsgStateListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.state_list.push(d.zim.StMsgStateContent.d(e,e.u()));break;case 4:v.next_state_seq=e.i6(1);break;case 5:v.fetch_end=e.i();break;default:e.sk(7&Z)}}return v},hi),C.StMsgStateContent=(po.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StMsgStateContent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_msg_seq=e.i6(1);break;case 3:v.state=e.i();break;case 4:v.state_seq=e.i6(1);break;case 5:v.conv_id=e.s();break;case 6:v.conv_type=e.i();break;default:e.sk(7&Z)}}return v},po),C.PushC2CCommand=(fo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushC2CCommand;e.pos<V;){var Z=e.u();Z>>>3==1?v.recv_command_info=d.zim.StRecvCommandInfo.d(e,e.u()):e.sk(7&Z)}return v},fo),C.PushRoomMsg=(ho.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomMsg;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.room_id=e.s();break;case 2:v.room_session_id=e.i6();break;case 3:v.recv_msg_info=d.zim.StRecvMsgInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},ho),C.PushRoomCommand=(Ba.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomCommand;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.room_id=e.s();break;case 2:v.room_session_id=e.i6();break;case 3:v.msg_info=d.zim.StMsgInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},Ba),C.PushGroupCommand=(Na.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushGroupCommand;e.pos<V;){var Z=e.u();Z>>>3==2?v.recv_command_info=d.zim.StRecvCommandInfo.d(e,e.u()):e.sk(7&Z)}return v},Na),C.PushC2CMsg=(Pa.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushC2CMsg;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.recv_msg_info=d.zim.StRecvMsgInfo.d(e,e.u());break;case 2:v.msg_status=e.i();break;case 3:v.send_count_after_read=e.i6(1);break;case 4:v.reply_count=e.u();break;case 5:v.read_seq=e.i6(1);break;default:e.sk(7&Z)}}return v.recv_msg_info&&v.reply_count&&v.recv_msg_info.msg_info.reply_info&&(v.recv_msg_info.msg_info.reply_info.reply_count=v.reply_count),v},Pa),C.RoomCreateReq=(Fa.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_name&&M.u(18).b(e.room_name),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StRoomAttribute.e(e.attributes[V],M.u(26).f()).l();return e.destroy_delay&&M.u(32).u(e.destroy_delay),M},Fa),C.RoomCreateRsp=(Ha.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomCreateRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.room_session_id=e.i6();break;case 4:v.room_user_session_id=e.i6();break;case 5:v.room_info_interval=e.u();break;case 6:v.userlist_enable=e.u();break;case 7:v.userlist_merge_timeout=e.u();break;case 8:v.userlist_interval=e.u();break;case 9:v.attributes=d.zim.StRoomAttributes.d(e,e.u());break;case 10:v.attributes_pull_interval=e.u();break;case 11:v.attributes_merge_timeout=e.u();break;case 13:v.conv_msg_seq=e.i6(1);break;case 14:v.enabled_offline_msg=e.u();break;case 15:v.msg_merge_timeout=e.u();break;case 16:v.msg_pull_interval=e.u();break;case 17:v.destroy_delay=e.u();break;case 18:v.sub_room_id=e.s();break;default:e.sk(7&Z)}}return v},Ha),C.RoomEnterReq=(Yt.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_user_session_id&&M.u(16).i6(e.room_user_session_id),e.room_name&&M.u(26).b(e.room_name),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StRoomAttribute.e(e.attributes[V],M.u(34).f()).l();return e.destroy_delay&&M.u(40).u(e.destroy_delay),e.create_if_not_exist&&M.u(48).bl(e.create_if_not_exist),e.last_room&&d.zim.QueryRoomUserInfosReq.e(e.last_room,M.u(66).f()).l(),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},Yt),C.RoomEnterRsp=(Kr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomEnterRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.room_name=e.b();break;case 4:v.room_session_id=e.i6();break;case 5:v.room_user_session_id=e.i6();break;case 6:v.userlist_seq=e.u();break;case 7:v.user_count=e.u();break;case 8:v.room_info_interval=e.u();break;case 9:v.userlist_enable=e.u();break;case 10:v.userlist_merge_timeout=e.u();break;case 11:v.userlist_interval=e.u();break;case 12:v.attribute_seq=e.u();break;case 13:v.attributes_pull_interval=e.u();break;case 14:v.attributes_merge_timeout=e.u();break;case 15:v.sub_room_id=e.s();break;case 17:v.conv_msg_seq=e.i6(1);break;case 18:v.enabled_offline_msg=e.u();break;case 19:v.msg_merge_timeout=e.u();break;case 20:v.msg_pull_interval=e.u();break;case 21:v.destroy_delay=e.u();break;case 22:v.attributes=d.zim.StRoomAttributes.d(e,e.u());break;default:e.sk(7&Z)}}return v},Kr),C.RoomCheckRsp=(mo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomCheckRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.room_session_id=e.i6();break;case 4:v.room_user_session_id=e.i6();break;case 5:v.room_name=e.s();break;case 6:v.destroy_delay=e.u();break;case 7:v.room_info_interval=e.u();break;case 8:v.userlist_enable=e.u();break;case 9:v.userlist_merge_timeout=e.u();break;case 10:v.userlist_interval=e.u();break;case 11:v.attributes=d.zim.StRoomAttributes.d(e,e.u());break;case 12:v.attributes_pull_interval=e.u();break;case 13:v.attributes_merge_timeout=e.u();break;case 14:v.conv_msg_seq=e.i6(1);break;case 15:v.enabled_offline_msg=e.u();break;case 16:v.msg_merge_timeout=e.u();break;case 17:v.msg_pull_interval=e.u();break;case 18:v.userlist_seq=e.u();break;case 19:v.user_count=e.u();break;case 20:v.sub_room_id=e.s();break;default:e.sk(7&Z)}}return v},mo),C.QueryRoomUserInfosReq=(mi.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(34).s(e.user_ids[V]);return e.sub_room_id&&M.u(402).s(e.sub_room_id),M},mi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.QueryRoomUserInfosReq;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.room_id=e.s();break;case 2:v.room_session_id=e.i6();break;case 3:v.room_user_session_id=e.i6();break;default:e.sk(7&Z)}}return v},mi),C.RoomUserlistReq=(go.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.pos_flag&&M.u(26).s(e.pos_flag),e.count&&M.u(32).i(e.count),e.mode&&M.u(40).i(e.mode),e.expect_seq&&M.u(48).u(e.expect_seq),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},go),C.RoomUserlistRsp=(_o.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomUserlistRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.pos_flag=e.s();break;case 4:v.userlist_seq=e.u();break;case 5:v.user_count=e.u();break;case 6:v.users.push(d.zim.StUserInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},_o),C.StUserInfo=(On.e=function(e,M){return M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.user_name&&M.u(18).b(e.user_name),e.online_state&&M.u(24).i(e.online_state),e.extra&&M.u(34).b(e.extra),e.avatar&&M.u(42).b(e.avatar),M},On.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StUserInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_name=e.b();break;case 3:v.online_state=e.i();break;case 4:v.extra=e.b();break;case 5:v.avatar=e.b();break;case 6:v.updated_at=e.i6(1);break;case 7:v.user_info_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},On),C.UserRule=(vo.e=function(e,M){if(M=M||T.c(),e.online&&e.online.length){M.u(10).f();for(let V=0;V<e.online.length;++V)M.i(e.online[V]);M.l()}if(e.disable_push&&e.disable_push.length){M.u(18).f();for(let V=0;V<e.disable_push.length;++V)M.i(e.disable_push[V]);M.l()}return M},vo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.UserRule;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:if((7&Z)==2)for(var Ie=e.u()+e.pos;e.pos<Ie;)v.online.push(e.i());else v.online.push(e.i());break;case 2:if((7&Z)==2)for(var ze=e.u()+e.pos;e.pos<ze;)v.disable_push.push(e.i());else v.disable_push.push(e.i());break;default:e.sk(7&Z)}}return v},vo),C.StUserSelfRule=(br.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StUserSelfRule;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.app_custom_push=d.zim.UserRule.d(e,e.u());break;case 2:v.user_custom_push=d.zim.UserRule.d(e,e.u());break;case 3:v.user_info_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},br),C.ErrorUser=(Ln.e=function(e,M){return M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.sub_code&&M.u(16).u(e.sub_code),M},Ln.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ErrorUser;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.sub_code=e.u();break;default:e.sk(7&Z)}}return v},Ln),C.RoomInfoRsp=(Qr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.RoomInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.userlist_seq=e.u();break;case 4:v.user_count=e.u();break;case 5:v.room_info_interval=e.u();break;case 6:v.attribute_seq=e.u();break;case 7:v.max_conv_msg_seq=e.i6(1);break;case 9:v.ulist_to=e.u();break;case 10:v.ulist_itvl=e.u();break;case 11:v.statemsg_seq=e.i6(1);break;case 12:v.sub_room_id=e.s();break;default:e.sk(7&Z)}}return v},Qr),C.ModifyUserCustomPush=(gi.e=function(e,M){return M=M||T.c(),e.user_rule&&d.zim.UserRule.e(e.user_rule,M.u(10).f()).l(),M},gi),C.SelfUserInfoRsp=(bo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SelfUserInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.base_info=d.zim.StUserInfo.d(e,e.u());break;case 4:v.rule=d.zim.StUserSelfRule.d(e,e.u());break;default:e.sk(7&Z)}}return v},bo),C.StRoomAttribute=(Hs.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StRoomAttribute(e)),M=M||T.c(),e.key&&M.u(10).s(e.key),e.value&&M.u(18).s(e.value),e.seq&&M.u(24).u(e.seq),e.auto_delete&&M.u(32).i(e.auto_delete),M},Hs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StRoomAttribute;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.key=e.s();break;case 2:v.value=e.s();break;case 3:v.seq=e.u();break;case 4:v.auto_delete=e.i();break;default:e.sk(7&Z)}}return v},Hs),C.StModifyRoomAttribute=(yr.e=function(e,M){return typeof e=="object"&&(e=new d.zim.StModifyRoomAttribute(e)),M=M||T.c(),e.action&&M.u(8).i(e.action),e.attribute&&d.zim.StRoomAttribute.e(e.attribute,M.u(18).f()).l(),M},yr),C.StRoomAttributes=(Gn.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StRoomAttributes(e)),M=M||T.c(),e.attribute_seq&&M.u(8).u(e.attribute_seq),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StRoomAttribute.e(e.attributes[V],M.u(18).f()).l();return M},Gn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StRoomAttributes;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.attribute_seq=e.u();break;case 2:v.attributes.push(d.zim.StRoomAttribute.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Gn),C.ModifyRoomAttributesReq=(yo.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.force_modify&&M.u(24).i(e.force_modify),e.set_member&&M.u(32).i(e.set_member),e.attribute_seq&&M.u(40).u(e.attribute_seq),e.op_fail_fast&&M.u(48).u(e.op_fail_fast),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StModifyRoomAttribute.e(e.attributes[V],M.u(58).f()).l();return e.sub_room_id&&M.u(402).s(e.sub_room_id),M},yo),C.ErrList=(Ks.e=function(e,M){return typeof e=="object"&&(e=new d.zim.ErrList(e)),M=M||T.c(),e.code&&M.u(8).u(e.code),e.key&&M.u(18).s(e.key),e.seq&&M.u(24).u(e.seq),M},Ks.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ErrList;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.key=e.s();break;case 3:v.seq=e.u();break;default:e.sk(7&Z)}}return v},Ks),C.ModifyRoomAttributesRsp=(Mo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ModifyRoomAttributesRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.attributes=d.zim.StRoomAttributes.d(e,e.u());break;case 4:v.err_list.push(d.zim.ErrList.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Mo),C.GetRoomAttributesReq=(So.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.attributes&&d.zim.StRoomAttributes.e(e.attributes,M.u(26).f()).l(),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},So),C.ModifyRoomUserAttributesReq=(ko.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.force_modify&&M.u(32).i(e.force_modify),e.op_fail_fast&&M.u(40).u(e.op_fail_fast),e.attributes&&d.zim.StModifyRoomUserAttributes.e(e.attributes,M.u(50).f()).l(),e.auto_save&&M.u(56).i(e.auto_save),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},ko),C.ModifyRoomUserAttributesRsp=(Ka.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ModifyRoomUserAttributesRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.user_attributes.push(d.zim.StModifyRoomUserAttributeRsp.d(e,e.u()));break;case 4:v.user_err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Ka),C.StModifyRoomUserAttributes=(Qa.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StModifyRoomUserAttributes(e)),M=M||T.c(),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(10).s(e.user_ids[V]);if(e.modify_attribute&&e.modify_attribute.length)for(let V=0;V<e.modify_attribute.length;++V)d.zim.StModifyRoomAttribute.e(e.modify_attribute[V],M.u(18).f()).l();return M},Qa),C.StModifyRoomUserAttributeRsp=(Co.e=function(e,M){if(typeof e=="object"&&(e=new d.zim.StModifyRoomUserAttributeRsp(e)),M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.user_attributes_seq&&M.u(16).u(e.user_attributes_seq),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StRoomAttribute.e(e.attributes[V],M.u(26).f()).l();if(e.err_list&&e.err_list.length)for(let V=0;V<e.err_list.length;++V)d.zim.ErrList.e(e.err_list[V],M.u(34).f()).l();return M},Co.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StModifyRoomUserAttributeRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_attributes_seq=e.u();break;case 3:v.attributes.push(d.zim.StRoomAttribute.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrList.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Co),C.GetRoomUserAttributesReq=(Do.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.req_attributes&&e.req_attributes.length)for(let V=0;V<e.req_attributes.length;++V)d.zim.StModifyRoomUserAttributeRsp.e(e.req_attributes[V],M.u(34).f()).l();return e.sub_room_id&&M.u(402).s(e.sub_room_id),M},Do),C.GetRoomUserAttributeListReq=(qo.e=function(e,M){return M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.pos_flag&&M.u(34).s(e.pos_flag),e.count&&M.u(40).i(e.count),e.sub_room_id&&M.u(402).s(e.sub_room_id),M},qo),C.GetRoomUserAttributeListRsp=(_i.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetRoomUserAttributeListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.pos_flag=e.s();break;case 4:v.user_attributes_list_seq=e.u();break;case 5:v.user_count=e.u();break;case 6:v.user_attributes.push(d.zim.StModifyRoomUserAttributeRsp.d(e,e.u()));break;default:e.sk(7&Z)}}return v},_i),C.PushRoomEnter=(us.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomEnter;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.room_id=e.s();break;case 2:v.room_session_id=e.i6();break;case 3:v.user_id=e.s();break;case 4:v.user_name=e.b();break;case 5:v.enter_time=e.i6(1);break;case 6:v.userlist_seq=e.u();break;case 7:v.user_count=e.u();break;case 8:v.sub_room_id=e.s();break;case 9:v.avatar=e.b();break;default:e.sk(7&Z)}}return v},us),C.PushRoomKickout=(Io.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomKickout;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.room_id=e.s();break;case 2:v.reason=e.u();break;case 3:v.message=e.s();break;case 4:v.sub_room_id=e.s();break;default:e.sk(7&Z)}}return v},Io),C.PushRoomAttributesModify=($t.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomAttributesModify;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.attributes.push(d.zim.StRoomAttribute.d(e,e.u()));break;case 2:v.room_id=e.s();break;case 3:v.room_session_id=e.i6();break;case 4:v.user_id=e.s();break;case 5:v.attributes_seq=e.u();break;case 6:v.sub_room_id=e.s();break;case 7:v.old_attributes_seq=e.u();break;default:e.sk(7&Z)}}return v},$t),C.PushRoomUserAttributesModify=(es.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushRoomUserAttributesModify;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.push_attributes.push(d.zim.StModifyRoomUserAttributeRsp.d(e,e.u()));break;case 2:v.room_id=e.s();break;case 3:v.room_session_id=e.i6();break;case 4:v.user_id=e.s();break;case 6:v.sub_room_id=e.s();break;default:e.sk(7&Z)}}return v},es),C.UserInfoRsp=(Mr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.UserInfoRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.result.push(d.zim.StUserInfo.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Mr),C.ModifyUserInfoReq=(jn.e=function(e,M){return M=M||T.c(),!e.user_name||e.set_flag&&e.set_flag!=1||M.u(10).b(e.user_name),e.set_flag==10&&M.u(18).b(e.user_name),e.set_flag&&M.u(24).u(e.set_flag),e.set_flag==16&&M.u(34).b(e.user_name),M},jn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ModifyUserInfoReq;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.userName=e.b();break;case 2:v.extendedData=e.b();break;case 3:v.set_flag=e.u();break;case 4:v.userAvatarUrl=e.b();break;case 5:v.rule=d.zim.StUserSelfRule.d(e,e.u());break;case 6:v.user_info_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},jn),C.MsgStatusFail=(zn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.MsgStatusFail;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.client_info=d.zim.StMsgClientInfo.d(e,e.u());break;case 2:v.reason=e.u();break;default:e.sk(7&Z)}}return v},zn),C.StReactions=(Bn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StReactions;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.is_detail=e.bl();break;case 2:v.reaction_list.push(d.zim.StReactionBrief.d(e,e.u()));break;case 3:v.msg_max_reaction_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Bn),C.StReactionBrief=(vi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StReactionBrief;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.max_reaction_seq=e.i6(1);break;case 2:v.reaction_key=e.s();break;case 3:v.total_user_count=e.i();break;case 4:v.include_self=e.bl();break;case 5:v.user_reaction.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 6:v.is_multi=e.bl();break;default:e.sk(7&Z)}}return v.user_reaction=v.user_reaction.map(Ie=>({userID:Ie.key,seq:+Ie.seq.toString()})),v.user_reaction.sort((Ie,ze)=>Ie.seq-ze.seq),v},vi),C.CallStateVersion=(Sr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.CallStateVersion;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.state=e.i();break;case 2:v.start_version=e.u();break;default:e.sk(7&Z)}}return v},Sr),C.UserMailCallUserInfo=(Ao.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.UserMailCallUserInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_state=e.u();break;case 3:v.user_session_id=e.i6().toString();break;case 4:v.extended_data=e.b();break;case 5:v.is_timeout=e.i6(1);break;case 6:v.accept_time=e.i6(1);break;case 7:v.quit_time=e.i6(1);break;case 8:v.residue_timeout_time=e.i6(1);break;case 9:v.call_state_list.push(d.zim.CallStateVersion.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Ao),C.QuitAllRoomRsp=(Nn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.QuitAllRoomRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.room_list.push(d.zim.QueryRoomUserInfosReq.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Nn),C.QueryRoomMsgReq=(kr.e=function(e,M){if(M=M||T.c(),e.room_id&&M.u(10).s(e.room_id),e.room_session_id&&M.u(16).i6(e.room_session_id),e.room_user_session_id&&M.u(24).i6(e.room_user_session_id),e.client_infos&&e.client_infos.length)for(let V=0;V<e.client_infos.length;++V)d.zim.StMsgClientInfo.e(e.client_infos[V],M.u(34).f()).l();return e.sub_room_id&&M.u(402).s(e.sub_room_id),M},kr),C.QueryRoomMsgRsp=(Za.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.QueryRoomMsgRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.msgs.push(d.zim.FetchMsgInfo.d(e,e.u()));break;case 4:v.fail_list.push(d.zim.MsgStatusFail.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Za),C.FriendAddReq=(Jt.e=function(e,M){if(M=M||T.c(),e.friend_infos&&e.friend_infos.length)for(let V=0;V<e.friend_infos.length;++V)d.zim.StFriendInfo.e(e.friend_infos[V],M.u(10).f()).l();return e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(18).f()).l(),M},Jt),C.StApplyStatusChange=(bi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StApplyStatusChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.status=e.i();break;case 3:v.apply_list_seq=e.i6(1);break;case 4:v.apply_update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},bi),C.FriendAddRsp=(Us.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendAddRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.friend_infos.push(d.zim.StFriendInfo.d(e,e.u()));break;case 4:v.apply_status_change_list.push(d.zim.StApplyStatusChange.d(e,e.u()));break;case 5:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Us),C.StUserBaseInfo=(yi.e=function(e,M){return M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.user_name&&M.u(18).b(e.user_name),e.avatar&&M.u(26).b(e.avatar),e.update_time&&M.u(32).i6(e.update_time),M},yi.d=function(e,M,V){e instanceof O||(e=O.c(e));for(var v=M===void 0?e.len:e.pos+M,Z=new d.zim.StUserBaseInfo;e.pos<v;){var Ie=e.u();switch(Ie>>>3){case 1:Z.user_id=e.s();break;case 2:Z.user_name=V?e.s():e.b();break;case 3:Z.avatar=e.b();break;case 4:Z.update_time=e.i6(1);break;default:e.sk(7&Ie)}}return Z},yi),C.StApplyUser=(Pn.d=function(e,M,V){e instanceof O||(e=O.c(e));for(var v=M===void 0?e.len:e.pos+M,Z=new d.zim.StApplyUser;e.pos<v;){var Ie=e.u();switch(Ie>>>3){case 1:Z.base_info=d.zim.StUserBaseInfo.d(e,e.u(),V);break;case 2:Z.apply_list_seq=e.i6(1);break;case 3:Z.apply_status=e.i();break;case 4:Z.op_user=d.zim.GroupOperator.d(e,e.u());break;case 5:Z.wording=e.s();break;case 6:Z.create_time=e.i6(1);break;case 7:Z.update_time=e.i6(1);break;default:e.sk(7&Ie)}}return Z},Pn),C.StFriendInfo=(Qs.e=function(e,M){if(M=M||T.c(),e.user_base_info&&d.zim.StUserBaseInfo.e(e.user_base_info,M.u(10).f()).l(),e.wording&&M.u(18).s(e.wording),e.remark&&M.u(26).s(e.remark),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(34).f()).l();return e.friend_list_seq&&M.u(40).i6(e.friend_list_seq),e.create_time&&M.u(48).i6(e.create_time),M},Qs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StFriendInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_base_info=d.zim.StUserBaseInfo.d(e,e.u());break;case 2:v.wording=e.s();break;case 3:v.remark=e.s();break;case 4:v.attributes.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 5:v.friend_list_seq=e.i6(1);break;case 6:v.create_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Qs),C.FriendApplyRsp=(Mi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendApplyRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.apply_infos.push(d.zim.StFriendApplyInfo.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;case 5:v.friend_infos.push(d.zim.StFriendInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Mi),C.StFriendApplyInfo=(Si.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StFriendApplyInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_name=e.b();break;case 3:v.avatar=e.b();break;case 4:v.app_type=e.i();break;case 5:v.wording=e.s();break;case 6:v.status=e.i();break;case 7:v.remark=e.s();break;case 8:v.attributes.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 9:v.apply_list_seq=e.i6(1);break;case 10:v.create_time=e.i6(1);break;case 11:v.update_time=e.i6(1);break;case 12:v.user_info_update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Si),C.FriendAcceptReq=(Cr.e=function(e,M){if(M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.remark&&M.u(18).s(e.remark),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(26).f()).l();return e.offline_info&&d.zim.StOfflinePushInfo.e(e.offline_info,M.u(34).f()).l(),M},Cr),C.FriendAcceptRsp=(Dr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendAcceptRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.friend=d.zim.StFriendInfo.d(e,e.u());break;case 4:v.apply_list_seq=e.i6(1);break;case 5:v.apply_update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Dr),C.FriendDeletedReq=(Zr.e=function(e,M){if(M=M||T.c(),e.user_ids&&e.user_ids.length)for(let V=0;V<e.user_ids.length;++V)M.u(10).s(e.user_ids[V]);return e.delete_type&&M.u(16).i(e.delete_type),M},Zr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendDeletedReq;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_ids.push(e.s());break;case 2:v.delete_type=e.i();break;default:e.sk(7&Z)}}return v},Zr),C.FriendListReq=(Fn.e=function(e,M){return M=M||T.c(),e.cur_list_seq&&M.u(8).i6(e.cur_list_seq),e.count&&M.u(16).u(e.count),e.full_pull&&M.u(24).i(e.full_pull),e.degree&&M.u(32).u(e.degree),e.how&&M.u(40).u(e.how),M},Fn),C.FriendListRsp=(ts.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.full_list=e.i();break;case 6:v.fetch_end=e.i();break;case 7:v.friends.push(d.zim.FriendUpdateInfo.d(e,e.u()));break;case 8:v.friend_count=e.i();break;default:e.sk(7&Z)}}return v},ts),C.FriendUpdateInfo=(ss.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendUpdateInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.is_del=e.bl();break;case 2:v.info=d.zim.StFriendInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},ss),C.FriendApplyListRsp=(nr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendApplyListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.fetch_end=e.i();break;case 6:v.apply_list.push(d.zim.StFriendApplyInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},nr),C.ModifyFriendAttributeReq=(Os.e=function(e,M){if(M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.action&&M.u(16).i(e.action),e.attributes&&e.attributes.length)for(let V=0;V<e.attributes.length;++V)d.zim.StGroupAttribute.e(e.attributes[V],M.u(26).f()).l();return M},Os),C.ModifyFriendAttributeRsp=(Ls.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ModifyFriendAttributeRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.succ_keys.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 4:v.fail_keys.push(d.zim.StCheckFriendFail.d(e,e.u()));break;case 5:v.friend_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Ls),C.FriendCheckedRsp=(ir.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FriendCheckedRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.successes.push(d.zim.StCheckFriendFail.d(e,e.u()));break;case 4:v.fails.push(d.zim.StCheckFriendFail.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ir),C.StCheckFriendFail=(ki.e=function(e,M){return M=M||T.c(),e.user_id&&M.u(10).s(e.user_id),e.sub_code&&M.u(16).u(e.sub_code),e.relation&&M.u(24).i(e.relation),M},ki.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StCheckFriendFail;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.sub_code=e.u();break;case 3:v.relation=e.i();break;default:e.sk(7&Z)}}return v},ki),C.BlacklistAddRsp=(Ci.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.BlacklistAddRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.black_list.push(d.zim.StBlacklistInfo.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Ci),C.BlacklistDeleteRsp=(Di.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.BlacklistDeleteRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.black_list.push(d.zim.PushFriendRefuse.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Di),C.BlacklistRsp=(Et.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.BlacklistRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.cur_list_seq=e.i6(1);break;case 4:v.max_list_seq=e.i6(1);break;case 5:v.full_list=e.i();break;case 6:v.fetch_end=e.i();break;case 7:v.blacklists.push(d.zim.BlacklistUpdateInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Et),C.BlacklistUpdateInfo=(pt.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.BlacklistUpdateInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.is_del=e.bl();break;case 2:v.info=d.zim.StBlacklistInfo.d(e,e.u());break;default:e.sk(7&Z)}}return v},pt),C.StBlacklistInfo=(Je.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StBlacklistInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_base_info=d.zim.StUserBaseInfo.d(e,e.u());break;case 2:v.black_list_seq=e.i6(1);break;case 3:v.create_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Je),C.PushFriendAdd=(or.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendAdd;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.friend_info=d.zim.StFriendInfo.d(e,e.u());break;case 2:v.friend_list_seq=e.i6(1);break;case 3:v.apply_status_change=d.zim.StApplyStatusChange.d(e,e.u());break;default:e.sk(7&Z)}}return v},or),C.PushFriendAdd2Self=(ys.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendAdd2Self;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.friend_infos.push(d.zim.StFriendInfo.d(e,e.u()));break;case 2:v.apply_status_changes_list.push(d.zim.StApplyStatusChange.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ys),C.PushFriendApply=(qi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendApply;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.apply_info=d.zim.StFriendApplyInfo.d(e,e.u());break;case 2:v.apply_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},qi),C.PushFriendApply2Self=(ar.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendApply2Self;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.apply_infos.push(d.zim.StFriendApplyInfo.d(e,e.u()));break;case 2:v.friends.push(d.zim.StFriendInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},ar),C.PushFriendAccept=(wo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendAccept;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.friend_info=d.zim.StFriendInfo.d(e,e.u());break;case 2:v.friend_list_seq=e.i6(1);break;case 3:v.apply_list_seq=e.i6(1);break;case 4:v.apply_update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},wo),C.PushFriendRefuse=(Ro.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushFriendRefuse;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.apply_list_seq=e.i6(1);break;case 3:v.update_time=e.i6(1);break;default:e.sk(7&Z)}}return v},Ro),C.PushModifyFriendAttribute=(Vr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushModifyFriendAttribute;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.action=e.i();break;case 3:v.attributes.push(d.zim.StGroupAttribute.d(e,e.u()));break;case 4:v.friend_list_seq=e.i6(1);break;default:e.sk(7&Z)}}return v},Vr),C.PushBlacklistAdd=(Yr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushBlacklistAdd;e.pos<V;){var Z=e.u();Z>>>3==1?v.black_list.push(d.zim.StBlacklistInfo.d(e,e.u())):e.sk(7&Z)}return v},Yr),C.PushBlacklistDelete=(To.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushBlacklistDelete;e.pos<V;){var Z=e.u();Z>>>3==1?v.black_list.push(d.zim.PushFriendRefuse.d(e,e.u())):e.sk(7&Z)}return v},To),C.GetMuteInfoListRsp=(Jr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.GetMuteInfoListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.max_mute_seq=e.i6(1);break;case 4:v.user_ids.push(e.s());break;default:e.sk(7&Z)}}return v},Jr),C.MuteInfo=(Ii.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.MuteInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.peer_user_id=e.s();break;case 2:v.mute_list_seq=e.i6(1);break;case 3:v.mute=e.bl();break;default:e.sk(7&Z)}}return v},Ii),C.C2CMuteReq=(ur.e=function(e,M){if(M=M||T.c(),e.c2c_mute_list&&e.c2c_mute_list.length)for(let V=0;V<e.c2c_mute_list.length;++V)d.zim.GroupMuteReq.e(e.c2c_mute_list[V],M.u(10).f()).l();return M},ur),C.C2CMuteRsp=(Gs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.C2CMuteRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.mute_info.push(d.zim.MuteInfo.d(e,e.u()));break;case 4:v.error_user_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Gs),C.PushC2cMute=(Zs.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushC2cMute;e.pos<V;){var Z=e.u();Z>>>3==1?v.mute_info.push(d.zim.MuteInfo.d(e,e.u())):e.sk(7&Z)}return v},Zs),C.StTipsMsgContent=(js.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StTipsMsgContent;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.type=e.i();break;case 2:v.op_user_info=d.zim.PushRoomKickout.d(e,e.u());break;case 3:v.target_users.push(d.zim.PushRoomKickout.d(e,e.u()));break;case 4:v.group_data_flag=e.u();break;case 5:v.group_notice=e.s();break;case 6:v.group_name=e.s();break;case 7:v.group_avatar=e.b();break;case 8:v.forbid=d.zim.GroupForbid.d(e,e.u());break;case 9:v.forbid_expire_time=e.i6(1);break;case 10:v.role=e.i();break;default:e.sk(7&Z)}}return v},js),C.SetConvMarkReq=(Ai.e=function(e,M){if(M=M||T.c(),e.set_mark_c2c&&e.set_mark_c2c.length)for(let V=0;V<e.set_mark_c2c.length;++V)d.zim.ConvMarkInfo.e(e.set_mark_c2c[V],M.u(26).f()).l();if(e.set_mark_group&&e.set_mark_group.length)for(let V=0;V<e.set_mark_group.length;++V)d.zim.ConvMarkInfo.e(e.set_mark_group[V],M.u(34).f()).l();return M},Ai),C.SetConvMarkRsp=(wi.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SetConvMarkRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.succ_list.push(d.zim.ConvMarkInfo.d(e,e.u()));break;case 4:v.fail_list.push(d.zim.ConvMarkFailList.d(e,e.u()));break;default:e.sk(7&Z)}}return v},wi),C.ConvMarkInfo=(qr.e=function(e,M){return M=M||T.c(),e.conv_id&&M.u(10).s(e.conv_id),e.conv_type&&M.u(16).i(e.conv_type),e.mark_content&&M.u(24).u6(e.mark_content),e.mark_seq&&M.u(32).u6(e.mark_seq),e.action&&M.u(40).bl(e.action),M},qr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ConvMarkInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.conv_id=e.s();break;case 2:v.conv_type=e.i();break;case 3:v.mark_content=e.u6();break;case 4:v.mark_seq=e.u6(1);break;case 5:v.action=e.bl();break;default:e.sk(7&Z)}}return v},qr),C.ConvMarkFailList=(Hn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.ConvMarkFailList;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.conv_id=e.s();break;case 4:v.conv_type=e.i();break;default:e.sk(7&Z)}}return v},Hn),C.FetchConvMarkListRsp=(cr.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchConvMarkListRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.full_list=e.bl();break;case 4:v.max_mark_seq=e.u6();break;case 5:v.conv_mark_list.push(d.zim.ConvMarkInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},cr),C.PushConvMark=(At.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushConvMark;e.pos<V;){var Z=e.u();Z>>>3==1?v.succ_list.push(d.zim.ConvMarkInfo.d(e,e.u())):e.sk(7&Z)}return v},At),C.StUserStatusInfo=(Kn.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.StUserStatusInfo;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_id=e.s();break;case 2:v.user_status=e.i();break;case 3:v.user_devices=e.u();break;case 4:v.last_change_time=e.i6(1);break;case 5:v.expire_time=e.i6(1);break;case 6:v.custom_status=e.s();break;case 7:v.is_del=e.bl();break;case 8:v.last_change_time_custom=e.i6(1);break;default:e.sk(7&Z)}}return v.last_change_time_custom&&v.last_change_time_custom<1e10&&(v.last_change_time_custom*=1e3),v},Kn),C.SubscribeUserStatusRsp=(xo.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.SubscribeUserStatusRsp,{unsub:Z,sublist:Ie}=d.zim.SubscribeUserStatusRsp;e.pos<V;){var ze=e.u(),ct=ze>>>3;ct==1?v.code=e.u():ct==2?v.message=e.s():ct==3?Ie?v.max_seq=e.u6(1):v.min_seq=e.u6(1):ct==4?Ie?v.full_pull=e.bl():v.max_seq=e.u6(1):ct==5?Z?v.err_list.push(d.zim.ErrorUser.d(e,e.u())):v.succ_list.push(d.zim.StUserStatusInfo.d(e,e.u())):ct!=6||Z||Ie?e.sk(7&ze):v.err_list.push(d.zim.ErrorUser.d(e,e.u()))}return v},xo),C.FetchUserStatusRsp=(Va.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.FetchUserStatusRsp;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.code=e.u();break;case 2:v.message=e.s();break;case 3:v.succ_list.push(d.zim.StUserStatusInfo.d(e,e.u()));break;case 4:v.err_list.push(d.zim.ErrorUser.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Va),C.PushUserSelfStatus=(Ya.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushUserSelfStatus;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.user_status_seq=e.u6(1);break;case 2:v.user_devices=e.u();break;case 3:v.last_change_time=e.i6(1);break;case 4:v.custom_status=e.s();break;case 5:v.last_change_time_custom=e.i6(1);break;default:e.sk(7&Z)}}return v.last_change_time_custom&&v.last_change_time_custom<1e10&&(v.last_change_time_custom*=1e3),v},Ya),C.PushUserStatusChange=(Ja.d=function(e,M){e instanceof O||(e=O.c(e));for(var V=M===void 0?e.len:e.pos+M,v=new d.zim.PushUserStatusChange;e.pos<V;){var Z=e.u();switch(Z>>>3){case 1:v.min_seq=e.u6(1);break;case 2:v.max_seq=e.u6(1);break;case 3:v.succ_list.push(d.zim.StUserStatusInfo.d(e,e.u()));break;default:e.sk(7&Z)}}return v},Ja),C)},function(te,j,C){C.d(j,"a",function(){return x}),j=C(4);var O=C.n(j),T=C(82),_=C(1),E=C(0),g=function(){return(g=Object.assign||function(m){for(var f,c=1,u=arguments.length;c<u;c++)for(var s in f=arguments[c])Object.prototype.hasOwnProperty.call(f,s)&&(m[s]=f[s]);return m}).apply(this,arguments)},x=(A.prototype.setDB=function(m){this.dr.setDB(m)},A.prototype.clearDB=function(){this.dr.clearDB()},A.prototype.init=function(m){this.isInited||(this.isInited=!0,this.dr.init({isProd:this.isProd,appID:m,deviceID:this.st.deviceInfo.device_id,importantLevel:0,levels:[0,10]}))},A.prototype.start=function(m,f,c){var u;f?((u=new Map).set("userID",m),u.set("token",f),c&&u.set("serverUrl",c),this.dr.startReport(u),this.dr.resume()):this.dr.pause()},A.prototype.beginNetworkReq=function(m,f,c,u){var s=this.createDateEvent(m);s.caller_type=c,s._req_=u,this.evenDatatMap.set(m+f,s)},A.prototype.endNetworkReq=function(m,f,c,u){var s=this.evenDatatMap.get(m+f);!s||c&&Object(E.A)(c.code)||(c&&c.code?(s.error=c.code,s.error_message=(c.message||"")+(u||"")):(s.error_message=u||"",s._rsp_=c),s.time_consumed=Date.now()-s.time_consumed,this.upload(s,!0),this.evenDatatMap.delete(m+f))},A.prototype.reportNetworkReq=function(m,f){(m=this.createDateEvent(m)).time_consumed=0,m._rsp_=f,this.upload(m,!0)},A.prototype.reportSDKEvent=function(m,f){17040384e5<(m=this.createDateEvent(m,f)).time_consumed&&(m.time_consumed=0),this.upload(m,!1)},A.prototype.reportPushEvent=function(m,f,c,u){var s=this.createDateEvent("/sdk/push");s.push_cmd=m,s.push_id=c,s.push_type=this.stringify(u),s.time_consumed=f,this.upload(s,!1)},A.prototype.stringify=function(m){return JSON.stringify(m,function(f,c){var u;return c instanceof Uint8Array?"b="+c.length:c instanceof Array&&2<c.length?[u=c.length,c[0],c[u-1]]:typeof c=="string"&&64<c.length?"s="+c.length:c instanceof O.a?c.toString():c}).replace(/\"(\w+)\":/g,"$1:")},A.prototype.createDateEvent=function(m,f){return g(g({event:m,event_time:this.st.getRealClientTimestamp(),time_consumed:Date.now(),time_offset:this.st.serverOffsetTime},this.commonFields),f)},A.prototype.upload=function(m,f){if(f)try{this.hookCMDEvent(m)}catch{}m.net_type=this.st.netType,f=JSON.stringify(m,function(c,u){return u instanceof O.a?+u.toString():u}),this.dr.report(f,this.unSaveEvents.indexOf(m.event)!=-1)},A.prototype.set_offline_push=function(m,f){m.offline_push_w=f?f.pushStrategyId||"1":"0",f&&f.custom_map&&(m.offline_push_map=JSON.stringify(f.custom_map))},A.prototype.hookCMDEvent=function(m){var f,c,u=m._req_,s=m._rsp_;switch(delete m._req_,delete m._rsp_,m.event){case E.d.sw_login.cmd:m.os_type=_.i,this.st.advancedConfig.zim_cross_platform&&(m.cross_platform=this.st.advancedConfig.zim_cross_platform),this.st.advancedConfig.zim_product_source&&(m.product_source=this.st.advancedConfig.zim_product_source),this.st.advancedConfig.geoFence.id&&(f=(c=this.st.advancedConfig.geoFence).id,m.geo_fence=JSON.stringify({id:f,type:c.type,areas:c.areas,dispatch:c.dispatch})),m.zpns_push_id=u.zpns_push_id,m.device_id=this.st.deviceInfo.device_id,m.sdk_action=u.sdk_action,m.sdk_duration=u.sdk_duration,m.sdk_time=new Date().toString(),_.p||(m.sdk_origin=location.origin),m.server_ip=u.sdk_server_ip,s&&(m.usernid=s.rspHeader.user_nid.toString(),m.session_id=s.rspHeader.session_id.toString(),m.hb_interval=s.hb_interval,m.hb_timeout=s.hb_timeout,m.server_timestamp=s.server_timestamp,m.im_conf_json=s.im_conf_json);break;case E.d.sw_logout.cmd:m.reason=u.reason;break;case E.d.sw_renew_token.cmd:m.sdk_duration=u.sdk_duration;break;case E.d.sw_hb.cmd:s&&(m.heartbeat_interval=s.heartbeat_interval,m.hb_timeout=s.hb_timeout,m.server_timestamp=s.server_timestamp);break;case E.d.swp_kickout.cmd:m.error=s.code,m.error_message=s.key,m.need_relogin=s.seq;break;case E.d.swp_redirect.cmd:m.error_message=s.user_ids.join();break;case E.d.user_mdf.cmd:m.set_flag=u.set_flag;break;case E.d.user_fetch.cmd:s&&(m.result_len=s.result.length,m.err_list_len=s.err_list.length,0<m.err_list_len)&&m.err_list_len<6&&(m.err_list=JSON.stringify(s.err_list));break;case E.d.user_zpns.cmd:m.zpns_push_id=u.key;break;case E.d.conv_hb.cmd:s&&(m.conv_list_seq=s.conv_list_seq,m.group_list_seq=s.group_list_seq,m.c2c_msg_seq=s.c2c_msg_seq,m.c2c_statemsg_seq=s.c2c_statemsg_seq,m.extra_msg_list_seq=s.extra_msg_list_seq,m.conv_pinned_list_seq=s.conv_pinned_list_seq,m.call_list_seq=s.call_list_seq,m.db_seq_json=JSON.stringify(u.db_seq_json),m.im_conf_json=JSON.stringify(Object(_.s)(this.pickCmds.usermail_hb,s)));break;case E.d.conv_list.cmd:m.how=u.how,m.count=u.count,m.full_pull=u.full_pull,m.conv_list_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.rsp_conv_list_seq=s.cur,m.max_list_seq=s.max,m.full_list=s.full_list,m.fetch_end=s.fetch_end);break;case E.d.conv_pinned_list.cmd:m.how=u.how,m.count=u.count,m.full_pull=u.full_pull,m.conv_pinned_list_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.rsp_conv_pinned_list_seq=s.cur,m.max_pinned_list_seq=s.max,m.full_list=s.full_list,m.fetch_end=s.fetch_end);break;case E.d.conv_del.cmd:m.conv_id=u.conv_id,m.conv_type=u.conv_type,s&&(m.conv_list_seq=s.conv_list_seq,m.conv_msg_seq=s.conv_msg_seq);break;case E.d.conv_pinned.cmd:m.conv_id=u.user_id,m.conv_type=u.sub_code,m.pinned_type=u.relation;break;case E.d.conv_read_seq.cmd:m.conv_id=u.conv_id,m.conv_type=u.conv_type,m.read_seq=u.read_seq,s&&s.conv_list_seq&&s.conv_list_seq!=u.read_seq&&(m.read_seq_rsp=s.conv_list_seq);break;case E.d.msglist_0.cmd:m.conv_id=u.conv_id,m.conv_type=u.conv_type,m.how=u.how,m.count=u.count,m.mode=u.mode,m.login_fetch=u.login_fetch,m.conv_msg_seq=u.conv_msg_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.next_conv_msg_seq=s.next_seq,m.max_conv_msg_seq=s.maxSeq);break;case E.d.msglist_2.cmd:m.group_id=u.group_id,m.how=u.how,m.count=u.count,m.sort_type=u.sort_type,m.conv_msg_seq=u.conv_msg_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.next_conv_msg_seq=s.next_seq,m.max_conv_msg_seq=s.maxSeq);break;case E.d.msglist_1.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.how=u.how,m.count=u.count,m.sort_type=u.sort_type,m.conv_msg_seq=u.conv_msg_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.next_conv_msg_seq=s.next_seq,m.max_conv_msg_seq=s.maxSeq);break;case E.d.msg_text_0.cmd:u.sdk_action&&(m.sdk_action=u.sdk_action),m.peer_user_id=u.conv_id,m.fetch_peer_user_info=u.fetch_peer_user_info,m.msg_type=u.msg_info.msg_type,m.msg_len=u.msg_info.msg.length,m.priority=u.msg_info.priority_type,this.set_offline_push(m,u.msg_info.offline_push),s&&(m.conv_disable=s.conv_disable,m.send_count_after_read=s.send_count_after_read,m.msg_id=s.msg_svr_info.msg_id,m.conv_msg_seq=s.msg_svr_info.conv_msg_seq,m.c2c_msg_seq=s.msg_svr_info.c2c_msg_seq,m.has_content=s.msg_svr_info.has_content,m.msg_version=s.msg_svr_info.version);break;case E.d.msg_cmd_0.cmd:m.peer_user_id=u.conv_id,m.msg_type=u.command_msg_info.msg_type,m.msg_len=u.command_msg_info.msg.length,m.priority=u.command_msg_info.priority_type,s&&(m.msg_id=s.command_svr_info.msg_id.toString(),m.msg_time=s.command_svr_info.conv_msg_seq);break;case E.d.msg_del_0.cmd:m.conv_id=u.conv_id,m.conv_type=u.conv_type,m.msg_ids_len=u.msg_ids.length,0<m.msg_ids_len&&m.msg_ids_len<6&&(m.msg_ids=u.msg_ids.join());break;case E.d.msg_del_all_0.cmd:m.conv_id=u.conv_id,m.conv_type=u.conv_type;break;case E.d.msg_text_2.cmd:u.sdk_action&&(m.sdk_action=u.sdk_action),m.group_id=u.conv_id,m.msg_type=u.msg_info.msg_type,m.msg_len=u.msg_info.msg.length,m.priority=u.msg_info.priority_type,this.set_offline_push(m,u.msg_info.offline_push),s&&(m.send_count_after_read=s.send_count_after_read,m.msg_id=s.msg_svr_info.msg_id,m.conv_msg_seq=s.msg_svr_info.conv_msg_seq,m.has_content=s.msg_svr_info.has_content,m.msg_version=s.msg_svr_info.version);break;case E.d.msg_cmd_2.cmd:m.group_id=u.conv_id,m.msg_type=u.command_msg_info.msg_type,m.msg_len=u.command_msg_info.msg.length,m.priority=u.command_msg_info.priority_type,s&&(m.msg_id=s.command_svr_info.msg_id.toString(),m.msg_time=s.command_svr_info.conv_msg_seq);break;case E.d.msg_del_2.cmd:m.group_id=u.conv_id,m.conv_msg_seq_len=u.conv_msg_seq.length,0<m.conv_msg_seq_len&&m.conv_msg_seq_len<6&&(m.conv_msg_seqs=u.conv_msg_seq.join());break;case E.d.msg_del_all_2.cmd:m.group_id=u.conv_id;break;case E.d.msg_text_1.cmd:u.sdk_action&&(m.sdk_action=u.sdk_action),m.room_id=u.conv_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.msg_type=u.msg_info.msg_type,m.msg_len=u.msg_info.msg.length,m.priority=u.msg_info.priority_type,s&&(m.msg_id=s.msg_svr_info.msg_id.toString(),m.conv_msg_seq=s.msg_svr_info.conv_msg_seq,m.has_content=s.msg_svr_info.has_content,m.msg_version=s.msg_svr_info.version);break;case E.d.msg_cmd_1.cmd:m.room_id=u.conv_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.msg_type=u.command_msg_info.msg_type,m.msg_len=u.command_msg_info.msg.length,m.priority=u.command_msg_info.priority_type,s&&(m.msg_id=s.msg_id.toString());break;case E.d.file_upload.cmd:m.md5=u.md5,m.file_type=u.file_type,m.name=u.name,m.size=u.size,m.duration=u.duration,s&&(m.state=s.state,m.upload_url=s.upload_req.url,m.upload_url.indexOf("?"))&&(m.upload_url=m.upload_url.substring(0,m.upload_url.indexOf("?")));break;case E.d.file_process.cmd:m.md5=u.md5,m.file_type=u.file_type,s&&(m.state=s.state,m.download_url=s.download_url,m.download_url.indexOf("?"))&&(m.download_url=m.download_url.substring(0,m.download_url.indexOf("?")));break;case E.d.conv_read.cmd:m.conv_id=u.group_id,m.conv_msg_seq=u.cur_list_seq,s&&(m.receipt_seq=s.conv_list_seq);break;case E.d.msg_read_0.cmd:m.conv_id=u.conv_id,m.conv_msg_seq_len=u.conv_msg_seq.length,s&&(m.receipt_seqs=JSON.stringify(s.conv_msg_seq2_receipt_seq));break;case E.d.msg_read_2.cmd:m.group_id=u.conv_id,m.conv_msg_seq_len=u.conv_msg_seq.length,s&&(m.receipt_seqs=JSON.stringify(s.conv_msg_seq2_receipt_seq));break;case E.d.msg_read_detail.cmd:m.group_id=u.group_id,m.conv_msg_seq=u.cur_list_seq,s&&(m.list_seq=s.list_seq,m.fetch_end=s.fetch_end,m.next_list_seq=s.next_list_seq,m.read_count=s.read_count,m.unread_count=s.unread_count,m.read_members_len=s.read_members_len,m.unread_members_len=s.unread_members_len,m.degree=s.degree);break;case E.d.msg_revoke_0.cmd:case E.d.msg_revoke_2.cmd:u.conv_id&&(m.conv_id=u.conv_id),m.conv_msg_seq=u.conv_msg_seq,m.extended_data_len=((f=u.payload)==null?void 0:f.length)||0,this.set_offline_push(m,u.offline_push),s&&(m.statemsg_seq=s.statemsg_seq);break;case E.d.add_reaction_0.cmd:case E.d.del_reaction_0.cmd:case E.d.add_reaction_2.cmd:case E.d.del_reaction_2.cmd:m.conv_id=u.conv_id,m.conv_msg_seq=u.conv_msg_seq,m.reaction_key=Array.isArray(u.reaction_key)?u.reaction_key[0]:u.reaction_key,s&&(m.succ_list_len=s.succ_list.length,m.error_list_len=s.error_list.length);break;case E.d.get_reaction_0.cmd:case E.d.get_reaction_2.cmd:m.conv_id=u.conv_id,m.conv_msg_seq=u.conv_msg_seq,m.reaction_key=u.reaction_key,m.max_reaction_seq=u.max_reaction_seq,m.is_detail=u.is_detail,s&&(m.rsp_max_reaction_seq=s.max_reaction_seq,m.total_user_count=s.total_user_count,m.user_reaction_len=s.user_reaction.length,m.include_self=s.include_self);break;case E.d.reaction_list_0.cmd:case E.d.reaction_list_2.cmd:m.conv_id=u.conv_id,m.conv_msg_seq=u.conv_msg_seq,m.start_reaction_seq=u.start_reaction_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.msg_next_reaction_seq=s.msg_next_reaction_seq,m.msg_max_reaction_seq=s.msg_max_reaction_seq);break;case E.d.extra_msglist.cmd:m.how=u.how,m.count=u.count,m.list_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.next_list_seq=s.next_list_seq);break;case E.d.msg_state_list_0.cmd:case E.d.msg_state_list_2.cmd:m.conv_id=u.conv_id,m.min_msg_seq=u.min_msg_seq,m.max_msg_seq=u.max_msg_seq,m.how=u.how,m.statemsg_seq=u.statemsg_seq,m.count=u.count,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.next_statemsg_seq=s.next_statemsg_seq);break;case E.d.msg_query_0.cmd:case E.d.msg_query_2.cmd:case E.d.msg_query_1.cmd:m.event==E.d.msg_query_0.cmd?m.conv_id=u.room_id:m.event==E.d.msg_query_2.cmd?m.group_id=u.room_id:(m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString()),m.client_infos_len=u.client_infos.length,s&&(m.msgs_len=s.msgs.length,m.fail_list_len=s.fail_list.length);break;case E.d.rm_create.cmd:case E.d.rm_enter.cmd:case E.d.rm_check.cmd:case E.d.rm_switch.cmd:m.room_id=u.room_id,m.create_if_not_exist=u.create_if_not_exist||!1,u.sdk_action&&(m.sdk_action=u.sdk_action),u.last_room&&(m.last_room_id=u.last_room.room_id),s&&(m.sub_room_id=s.sub_room_id,m.room_session_id=s.room_session_id.toString(),m.room_user_session_id=s.room_user_session_id.toString(),m.destroy_delay=u.destroy_delay||s.destroy_delay||0,m.userlist_seq=s.userlist_seq||0,m.user_count=s.user_count||0,m.room_info_interval=s.room_info_interval,m.userlist_enable=s.userlist_enable,m.userlist_merge_timeout=s.userlist_merge_timeout,m.userlist_interval=s.userlist_interval,s.attributes&&(m.attribute_seq=s.attributes.attribute_seq,m.attributes_len=s.attributes.attributes.length),m.attributes_pull_interval=s.attributes_pull_interval,m.attributes_merge_timeout=s.attributes_merge_timeout,m.msg_merge_timeout=s.msg_merge_timeout,m.msg_pull_interval=s.msg_pull_interval,m.enabled_offline_msg=s.enabled_offline_msg,m.conv_msg_seq=s.conv_msg_seq);break;case E.d.rm_quit.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString();break;case E.d.rm_quit_all.cmd:m.room_ids=s.room_list.map(function(r){return r.room_id}).join(",");break;case E.d.rm_info.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),s&&(m.userlist_seq=s.userlist_seq,m.user_count=s.user_count,m.room_info_interval=s.room_info_interval,m.ulist_to=s.ulist_to,m.ulist_itvl=s.ulist_itvl,m.attribute_seq=s.attribute_seq,m.max_conv_msg_seq=s.max_conv_msg_seq);break;case E.d.rm_userlist.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.count=u.count,m.mode=u.mode,m.expect_seq=u.expect_seq,m.pos_flag=u.pos_flag,m.degree=u.degree,s&&(m.rsp_pos_flag=s.pos_flag,m.userlist_seq=s.userlist_seq,m.user_count=s.user_count);break;case E.d.rm_userinfos.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.user_ids_len=u.user_ids.length,s&&(m.user_infos_len=s.result.length,m.errlist_len=s.err_list.length,0<m.errlist_len)&&m.errlist_len<6&&(m.errlist=JSON.stringify(s.err_list));break;case E.d.rm_attr.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.attribute_seq=u.attributes.attribute_seq,s&&s.attributes&&(m.rsp_attribute_seq=s.attributes.attribute_seq,m.attributes_len=s.attributes.attributes.length);break;case E.d.rm_attr_mdf.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.force_modify=u.force_modify,m.set_member=u.set_member,m.op_fail_fast=u.op_fail_fast,m.attribute_seq=u.attribute_seq,m.attribute_action=(c=u.attributes[0])==null?void 0:c.action,m.attributes_len=u.attributes.length,s&&(s.attributes&&(m.rsp_attribute_seq=s.attributes.attribute_seq,m.rsp_attributes_len=s.attributes.attributes.length),m.err_list_len=s.err_list.length,0<m.err_list_len)&&m.err_list_len<6&&(m.err_list=JSON.stringify(s.err_list));break;case E.d.rm_user_attr_mdf.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.force_modify=u.force_modify,m.auto_save=u.auto_save,m.op_fail_fast=u.op_fail_fast,m.user_ids_len=u.attributes.user_ids.length,m.attributes_len=u.attributes.modify_attribute.length,s&&(m.user_attributes_len=s.user_attributes.length,m.user_err_list_len=s.user_err_list.length,0<m.user_err_list_len)&&m.user_err_list_len<6&&(m.user_err_list=JSON.stringify(s.user_err_list));break;case E.d.rm_user_attr.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.req_attributes_len=u.req_attributes.length,s&&(m.user_attributes_len=s.user_attributes.length);break;case E.d.rm_user_attr_list.cmd:m.room_id=u.room_id,m.sub_room_id=u.sub_room_id,m.room_session_id=u.room_session_id.toString(),m.room_user_session_id=u.room_user_session_id.toString(),m.pos_flag=u.pos_flag,m.count=u.count,s&&(m.user_attributes_len=s.user_attributes.length,m.rsp_pos_flag=s.pos_flag,m.user_count=s.user_count,m.user_attributes_list_seq=s.user_attributes_list_seq);break;case E.d.gp_create.cmd:m.group_id=u.group_id,m.group_name=u.group_name,m.group_notice=u.group_notice,m.user_ids_len=u.user_ids.length,m.attributes_len=((f=u.attributes)==null?void 0:f.length)||0,m.group_avatar_len=((c=u.group_avatar)==null?void 0:c.length)||0,s&&(m.members_len=s.members.length,m.member_count=s.member_count,m.group_list_seq=s.group_list_seq,m.group_data_seq=s.group_data_seq,m.group_attribute_seq=s.group_attribute_seq,m.member_all_seq=s.member_all_seq,m.error_users_len=s.error_users.length,0<m.error_users_len)&&m.error_users_len<6&&(m.error_users=JSON.stringify(s.error_users));break;case E.d.gp_enter.cmd:m.group_id=u.key,s&&(m.group_name=s.group_name,m.group_avatar_len=((f=s.group_avatar)==null?void 0:f.length)||0,s.properties&&(m.attributes_len=s.properties.attributes.length),m.member_count=s.member_count,m.group_list_seq=s.group_list_seq,m.group_data_seq=s.group_data_seq,m.group_attribute_seq=s.group_attribute_seq,m.member_all_seq=s.member_all_seq,m.conv_msg_seq=s.conv_msg_seq);break;case E.d.gp_invite.cmd:m.group_id=u.group_id,m.user_ids_len=(u.user_infos||u.user_ids).length,s&&(m.member_count=s.member_count,m.members_len=s.members.length,m.group_data_seq=s.group_data_seq,m.group_attribute_seq=s.group_attribute_seq,m.member_all_seq=s.member_all_seq,m.error_users_len=s.error_users.length,0<m.error_users_len)&&m.error_users_len<6&&(m.error_users=JSON.stringify(s.error_users));break;case E.d.gp_kickout.cmd:m.group_id=u.group_id,m.user_ids_len=u.user_ids.length,s&&(m.member_count=s.member_count,m.member_all_seq=s.member_all_seq,m.error_users_len=s.error_users.length,0<m.error_users_len)&&m.error_users_len<6&&(m.error_users=JSON.stringify(s.error_users));break;case E.d.gp_quit.cmd:case E.d.gp_destroy.cmd:m.group_id=u.group_id,s&&(m.group_list_seq=s.conv_list_seq);break;case E.d.gp_list.cmd:m.how=u.how,m.full_pull=u.full_pull,m.count=u.count,m.cur_list_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.fetch_end=s.fetch_end,m.full_list=s.full_list,m.rsp_cur_list_seq=s.cur,m.max_list_seq=s.max);break;case E.d.gp_infos.cmd:m.group_ids_len=u.user_ids.length,s&&(m.group_infos_len=s.group_infos.length,m.fail_keys_len=s.fail_keys.length);break;case E.d.gp_owner_transfer.cmd:m.group_id=u.group_id,m.req_user_id=u.group_name,s&&(m.old_owner_data_seq=s.conv_list_seq,m.new_owner_data_seq=s.conv_msg_seq);break;case E.d.gp_data.cmd:m.group_id=u.group_id,s&&(m.group_name=s.group_name,m.group_notice=s.group_notice,m.group_avatar_len=((c=s.group_avatar)==null?void 0:c.length)||0,m.group_data_seq=s.group_data_seq);break;case E.d.gp_attr.cmd:m.group_id=u.group_id,m.attributes_len=((f=u.attributes.attributes)==null?void 0:f.length)||0,m.attribute_seq=u.attributes.seq,s&&(m.rsp_attributes_len=s.attributes.attributes.length,m.rsp_attribute_seq=s.attributes.seq);break;case E.d.conv_mute_2.cmd:m.group_id=u.conv_id,m.enable=u.enable;break;case E.d.gp_mdf_name.cmd:m.group_id=u.group_id,m.group_name=u.group_name,s&&(m.group_data_seq=s.conv_list_seq);break;case E.d.gp_mdf_avatar.cmd:m.group_id=u.user_id,m.group_avatar_len=u.user_name.length,s&&(m.group_data_seq=s.conv_list_seq);break;case E.d.gp_mdf_notice.cmd:m.group_id=u.group_id,m.group_notice=u.group_name,s&&(m.group_data_seq=s.conv_list_seq);break;case E.d.gp_mdf_attr.cmd:m.group_id=u.group_id,m.attribute_action=u.attributes.action,m.attributes_len=u.attributes.attributes.length,s&&(m.attribute_seq=s.attributes.seq,m.fail_keys_len=s.fail_keys.length,0<m.fail_keys_len)&&m.fail_keys_len<6&&(m.fail_keys=JSON.stringify(s.fail_keys));break;case E.d.gp_member_list.cmd:m.how=u.how,m.group_id=u.group_id,m.count=u.count,m.full_pull=u.full_pull,m.cur_member_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.rsp_cur_member_seq=s.cur_list_seq,m.member_all_seq=s.member_all_seq,m.full_list=s.full_list,m.fetch_end=s.fetch_end,m.member_count=s.member_count);break;case E.d.gp_members_by_seq.cmd:m.group_id=u.conv_id,m.member_seqs_len=u.conv_msg_seq.length,s&&(m.members_len=s.members.length);break;case E.d.gp_member_data.cmd:m.group_id=u.group_id,m.req_user_id=u.user_id,s&&s.member&&s.member.member_data&&(c=s.member.member_data,m.user_name=c.user_name,m.group_nick_name=c.group_nick_name,m.role=c.role,m.user_avatar_len=((f=c.user_avatar)==null?void 0:f.length)||0);break;case E.d.gp_member_nickname.cmd:m.group_id=u.group_id,m.req_user_id=u.group_name,m.member_nickname=u.group_notice,s&&(m.member_data_seq=s.conv_list_seq);break;case E.d.gp_member_role.cmd:m.group_id=u.group_id,m.req_user_id=u.user_id,m.role=u.role,s&&(m.member_data_seq=s.conv_list_seq);break;case E.d.cl_create.cmd:m.call_id=u.call_id,m.user_ids_len=u.user_ids.length,m.extended_data_len=((c=u.payload)==null?void 0:c.length)||0,m.call_mode=u.call_mode,this.set_offline_push(m,u.offline_info),s&&(m.timeout=u.timeout||s.timeout,m.call_seq=s.call_seq,m.call_list_seq=s.call_list_seq,m.create_time=s.create_time,m.err_list_len=s.new_err_list.length,0<m.err_list_len)&&m.err_list_len<6&&(m.err_list=JSON.stringify(s.new_err_list));break;case E.d.cl_cancel.cmd:m.call_id=u.call_id,m.state=u.timeout,m.user_ids_len=u.user_ids.length,m.extended_data_len=((f=u.payload)==null?void 0:f.length)||0,this.set_offline_push(m,u.offline_info),s&&(m.call_seq=s.call_seq,m.call_list_seq=s.now_time,m.err_list_len=s.err_list.length,0<m.err_list_len)&&m.err_list_len<6&&(m.err_list=JSON.stringify(s.err_list));break;case E.d.cl_accept.cmd:case E.d.cl_enter.cmd:m.call_id=u.user_id,m.extended_data_len=((c=u.user_name)==null?void 0:c.length)||0,s&&(m.call_seq=s.call_list_seq,m.call_list_seq=s.talk_time,m.accept_time=s.quit_time||s.accept_time);break;case E.d.cl_refuse.cmd:m.call_id=u.call_id,m.extended_data_len=((f=u.extended_data)==null?void 0:f.length)||0,s&&(m.call_seq=s.call_list_seq,m.call_list_seq=s.talk_time);break;case E.d.cl_ack.cmd:m.call_id=u.call_id;break;case E.d.cl_info.cmd:m.call_id=u.call_id,s&&(m.user_list_len=s.user_list.length,m.call_seq=s.call_seq);break;case E.d.cl_invite.cmd:m.call_id=u.call_id,m.user_ids_len=u.user_ids.length,this.set_offline_push(m,u.offline_info),s&&(m.call_seq=s.call_seq,m.timeout=s.timeout,m.err_list_len=s.err_list.length,0<m.err_list_len)&&m.err_list_len<6&&(m.err_list=JSON.stringify(s.err_list));break;case E.d.cl_quit.cmd:m.call_id=u.call_id,m.extended_data_len=((c=u.payload)==null?void 0:c.length)||0,this.set_offline_push(m,u.offline_info),s&&(m.call_list_seq=s.call_list_seq,m.talk_time=s.talk_time,m.quit_time=s.quit_time,m.call_seq=s.call_seq);break;case E.d.cl_destroy.cmd:m.call_id=u.call_id,m.extended_data_len=((f=u.payload)==null?void 0:f.length)||0,this.set_offline_push(m,u.offline_info),s&&(m.call_list_seq=s.call_list_seq,m.destroy_time=s.talk_time);break;case E.d.cl_list.cmd:m.how=u.how,m.count=u.count,m.cur_list_seq=u.cur_list_seq,m.degree=u.degree,s&&(m.rsp_cur_list_seq=s.cur,m.max_list_seq=s.max,m.fetch_end=s.fetch_end);break;default:(u||s)&&(m.webmessage=this.stringify({req:u,rsp:s}))}},A);function A(m,f){this.st=m,this.dr=new T.a("zim",_.p),this.evenDatatMap=new Map,this.isProd=!0,this.isInited=!1,this.commonFields={error:0,error_message:"",sdk_version:"",term_type:_.p?"miniprogram":"web",net_type:""},this.unSaveEvents=[E.d.sw_hb.cmd,E.d.conv_hb.cmd,E.d.rm_info.cmd],this.pickCmds={usermail_hb:["msg_to","msg_itvl","list_to","list_itvl","conv_to","conv_itvl","group_to","group_itvl"]},this.commonFields.sdk_version=f+".0"}},function(te,j,C){var O=C(37);C.d(j,"a",function(){return O.a})},function(te,j,C){C.d(j,"a",function(){return x});var O=C(84),T=C(87),_=C(3),E=function(m,f){var c=typeof Symbol=="function"&&m[Symbol.iterator];if(!c)return m;var u,s,r=c.call(m),i=[];try{for(;(f===void 0||0<f--)&&!(u=r.next()).done;)i.push(u.value)}catch(a){s={error:a}}finally{try{u&&!u.done&&(c=r.return)&&c.call(r)}finally{if(s)throw s.error}}return i},g=function(m,f,c){if(arguments.length===2)for(var u,s=0,r=f.length;s<r;s++)!u&&s in f||((u=u||Array.prototype.slice.call(f,0,s))[s]=f[s]);return m.concat(u||Array.prototype.slice.call(f))},x=(A.prototype.setLogServer=function(m){this.openWebSocketLogServer(m)},A.prototype.setLogUrlParams=function(m){this.logParams=m},A.prototype.openWebSocketLogServer=function(m){var f,c=this;m&&this.logParams.id_name&&(this.url=m,this.stopWebSocketServer(),f={product:this.logParams.product,appid:this.logParams.appid,id_name:this.logParams.id_name,deviceid:this.logParams.deviceid,token:encodeURIComponent(this.logParams.signature)},this.service.createSocket(m,f),this.service.openHandler(function(){c.service.onPush(),c.service.startCheck(),c.openHandler()}),this.service.closeHandler(function(){c.service.closeSocket()}))},A.prototype.stopWebSocketServer=function(){this.service.closeSocket()},A.prototype.openHandler=function(){this.startReport()},A.prototype.setPostSucCallback=function(m){this.postSucCallback=m},A.prototype.setPostFailCallback=function(m){this.postFailCallback=m},A.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},A.prototype.report=function(m){this.packageLen++,this.reportQueue.enqueue(m),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport()},A.prototype.startReport=function(){var m,f,c=this;this.reportQueue.size()<1||(m=this.reportQueue.dequeue(),f=0,m.forEach(function(u){return f+=u.value.length}),this.tokenBucket.removeTokens(f,function(){c.reportData(m,function(){c.failCount=0,c.failStartTime=0,c.packageLen--,c.postSucCallback&&c.postSucCallback(m)},function(u){c.reportQueue.enqueue(m),c.failCount++,c.failCount==0&&(c.failStartTime=Date.now());var s=(Date.now()-c.failStartTime)/1e3;10<=c.failCount&&60<s?(c.netWorkFail=!0,s=c.decodeReportQueue(),c.postFailCallback(s)):u!==_.e&&c.startReport()})}))},A.prototype.reportData=function(m,f,c){var u=this;m=m.map(function(s){return s.value}),this.service.sendMessage(m,f,function(s){s===_.e&&u.setLogServer(u.url),c&&c(s)})},A.prototype.decodeReportQueue=function(){for(var m=[];this.reportQueue.size();){var f=this.reportQueue.dequeue();m.push.apply(m,g([],E(f),!1))}return m},A);function A(m){this.packageLen=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.service=new O.a(m),this.reportQueue=new _.d,this.tokenBucket=new T.a(1e4,2e3,"sec")}},function(te,j,C){C.d(j,"a",function(){return _});var O=C(85),T=C(3),_=(E.prototype.handleSendCommandMsgRsp=function(g){var x,A=this,m=this.service.sendCommandMap[g.messageId];m!=null&&(x=m._data,delete this.service.sendCommandMap[g.messageId],this.service.sendCommandList.remove(m),g.code===0?setTimeout(function(){x&&x.success!=null&&x.success(g,A.cmdSeq)},0):setTimeout(function(){x&&x.error!=null&&x.error(g,A.cmdSeq)},0))},E.prototype.onPush=function(){var g=this;this.service.onMessage=function(x){g.handleSendCommandMsgRsp(x)}},E.prototype.closeHandler=function(g){this.service.closeHandler(g)},E.prototype.openHandler=function(g){this.service.openHandler(g)},E.prototype.errorHandler=function(g){this.service.errorHandler(g)},E.prototype.startCheck=function(){this.service.startCheck()},E.prototype.stopCheck=function(){this.service.stopCheck()},E.prototype.createSocket=function(g,x){this.service.createSocket(g,x)},E.prototype.closeSocket=function(){this.service.closeSocket()},E.prototype.sendMessage=function(g,x,A){var m=this;this.service.isDisConnect()?setTimeout(function(){m.service.isDisConnect()?A&&A(T.e):m.service.sendMessage(++m.cmdSeq,g,x,A)},100):this.service.sendMessage(++this.cmdSeq,g,x,A)},E);function E(g){this.cmdSeq=0,this.service=new O.a(g)}},function(te,j,C){C.d(j,"a",function(){return _});var O=C(86),T=C(3),_=(E.prototype.createSocket=function(g,x){var A=this;try{this.closeSocket();var m=this.miniProgram?"zego.impl.wx":"zego.impl.web",f=C(38)("./"+m).createZegoWebSocket;this.socket=f(g,x,this.miniProgram),this.socket.onerror=function(){A.closeSocket();var c=A.recreateTime.shift();c&&setTimeout(function(){return A.createSocket(g,x)},c)}}catch{}},E.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},E.prototype.isDisConnect=function(){return!this.socket},E.prototype.sendMessage=function(g,x,A,m){if(A===void 0&&(A=null),m===void 0&&(m=null),this.socket){A={data:x={message_id:g,s:'{"speed_detail":['.concat(x.join(),"]}")},seq:g,deleted:!1,sendTime:Date.now(),timeOut:6e3,success:A,error:m},A=this.sendCommandList.push(A),this.sendCommandMap[g]=A;try{this.socket.send(Object(O.a)(JSON.stringify(x)))}catch{}}},E.prototype.checkSendMessageList=function(g){for(var x=g.getFirst();x!=null;)g.remove(x),x._data&&x._data.error&&setTimeout(function(){x&&x._data&&x._data.error&&x._data.error(T.f.TIMEOUT,x._data.data.message_id,x._data.data.s)},0),x=g.getFirst()},E.prototype.checkMessageListTimeout=function(g,x){for(var A=g.getFirst(),m=Date.now(),f=0;!(A==null||A._data&&A._data.sendTime+A._data.timeOut>m||(A._data&&delete x[A._data.data.message_id],g.remove(A),A._data&&A._data.error==null||A._data&&A._data.sendTime+this.sendDataDropTimeout<m||A&&A._data&&A._data.error&&A._data.error(T.f.TIMEOUT,A._data.data.message_id,A._data.data.s),++f>=this.sendDataCheckOnceCount));)A=g.getFirst()},E.prototype.startCheck=function(){var g=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout(function(){g.startCheck()},this.sendDataCheckInterval)},E.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},E.prototype.openHandler=function(g){var x=this;this.socket&&(this.socket.onopen=function(A){x.responseHandler(),g(A)})},E.prototype.responseHandler=function(){var g=this;this.socket&&(this.socket.onmessage=function(x){x=typeof x.data=="string"?JSON.parse(x.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(x.data))),g.onMessage(x)})},E.prototype.closeHandler=function(g){this.socket&&(this.socket.onclose=function(x){g(x)})},E.prototype.errorHandler=function(g){this.socket&&(this.socket.onerror=g)},E.prototype.onMessage=function(g){},E);function E(g){this.miniProgram=g,this.socket=null,this.sendCommandList=new T.c,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.recreateTime=[2e3,4e3,8e3]}},function(te,j,C){C.d(j,"a",function(){return Rn});function O(N){let ne=N.length;for(;0<=--ne;)N[ne]=0}let T,_,E,g=256,x=286,A=30,m=15,f=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Array(576),i=(O(r),new Array(60)),a=(O(i),new Array(512)),o=(O(a),new Array(256)),l=(O(o),new Array(29)),h=(O(l),new Array(A));function R(N,ne,$,pe,le){this.static_tree=N,this.extra_bits=ne,this.extra_base=$,this.elems=pe,this.max_length=le,this.has_stree=N&&N.length}function w(N,ne){this.dyn_tree=N,this.max_code=0,this.stat_desc=ne}O(h);let d=N=>N<256?a[N]:a[256+(N>>>7)],D=(N,ne)=>{N.pending_buf[N.pending++]=255&ne,N.pending_buf[N.pending++]=ne>>>8&255},S=(N,ne,$)=>{N.bi_valid>16-$?(N.bi_buf|=ne<<N.bi_valid&65535,D(N,N.bi_buf),N.bi_buf=ne>>16-N.bi_valid,N.bi_valid+=$-16):(N.bi_buf|=ne<<N.bi_valid&65535,N.bi_valid+=$)},y=(N,ne,$)=>{S(N,$[2*ne],$[2*ne+1])},k=(N,ne)=>{let $=0;for(;$|=1&N,N>>>=1,$<<=1,0<--ne;);return $>>>1},b=(N,ne,$)=>{var pe=new Array(16);let le,de,ye=0;for(le=1;le<=m;le++)ye=ye+$[le-1]<<1,pe[le]=ye;for(de=0;de<=ne;de++){var Me=N[2*de+1];Me!==0&&(N[2*de]=k(pe[Me]++,Me))}},U=N=>{let ne;for(ne=0;ne<x;ne++)N.dyn_ltree[2*ne]=0;for(ne=0;ne<A;ne++)N.dyn_dtree[2*ne]=0;for(ne=0;ne<19;ne++)N.bl_tree[2*ne]=0;N.dyn_ltree[512]=1,N.opt_len=N.static_len=0,N.sym_next=N.matches=0},z=N=>{8<N.bi_valid?D(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0},P=(N,ne,$,pe)=>{var le=2*ne,de=2*$;return N[le]<N[de]||N[le]===N[de]&&pe[ne]<=pe[$]},H=(N,ne,$)=>{var pe=N.heap[$];let le=$<<1;for(;le<=N.heap_len&&(le<N.heap_len&&P(ne,N.heap[le+1],N.heap[le],N.depth)&&le++,!P(ne,pe,N.heap[le],N.depth));)N.heap[$]=N.heap[le],$=le,le<<=1;N.heap[$]=pe},Q=(N,ne,$)=>{var pe,le,de,ye;let Me=0;if(N.sym_next!==0)for(;pe=255&N.pending_buf[N.sym_buf+Me++],pe+=(255&N.pending_buf[N.sym_buf+Me++])<<8,le=N.pending_buf[N.sym_buf+Me++],pe==0?y(N,le,ne):(de=o[le],y(N,de+g+1,ne),(ye=f[de])!==0&&(le-=l[de],S(N,le,ye)),pe--,de=d(pe),y(N,de,$),(ye=c[de])!==0&&(pe-=h[de],S(N,pe,ye))),Me<N.sym_next;);y(N,256,ne)},J=(N,ne)=>{var $=ne.dyn_tree,pe=ne.stat_desc.static_tree,le=ne.stat_desc.has_stree,de=ne.stat_desc.elems;let ye,Me,xe,Te=-1;for(N.heap_len=0,N.heap_max=573,ye=0;ye<de;ye++)$[2*ye]!==0?(N.heap[++N.heap_len]=Te=ye,N.depth[ye]=0):$[2*ye+1]=0;for(;N.heap_len<2;)$[2*(xe=N.heap[++N.heap_len]=Te<2?++Te:0)]=1,N.depth[xe]=0,N.opt_len--,le&&(N.static_len-=pe[2*xe+1]);for(ne.max_code=Te,ye=N.heap_len>>1;1<=ye;ye--)H(N,$,ye);for(xe=de;ye=N.heap[1],N.heap[1]=N.heap[N.heap_len--],H(N,$,1),Me=N.heap[1],N.heap[--N.heap_max]=ye,N.heap[--N.heap_max]=Me,$[2*xe]=$[2*ye]+$[2*Me],N.depth[xe]=(N.depth[ye]>=N.depth[Me]?N.depth[ye]:N.depth[Me])+1,$[2*ye+1]=$[2*Me+1]=xe,N.heap[1]=xe++,H(N,$,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],((We,Qe)=>{var jt,Tt=Qe.dyn_tree,xs=Qe.max_code,Tn=Qe.stat_desc.static_tree,sr=Qe.stat_desc.has_stree,os=Qe.stat_desc.extra_bits,_r=Qe.stat_desc.extra_base,as=Qe.stat_desc.max_length;let zt,xt,bs,at,Es,Fs=0;for(at=0;at<=m;at++)We.bl_count[at]=0;for(Tt[2*We.heap[We.heap_max]+1]=0,zt=We.heap_max+1;zt<573;zt++)xt=We.heap[zt],(at=Tt[2*Tt[2*xt+1]+1]+1)>as&&(at=as,Fs++),Tt[2*xt+1]=at,xt>xs||(We.bl_count[at]++,Es=0,xt>=_r&&(Es=os[xt-_r]),jt=Tt[2*xt],We.opt_len+=jt*(at+Es),sr&&(We.static_len+=jt*(Tn[2*xt+1]+Es)));if(Fs!==0){do for(at=as-1;We.bl_count[at]===0;)at--;while(We.bl_count[at]--,We.bl_count[at+1]+=2,We.bl_count[as]--,0<(Fs-=2));for(at=as;at!==0;at--)for(xt=We.bl_count[at];xt!==0;)xs<(bs=We.heap[--zt])||(Tt[2*bs+1]!==at&&(We.opt_len+=(at-Tt[2*bs+1])*Tt[2*bs],Tt[2*bs+1]=at),xt--)}})(N,ne),b($,Te,N.bl_count)},L=(N,ne,$)=>{let pe,le=-1;var de;let ye=ne[1],Me=0,xe=7,Te=4;for(ye===0&&(xe=138,Te=3),ne[2*($+1)+1]=65535,pe=0;pe<=$;pe++)de=ye,ye=ne[2*(pe+1)+1],++Me<xe&&de===ye||(Me<Te?N.bl_tree[2*de]+=Me:de!==0?(de!==le&&N.bl_tree[2*de]++,N.bl_tree[32]++):Me<=10?N.bl_tree[34]++:N.bl_tree[36]++,Me=0,le=de,Te=ye===0?(xe=138,3):de===ye?(xe=6,3):(xe=7,4))},q=(N,ne,$)=>{let pe,le=-1;var de;let ye=ne[1],Me=0,xe=7,Te=4;for(ye===0&&(xe=138,Te=3),pe=0;pe<=$;pe++)if(de=ye,ye=ne[2*(pe+1)+1],!(++Me<xe&&de===ye)){if(Me<Te)for(;y(N,de,N.bl_tree),--Me!=0;);else de!==0?(de!==le&&(y(N,de,N.bl_tree),Me--),y(N,16,N.bl_tree),S(N,Me-3,2)):Me<=10?(y(N,17,N.bl_tree),S(N,Me-3,3)):(y(N,18,N.bl_tree),S(N,Me-11,7));Me=0,le=de,Te=ye===0?(xe=138,3):de===ye?(xe=6,3):(xe=7,4)}},B=!1,Y=(N,ne,$,pe)=>{S(N,0+(pe?1:0),3),z(N),D(N,$),D(N,~$),$&&N.pending_buf.set(N.window.subarray(ne,ne+$),N.pending),N.pending+=$};C={_tr_init:N=>{B||((()=>{let ne,$,pe,le,de;var ye=new Array(16);for(pe=0,le=0;le<28;le++)for(l[le]=pe,ne=0;ne<1<<f[le];ne++)o[pe++]=le;for(o[pe-1]=le,de=0,le=0;le<16;le++)for(h[le]=de,ne=0;ne<1<<c[le];ne++)a[de++]=le;for(de>>=7;le<A;le++)for(h[le]=de<<7,ne=0;ne<1<<c[le]-7;ne++)a[256+de++]=le;for($=0;$<=m;$++)ye[$]=0;for(ne=0;ne<=143;)r[2*ne+1]=8,ne++,ye[8]++;for(;ne<=255;)r[2*ne+1]=9,ne++,ye[9]++;for(;ne<=279;)r[2*ne+1]=7,ne++,ye[7]++;for(;ne<=287;)r[2*ne+1]=8,ne++,ye[8]++;for(b(r,287,ye),ne=0;ne<A;ne++)i[2*ne+1]=5,i[2*ne]=k(ne,5);T=new R(r,f,257,x,m),_=new R(i,c,0,A,m),E=new R(new Array(0),u,0,19,7)})(),B=!0),N.l_desc=new w(N.dyn_ltree,T),N.d_desc=new w(N.dyn_dtree,_),N.bl_desc=new w(N.bl_tree,E),N.bi_buf=0,N.bi_valid=0,U(N)},_tr_stored_block:Y,_tr_flush_block:(N,ne,$,pe)=>{let le,de,ye=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=(Me=>{let xe,Te=4093624447;for(xe=0;xe<=31;xe++,Te>>>=1)if(1&Te&&Me.dyn_ltree[2*xe]!==0)return 0;if(Me.dyn_ltree[18]!==0||Me.dyn_ltree[20]!==0||Me.dyn_ltree[26]!==0)return 1;for(xe=32;xe<g;xe++)if(Me.dyn_ltree[2*xe]!==0)return 1;return 0})(N)),J(N,N.l_desc),J(N,N.d_desc),ye=(Me=>{let xe;for(L(Me,Me.dyn_ltree,Me.l_desc.max_code),L(Me,Me.dyn_dtree,Me.d_desc.max_code),J(Me,Me.bl_desc),xe=18;3<=xe&&Me.bl_tree[2*s[xe]+1]===0;xe--);return Me.opt_len+=3*(xe+1)+5+5+4,xe})(N),le=N.opt_len+3+7>>>3,(de=N.static_len+3+7>>>3)<=le&&(le=de)):le=de=$+5,$+4<=le&&ne!==-1?Y(N,ne,$,pe):N.strategy===4||de===le?(S(N,2+(pe?1:0),3),Q(N,r,i)):(S(N,4+(pe?1:0),3),((Me,xe,Te,We)=>{let Qe;for(S(Me,xe-257,5),S(Me,Te-1,5),S(Me,We-4,4),Qe=0;Qe<We;Qe++)S(Me,Me.bl_tree[2*s[Qe]+1],3);q(Me,Me.dyn_ltree,xe-1),q(Me,Me.dyn_dtree,Te-1)})(N,N.l_desc.max_code+1,N.d_desc.max_code+1,ye+1),Q(N,N.dyn_ltree,N.dyn_dtree)),U(N),pe&&z(N)},_tr_tally:(N,ne,$)=>(N.pending_buf[N.sym_buf+N.sym_next++]=ne,N.pending_buf[N.sym_buf+N.sym_next++]=ne>>8,N.pending_buf[N.sym_buf+N.sym_next++]=$,ne===0?N.dyn_ltree[2*$]++:(N.matches++,ne--,N.dyn_ltree[2*(o[$]+g+1)]++,N.dyn_dtree[2*d(ne)]++),N.sym_next===N.sym_end),_tr_align:N=>{S(N,2,3),y(N,256,r),(N=N).bi_valid===16?(D(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}};var K=(N,ne,$,pe)=>{let le=65535&N|0,de=N>>>16&65535|0,ye=0;for(;$!==0;){for($-=ye=2e3<$?2e3:$;le=le+ne[pe++]|0,de=de+le|0,--ye;);le%=65521,de%=65521}return le|de<<16|0};let ee=new Uint32Array((()=>{let N,ne=[];for(var $=0;$<256;$++){N=$;for(var pe=0;pe<8;pe++)N=1&N?3988292384^N>>>1:N>>>1;ne[$]=N}return ne})());var oe=(N,ne,$,pe)=>{var le=ee,de=pe+$;N^=-1;for(let ye=pe;ye<de;ye++)N=N>>>8^le[255&(N^ne[ye])];return-1^N},ae={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:X,_tr_stored_block:re,_tr_flush_block:ie,_tr_tally:ge,_tr_align:_e}=C,{Z_NO_FLUSH:ke,Z_PARTIAL_FLUSH:De,Z_FULL_FLUSH:Re,Z_FINISH:we,Z_BLOCK:Oe,Z_OK:Ae,Z_STREAM_END:Pe,Z_STREAM_ERROR:Ue,Z_DATA_ERROR:Ne,Z_BUF_ERROR:mt,Z_DEFAULT_COMPRESSION:gt,Z_FILTERED:Rt,Z_HUFFMAN_ONLY:ps,Z_RLE:hr,Z_FIXED:fs,Z_DEFAULT_STRATEGY:St,Z_UNKNOWN:Gt,Z_DEFLATED:ot}=j,Ht=258,Ye=262,qs=42,Xt=113,Wt=(N,ne)=>(N.msg=ae[ne],ne),hs=N=>2*N-(4<N?9:0),Kt=N=>{let ne=N.length;for(;0<=--ne;)N[ne]=0},Js=N=>{let ne,$,pe;var le=N.w_size;for(ne=N.hash_size,pe=ne;$=N.head[--pe],N.head[pe]=$>=le?$-le:0,--ne;);for(ne=le,pe=ne;$=N.prev[--pe],N.prev[pe]=$>=le?$-le:0,--ne;);},ms=(N,ne,$)=>(ne<<N.hash_shift^$)&N.hash_mask,Dt=N=>{var ne=N.state;let $=ne.pending;($=$>N.avail_out?N.avail_out:$)!==0&&(N.output.set(ne.pending_buf.subarray(ne.pending_out,ne.pending_out+$),N.next_out),N.next_out+=$,ne.pending_out+=$,N.total_out+=$,N.avail_out-=$,ne.pending-=$,ne.pending===0)&&(ne.pending_out=0)},qt=(N,ne)=>{ie(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,ne),N.block_start=N.strstart,Dt(N.strm)},He=(N,ne)=>{N.pending_buf[N.pending++]=ne},rs=(N,ne)=>{N.pending_buf[N.pending++]=ne>>>8&255,N.pending_buf[N.pending++]=255&ne},Or=(N,ne,$,pe)=>{let le=N.avail_in;return(le=le>pe?pe:le)===0?0:(N.avail_in-=le,ne.set(N.input.subarray(N.next_in,N.next_in+le),$),N.state.wrap===1?N.adler=K(N.adler,ne,le,$):N.state.wrap===2&&(N.adler=oe(N.adler,ne,le,$)),N.next_in+=le,N.total_in+=le,le)},Lr=(N,ne)=>{let $,pe=N.max_chain_length,le=N.strstart;var de;let ye=N.prev_length,Me=N.nice_match;var xe=N.strstart>N.w_size-Ye?N.strstart-(N.w_size-Ye):0,Te=N.window,We=N.w_mask,Qe=N.prev,jt=N.strstart+Ht;let Tt=Te[le+ye-1],xs=Te[le+ye];N.good_match<=N.prev_length&&(pe>>=2),Me>N.lookahead&&(Me=N.lookahead);do if(Te[($=ne)+ye]===xs&&Te[$+ye-1]===Tt&&Te[$]===Te[le]&&Te[++$]===Te[le+1]){for(le+=2,$++;Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&Te[++le]===Te[++$]&&le<jt;);if(de=Ht-(jt-le),le=jt-Ht,de>ye){if(N.match_start=ne,(ye=de)>=Me)break;Tt=Te[le+ye-1],xs=Te[le+ye]}}while((ne=Qe[ne&We])>xe&&--pe!=0);return ye<=N.lookahead?ye:N.lookahead},Is=N=>{var ne=N.w_size;let $,pe,le;do{if(pe=N.window_size-N.lookahead-N.strstart,N.strstart>=ne+(ne-Ye)&&(N.window.set(N.window.subarray(ne,ne+ne-pe),0),N.match_start-=ne,N.strstart-=ne,N.block_start-=ne,N.strstart<N.insert&&(N.insert=N.strstart),Js(N),pe+=ne),N.strm.avail_in===0)break;if($=Or(N.strm,N.window,N.strstart+N.lookahead,pe),N.lookahead+=$,N.lookahead+N.insert>=3)for(le=N.strstart-N.insert,N.ins_h=N.window[le],N.ins_h=ms(N,N.ins_h,N.window[le+1]);N.insert&&(N.ins_h=ms(N,N.ins_h,N.window[le+3-1]),N.prev[le&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=le,le++,N.insert--,!(N.lookahead+N.insert<3)););}while(N.lookahead<Ye&&N.strm.avail_in!==0)},mr=(N,ne)=>{let $,pe,le,de=N.pending_buf_size-5>N.w_size?N.w_size:N.pending_buf_size-5,ye=0;for(var Me=N.strm.avail_in;$=65535,le=N.bi_valid+42>>3,!(N.strm.avail_out<le||(le=N.strm.avail_out-le,pe=N.strstart-N.block_start,($=($=$>pe+N.strm.avail_in?pe+N.strm.avail_in:$)>le?le:$)<de&&($===0&&ne!==we||ne===ke||$!==pe+N.strm.avail_in))||(ye=ne===we&&$===pe+N.strm.avail_in?1:0,re(N,0,0,ye),N.pending_buf[N.pending-4]=$,N.pending_buf[N.pending-3]=$>>8,N.pending_buf[N.pending-2]=~$,N.pending_buf[N.pending-1]=~$>>8,Dt(N.strm),pe&&(pe>$&&(pe=$),N.strm.output.set(N.window.subarray(N.block_start,N.block_start+pe),N.strm.next_out),N.strm.next_out+=pe,N.strm.avail_out-=pe,N.strm.total_out+=pe,N.block_start+=pe,$-=pe),$&&(Or(N.strm,N.strm.output,N.strm.next_out,$),N.strm.next_out+=$,N.strm.avail_out-=$,N.strm.total_out+=$),ye!==0)););return(Me-=N.strm.avail_in)&&(Me>=N.w_size?(N.matches=2,N.window.set(N.strm.input.subarray(N.strm.next_in-N.w_size,N.strm.next_in),0),N.strstart=N.w_size,N.insert=N.strstart):(N.window_size-N.strstart<=Me&&(N.strstart-=N.w_size,N.window.set(N.window.subarray(N.w_size,N.w_size+N.strstart),0),N.matches<2&&N.matches++,N.strstart<N.insert)&&(N.insert=N.strstart),N.window.set(N.strm.input.subarray(N.strm.next_in-Me,N.strm.next_in),N.strstart),N.strstart+=Me,N.insert+=N.w_size-N.insert<Me?N.w_size-N.insert:Me),N.block_start=N.strstart),N.high_water<N.strstart&&(N.high_water=N.strstart),ye?4:ne!==ke&&ne!==we&&N.strm.avail_in===0&&N.strstart===N.block_start?2:(le=N.window_size-N.strstart,N.strm.avail_in>le&&N.block_start>=N.w_size&&(N.block_start-=N.w_size,N.strstart-=N.w_size,N.window.set(N.window.subarray(N.w_size,N.w_size+N.strstart),0),N.matches<2&&N.matches++,le+=N.w_size,N.strstart<N.insert)&&(N.insert=N.strstart),(le=le>N.strm.avail_in?N.strm.avail_in:le)&&(Or(N.strm,N.window,N.strstart,le),N.strstart+=le,N.insert+=le>N.w_size-N.insert?N.w_size-N.insert:le),N.high_water<N.strstart&&(N.high_water=N.strstart),le=N.bi_valid+42>>3,le=65535<N.pending_buf_size-le?65535:N.pending_buf_size-le,de=le>N.w_size?N.w_size:le,((pe=N.strstart-N.block_start)>=de||(pe||ne===we)&&ne!==ke&&N.strm.avail_in===0&&pe<=le)&&($=pe>le?le:pe,ye=ne===we&&N.strm.avail_in===0&&$===pe?1:0,re(N,N.block_start,$,ye),N.block_start+=$,Dt(N.strm)),ye?3:1)};C=(N,ne)=>{let $,pe;for(;;){if(N.lookahead<Ye){if(Is(N),N.lookahead<Ye&&ne===ke)return 1;if(N.lookahead===0)break}if($=0,N.lookahead>=3&&(N.ins_h=ms(N,N.ins_h,N.window[N.strstart+3-1]),$=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),$!==0&&N.strstart-$<=N.w_size-Ye&&(N.match_length=Lr(N,$)),N.match_length>=3)if(pe=ge(N,N.strstart-N.match_start,N.match_length-3),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=3){for(N.match_length--;N.strstart++,N.ins_h=ms(N,N.ins_h,N.window[N.strstart+3-1]),$=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=ms(N,N.ins_h,N.window[N.strstart+1]);else pe=ge(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(pe&&(qt(N,!1),N.strm.avail_out===0))return 1}return N.insert=N.strstart<2?N.strstart:2,ne===we?(qt(N,!0),N.strm.avail_out===0?3:4):N.sym_next&&(qt(N,!1),N.strm.avail_out===0)?1:2};var gs=(N,ne)=>{let $,pe;for(var le;;){if(N.lookahead<Ye){if(Is(N),N.lookahead<Ye&&ne===ke)return 1;if(N.lookahead===0)break}if($=0,N.lookahead>=3&&(N.ins_h=ms(N,N.ins_h,N.window[N.strstart+3-1]),$=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=2,$!==0&&N.prev_length<N.max_lazy_match&&N.strstart-$<=N.w_size-Ye&&(N.match_length=Lr(N,$),N.match_length<=5)&&(N.strategy===Rt||N.match_length===3&&4096<N.strstart-N.match_start)&&(N.match_length=2),N.prev_length>=3&&N.match_length<=N.prev_length){for(le=N.strstart+N.lookahead-3,pe=ge(N,N.strstart-1-N.prev_match,N.prev_length-3),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=le&&(N.ins_h=ms(N,N.ins_h,N.window[N.strstart+3-1]),$=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=2,N.strstart++,pe&&(qt(N,!1),N.strm.avail_out===0))return 1}else if(N.match_available){if((pe=ge(N,0,N.window[N.strstart-1]))&&qt(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return 1}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(pe=ge(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<2?N.strstart:2,ne===we?(qt(N,!0),N.strm.avail_out===0?3:4):N.sym_next&&(qt(N,!1),N.strm.avail_out===0)?1:2};function Qt(N,ne,$,pe,le){this.good_length=N,this.max_lazy=ne,this.nice_length=$,this.max_chain=pe,this.func=le}let Xs=[new Qt(0,0,0,0,mr),new Qt(4,4,8,4,C),new Qt(4,5,16,8,C),new Qt(4,6,32,32,C),new Qt(4,4,16,16,gs),new Qt(8,16,32,32,gs),new Qt(8,16,128,128,gs),new Qt(8,32,128,256,gs),new Qt(32,128,258,1024,gs),new Qt(32,258,258,4096,gs)];function _s(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Kt(this.dyn_ltree),Kt(this.dyn_dtree),Kt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Kt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Kt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let dt=N=>{var ne;return!N||!(ne=N.state)||ne.strm!==N||ne.status!==qs&&ne.status!==57&&ne.status!==69&&ne.status!==73&&ne.status!==91&&ne.status!==103&&ne.status!==Xt&&ne.status!==666?1:0},It=N=>{if(dt(N))return Wt(N,Ue);N.total_in=N.total_out=0,N.data_type=Gt;var ne=N.state;return ne.pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap===2?57:ne.wrap?qs:Xt,N.adler=ne.wrap===2?0:1,ne.last_flush=-2,X(ne),Ae},Ps=N=>{var ne=It(N);return ne===Ae&&($=>{$.window_size=2*$.w_size,Kt($.head),$.max_lazy_match=Xs[$.level].max_lazy,$.good_match=Xs[$.level].good_length,$.nice_match=Xs[$.level].nice_length,$.max_chain_length=Xs[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=2,$.match_available=0,$.ins_h=0})(N.state),ne};var Wn=(N,ne,$,pe,le,de)=>{if(!N)return Ue;let ye=1;if(ne===gt&&(ne=6),pe<0?(ye=0,pe=-pe):15<pe&&(ye=2,pe-=16),le<1||le>9||$!==ot||pe<8||15<pe||ne<0||9<ne||de<0||de>fs||pe===8&&ye!==1)return Wt(N,Ue);pe===8&&(pe=9);var Me=new _s;return(N.state=Me).strm=N,Me.status=qs,Me.wrap=ye,Me.gzhead=null,Me.w_bits=pe,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=le+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+3-1)/3),Me.window=new Uint8Array(2*Me.w_size),Me.head=new Uint16Array(Me.hash_size),Me.prev=new Uint16Array(Me.w_size),Me.lit_bufsize=1<<le+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new Uint8Array(Me.pending_buf_size),Me.sym_buf=Me.lit_bufsize,Me.sym_end=3*(Me.lit_bufsize-1),Me.level=ne,Me.strategy=de,Me.method=$,Ps(N)},$n=(N,ne)=>dt(N)||N.state.wrap!==2?Ue:(N.state.gzhead=ne,Ae),bn=(N,ne)=>{if(dt(N)||ne>Oe||ne<0)return N?Wt(N,Ue):Ue;var $=N.state;if(!N.output||N.avail_in!==0&&!N.input||$.status===666&&ne!==we)return Wt(N,N.avail_out===0?mt:Ue);var pe=$.last_flush;if($.last_flush=ne,$.pending!==0){if(Dt(N),N.avail_out===0)return $.last_flush=-1,Ae}else if(N.avail_in===0&&hs(ne)<=hs(pe)&&ne!==we)return Wt(N,mt);if($.status===666&&N.avail_in!==0)return Wt(N,mt);if($.status===qs&&$.wrap===0&&($.status=Xt),$.status===qs){let de=ot+($.w_bits-8<<4)<<8,ye=-1;if(ye=$.strategy>=ps||$.level<2?0:$.level<6?1:$.level===6?2:3,de|=ye<<6,$.strstart!==0&&(de|=32),de+=31-de%31,rs($,de),$.strstart!==0&&(rs($,N.adler>>>16),rs($,65535&N.adler)),N.adler=1,$.status=Xt,Dt(N),$.pending!==0)return $.last_flush=-1,Ae}if($.status===57){if(N.adler=0,He($,31),He($,139),He($,8),$.gzhead)He($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),He($,255&$.gzhead.time),He($,$.gzhead.time>>8&255),He($,$.gzhead.time>>16&255),He($,$.gzhead.time>>24&255),He($,$.level===9?2:$.strategy>=ps||$.level<2?4:0),He($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(He($,255&$.gzhead.extra.length),He($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(N.adler=oe(N.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69;else if(He($,0),He($,0),He($,0),He($,0),He($,0),He($,$.level===9?2:$.strategy>=ps||$.level<2?4:0),He($,3),$.status=Xt,Dt(N),$.pending!==0)return $.last_flush=-1,Ae}if($.status===69){if($.gzhead.extra){let de=$.pending,ye=(65535&$.gzhead.extra.length)-$.gzindex;for(;$.pending+ye>$.pending_buf_size;){var le=$.pending_buf_size-$.pending;if($.pending_buf.set($.gzhead.extra.subarray($.gzindex,$.gzindex+le),$.pending),$.pending=$.pending_buf_size,$.gzhead.hcrc&&$.pending>de&&(N.adler=oe(N.adler,$.pending_buf,$.pending-de,de)),$.gzindex+=le,Dt(N),$.pending!==0)return $.last_flush=-1,Ae;de=0,ye-=le}pe=new Uint8Array($.gzhead.extra),$.pending_buf.set(pe.subarray($.gzindex,$.gzindex+ye),$.pending),$.pending+=ye,$.gzhead.hcrc&&$.pending>de&&(N.adler=oe(N.adler,$.pending_buf,$.pending-de,de)),$.gzindex=0}$.status=73}if($.status===73){if($.gzhead.name){let de,ye=$.pending;do if($.pending===$.pending_buf_size){if($.gzhead.hcrc&&$.pending>ye&&(N.adler=oe(N.adler,$.pending_buf,$.pending-ye,ye)),Dt(N),$.pending!==0)return $.last_flush=-1,Ae;ye=0}while(de=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,He($,de),de!==0);$.gzhead.hcrc&&$.pending>ye&&(N.adler=oe(N.adler,$.pending_buf,$.pending-ye,ye)),$.gzindex=0}$.status=91}if($.status===91){if($.gzhead.comment){let de,ye=$.pending;do if($.pending===$.pending_buf_size){if($.gzhead.hcrc&&$.pending>ye&&(N.adler=oe(N.adler,$.pending_buf,$.pending-ye,ye)),Dt(N),$.pending!==0)return $.last_flush=-1,Ae;ye=0}while(de=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,He($,de),de!==0);$.gzhead.hcrc&&$.pending>ye&&(N.adler=oe(N.adler,$.pending_buf,$.pending-ye,ye))}$.status=103}if($.status===103){if($.gzhead.hcrc){if($.pending+2>$.pending_buf_size&&(Dt(N),$.pending!==0))return $.last_flush=-1,Ae;He($,255&N.adler),He($,N.adler>>8&255),N.adler=0}if($.status=Xt,Dt(N),$.pending!==0)return $.last_flush=-1,Ae}if(N.avail_in!==0||$.lookahead!==0||ne!==ke&&$.status!==666){if((pe=$.level===0?mr($,ne):$.strategy===ps?((de,ye)=>{for(var Me;;){if(de.lookahead===0&&(Is(de),de.lookahead===0)){if(ye===ke)return 1;break}if(de.match_length=0,Me=ge(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,Me&&(qt(de,!1),de.strm.avail_out===0))return 1}return de.insert=0,ye===we?(qt(de,!0),de.strm.avail_out===0?3:4):de.sym_next&&(qt(de,!1),de.strm.avail_out===0)?1:2})($,ne):$.strategy===hr?((de,ye)=>{let Me;var xe;let Te,We;for(var Qe=de.window;;){if(de.lookahead<=Ht){if(Is(de),de.lookahead<=Ht&&ye===ke)return 1;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=3&&0<de.strstart&&(xe=Qe[Te=de.strstart-1])===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]){for(We=de.strstart+Ht;xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&xe===Qe[++Te]&&Te<We;);de.match_length=Ht-(We-Te),de.lookahead<de.match_length&&(de.match_length=de.lookahead)}if(de.match_length>=3?(Me=ge(de,1,de.match_length-3),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(Me=ge(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),Me&&(qt(de,!1),de.strm.avail_out===0))return 1}return de.insert=0,ye===we?(qt(de,!0),de.strm.avail_out===0?3:4):de.sym_next&&(qt(de,!1),de.strm.avail_out===0)?1:2})($,ne):Xs[$.level].func($,ne))!==3&&pe!==4||($.status=666),pe===1||pe===3)return N.avail_out===0&&($.last_flush=-1),Ae;if(pe===2&&(ne===De?_e($):ne!==Oe&&(re($,0,0,!1),ne===Re)&&(Kt($.head),$.lookahead===0)&&($.strstart=0,$.block_start=0,$.insert=0),Dt(N),N.avail_out===0))return $.last_flush=-1,Ae}return ne===we&&($.wrap<=0||($.wrap===2?(He($,255&N.adler),He($,N.adler>>8&255),He($,N.adler>>16&255),He($,N.adler>>24&255),He($,255&N.total_in),He($,N.total_in>>8&255),He($,N.total_in>>16&255),He($,N.total_in>>24&255)):(rs($,N.adler>>>16),rs($,65535&N.adler)),Dt(N),0<$.wrap&&($.wrap=-$.wrap),$.pending===0))?Pe:Ae},Ws=N=>{var ne;return dt(N)?Ue:(ne=N.state.status,N.state=null,ne===Xt?Wt(N,Ne):Ae)},Gr=(N,ne)=>{let $=ne.length;if(dt(N))return Ue;var pe=N.state,le=pe.wrap;if(le===2||le===1&&pe.status!==qs||pe.lookahead)return Ue;le===1&&(N.adler=K(N.adler,ne,$,0)),pe.wrap=0,$>=pe.w_size&&(le===0&&(Kt(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),(de=new Uint8Array(pe.w_size)).set(ne.subarray($-pe.w_size,$),0),ne=de,$=pe.w_size);var de=N.avail_in,ye=N.next_in,Me=N.input;for(N.avail_in=$,N.next_in=0,N.input=ne,Is(pe);pe.lookahead>=3;){let xe=pe.strstart,Te=pe.lookahead-2;for(;pe.ins_h=ms(pe,pe.ins_h,pe.window[xe+3-1]),pe.prev[xe&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=xe,xe++,--Te;);pe.strstart=xe,pe.lookahead=2,Is(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=2,pe.match_available=0,N.next_in=ye,N.input=Me,N.avail_in=de,pe.wrap=le,Ae};try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}let vs=new Uint8Array(256);for(let N=0;N<256;N++)vs[N]=252<=N?6:248<=N?5:240<=N?4:224<=N?3:192<=N?2:1;vs[254]=vs[254]=1;var As=N=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(N);let ne,$,pe,le,de,ye=N.length,Me=0;for(le=0;le<ye;le++)(64512&($=N.charCodeAt(le)))==55296&&le+1<ye&&(64512&(pe=N.charCodeAt(le+1)))==56320&&($=65536+($-55296<<10)+(pe-56320),le++),Me+=$<128?1:$<2048?2:$<65536?3:4;for(ne=new Uint8Array(Me),de=0,le=0;de<Me;le++)(64512&($=N.charCodeAt(le)))==55296&&le+1<ye&&(64512&(pe=N.charCodeAt(le+1)))==56320&&($=65536+($-55296<<10)+(pe-56320),le++),$<128?ne[de++]=$:($<2048?ne[de++]=192|$>>>6:($<65536?ne[de++]=224|$>>>12:(ne[de++]=240|$>>>18,ne[de++]=128|$>>>12&63),ne[de++]=128|$>>>6&63),ne[de++]=128|63&$);return ne},$s=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let ws=Object.prototype.toString,{Z_NO_FLUSH:_t,Z_SYNC_FLUSH:yn,Z_FULL_FLUSH:Mn,Z_FINISH:Rs,Z_OK:ns,Z_STREAM_END:ei,Z_DEFAULT_COMPRESSION:Sn,Z_DEFAULT_STRATEGY:kn,Z_DEFLATED:ti}=j;function Ts(N){this.options=function($){for(var pe,le,de=Array.prototype.slice.call(arguments,1);de.length;){var ye=de.shift();if(ye){if(typeof ye!="object")throw new TypeError(ye+"must be non-object");for(var Me in ye)pe=ye,le=Me,Object.prototype.hasOwnProperty.call(pe,le)&&($[Me]=ye[Me])}}return $}({level:Sn,method:ti,chunkSize:16384,windowBits:15,memLevel:8,strategy:kn},N||{});var ne=((N=this.options).raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $s,this.strm.avail_out=0,Wn(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy));if(ne!==ns)throw new Error(ae[ne]);if(N.header&&$n(this.strm,N.header),N.dictionary){let $;if($=typeof N.dictionary=="string"?As(N.dictionary):ws.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(ne=Gr(this.strm,$))!==ns)throw new Error(ae[ne]);this._dict_set=!0}}function gr(N,ne){if((ne=new Ts(ne)).push(N,!0),ne.err)throw ne.msg||ae[ne.err];return ne.result}Ts.prototype.push=function(N,ne){var $=this.strm,pe=this.options.chunkSize;let le,de;if(this.ended)return!1;for(de=ne===~~ne?ne:ne===!0?Rs:_t,typeof N=="string"?$.input=As(N):ws.call(N)==="[object ArrayBuffer]"?$.input=new Uint8Array(N):$.input=N,$.next_in=0,$.avail_in=$.input.length;;)if($.avail_out===0&&($.output=new Uint8Array(pe),$.next_out=0,$.avail_out=pe),(de===yn||de===Mn)&&$.avail_out<=6)this.onData($.output.subarray(0,$.next_out)),$.avail_out=0;else{if(bn($,de)===ei)return 0<$.next_out&&this.onData($.output.subarray(0,$.next_out)),le=Ws(this.strm),this.onEnd(le),this.ended=!0,le===ns;if($.avail_out===0)this.onData($.output);else if(0<de&&0<$.next_out)this.onData($.output.subarray(0,$.next_out)),$.avail_out=0;else if($.avail_in===0)break}return!0},Ts.prototype.onData=function(N){this.chunks.push(N)},Ts.prototype.onEnd=function(N){N===ns&&(this.result=(ne=>{let $=0;for(let de=0,ye=ne.length;de<ye;de++)$+=ne[de].length;var pe=new Uint8Array($);for(let de=0,ye=0,Me=ne.length;de<Me;de++){var le=ne[de];pe.set(le,ye),ye+=le.length}return pe})(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};let is={deflate:gr},{Z_FINISH:Cn,Z_BLOCK:Dn,Z_TREES:er,Z_OK:qn,Z_STREAM_END:In,Z_NEED_DICT:Ji,Z_STREAM_ERROR:si,Z_DATA_ERROR:Zt,Z_MEM_ERROR:ri,Z_BUF_ERROR:Xi,Z_DEFLATED:jr}=j,{Z_NO_FLUSH:ni,Z_FINISH:zr,Z_OK:Wi,Z_STREAM_END:Vt,Z_NEED_DICT:An,Z_STREAM_ERROR:ii,Z_DATA_ERROR:wn,Z_MEM_ERROR:tr}=j;var Rn=C=is.deflate},function(te,j,C){C.d(j,"a",function(){return O}),T.prototype.removeTokens=function(_,E){var g=this;return this.bucketSize?_>this.bucketSize?(setTimeout(E.bind(null,"Requested tokens "+_+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),_>this.content?x():this.parentBucket?this.parentBucket.removeTokens(_,function(A,m){return A?E(A,null):_>g.content?x():(g.content-=_,void E(null,Math.min(m,g.content)))}):(this.content-=_,setTimeout(E.bind(null,null,this.content),0),!0)):(setTimeout(E.bind(null,null,_,Number.POSITIVE_INFINITY),0),!0);function x(){var A=Math.ceil((_-g.content)*(g.interval/g.tokensPerInterval));return setTimeout(function(){g.removeTokens(_,E)},A),!1}},T.prototype.tryRemoveTokens=function(_){if(this.bucketSize){if(_>this.bucketSize||(this.drip(),_>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(_))return!1;this.content-=_}return!0},T.prototype.drip=function(){var _,E;this.tokensPerInterval?(E=+new Date,_=Math.max(E-this.lastDrip,0),this.lastDrip=E,E=_*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+E,this.bucketSize)):this.content=this.bucketSize};var O=T;function T(_,E,g,x){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=_,this.tokensPerInterval=E,typeof g=="string")switch(g){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+g)}else this.interval=g;this.parentBucket=x,this.content=0,this.lastDrip=+new Date}},function(te,j,C){C.d(j,"a",function(){return T});var O=C(3),T=(_.prototype.enqueue=function(E){this.queue.enqueue(E),E=E.value.length,this.pendingDataSize+=E,this.size++,O.a.totalAvailCache-=E,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize)},_.prototype.dequeue=function(){var E=this.queue.dequeue();return this.size--,this.deCallback&&this.deCallback(),E},_.prototype.readReportData=function(E){return E=this.readData(E),this.reset(),{totalLen:E.totalLen,reportDataArr:E.resArr}},_.prototype.readStoreData=function(E){return E=Math.ceil(this.pendingDataSize*E),E=this.readData(E),this.refresh(E.totalLen),E.resArr},_.prototype.readData=function(E){for(var g=[],x=0;this.queue.size();){var A=this.dequeue();if(A&&(g.push(A),x+=A.value.length),E<x)break}return{totalLen:x,resArr:g}},_.prototype.decodeReportData=function(E){var g=this;E.forEach(function(x){g.enqueue(x)})},_.prototype.setListener=function(E){this.enCallback=E.enCallback,this.deCallback=E.deCallback},_.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},_.prototype.refresh=function(E){this.pendingDataSize-=E,O.a.totalAvailCache+=E},_.prototype.reset=function(){this.byteLength=0},_.prototype.clear=function(){this.queue.clear()},_);function _(){this.queue=new O.d,this.byteLength=0,this.size=0,this.pendingDataSize=0}},function(te,j,C){C.d(j,"a",function(){return x}),j=C(4);var O=C.n(j),T=C(90),_=C(1),E=C(0),g=function(){return(g=Object.assign||function(m){for(var f,c=1,u=arguments.length;c<u;c++)for(var s in f=arguments[c])Object.prototype.hasOwnProperty.call(f,s)&&(m[s]=f[s]);return m}).apply(this,arguments)},x=(A.prototype.setLogConfig=function(m){this.lg.setLogLevel(m.logLevel)},A.prototype.setDB=function(m){this.lg.setDB(m)},A.prototype.onLogout=function(){this.lg.onLogout()},A.prototype.init=function(m,f,c){this.config.appID=m,this.config.userID=f,this.config.deviceID=_.h,m={version:this.config.version+" 3/21 17:15",appID:m,userID:this.config.userID,userName:c,origin:_.p?"":location.origin,deviceID:this.config.deviceID,device:_.i},this.lg.setHeaderInfo(f,JSON.stringify(m))},A.prototype.renewToken=function(m){this.config.token=m},A.prototype.setUploadURL=function(m){this.config.uploadURL=m},A.prototype.upload=function(m){if(!this.config.uploadURL||!this.config.token||!this.config.userID)return f={code:6000121,message:E.u.UploadLog+": Not logged."},Promise.reject(f);if(m=="apicall"){var f=Date.now();if(!this.isProd||f-this.uptimer<3e5)return Promise.resolve();this.uptimer=f}return this.lg.upload(g({},this.config),m)},A.prototype.i=function(m,f,c){this.emitLog(m,f,"info",c)},A.prototype.w=function(m,f,c){this.emitLog(m,f,"warn",c)},A.prototype.emitLog=function(m,f,c,u){var s;this.isProd?(s=u&&typeof u=="object"?this.stringify(u):u||"",this.proxyLog?this.proxyLog(s,f):this.lg.write(m,c,f,s)):u&&typeof u=="object"&&(u.cmd&&(f+=u.cmd),u.time instanceof Date)&&(m=u.time,u.time="".concat(Date.now()-m.getTime(),",").concat(this.formatTime(m)))},A.prototype.formatTime=function(m){return m.toLocaleTimeString("zh-CN")+"."+m.getMilliseconds()},A.prototype.stringify=function(m){m.time instanceof Date&&(f=m.time,0<(c=Date.now()-f.getTime())?m.time=c+","+this.formatTime(f):delete m.time);var f,c,u=null;return JSON.stringify(m,function(s,r){if(r instanceof Uint8Array)return r.length?"b="+r.length:"";var i,a;if(r instanceof Array&&2<r.length)return i=r.length,typeof(a=r[0])=="object"?[i,a,r[i-1]]:(typeof a=="string"&&30<i&&(r=r.slice(0,30)).unshift(i),r);if(r&&typeof r=="object"&&r.type&&r.message&&(u=r),typeof r=="string"&&r){if(100<r.length)return"s="+r.length;if(s=="message"&&u&&u.type)return u=null,"s="+r.length}return r instanceof O.a?r.toString():r}).replace(/\"(\w+)\":/g,"$1:").replace(/(https?:\/\/)|(wss?:\/\/)/g,"")},A);function A(m){this.uptimer=0,this.isProd=!0,this.config={product:"zim",appID:"",userID:"",token:"",uploadURL:"",deviceID:_.h,version:""},this.hbLog=[],this.lg=new T.a("zim",_.p),this.config.version=m}},function(te,j,C){var O=C(41);C.d(j,"a",function(){return O.a})},function(te,j,C){C.d(j,"a",function(){return O}),T.getInstance=function(){return T.instance||(T.instance=new T).init(),T.instance},T.prototype.init=function(){},Object.defineProperty(T.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(_){this._testEnvironment=_},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"ENV",{get:function(){return this._ENV},set:function(_){this._ENV=_},enumerable:!1,configurable:!0}),T.instance=new T;var O=T;function T(){this._testEnvironment=!0,this._ENV=0}},function(te,j,C){(function(O,T,_,E){te.exports=function g(x,A,m){function f(s,r){if(!A[s]){if(!x[s]){if(c)return c(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}i=A[s]={exports:{}},x[s][0].call(i.exports,function(a){return f(x[s][1][a]||a)},i,i.exports,g,x,A,m)}return A[s].exports}for(var c=!1,u=0;u<m.length;u++)f(m[u]);return f}({1:[function(g,x,A){var m=g("./utils"),f=g("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";A.encode=function(u){for(var s,r,i,a,o,l,h=[],R=0,w=u.length,d=m.getTypeOf(u)!=="string";R<u.length;)l=w-R,i=d?(s=u[R++],r=R<w?u[R++]:0,R<w?u[R++]:0):(s=u.charCodeAt(R++),r=R<w?u.charCodeAt(R++):0,R<w?u.charCodeAt(R++):0),a=(3&s)<<4|r>>4,o=1<l?(15&r)<<2|i>>6:64,l=2<l?63&i:64,h.push(c.charAt(s>>2)+c.charAt(a)+c.charAt(o)+c.charAt(l));return h.join("")},A.decode=function(u){var s,r,i,a,o,l=0,h=0;if(u.substr(0,5)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var R,w=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===c.charAt(64)&&w--,u.charAt(u.length-2)===c.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=new(f.uint8array?Uint8Array:Array)(0|w);l<u.length;)s=c.indexOf(u.charAt(l++))<<2|(a=c.indexOf(u.charAt(l++)))>>4,r=(15&a)<<4|(a=c.indexOf(u.charAt(l++)))>>2,i=(3&a)<<6|(o=c.indexOf(u.charAt(l++))),R[h++]=s,a!==64&&(R[h++]=r),o!==64&&(R[h++]=i);return R}},{"./support":30,"./utils":32}],2:[function(g,x,A){var m=g("./external"),f=g("./stream/DataWorker"),c=g("./stream/Crc32Probe"),u=g("./stream/DataLengthProbe");function s(r,i,a,o,l){this.compressedSize=r,this.uncompressedSize=i,this.crc32=a,this.compression=o,this.compressedContent=l}s.prototype={getContentWorker:function(){var r=new f(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),i=this;return r.on("end",function(){if(this.streamInfo.data_length!==i.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),r},getCompressedWorker:function(){return new f(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(r,i,a){return r.pipe(new c).pipe(new u("uncompressedSize")).pipe(i.compressWorker(a)).pipe(new u("compressedSize")).withStreamInfo("compression",i)},x.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(g,x,A){var m=g("./stream/GenericWorker");A.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},A.DEFLATE=g("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(g,x,A){var m=g("./utils"),f=(()=>{for(var c=[],u=0;u<256;u++){for(var s=u,r=0;r<8;r++)s=1&s?3988292384^s>>>1:s>>>1;c[u]=s}return c})();x.exports=function(c,u){return c!==void 0&&c.length?(m.getTypeOf(c)!=="string"?(s,r,i)=>{var a=f,o=0+i;s^=-1;for(var l=0;l<o;l++)s=s>>>8^a[255&(s^r[l])];return-1^s}:(s,r,i)=>{var a=f,o=0+i;s^=-1;for(var l=0;l<o;l++)s=s>>>8^a[255&(s^r.charCodeAt(l))];return-1^s})(0|u,c,c.length):0}},{"./utils":32}],5:[function(g,x,A){A.base64=!1,A.binary=!1,A.dir=!1,A.createFolders=!0,A.date=null,A.compression=null,A.compressionOptions=null,A.comment=null,A.unixPermissions=null,A.dosPermissions=null},{}],6:[function(g,x,A){g=typeof Promise<"u"?Promise:g("lie"),x.exports={Promise:g}},{lie:37}],7:[function(g,x,A){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=g("pako"),c=g("./utils"),u=g("./stream/GenericWorker"),s=m?"uint8array":"array";function r(i,a){u.call(this,"FlateWorker/"+i),this._pako=null,this._pakoAction=i,this._pakoOptions=a,this.meta={}}A.magic="\b\0",c.inherits(r,u),r.prototype.processChunk=function(i){this.meta=i.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(s,i.data),!1)},r.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},r.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},r.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var i=this;this._pako.onData=function(a){i.push({data:a,meta:i.meta})}},A.compressWorker=function(i){return new r("Deflate",i)},A.uncompressWorker=function(){return new r("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(g,x,A){function m(o,l){for(var h="",R=0;R<l;R++)h+=String.fromCharCode(255&o),o>>>=8;return h}function f(o,l,h,R,w,d){var D=o.file,S=o.compression,y=d!==s.utf8encode,k=c.transformTo("string",d(D.name)),b=c.transformTo("string",s.utf8encode(D.name)),U=D.comment,z=(d=c.transformTo("string",d(U)),c.transformTo("string",s.utf8encode(U))),P=b.length!==D.name.length,H=(U=z.length!==U.length,""),Q=D.dir,J=D.date,L={crc32:0,compressedSize:0,uncompressedSize:0};return l&&!h||(L.crc32=o.crc32,L.compressedSize=o.compressedSize,L.uncompressedSize=o.uncompressedSize),h=0,l&&(h|=8),y||!P&&!U||(h|=2048),o=0,l=0,Q&&(o|=16),w==="UNIX"?(l=798,o|=(65535&((y=D.unixPermissions)?y:Q?16893:33204))<<16):(l=20,o|=63&(D.dosPermissions||0)),w=J.getUTCHours(),w=(w=((w<<=6)|J.getUTCMinutes())<<5)|J.getUTCSeconds()/2,y=J.getUTCFullYear()-1980,y=(y=((y<<=4)|J.getUTCMonth()+1)<<5)|J.getUTCDate(),P&&(Q=m(1,1)+m(r(k),4)+b,H+="up"+m(Q.length,2)+Q),U&&(D=m(1,1)+m(r(d),4)+z,H+="uc"+m(D.length,2)+D),J="",J=(J=(J=(J=(J=(J=(J=(J=(J=(J+=`
\0`)+m(h,2))+S.magic)+m(w,2))+m(y,2))+m(L.crc32,4))+m(L.compressedSize,4))+m(L.uncompressedSize,4))+m(k.length,2))+m(H.length,2),{fileRecord:i.LOCAL_FILE_HEADER+J+k+H,dirRecord:i.CENTRAL_FILE_HEADER+m(l,2)+J+m(d.length,2)+"\0\0\0\0"+m(o,4)+m(R,4)+k+H+d}}var c=g("../utils"),u=g("../stream/GenericWorker"),s=g("../utf8"),r=g("../crc32"),i=g("../signature");function a(o,l,h,R){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=l,this.zipPlatform=h,this.encodeFileName=R,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(a,u),a.prototype.push=function(o){var l=o.meta.percent||0,h=this.entriesCount,R=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,u.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:h?(l+100*(h-R-1))/h:100}}))},a.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var l=this.streamFiles&&!o.file.dir;l?(o=f(o,l,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:o.fileRecord,meta:{percent:0}})):this.accumulate=!0},a.prototype.closedSource=function(o){this.accumulate=!1;var l=this.streamFiles&&!o.file.dir,h=f(o,l,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),l)this.push({data:(l=o,i.DATA_DESCRIPTOR+m(l.crc32,4)+m(l.compressedSize,4)+m(l.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},a.prototype.flush=function(){for(var o=this.bytesWritten,l=0;l<this.dirRecords.length;l++)this.push({data:this.dirRecords[l],meta:{percent:100}});var h=this.bytesWritten-o;h=((R,w,d,D,S)=>(S=c.transformTo("string",S(D)),i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(R,2)+m(R,2)+m(w,4)+m(d,4)+m(S.length,2)+S))(this.dirRecords.length,h,o,this.zipComment,this.encodeFileName),this.push({data:h,meta:{percent:100}})},a.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},a.prototype.registerPrevious=function(o){this._sources.push(o);var l=this;return o.on("data",function(h){l.processChunk(h)}),o.on("end",function(){l.closedSource(l.previous.streamInfo),l._sources.length?l.prepareNextSource():l.end()}),o.on("error",function(h){l.error(h)}),this},a.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},a.prototype.error=function(o){var l=this._sources;if(!u.prototype.error.call(this,o))return!1;for(var h=0;h<l.length;h++)try{l[h].error(o)}catch{}return!0},a.prototype.lock=function(){u.prototype.lock.call(this);for(var o=this._sources,l=0;l<o.length;l++)o[l].lock()},x.exports=a},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,x,A){var m=g("../compressions"),f=g("./ZipFileWorker");A.generateWorker=function(c,u,s){var r=new f(u.streamFiles,s,u.platform,u.encodeFileName),i=0;try{c.forEach(function(a,o){i++;var l=((d,D)=>{if(D=m[d=d||D])return D;throw new Error(d+" is not a valid compression method !")})(o.options.compression,u.compression),h=o.options.compressionOptions||u.compressionOptions||{},R=o.dir,w=o.date;o._compressWorker(l,h).withStreamInfo("file",{name:a,dir:R,date:w,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(r)}),r.entriesCount=i}catch(a){r.error(a)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(g,x,A){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f,c=new m;for(f in this)typeof this[f]!="function"&&(c[f]=this[f]);return c}}(m.prototype=g("./object")).loadAsync=g("./load"),m.support=g("./support"),m.defaults=g("./defaults"),m.version="3.10.1",m.loadAsync=function(f,c){return new m().loadAsync(f,c)},m.external=g("./external"),x.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(g,x,A){var m=g("./utils"),f=g("./external"),c=g("./utf8"),u=g("./zipEntries"),s=g("./stream/Crc32Probe"),r=g("./nodejsUtils");x.exports=function(i,a){var o=this;return a=m.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),r.isNode&&r.isStream(i)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",i,!0,a.optimizedBinaryString,a.base64).then(function(l){var h=new u(a);return h.load(l),h}).then(function(l){var h=[f.Promise.resolve(l)],R=l.files;if(a.checkCRC32)for(var w=0;w<R.length;w++)h.push((d=>new f.Promise(function(D,S){var y=d.decompressed.getContentWorker().pipe(new s);y.on("error",function(k){S(k)}).on("end",function(){y.streamInfo.crc32!==d.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):D()}).resume()}))(R[w]));return f.Promise.all(h)}).then(function(l){for(var h=(l=l.shift()).files,R=0;R<h.length;R++){var w=h[R],d=w.fileNameStr,D=m.resolve(w.fileNameStr);o.file(D,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:a.createFolders}),w.dir||(o.file(D).unsafeOriginalName=d)}return l.zipComment.length&&(o.comment=l.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,x,A){var m=g("../utils"),f=g("../stream/GenericWorker");function c(u,s){f.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(s)}m.inherits(c,f),c.prototype._bindStream=function(u){var s=this;(this._stream=u).pause(),u.on("data",function(r){s.push({data:r,meta:{percent:0}})}).on("error",function(r){s.isPaused?this.generatedError=r:s.error(r)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},c.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},x.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(g,x,A){var m=g("readable-stream").Readable;function f(c,u,s){m.call(this,u),this._helper=c;var r=this;c.on("data",function(i,a){r.push(i)||r._helper.pause(),s&&s(a)}).on("error",function(i){r.emit("error",i)}).on("end",function(){r.push(null)})}g("../utils").inherits(f,m),f.prototype._read=function(){this._helper.resume()},x.exports=f},{"../utils":32,"readable-stream":16}],14:[function(g,x,A){x.exports={isNode:O!==void 0,newBufferFrom:function(m,f){if(O.from&&O.from!==Uint8Array.from)return O.from(m,f);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new O(m,f)},allocBuffer:function(m){return O.alloc?O.alloc(m):((m=new O(m)).fill(0),m)},isBuffer:function(m){return O.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(g,x,A){function m(D,S,y){var k=u.getTypeOf(S),b=u.extend(y||{},i),U=(b.date=b.date||new Date,b.compression!==null&&(b.compression=b.compression.toUpperCase()),typeof b.unixPermissions=="string"&&(b.unixPermissions=parseInt(b.unixPermissions,8)),b.unixPermissions&&16384&b.unixPermissions&&(b.dir=!0),b.dosPermissions&&16&b.dosPermissions&&(b.dir=!0),b.dir&&(D=w(D)),b.createFolders&&(U=function(z){var P=(z=z.slice(-1)==="/"?z.substring(0,z.length-1):z).lastIndexOf("/");return 0<P?z.substring(0,P):""}(D))&&f.call(this,U,!0),k==="string"&&b.binary===!1&&b.base64===!1);y&&y.binary!==void 0||(b.binary=!U),(S instanceof a&&S.uncompressedSize===0||b.dir||!S||S.length===0)&&(b.base64=!1,b.binary=!0,S="",b.compression="STORE"),k=S instanceof a||S instanceof s?S:h.isNode&&h.isStream(S)?new R(D,S):u.prepareContent(D,S,b.binary,b.optimizedBinaryString,b.base64),y=new o(D,k,b),this.files[D]=y}function f(D,S){return S=S!==void 0?S:i.createFolders,D=w(D),this.files[D]||m.call(this,D,null,{dir:!0,createFolders:S}),this.files[D]}var c=g("./utf8"),u=g("./utils"),s=g("./stream/GenericWorker"),r=g("./stream/StreamHelper"),i=g("./defaults"),a=g("./compressedObject"),o=g("./zipObject"),l=g("./generate"),h=g("./nodejsUtils"),R=g("./nodejs/NodejsStreamInputAdapter"),w=function(D){return D.slice(-1)!=="/"&&(D+="/"),D};function d(D){return Object.prototype.toString.call(D)==="[object RegExp]"}x.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var S,y,k;for(S in this.files)k=this.files[S],(y=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&D(y,k)},filter:function(D){var S=[];return this.forEach(function(y,k){D(y,k)&&S.push(k)}),S},file:function(D,S,y){var k;return arguments.length!==1?(D=this.root+D,m.call(this,D,S,y),this):d(D)?(k=D,this.filter(function(b,U){return!U.dir&&k.test(b)})):(S=this.files[this.root+D])&&!S.dir?S:null},folder:function(D){var S,y;return D?d(D)?this.filter(function(k,b){return b.dir&&D.test(k)}):(S=this.root+D,S=f.call(this,S),(y=this.clone()).root=S.name,y):this},remove:function(D){D=this.root+D;var S=this.files[D];if(S||(D.slice(-1)!=="/"&&(D+="/"),S=this.files[D]),S&&!S.dir)delete this.files[D];else for(var y=this.filter(function(b,U){return U.name.slice(0,D.length)===D}),k=0;k<y.length;k++)delete this.files[y[k].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var S={};try{if((S=u.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");u.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var y=S.comment||this.comment||"",k=l.generateWorker(this,S,y)}catch(b){(k=new s("error")).error(b)}return new r(k,S.type||"string",S.mimeType)},generateAsync:function(D,S){return this.generateInternalStream(D).accumulate(S)},generateNodeStream:function(D,S){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(S)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(g,x,A){x.exports=g("stream")},{stream:void 0}],17:[function(g,x,A){var m=g("./DataReader");function f(c){m.call(this,c);for(var u=0;u<this.data.length;u++)c[u]=255&c[u]}g("../utils").inherits(f,m),f.prototype.byteAt=function(c){return this.data[this.zero+c]},f.prototype.lastIndexOfSignature=function(c){for(var u=c.charCodeAt(0),s=c.charCodeAt(1),r=c.charCodeAt(2),i=c.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===u&&this.data[a+1]===s&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},f.prototype.readAndCheckSignature=function(c){var u=c.charCodeAt(0),s=c.charCodeAt(1),r=c.charCodeAt(2),i=(c=c.charCodeAt(3),this.readData(4));return u===i[0]&&s===i[1]&&r===i[2]&&c===i[3]},f.prototype.readData=function(c){var u;return this.checkOffset(c),c===0?[]:(u=this.data.slice(this.zero+this.index,this.zero+this.index+c),this.index+=c,u)},x.exports=f},{"../utils":32,"./DataReader":18}],18:[function(g,x,A){var m=g("../utils");function f(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var u,s=0;for(this.checkOffset(c),u=this.index+c-1;u>=this.index;u--)s=(s<<8)+this.byteAt(u);return this.index+=c,s},readString:function(c){return m.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},x.exports=f},{"../utils":32}],19:[function(g,x,A){var m=g("./Uint8ArrayReader");function f(c){m.call(this,c)}g("../utils").inherits(f,m),f.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},x.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,x,A){var m=g("./DataReader");function f(c){m.call(this,c)}g("../utils").inherits(f,m),f.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},f.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},f.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},f.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},x.exports=f},{"../utils":32,"./DataReader":18}],21:[function(g,x,A){var m=g("./ArrayReader");function f(c){m.call(this,c)}g("../utils").inherits(f,m),f.prototype.readData=function(c){var u;return this.checkOffset(c),c===0?new Uint8Array(0):(u=this.data.subarray(this.zero+this.index,this.zero+this.index+c),this.index+=c,u)},x.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(g,x,A){var m=g("../utils"),f=g("../support"),c=g("./ArrayReader"),u=g("./StringReader"),s=g("./NodeBufferReader"),r=g("./Uint8ArrayReader");x.exports=function(i){var a=m.getTypeOf(i);return m.checkSupport(a),a!=="string"||f.uint8array?a==="nodebuffer"?new s(i):f.uint8array?new r(m.transformTo("uint8array",i)):new c(m.transformTo("array",i)):new u(i)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(g,x,A){A.LOCAL_FILE_HEADER="PK",A.CENTRAL_FILE_HEADER="PK",A.CENTRAL_DIRECTORY_END="PK",A.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",A.ZIP64_CENTRAL_DIRECTORY_END="PK",A.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,x,A){var m=g("./GenericWorker"),f=g("../utils");function c(u){m.call(this,"ConvertWorker to "+u),this.destType=u}f.inherits(c,m),c.prototype.processChunk=function(u){this.push({data:f.transformTo(this.destType,u.data),meta:u.meta})},x.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(g,x,A){var m=g("./GenericWorker"),f=g("../crc32");function c(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}g("../utils").inherits(c,m),c.prototype.processChunk=function(u){this.streamInfo.crc32=f(u.data,this.streamInfo.crc32||0),this.push(u)},x.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(g,x,A){var m=g("../utils"),f=g("./GenericWorker");function c(u){f.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}m.inherits(c,f),c.prototype.processChunk=function(u){var s;u&&(s=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=s+u.data.length),f.prototype.processChunk.call(this,u)},x.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(g,x,A){var m=g("../utils"),f=g("./GenericWorker");function c(u){f.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(r){s.dataIsReady=!0,s.data=r,s.max=r&&r.length||0,s.type=m.getTypeOf(r),s.isPaused||s._tickAndRepeat()},function(r){s.error(r)})}m.inherits(c,f),c.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,s);break;case"uint8array":u=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":u=this.data.slice(this.index,s)}return this.index=s,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},x.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(g,x,A){function m(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,c){return this._listeners[f].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,c){if(this._listeners[f])for(var u=0;u<this._listeners[f].length;u++)this._listeners[f][u].call(this,c)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var c=this;return f.on("data",function(u){c.processChunk(u)}),f.on("end",function(){c.end()}),f.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var f;return!(!this.isPaused||this.isFinished||(f=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),f))},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,c){return this.extraStreamInfo[f]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},x.exports=m},{}],29:[function(g,x,A){var m=g("../utils"),f=g("./ConvertWorker"),c=g("./GenericWorker"),u=g("../base64"),s=g("../support"),r=g("../external"),i=null;if(s.nodestream)try{i=g("../nodejs/NodejsStreamOutputAdapter")}catch{}function a(o,l,h){var R=l;switch(l){case"blob":case"arraybuffer":R="uint8array";break;case"base64":R="string"}try{this._internalType=R,this._outputType=l,this._mimeType=h,m.checkSupport(R),this._worker=o.pipe(new f(R)),o.lock()}catch(w){this._worker=new c("error"),this._worker.error(w)}}a.prototype={accumulate:function(o){return function(l,h){return new r.Promise(function(R,w){var d=[],D=l._internalType,S=l._outputType,y=l._mimeType;l.on("data",function(k,b){d.push(k),h&&h(b)}).on("error",function(k){d=[],w(k)}).on("end",function(){try{var k=((b,U,z)=>{switch(b){case"blob":return m.newBlob(m.transformTo("arraybuffer",U),z);case"base64":return u.encode(U);default:return m.transformTo(b,U)}})(S,((b,U)=>{for(var z=0,P=null,H=0,Q=0;Q<U.length;Q++)H+=U[Q].length;switch(b){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(P=new Uint8Array(H),Q=0;Q<U.length;Q++)P.set(U[Q],z),z+=U[Q].length;return P;case"nodebuffer":return O.concat(U);default:throw new Error("concat : unsupported type '"+b+"'")}})(D,d),y);R(k)}catch(b){w(b)}d=[]}).resume()})}(this,o)},on:function(o,l){var h=this;return o==="data"?this._worker.on(o,function(R){l.call(h,R.data,R.meta)}):this._worker.on(o,function(){m.delay(l,arguments,h)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(o){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new i(this,{objectMode:this._outputType!=="nodebuffer"},o)}},x.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(g,x,A){if(A.base64=!0,A.array=!0,A.string=!0,A.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",A.nodebuffer=O!==void 0,A.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")A.blob=!1;else{var m=new ArrayBuffer(0);try{A.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(m),A.blob=f.getBlob("application/zip").size===0}catch{A.blob=!1}}}try{A.nodestream=!!g("readable-stream").Readable}catch{A.nodestream=!1}},{"readable-stream":16}],31:[function(g,x,A){for(var m=g("./utils"),f=g("./support"),c=g("./nodejsUtils"),u=g("./stream/GenericWorker"),s=new Array(256),r=0;r<256;r++)s[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function i(){u.call(this,"utf-8 decode"),this.leftOver=null}function a(){u.call(this,"utf-8 encode")}s[254]=s[254]=1,A.utf8encode=function(o){if(f.nodebuffer)return c.newBufferFrom(o,"utf-8");for(var l,h,R,w,d=o,D=d.length,S=0,y=0;y<D;y++)(64512&(h=d.charCodeAt(y)))==55296&&y+1<D&&(64512&(R=d.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(R-56320),y++),S+=h<128?1:h<2048?2:h<65536?3:4;for(l=new(f.uint8array?Uint8Array:Array)(S),y=w=0;w<S;y++)(64512&(h=d.charCodeAt(y)))==55296&&y+1<D&&(64512&(R=d.charCodeAt(y+1)))==56320&&(h=65536+(h-55296<<10)+(R-56320),y++),h<128?l[w++]=h:(h<2048?l[w++]=192|h>>>6:(h<65536?l[w++]=224|h>>>12:(l[w++]=240|h>>>18,l[w++]=128|h>>>12&63),l[w++]=128|h>>>6&63),l[w++]=128|63&h);return l},A.utf8decode=function(o){if(f.nodebuffer)return m.transformTo("nodebuffer",o).toString("utf-8");for(var l,h,R,w=o=m.transformTo(f.uint8array?"uint8array":"array",o),d=w.length,D=new Array(2*d),S=l=0;S<d;)if((h=w[S++])<128)D[l++]=h;else if(4<(R=s[h]))D[l++]=65533,S+=R-1;else{for(h&=R===2?31:R===3?15:7;1<R&&S<d;)h=h<<6|63&w[S++],R--;1<R?D[l++]=65533:h<65536?D[l++]=h:(h-=65536,D[l++]=55296|h>>10&1023,D[l++]=56320|1023&h)}return D.length!==l&&(D.subarray?D=D.subarray(0,l):D.length=l),m.applyFromCharCode(D)},m.inherits(i,u),i.prototype.processChunk=function(o){var l=m.transformTo(f.uint8array?"uint8array":"array",o.data),h=(this.leftOver&&this.leftOver.length&&(f.uint8array?(h=l,(l=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),l.set(h,this.leftOver.length)):l=this.leftOver.concat(l),this.leftOver=null),((w,d)=>{for(var D=(d=(d=d||w.length)>w.length?w.length:d)-1;0<=D&&(192&w[D])==128;)D--;return!(D<0)&&D!==0&&D+s[w[D]]>d?D:d})(l)),R=l;h!==l.length&&(f.uint8array?(R=l.subarray(0,h),this.leftOver=l.subarray(h,l.length)):(R=l.slice(0,h),this.leftOver=l.slice(h,l.length))),this.push({data:A.utf8decode(R),meta:o.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:A.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},A.Utf8DecodeWorker=i,m.inherits(a,u),a.prototype.processChunk=function(o){this.push({data:A.utf8encode(o.data),meta:o.meta})},A.Utf8EncodeWorker=a},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(g,x,A){var m=g("./support"),f=g("./base64"),c=g("./nodejsUtils"),u=g("./external");function s(h){return h}function r(h,R){for(var w=0;w<h.length;++w)R[w]=255&h.charCodeAt(w);return R}g("setimmediate"),A.newBlob=function(h,R){A.checkSupport("blob");try{return new Blob([h],{type:R})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(h),w.getBlob(R)}catch{throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(h,R,w){var d=[],D=0,S=h.length;if(S<=w)return String.fromCharCode.apply(null,h);for(;D<S;)d.push(R==="array"||R==="nodebuffer"?String.fromCharCode.apply(null,h.slice(D,Math.min(D+w,S))):String.fromCharCode.apply(null,h.subarray(D,Math.min(D+w,S)))),D+=w;return d.join("")},stringifyByChar:function(h){for(var R="",w=0;w<h.length;w++)R+=String.fromCharCode(h[w]);return R},applyCanBeUsed:{uint8array:(()=>{try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(()=>{try{return m.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function a(h){var R=65536,w=A.getTypeOf(h),d=!0;if(w==="uint8array"?d=i.applyCanBeUsed.uint8array:w==="nodebuffer"&&(d=i.applyCanBeUsed.nodebuffer),d)for(;1<R;)try{return i.stringifyByChunk(h,w,R)}catch{R=Math.floor(R/2)}return i.stringifyByChar(h)}function o(h,R){for(var w=0;w<h.length;w++)R[w]=h[w];return R}A.applyFromCharCode=a;var l={};l.string={string:s,array:function(h){return r(h,new Array(h.length))},arraybuffer:function(h){return l.string.uint8array(h).buffer},uint8array:function(h){return r(h,new Uint8Array(h.length))},nodebuffer:function(h){return r(h,c.allocBuffer(h.length))}},l.array={string:a,array:s,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return c.newBufferFrom(h)}},l.arraybuffer={string:function(h){return a(new Uint8Array(h))},array:function(h){return o(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:s,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return c.newBufferFrom(new Uint8Array(h))}},l.uint8array={string:a,array:function(h){return o(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:s,nodebuffer:function(h){return c.newBufferFrom(h)}},l.nodebuffer={string:a,array:function(h){return o(h,new Array(h.length))},arraybuffer:function(h){return l.nodebuffer.uint8array(h).buffer},uint8array:function(h){return o(h,new Uint8Array(h.length))},nodebuffer:s},A.transformTo=function(h,R){if(R=R||"",!h)return R;A.checkSupport(h);var w=A.getTypeOf(R);return l[w][h](R)},A.resolve=function(h){for(var R=h.split("/"),w=[],d=0;d<R.length;d++){var D=R[d];D==="."||D===""&&d!==0&&d!==R.length-1||(D===".."?w.pop():w.push(D))}return w.join("/")},A.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":m.nodebuffer&&c.isBuffer(h)?"nodebuffer":m.uint8array&&h instanceof Uint8Array?"uint8array":m.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},A.checkSupport=function(h){if(!m[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},A.MAX_VALUE_16BITS=65535,A.MAX_VALUE_32BITS=-1,A.pretty=function(h){for(var R,w="",d=0;d<(h||"").length;d++)w+="\\x"+((R=h.charCodeAt(d))<16?"0":"")+R.toString(16).toUpperCase();return w},A.delay=function(h,R,w){T(function(){h.apply(w||null,R||[])})},A.inherits=function(h,R){function w(){}w.prototype=R.prototype,h.prototype=new w},A.extend=function(){for(var h,R={},w=0;w<arguments.length;w++)for(h in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],h)&&R[h]===void 0&&(R[h]=arguments[w][h]);return R},A.prepareContent=function(h,R,w,d,D){return u.Promise.resolve(R).then(function(S){return m.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new u.Promise(function(y,k){var b=new FileReader;b.onload=function(U){y(U.target.result)},b.onerror=function(U){k(U.target.error)},b.readAsArrayBuffer(S)}):S}).then(function(S){var y=A.getTypeOf(S);return y?(y==="arraybuffer"?S=A.transformTo("uint8array",S):y==="string"&&(D?S=f.decode(S):w&&d!==!0&&(S=r(y=S,new(m.uint8array?Uint8Array:Array)(y.length)))),S):u.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(g,x,A){var m=g("./reader/readerFor"),f=g("./utils"),c=g("./signature"),u=g("./zipEntry"),s=g("./support");function r(i){this.files=[],this.loadOptions=i}r.prototype={checkSignature:function(i){var a;if(!this.reader.readAndCheckSignature(i))throw this.reader.index-=4,a=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(a)+", expected "+f.pretty(i)+")")},isSignature:function(i,a){var o=this.reader.index;return this.reader.setIndex(i),i=this.reader.readString(4)===a,this.reader.setIndex(o),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var i=this.reader.readData(this.zipCommentLength),a=s.uint8array?"uint8array":"array";a=f.transformTo(a,i),this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var i,a,o,l=this.zip64EndOfCentralSize-44;0<l;)i=this.reader.readInt(2),a=this.reader.readInt(4),o=this.reader.readData(a),this.zip64ExtensibleData[i]={id:i,length:a,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var i,a=0;a<this.files.length;a++)i=this.files[a],this.reader.setIndex(i.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),i.readLocalPart(this.reader),i.handleUTF8(),i.processAttributes()},readCentralDir:function(){var i;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(i=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(i);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var i=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(i<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(i);var a=i;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(i=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(i),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}if(i=this.centralDirOffset+this.centralDirSize,0<(i=a-(i=this.zip64?i+20+(12+this.zip64EndOfCentralSize):i)))this.isSignature(a,c.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(i){this.reader=m(i)},load:function(i){this.prepareReader(i),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},x.exports=r},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(g,x,A){var m=g("./reader/readerFor"),f=g("./utils"),c=g("./compressedObject"),u=g("./crc32"),s=g("./utf8"),r=g("./compressions"),i=g("./support");function a(o,l){this.options=o,this.loadOptions=l}a.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var l;if(o.skip(22),this.fileNameLength=o.readInt(2),l=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((l=(h=>{for(var R in r)if(Object.prototype.hasOwnProperty.call(r,R)&&r[R].magic===h)return r[R];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,l,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var l=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(l),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){var o;this.extraFields[1]&&(o=m(this.extraFields[1].value),this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS)&&(this.diskNumberStart=o.readInt(4))},readExtraFields:function(o){var l,h,R,w=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<w;)l=o.readInt(2),h=o.readInt(2),R=o.readData(h),this.extraFields[l]={id:l,length:h,value:R};o.setIndex(w)},handleUTF8:function(){var o,l=i.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment)):((o=this.findExtraFieldUnicodePath())!==null?this.fileNameStr=o:(o=f.transformTo(l,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(o)),(o=this.findExtraFieldUnicodeComment())!==null?this.fileCommentStr=o:(o=f.transformTo(l,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(o)))},findExtraFieldUnicodePath:function(){var o,l=this.extraFields[28789];return l&&(o=m(l.value)).readInt(1)===1&&u(this.fileName)===o.readInt(4)?s.utf8decode(o.readData(l.length-5)):null},findExtraFieldUnicodeComment:function(){var o,l=this.extraFields[25461];return l&&(o=m(l.value)).readInt(1)===1&&u(this.fileComment)===o.readInt(4)?s.utf8decode(o.readData(l.length-5)):null}},x.exports=a},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(g,x,A){function m(l,h,R){this.name=l,this.dir=R.dir,this.date=R.date,this.comment=R.comment,this.unixPermissions=R.unixPermissions,this.dosPermissions=R.dosPermissions,this._data=h,this._dataBinary=R.binary,this.options={compression:R.compression,compressionOptions:R.compressionOptions}}var f=g("./stream/StreamHelper"),c=g("./stream/DataWorker"),u=g("./utf8"),s=g("./compressedObject"),r=g("./stream/GenericWorker");m.prototype={internalStream:function(l){var h=null,R="string";try{if(!l)throw new Error("No output type specified.");var w=(R=l.toLowerCase())==="string"||R==="text",d=(R!=="binarystring"&&R!=="text"||(R="string"),h=this._decompressWorker(),!this._dataBinary);d&&!w&&(h=h.pipe(new u.Utf8EncodeWorker)),!d&&w&&(h=h.pipe(new u.Utf8DecodeWorker))}catch(D){(h=new r("error")).error(D)}return new f(h,R,"")},async:function(l,h){return this.internalStream(l).accumulate(h)},nodeStream:function(l,h){return this.internalStream(l||"nodebuffer").toNodejsStream(h)},_compressWorker:function(l,h){var R;return this._data instanceof s&&this._data.compression.magic===l.magic?this._data.getCompressedWorker():(R=this._decompressWorker(),this._dataBinary||(R=R.pipe(new u.Utf8EncodeWorker)),s.createWorkerFrom(R,l,h))},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof r?this._data:new c(this._data)}};for(var i=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],a=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<i.length;o++)m.prototype[i[o]]=a;x.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(g,x,A){(function(m){var f,c,u,s,r=m.MutationObserver||m.WebKitMutationObserver,i=r?(c=0,r=new r(o),u=m.document.createTextNode(""),r.observe(u,{characterData:!0}),function(){u.data=c=++c%2}):m.setImmediate||m.MessageChannel===void 0?"document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var l=m.document.createElement("script");l.onreadystatechange=function(){o(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},m.document.documentElement.appendChild(l)}:function(){setTimeout(o,0)}:((s=new m.MessageChannel).port1.onmessage=o,function(){s.port2.postMessage(0)}),a=[];function o(){var l,h;f=!0;for(var R=a.length;R;){for(h=a,a=[],l=-1;++l<R;)h[l]();R=a.length}f=!1}x.exports=function(l){a.push(l)!==1||f||i()}}).call(this,_!==void 0?_:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(g,x,A){var m=g("immediate");function f(){}var c={},u=["REJECTED"],s=["FULFILLED"],r=["PENDING"];function i(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,w!==f&&h(this,w)}function a(w,d,D){this.promise=w,typeof d=="function"&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function o(w,d,D){m(function(){var S;try{S=d(D)}catch(y){return c.reject(w,y)}S===w?c.reject(w,new TypeError("Cannot resolve promise with itself")):c.resolve(w,S)})}function l(w){var d=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof d=="function")return function(){d.apply(w,arguments)}}function h(w,d){var D=!1;function S(b){D||(D=!0,c.reject(w,b))}function y(b){D||(D=!0,c.resolve(w,b))}var k=R(function(){d(y,S)});k.status==="error"&&S(k.value)}function R(w,d){var D={};try{D.value=w(d),D.status="success"}catch(S){D.status="error",D.value=S}return D}(x.exports=i).prototype.finally=function(w){var d;return typeof w!="function"?this:(d=this.constructor,this.then(function(D){return d.resolve(w()).then(function(){return D})},function(D){return d.resolve(w()).then(function(){throw D})}))},i.prototype.catch=function(w){return this.then(null,w)},i.prototype.then=function(w,d){var D;return typeof w!="function"&&this.state===s||typeof d!="function"&&this.state===u?this:(D=new this.constructor(f),this.state!==r?o(D,this.state===s?w:d,this.outcome):this.queue.push(new a(D,w,d)),D)},a.prototype.callFulfilled=function(w){c.resolve(this.promise,w)},a.prototype.otherCallFulfilled=function(w){o(this.promise,this.onFulfilled,w)},a.prototype.callRejected=function(w){c.reject(this.promise,w)},a.prototype.otherCallRejected=function(w){o(this.promise,this.onRejected,w)},c.resolve=function(w,d){var D=R(l,d);if(D.status==="error")return c.reject(w,D.value);if(D=D.value)h(w,D);else{w.state=s,w.outcome=d;for(var S=-1,y=w.queue.length;++S<y;)w.queue[S].callFulfilled(d)}return w},c.reject=function(w,d){w.state=u,w.outcome=d;for(var D=-1,S=w.queue.length;++D<S;)w.queue[D].callRejected(d);return w},i.resolve=function(w){return w instanceof this?w:c.resolve(new this(f),w)},i.reject=function(w){var d=new this(f);return c.reject(d,w)},i.all=function(w){var d=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=w.length,S=!1;if(!D)return this.resolve([]);for(var y=new Array(D),k=0,b=-1,U=new this(f);++b<D;)((z,P)=>{d.resolve(z).then(function(H){y[P]=H,++k!==D||S||(S=!0,c.resolve(U,y))},function(H){S||(S=!0,c.reject(U,H))})})(w[b],b);return U},i.race=function(w){if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var d=w.length,D=!1;if(!d)return this.resolve([]);for(var S,y=-1,k=new this(f);++y<d;)S=w[y],this.resolve(S).then(function(b){D||(D=!0,c.resolve(k,b))},function(b){D||(D=!0,c.reject(k,b))});return k}},{immediate:36}],38:[function(g,x,A){var m={};(0,g("./lib/utils/common").assign)(m,g("./lib/deflate"),g("./lib/inflate"),g("./lib/zlib/constants")),x.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(g,x,A){var m=g("./zlib/deflate"),f=g("./utils/common"),c=g("./utils/strings"),u=g("./zlib/messages"),s=g("./zlib/zstream"),r=Object.prototype.toString;function i(o){if(!(this instanceof i))return new i(o);this.options=f.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},o||{});var l=((o=this.options).raw&&0<o.windowBits?o.windowBits=-o.windowBits:o.gzip&&0<o.windowBits&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0,m.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy));if(l!==0)throw new Error(u[l]);if(o.header&&m.deflateSetHeader(this.strm,o.header),o.dictionary){if(o=typeof o.dictionary=="string"?c.string2buf(o.dictionary):r.call(o.dictionary)==="[object ArrayBuffer]"?new Uint8Array(o.dictionary):o.dictionary,(l=m.deflateSetDictionary(this.strm,o))!==0)throw new Error(u[l]);this._dict_set=!0}}function a(o,l){if((l=new i(l)).push(o,!0),l.err)throw l.msg||u[l.err];return l.result}i.prototype.push=function(o,l){var h,R,w=this.strm,d=this.options.chunkSize;if(this.ended)return!1;R=l===~~l?l:l===!0?4:0,typeof o=="string"?w.input=c.string2buf(o):r.call(o)==="[object ArrayBuffer]"?w.input=new Uint8Array(o):w.input=o,w.next_in=0,w.avail_in=w.input.length;do if(w.avail_out===0&&(w.output=new f.Buf8(d),w.next_out=0,w.avail_out=d),(h=m.deflate(w,R))!==1&&h!==0)return this.onEnd(h),!(this.ended=!0);while(w.avail_out!==0&&(w.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(f.shrinkBuf(w.output,w.next_out))):this.onData(f.shrinkBuf(w.output,w.next_out))),(0<w.avail_in||w.avail_out===0)&&h!==1);return R===4?(h=m.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===0):R!==2||(this.onEnd(0),!(w.avail_out=0))},i.prototype.onData=function(o){this.chunks.push(o)},i.prototype.onEnd=function(o){o===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},A.Deflate=i,A.deflate=a,A.deflateRaw=function(o,l){return(l=l||{}).raw=!0,a(o,l)},A.gzip=function(o,l){return(l=l||{}).gzip=!0,a(o,l)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(g,x,A){var m=g("./zlib/inflate"),f=g("./utils/common"),c=g("./utils/strings"),u=g("./zlib/constants"),s=g("./zlib/messages"),r=g("./zlib/zstream"),i=g("./zlib/gzheader"),a=Object.prototype.toString;function o(h){if(!(this instanceof o))return new o(h);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},h||{});var R=this.options;if((h=(R.raw&&0<=R.windowBits&&R.windowBits<16&&(R.windowBits=-R.windowBits,R.windowBits===0)&&(R.windowBits=-15),!(0<=R.windowBits&&R.windowBits<16)||h&&h.windowBits||(R.windowBits+=32),15<R.windowBits&&R.windowBits<48&&(15&R.windowBits)==0&&(R.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0,m.inflateInit2(this.strm,R.windowBits)))!==u.Z_OK)throw new Error(s[h]);this.header=new i,m.inflateGetHeader(this.strm,this.header)}function l(h,R){if((R=new o(R)).push(h,!0),R.err)throw R.msg||s[R.err];return R.result}o.prototype.push=function(h,R){var w,d,D,S,y,k=this.strm,b=this.options.chunkSize,U=this.options.dictionary,z=!1;if(this.ended)return!1;d=R===~~R?R:R===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof h=="string"?k.input=c.binstring2buf(h):a.call(h)==="[object ArrayBuffer]"?k.input=new Uint8Array(h):k.input=h,k.next_in=0,k.avail_in=k.input.length;do if(k.avail_out===0&&(k.output=new f.Buf8(b),k.next_out=0,k.avail_out=b),(w=m.inflate(k,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&U&&(y=typeof U=="string"?c.string2buf(U):a.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,w=m.inflateSetDictionary(this.strm,y)),w===u.Z_BUF_ERROR&&z===!0&&(w=u.Z_OK,z=!1),w!==u.Z_STREAM_END&&w!==u.Z_OK)return this.onEnd(w),!(this.ended=!0);while(!k.next_out||k.avail_out!==0&&w!==u.Z_STREAM_END&&(k.avail_in!==0||d!==u.Z_FINISH&&d!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=c.utf8border(k.output,k.next_out),D=k.next_out-y,S=c.buf2string(k.output,y),k.next_out=D,k.avail_out=b-D,D&&f.arraySet(k.output,k.output,y,D,0),this.onData(S)):this.onData(f.shrinkBuf(k.output,k.next_out))),k.avail_in===0&&k.avail_out===0&&(z=!0),(0<k.avail_in||k.avail_out===0)&&w!==u.Z_STREAM_END);return(d=w===u.Z_STREAM_END?u.Z_FINISH:d)===u.Z_FINISH?(w=m.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u.Z_OK):d!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(k.avail_out=0))},o.prototype.onData=function(h){this.chunks.push(h)},o.prototype.onEnd=function(h){h===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},A.Inflate=o,A.inflate=l,A.inflateRaw=function(h,R){return(R=R||{}).raw=!0,l(h,R)},A.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(g,x,A){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u",f=(A.assign=function(u){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var r=s.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(u[i]=r[i])}}return u},A.shrinkBuf=function(u,s){return u.length===s?u:u.subarray?u.subarray(0,s):(u.length=s,u)},{arraySet:function(u,s,r,i,a){if(s.subarray&&u.subarray)u.set(s.subarray(r,r+i),a);else for(var o=0;o<i;o++)u[a+o]=s[r+o]},flattenChunks:function(u){for(var s,r,i,a,o=s=0,l=u.length;o<l;o++)s+=u[o].length;for(a=new Uint8Array(s),o=r=0,l=u.length;o<l;o++)i=u[o],a.set(i,r),r+=i.length;return a}}),c={arraySet:function(u,s,r,i,a){for(var o=0;o<i;o++)u[a+o]=s[r+o]},flattenChunks:function(u){return[].concat.apply([],u)}};A.setTyped=function(u){u?(A.Buf8=Uint8Array,A.Buf16=Uint16Array,A.Buf32=Int32Array,A.assign(A,f)):(A.Buf8=Array,A.Buf16=Array,A.Buf32=Array,A.assign(A,c))},A.setTyped(m)},{}],42:[function(g,x,A){var m=g("./common"),f=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var u=new m.Buf8(256),s=0;s<256;s++)u[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function r(i,a){if(a<65537&&(i.subarray&&c||!i.subarray&&f))return String.fromCharCode.apply(null,m.shrinkBuf(i,a));for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[l]);return o}u[254]=u[254]=1,A.string2buf=function(i){for(var a,o,l,h,R=i.length,w=0,d=0;d<R;d++)(64512&(o=i.charCodeAt(d)))==55296&&d+1<R&&(64512&(l=i.charCodeAt(d+1)))==56320&&(o=65536+(o-55296<<10)+(l-56320),d++),w+=o<128?1:o<2048?2:o<65536?3:4;for(a=new m.Buf8(w),d=h=0;h<w;d++)(64512&(o=i.charCodeAt(d)))==55296&&d+1<R&&(64512&(l=i.charCodeAt(d+1)))==56320&&(o=65536+(o-55296<<10)+(l-56320),d++),o<128?a[h++]=o:(o<2048?a[h++]=192|o>>>6:(o<65536?a[h++]=224|o>>>12:(a[h++]=240|o>>>18,a[h++]=128|o>>>12&63),a[h++]=128|o>>>6&63),a[h++]=128|63&o);return a},A.buf2binstring=function(i){return r(i,i.length)},A.binstring2buf=function(i){for(var a=new m.Buf8(i.length),o=0,l=a.length;o<l;o++)a[o]=i.charCodeAt(o);return a},A.buf2string=function(i,a){for(var o,l,h,R=a||i.length,w=new Array(2*R),d=o=0;d<R;)if((l=i[d++])<128)w[o++]=l;else if(4<(h=u[l]))w[o++]=65533,d+=h-1;else{for(l&=h===2?31:h===3?15:7;1<h&&d<R;)l=l<<6|63&i[d++],h--;1<h?w[o++]=65533:l<65536?w[o++]=l:(l-=65536,w[o++]=55296|l>>10&1023,w[o++]=56320|1023&l)}return r(w,o)},A.utf8border=function(i,a){for(var o=(a=(a=a||i.length)>i.length?i.length:a)-1;0<=o&&(192&i[o])==128;)o--;return!(o<0)&&o!==0&&o+u[i[o]]>a?o:a}},{"./common":41}],43:[function(g,x,A){x.exports=function(m,f,c,u){for(var s=65535&m|0,r=m>>>16&65535|0,i=0;c!==0;){for(c-=i=2e3<c?2e3:c;r=r+(s=s+f[u++]|0)|0,--i;);s%=65521,r%=65521}return s|r<<16|0}},{}],44:[function(g,x,A){x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(g,x,A){var m=(()=>{for(var f=[],c=0;c<256;c++){for(var u=c,s=0;s<8;s++)u=1&u?3988292384^u>>>1:u>>>1;f[c]=u}return f})();x.exports=function(f,c,u,s){var r=m,i=s+u;f^=-1;for(var a=s;a<i;a++)f=f>>>8^r[255&(f^c[a])];return-1^f}},{}],46:[function(g,x,A){var m,f=g("../utils/common"),c=g("./trees"),u=g("./adler32"),s=g("./crc32"),r=g("./messages"),i=-2,a=258,o=262,l=113;function h(q,B){return q.msg=r[B],B}function R(q){return(q<<1)-(4<q?9:0)}function w(q){for(var B=q.length;0<=--B;)q[B]=0}function d(q){var B=q.state,Y=B.pending;(Y=q.avail_out<Y?q.avail_out:Y)!==0&&(f.arraySet(q.output,B.pending_buf,B.pending_out,Y,q.next_out),q.next_out+=Y,B.pending_out+=Y,q.total_out+=Y,q.avail_out-=Y,B.pending-=Y,B.pending===0)&&(B.pending_out=0)}function D(q,B){c._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,B),q.block_start=q.strstart,d(q.strm)}function S(q,B){q.pending_buf[q.pending++]=B}function y(q,B){q.pending_buf[q.pending++]=B>>>8&255,q.pending_buf[q.pending++]=255&B}function k(q,B){var Y,K,ee=q.max_chain_length,oe=q.strstart,ae=q.prev_length,X=q.nice_match,re=q.w_size-o<q.strstart?q.strstart-(q.w_size-o):0,ie=q.window,ge=q.w_mask,_e=q.prev,ke=q.strstart+a,De=ie[oe+ae-1],Re=ie[oe+ae];q.good_match<=q.prev_length&&(ee>>=2),q.lookahead<X&&(X=q.lookahead);do if(ie[(Y=B)+ae]===Re&&ie[Y+ae-1]===De&&ie[Y]===ie[oe]&&ie[++Y]===ie[oe+1]){for(oe+=2,Y++;ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&ie[++oe]===ie[++Y]&&oe<ke;);if(K=a-(ke-oe),oe=ke-a,ae<K){if(q.match_start=B,X<=(ae=K))break;De=ie[oe+ae-1],Re=ie[oe+ae]}}while((B=_e[B&ge])>re&&--ee!=0);return ae<=q.lookahead?ae:q.lookahead}function b(q){var B,Y,K,ee,oe,ae,X,re,ie,ge=q.w_size;do{if(re=q.window_size-q.lookahead-q.strstart,ge+(ge-o)<=q.strstart){for(f.arraySet(q.window,q.window,ge,ge,0),q.match_start-=ge,q.strstart-=ge,q.block_start-=ge,B=Y=q.hash_size;K=q.head[--B],q.head[B]=ge<=K?K-ge:0,--Y;);for(B=Y=ge;K=q.prev[--B],q.prev[B]=ge<=K?K-ge:0,--Y;);re+=ge}if(q.strm.avail_in===0)break;if(ae=q.window,X=q.strstart+q.lookahead,ie=void 0,Y=(ie=(re=re)<(ie=(oe=q.strm).avail_in)?re:ie)===0?0:(oe.avail_in-=ie,f.arraySet(ae,oe.input,oe.next_in,ie,X),oe.state.wrap===1?oe.adler=u(oe.adler,ae,ie,X):oe.state.wrap===2&&(oe.adler=s(oe.adler,ae,ie,X)),oe.next_in+=ie,oe.total_in+=ie,ie),q.lookahead+=Y,3<=q.lookahead+q.insert)for(ee=q.strstart-q.insert,q.ins_h=q.window[ee],q.ins_h=(q.ins_h<<q.hash_shift^q.window[ee+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[ee+3-1])&q.hash_mask,q.prev[ee&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=ee,ee++,q.insert--,!(q.lookahead+q.insert<3)););}while(q.lookahead<o&&q.strm.avail_in!==0)}function U(q,B){for(var Y,K;;){if(q.lookahead<o){if(b(q),q.lookahead<o&&B===0)return 1;if(q.lookahead===0)break}if(Y=0,3<=q.lookahead&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),Y!==0&&q.strstart-Y<=q.w_size-o&&(q.match_length=k(q,Y)),3<=q.match_length)if(K=c._tr_tally(q,q.strstart-q.match_start,q.match_length-3),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=3){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else K=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(K&&(D(q,!1),q.strm.avail_out===0))return 1}return q.insert=q.strstart<2?q.strstart:2,B===4?(D(q,!0),q.strm.avail_out===0?3:4):q.last_lit&&(D(q,!1),q.strm.avail_out===0)?1:2}function z(q,B){for(var Y,K,ee;;){if(q.lookahead<o){if(b(q),q.lookahead<o&&B===0)return 1;if(q.lookahead===0)break}if(Y=0,3<=q.lookahead&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=2,Y!==0&&q.prev_length<q.max_lazy_match&&q.strstart-Y<=q.w_size-o&&(q.match_length=k(q,Y),q.match_length<=5)&&(q.strategy===1||q.match_length===3&&4096<q.strstart-q.match_start)&&(q.match_length=2),3<=q.prev_length&&q.match_length<=q.prev_length){for(ee=q.strstart+q.lookahead-3,K=c._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-3),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=ee&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=2,q.strstart++,K&&(D(q,!1),q.strm.avail_out===0))return 1}else if(q.match_available){if((K=c._tr_tally(q,0,q.window[q.strstart-1]))&&D(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return 1}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(K=c._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<2?q.strstart:2,B===4?(D(q,!0),q.strm.avail_out===0?3:4):q.last_lit&&(D(q,!1),q.strm.avail_out===0)?1:2}function P(q,B,Y,K,ee){this.good_length=q,this.max_lazy=B,this.nice_length=Y,this.max_chain=K,this.func=ee}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(1146),this.dyn_dtree=new f.Buf16(122),this.bl_tree=new f.Buf16(78),w(this.dyn_ltree),w(this.dyn_dtree),w(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(16),this.heap=new f.Buf16(573),w(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(573),w(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Q(q){var B;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=2,(B=q.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?42:l,q.adler=B.wrap===2?0:1,B.last_flush=0,c._tr_init(B),0):h(q,i)}function J(q){var B=Q(q);return B===0&&((q=q.state).window_size=2*q.w_size,w(q.head),q.max_lazy_match=m[q.level].max_lazy,q.good_match=m[q.level].good_length,q.nice_match=m[q.level].nice_length,q.max_chain_length=m[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=0,q.insert=0,q.match_length=q.prev_length=2,q.match_available=0,q.ins_h=0),B}function L(q,B,Y,K,ee,oe){if(!q)return i;var ae=1;if(B===-1&&(B=6),K<0?(ae=0,K=-K):15<K&&(ae=2,K-=16),ee<1||9<ee||Y!==8||K<8||15<K||B<0||9<B||oe<0||4<oe)return h(q,i);K===8&&(K=9);var X=new H;return(q.state=X).strm=q,X.wrap=ae,X.gzhead=null,X.w_bits=K,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=ee+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+3-1)/3),X.window=new f.Buf8(2*X.w_size),X.head=new f.Buf16(X.hash_size),X.prev=new f.Buf16(X.w_size),X.lit_bufsize=1<<ee+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new f.Buf8(X.pending_buf_size),X.d_buf=+X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=B,X.strategy=oe,X.method=Y,J(q)}m=[new P(0,0,0,0,function(q,B){var Y=65535;for(Y>q.pending_buf_size-5&&(Y=q.pending_buf_size-5);;){if(q.lookahead<=1){if(b(q),q.lookahead===0&&B===0)return 1;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var K=q.block_start+Y;if((q.strstart===0||q.strstart>=K)&&(q.lookahead=q.strstart-K,q.strstart=K,D(q,!1),q.strm.avail_out===0)||q.w_size-o<=q.strstart-q.block_start&&(D(q,!1),q.strm.avail_out===0))return 1}return q.insert=0,B===4?(D(q,!0),q.strm.avail_out===0?3:4):(q.strstart>q.block_start&&(D(q,!1),q.strm.avail_out),1)}),new P(4,4,8,4,U),new P(4,5,16,8,U),new P(4,6,32,32,U),new P(4,4,16,16,z),new P(8,16,32,32,z),new P(8,16,128,128,z),new P(8,32,128,256,z),new P(32,128,258,1024,z),new P(32,258,258,4096,z)],A.deflateInit=function(q,B){return L(q,B,8,15,8,0)},A.deflateInit2=L,A.deflateReset=J,A.deflateResetKeep=Q,A.deflateSetHeader=function(q,B){return q&&q.state&&q.state.wrap===2?(q.state.gzhead=B,0):i},A.deflate=function(q,B){var Y,K,ee,oe;if(!q||!q.state||5<B||B<0)return q?h(q,i):i;if(K=q.state,!q.output||!q.input&&q.avail_in!==0||K.status===666&&B!==4)return h(q,q.avail_out===0?-5:i);if(K.strm=q,Y=K.last_flush,K.last_flush=B,K.status===42&&(K.wrap===2?(q.adler=0,S(K,31),S(K,139),S(K,8),K.gzhead?(S(K,(K.gzhead.text?1:0)+(K.gzhead.hcrc?2:0)+(K.gzhead.extra?4:0)+(K.gzhead.name?8:0)+(K.gzhead.comment?16:0)),S(K,255&K.gzhead.time),S(K,K.gzhead.time>>8&255),S(K,K.gzhead.time>>16&255),S(K,K.gzhead.time>>24&255),S(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),S(K,255&K.gzhead.os),K.gzhead.extra&&K.gzhead.extra.length&&(S(K,255&K.gzhead.extra.length),S(K,K.gzhead.extra.length>>8&255)),K.gzhead.hcrc&&(q.adler=s(q.adler,K.pending_buf,K.pending,0)),K.gzindex=0,K.status=69):(S(K,0),S(K,0),S(K,0),S(K,0),S(K,0),S(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),S(K,3),K.status=l)):(ae=8+(K.w_bits-8<<4)<<8,ae|=(2<=K.strategy||K.level<2?0:K.level<6?1:K.level===6?2:3)<<6,K.strstart!==0&&(ae|=32),ae+=31-ae%31,K.status=l,y(K,ae),K.strstart!==0&&(y(K,q.adler>>>16),y(K,65535&q.adler)),q.adler=1)),K.status===69)if(K.gzhead.extra){for(ee=K.pending;K.gzindex<(65535&K.gzhead.extra.length)&&(K.pending!==K.pending_buf_size||(K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),d(q),ee=K.pending,K.pending!==K.pending_buf_size));)S(K,255&K.gzhead.extra[K.gzindex]),K.gzindex++;K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),K.gzindex===K.gzhead.extra.length&&(K.gzindex=0,K.status=73)}else K.status=73;if(K.status===73)if(K.gzhead.name){ee=K.pending;do if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),d(q),ee=K.pending,K.pending===K.pending_buf_size)){oe=1;break}while(oe=K.gzindex<K.gzhead.name.length?255&K.gzhead.name.charCodeAt(K.gzindex++):0,S(K,oe),oe!==0);K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),oe===0&&(K.gzindex=0,K.status=91)}else K.status=91;if(K.status===91)if(K.gzhead.comment){ee=K.pending;do if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),d(q),ee=K.pending,K.pending===K.pending_buf_size)){oe=1;break}while(oe=K.gzindex<K.gzhead.comment.length?255&K.gzhead.comment.charCodeAt(K.gzindex++):0,S(K,oe),oe!==0);K.gzhead.hcrc&&K.pending>ee&&(q.adler=s(q.adler,K.pending_buf,K.pending-ee,ee)),oe===0&&(K.status=103)}else K.status=103;if(K.status===103&&(K.gzhead.hcrc?(K.pending+2>K.pending_buf_size&&d(q),K.pending+2<=K.pending_buf_size&&(S(K,255&q.adler),S(K,q.adler>>8&255),q.adler=0,K.status=l)):K.status=l),K.pending!==0){if(d(q),q.avail_out===0)return K.last_flush=-1,0}else if(q.avail_in===0&&R(B)<=R(Y)&&B!==4)return h(q,-5);if(K.status===666&&q.avail_in!==0)return h(q,-5);if(q.avail_in!==0||K.lookahead!==0||B!==0&&K.status!==666){var ae=K.strategy===2?((X,re)=>{for(var ie;;){if(X.lookahead===0&&(b(X),X.lookahead===0)){if(re===0)return 1;break}if(X.match_length=0,ie=c._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++,ie&&(D(X,!1),X.strm.avail_out===0))return 1}return X.insert=0,re===4?(D(X,!0),X.strm.avail_out===0?3:4):X.last_lit&&(D(X,!1),X.strm.avail_out===0)?1:2})(K,B):K.strategy===3?((X,re)=>{for(var ie,ge,_e,ke,De=X.window;;){if(X.lookahead<=a){if(b(X),X.lookahead<=a&&re===0)return 1;if(X.lookahead===0)break}if(X.match_length=0,3<=X.lookahead&&0<X.strstart&&(ge=De[_e=X.strstart-1])===De[++_e]&&ge===De[++_e]&&ge===De[++_e]){for(ke=X.strstart+a;ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&ge===De[++_e]&&_e<ke;);X.match_length=a-(ke-_e),X.lookahead<X.match_length&&(X.match_length=X.lookahead)}if(3<=X.match_length?(ie=c._tr_tally(X,1,X.match_length-3),X.lookahead-=X.match_length,X.strstart+=X.match_length,X.match_length=0):(ie=c._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++),ie&&(D(X,!1),X.strm.avail_out===0))return 1}return X.insert=0,re===4?(D(X,!0),X.strm.avail_out===0?3:4):X.last_lit&&(D(X,!1),X.strm.avail_out===0)?1:2})(K,B):m[K.level].func(K,B);if(ae!==3&&ae!==4||(K.status=666),ae===1||ae===3)return q.avail_out===0&&(K.last_flush=-1),0;if(ae===2&&(B===1?c._tr_align(K):B!==5&&(c._tr_stored_block(K,0,0,!1),B===3)&&(w(K.head),K.lookahead===0)&&(K.strstart=0,K.block_start=0,K.insert=0),d(q),q.avail_out===0))return K.last_flush=-1,0}return B===4&&(K.wrap<=0||(K.wrap===2?(S(K,255&q.adler),S(K,q.adler>>8&255),S(K,q.adler>>16&255),S(K,q.adler>>24&255),S(K,255&q.total_in),S(K,q.total_in>>8&255),S(K,q.total_in>>16&255),S(K,q.total_in>>24&255)):(y(K,q.adler>>>16),y(K,65535&q.adler)),d(q),0<K.wrap&&(K.wrap=-K.wrap),K.pending===0))?1:0},A.deflateEnd=function(q){var B;return q&&q.state?(B=q.state.status)!==42&&B!==69&&B!==73&&B!==91&&B!==103&&B!==l&&B!==666?h(q,i):(q.state=null,B===l?h(q,-3):0):i},A.deflateSetDictionary=function(q,B){var Y,K,ee,oe,ae,X,re,ie=B.length;if(!q||!q.state||(oe=(Y=q.state).wrap)===2||oe===1&&Y.status!==42||Y.lookahead)return i;for(oe===1&&(q.adler=u(q.adler,B,ie,0)),Y.wrap=0,Y.w_size<=ie&&(oe===0&&(w(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),re=new f.Buf8(Y.w_size),f.arraySet(re,B,ie-Y.w_size,Y.w_size,0),B=re,ie=Y.w_size),re=q.avail_in,ae=q.next_in,X=q.input,q.avail_in=ie,q.next_in=0,q.input=B,b(Y);Y.lookahead>=3;){for(K=Y.strstart,ee=Y.lookahead-2;Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[K+3-1])&Y.hash_mask,Y.prev[K&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=K,K++,--ee;);Y.strstart=K,Y.lookahead=2,b(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=2,Y.match_available=0,q.next_in=ae,q.input=X,q.avail_in=re,Y.wrap=oe,0},A.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(g,x,A){x.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(g,x,A){x.exports=function(m,f){var c,u,s,r,i,a,o=m.state,l=m.next_in,h=m.input,R=l+(m.avail_in-5),w=m.next_out,d=m.output,D=w-(f-m.avail_out),S=w+(m.avail_out-257),y=o.dmax,k=o.wsize,b=o.whave,U=o.wnext,z=o.window,P=o.hold,H=o.bits,Q=o.lencode,J=o.distcode,L=(1<<o.lenbits)-1,q=(1<<o.distbits)-1;e:do for(H<15&&(P+=h[l++]<<H,H+=8,P+=h[l++]<<H,H+=8),c=Q[P&L];;){if(P>>>=u=c>>>24,H-=u,(u=c>>>16&255)==0)d[w++]=65535&c;else{if(!(16&u)){if((64&u)==0){c=Q[(65535&c)+(P&(1<<u)-1)];continue}if(32&u){o.mode=12;break e}m.msg="invalid literal/length code",o.mode=30;break e}for(s=65535&c,(u&=15)&&(H<u&&(P+=h[l++]<<H,H+=8),s+=P&(1<<u)-1,P>>>=u,H-=u),H<15&&(P+=h[l++]<<H,H+=8,P+=h[l++]<<H,H+=8),c=J[P&q];;){if(P>>>=u=c>>>24,H-=u,!(16&(u=c>>>16&255))){if((64&u)==0){c=J[(65535&c)+(P&(1<<u)-1)];continue}m.msg="invalid distance code",o.mode=30;break e}if(r=65535&c,H<(u&=15)&&(P+=h[l++]<<H,(H+=8)<u)&&(P+=h[l++]<<H,H+=8),y<(r+=P&(1<<u)-1)){m.msg="invalid distance too far back",o.mode=30;break e}if(P>>>=u,H-=u,(u=w-D)<r){if(b<(u=r-u)&&o.sane){m.msg="invalid distance too far back",o.mode=30;break e}if(a=z,(i=0)===U){if(i+=k-u,u<s){for(s-=u;d[w++]=z[i++],--u;);i=w-r,a=d}}else if(U<u){if(i+=k+U-u,(u-=U)<s){for(s-=u;d[w++]=z[i++],--u;);if(i=0,U<s){for(s-=u=U;d[w++]=z[i++],--u;);i=w-r,a=d}}}else if(i+=U-u,u<s){for(s-=u;d[w++]=z[i++],--u;);i=w-r,a=d}for(;2<s;)d[w++]=a[i++],d[w++]=a[i++],d[w++]=a[i++],s-=3;s&&(d[w++]=a[i++],1<s)&&(d[w++]=a[i++])}else{for(i=w-r;d[w++]=d[i++],d[w++]=d[i++],d[w++]=d[i++],2<(s-=3););s&&(d[w++]=d[i++],1<s)&&(d[w++]=d[i++])}break}}break}while(l<R&&w<S);l-=s=H>>3,P&=(1<<(H-=s<<3))-1,m.next_in=l,m.next_out=w,m.avail_in=l<R?R-l+5:5-(l-R),m.avail_out=w<S?S-w+257:257-(w-S),o.hold=P,o.bits=H}},{}],49:[function(g,x,A){var m=g("../utils/common"),f=g("./adler32"),c=g("./crc32"),u=g("./inffast"),s=g("./inftrees"),r=-2;function i(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(y){var k;return y&&y.state?(k=y.state,y.total_in=y.total_out=k.total=0,y.msg="",k.wrap&&(y.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new m.Buf32(852),k.distcode=k.distdyn=new m.Buf32(592),k.sane=1,k.back=-1,0):r}function l(y){var k;return y&&y.state?((k=y.state).wsize=0,k.whave=0,k.wnext=0,o(y)):r}function h(y,k){var b,U;return!y||!y.state||(U=y.state,k<0?(b=0,k=-k):(b=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k))?r:(U.window!==null&&U.wbits!==k&&(U.window=null),U.wrap=b,U.wbits=k,l(y))}function R(y,k){var b;return y?(b=new a,(y.state=b).window=null,(b=h(y,k))!==0&&(y.state=null),b):r}var w,d,D=!0;function S(y,k,b,U){var z;return(y=y.state).window===null&&(y.wsize=1<<y.wbits,y.wnext=0,y.whave=0,y.window=new m.Buf8(y.wsize)),y.wsize<=U?(m.arraySet(y.window,k,b-y.wsize,y.wsize,0),y.wnext=0,y.whave=y.wsize):(U<(z=y.wsize-y.wnext)&&(z=U),m.arraySet(y.window,k,b-U,z,y.wnext),(U-=z)?(m.arraySet(y.window,k,b-U,U,0),y.wnext=U,y.whave=y.wsize):(y.wnext+=z,y.wnext===y.wsize&&(y.wnext=0),y.whave<y.wsize&&(y.whave+=z))),0}A.inflateReset=l,A.inflateReset2=h,A.inflateResetKeep=o,A.inflateInit=function(y){return R(y,15)},A.inflateInit2=R,A.inflate=function(y,k){var b,U,z,P,H,Q,J,L,q,B,Y,K,ee,oe,ae,X,re,ie,ge,_e,ke,De,Re,we,Oe=0,Ae=new m.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return r;(b=y.state).mode===12&&(b.mode=13),H=y.next_out,z=y.output,P=y.next_in,U=y.input,L=b.hold,q=b.bits,B=Q=y.avail_in,Y=J=y.avail_out,De=0;e:for(;;)switch(b.mode){case 1:if(b.wrap===0)b.mode=13;else{for(;q<16;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(2&b.wrap&&L===35615)Ae[b.check=0]=255&L,Ae[1]=L>>>8&255,b.check=c(b.check,Ae,2,0),q=L=0,b.mode=2;else if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&L)<<8)+(L>>8))%31)y.msg="incorrect header check",b.mode=30;else if((15&L)!=8)y.msg="unknown compression method",b.mode=30;else{if(q-=4,ke=8+(15&(L>>>=4)),b.wbits===0)b.wbits=ke;else if(ke>b.wbits){y.msg="invalid window size",b.mode=30;break}b.dmax=1<<ke,y.adler=b.check=1,b.mode=512&L?10:12,q=L=0}}break;case 2:for(;q<16;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(b.flags=L,(255&b.flags)!=8){y.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){y.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=L>>8&1),512&b.flags&&(Ae[0]=255&L,Ae[1]=L>>>8&255,b.check=c(b.check,Ae,2,0)),q=L=0,b.mode=3;case 3:for(;q<32;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.head&&(b.head.time=L),512&b.flags&&(Ae[0]=255&L,Ae[1]=L>>>8&255,Ae[2]=L>>>16&255,Ae[3]=L>>>24&255,b.check=c(b.check,Ae,4,0)),q=L=0,b.mode=4;case 4:for(;q<16;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.head&&(b.head.xflags=255&L,b.head.os=L>>8),512&b.flags&&(Ae[0]=255&L,Ae[1]=L>>>8&255,b.check=c(b.check,Ae,2,0)),q=L=0,b.mode=5;case 5:if(1024&b.flags){for(;q<16;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.length=L,b.head&&(b.head.extra_len=L),512&b.flags&&(Ae[0]=255&L,Ae[1]=L>>>8&255,b.check=c(b.check,Ae,2,0)),q=L=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&((K=Q<(K=b.length)?Q:K)&&(b.head&&(ke=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),m.arraySet(b.head.extra,U,P,K,ke)),512&b.flags&&(b.check=c(b.check,U,K,P)),Q-=K,P+=K,b.length-=K),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(Q===0)break e;for(K=0;ke=U[P+K++],b.head&&ke&&b.length<65536&&(b.head.name+=String.fromCharCode(ke)),ke&&K<Q;);if(512&b.flags&&(b.check=c(b.check,U,K,P)),Q-=K,P+=K,ke)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(Q===0)break e;for(K=0;ke=U[P+K++],b.head&&ke&&b.length<65536&&(b.head.comment+=String.fromCharCode(ke)),ke&&K<Q;);if(512&b.flags&&(b.check=c(b.check,U,K,P)),Q-=K,P+=K,ke)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;q<16;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(L!==(65535&b.check)){y.msg="header crc mismatch",b.mode=30;break}q=L=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),y.adler=b.check=0,b.mode=12;break;case 10:for(;q<32;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}y.adler=b.check=i(L),q=L=0,b.mode=11;case 11:if(b.havedict===0)return y.next_out=H,y.avail_out=J,y.next_in=P,y.avail_in=Q,b.hold=L,b.bits=q,2;y.adler=b.check=1,b.mode=12;case 12:if(k===5||k===6)break e;case 13:if(b.last)L>>>=7&q,q-=7&q,b.mode=27;else{for(;q<3;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}switch(b.last=1&L,--q,3&(L>>>=1)){case 0:b.mode=14;break;case 1:Ue=Ne=void 0;var Ue,Ne=b;if(D){for(w=new m.Buf32(512),d=new m.Buf32(32),Ue=0;Ue<144;)Ne.lens[Ue++]=8;for(;Ue<256;)Ne.lens[Ue++]=9;for(;Ue<280;)Ne.lens[Ue++]=7;for(;Ue<288;)Ne.lens[Ue++]=8;for(s(1,Ne.lens,0,288,w,0,Ne.work,{bits:9}),Ue=0;Ue<32;)Ne.lens[Ue++]=5;s(2,Ne.lens,0,32,d,0,Ne.work,{bits:5}),D=!1}if(Ne.lencode=w,Ne.lenbits=9,Ne.distcode=d,Ne.distbits=5,b.mode=20,k!==6)break;L>>>=2,q-=2;break e;case 2:b.mode=17;break;case 3:y.msg="invalid block type",b.mode=30}L>>>=2,q-=2}break;case 14:for(L>>>=7&q,q-=7&q;q<32;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if((65535&L)!=(L>>>16^65535)){y.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&L,q=L=0,b.mode=15,k===6)break e;case 15:b.mode=16;case 16:if(K=b.length){if((K=J<(K=Q<K?Q:K)?J:K)===0)break e;m.arraySet(z,U,P,K,H),Q-=K,P+=K,J-=K,H+=K,b.length-=K}else b.mode=12;break;case 17:for(;q<14;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(b.nlen=257+(31&L),L>>>=5,q-=5,b.ndist=1+(31&L),L>>>=5,q-=5,b.ncode=4+(15&L),L>>>=4,q-=4,286<b.nlen||30<b.ndist){y.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;q<3;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.lens[Pe[b.have++]]=7&L,L>>>=3,q-=3}for(;b.have<19;)b.lens[Pe[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Re={bits:b.lenbits},De=s(0,b.lens,0,19,b.lencode,0,b.work,Re),b.lenbits=Re.bits,De){y.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;X=(Oe=b.lencode[L&(1<<b.lenbits)-1])>>>16&255,re=65535&Oe,!((ae=Oe>>>24)<=q);){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(re<16)L>>>=ae,q-=ae,b.lens[b.have++]=re;else{if(re===16){for(we=ae+2;q<we;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(L>>>=ae,q-=ae,b.have===0){y.msg="invalid bit length repeat",b.mode=30;break}ke=b.lens[b.have-1],K=3+(3&L),L>>>=2,q-=2}else if(re===17){for(we=ae+3;q<we;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}ke=0,K=3+(7&(L>>>=ae)),L>>>=3,q=q-ae-3}else{for(we=ae+7;q<we;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}ke=0,K=11+(127&(L>>>=ae)),L>>>=7,q=q-ae-7}if(b.have+K>b.nlen+b.ndist){y.msg="invalid bit length repeat",b.mode=30;break}for(;K--;)b.lens[b.have++]=ke}}if(b.mode===30)break;if(b.lens[256]===0){y.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,Re={bits:b.lenbits},De=s(1,b.lens,0,b.nlen,b.lencode,0,b.work,Re),b.lenbits=Re.bits,De){y.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,Re={bits:b.distbits},De=s(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Re),b.distbits=Re.bits,De){y.msg="invalid distances set",b.mode=30;break}if(b.mode=20,k===6)break e;case 20:b.mode=21;case 21:if(6<=Q&&258<=J){y.next_out=H,y.avail_out=J,y.next_in=P,y.avail_in=Q,b.hold=L,b.bits=q,u(y,Y),H=y.next_out,z=y.output,J=y.avail_out,P=y.next_in,U=y.input,Q=y.avail_in,L=b.hold,q=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;X=(Oe=b.lencode[L&(1<<b.lenbits)-1])>>>16&255,re=65535&Oe,!((ae=Oe>>>24)<=q);){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(X&&(240&X)==0){for(ie=ae,ge=X,_e=re;X=(Oe=b.lencode[_e+((L&(1<<ie+ge)-1)>>ie)])>>>16&255,re=65535&Oe,!(ie+(ae=Oe>>>24)<=q);){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}L>>>=ie,q-=ie,b.back+=ie}if(L>>>=ae,q-=ae,b.back+=ae,b.length=re,X===0){b.mode=26;break}if(32&X){b.back=-1,b.mode=12;break}if(64&X){y.msg="invalid literal/length code",b.mode=30;break}b.extra=15&X,b.mode=22;case 22:if(b.extra){for(we=b.extra;q<we;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.length+=L&(1<<b.extra)-1,L>>>=b.extra,q-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;X=(Oe=b.distcode[L&(1<<b.distbits)-1])>>>16&255,re=65535&Oe,!((ae=Oe>>>24)<=q);){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if((240&X)==0){for(ie=ae,ge=X,_e=re;X=(Oe=b.distcode[_e+((L&(1<<ie+ge)-1)>>ie)])>>>16&255,re=65535&Oe,!(ie+(ae=Oe>>>24)<=q);){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}L>>>=ie,q-=ie,b.back+=ie}if(L>>>=ae,q-=ae,b.back+=ae,64&X){y.msg="invalid distance code",b.mode=30;break}b.offset=re,b.extra=15&X,b.mode=24;case 24:if(b.extra){for(we=b.extra;q<we;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}b.offset+=L&(1<<b.extra)-1,L>>>=b.extra,q-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){y.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(J===0)break e;if(b.offset>(K=Y-J)){if((K=b.offset-K)>b.whave&&b.sane){y.msg="invalid distance too far back",b.mode=30;break}ee=K>b.wnext?(K-=b.wnext,b.wsize-K):b.wnext-K,K>b.length&&(K=b.length),oe=b.window}else oe=z,ee=H-b.offset,K=b.length;for(J-=K=J<K?J:K,b.length-=K;z[H++]=oe[ee++],--K;);b.length===0&&(b.mode=21);break;case 26:if(J===0)break e;z[H++]=b.length,J--,b.mode=21;break;case 27:if(b.wrap){for(;q<32;){if(Q===0)break e;Q--,L|=U[P++]<<q,q+=8}if(Y-=J,y.total_out+=Y,b.total+=Y,Y&&(y.adler=b.check=(b.flags?c:f)(b.check,z,Y,H-Y)),Y=J,(b.flags?L:i(L))!==b.check){y.msg="incorrect data check",b.mode=30;break}q=L=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;q<32;){if(Q===0)break e;Q--,L+=U[P++]<<q,q+=8}if(L!==(4294967295&b.total)){y.msg="incorrect length check",b.mode=30;break}q=L=0}b.mode=29;case 29:De=1;break e;case 30:De=-3;break e;case 31:return-4;default:return r}return y.next_out=H,y.avail_out=J,y.next_in=P,y.avail_in=Q,b.hold=L,b.bits=q,(b.wsize||Y!==y.avail_out&&b.mode<30&&(b.mode<27||k!==4))&&S(y,y.output,y.next_out,Y-y.avail_out)?(b.mode=31,-4):(B-=y.avail_in,Y-=y.avail_out,y.total_in+=B,y.total_out+=Y,b.total+=Y,b.wrap&&Y&&(y.adler=b.check=(b.flags?c:f)(b.check,z,Y,y.next_out-Y)),y.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),De=(B==0&&Y===0||k===4)&&De===0?-5:De)},A.inflateEnd=function(y){var k;return y&&y.state?((k=y.state).window&&(k.window=null),y.state=null,0):r},A.inflateGetHeader=function(y,k){return y&&y.state&&(2&(y=y.state).wrap)!=0?((y.head=k).done=!1,0):r},A.inflateSetDictionary=function(y,k){var b,U=k.length;return!y||!y.state||(b=y.state).wrap!==0&&b.mode!==11?r:b.mode===11&&f(1,k,U,0)!==b.check?-3:S(y,k,U,U)?(b.mode=31,-4):(b.havedict=1,0)},A.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(g,x,A){var m=g("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];x.exports=function(r,i,a,o,l,h,R,w){var d,D,S,y,k,b,U,z,P,H=w.bits,Q=0,J=0,L=0,q=0,B=0,Y=0,K=0,ee=0,oe=0,ae=0,X=null,re=0,ie=new m.Buf16(16),ge=new m.Buf16(16),_e=null,ke=0;for(Q=0;Q<=15;Q++)ie[Q]=0;for(J=0;J<o;J++)ie[i[a+J]]++;for(B=H,q=15;1<=q&&ie[q]===0;q--);if(q<B&&(B=q),q===0)l[h++]=20971520,l[h++]=20971520,w.bits=1;else{for(L=1;L<q&&ie[L]===0;L++);for(B<L&&(B=L),Q=ee=1;Q<=15;Q++)if((ee=(ee<<1)-ie[Q])<0)return-1;if(0<ee&&(r===0||q!==1))return-1;for(ge[1]=0,Q=1;Q<15;Q++)ge[Q+1]=ge[Q]+ie[Q];for(J=0;J<o;J++)i[a+J]!==0&&(R[ge[i[a+J]]++]=J);if(b=r===0?(X=_e=R,19):r===1?(X=f,re-=257,_e=c,ke-=257,256):(X=u,_e=s,-1),Q=L,k=h,K=J=ae=0,S=-1,y=(oe=1<<(Y=B))-1,r===1&&852<oe||r===2&&592<oe)return 1;for(;;){for(P=R[J]<b?(z=0,R[J]):R[J]>b?(z=_e[ke+R[J]],X[re+R[J]]):(z=96,0),d=1<<(U=Q-K),L=D=1<<Y;l[k+(ae>>K)+(D-=d)]=U<<24|z<<16|P|0,D!==0;);for(d=1<<Q-1;ae&d;)d>>=1;if(ae=d!==0?(ae&d-1)+d:0,J++,--ie[Q]==0){if(Q===q)break;Q=i[a+R[J]]}if(B<Q&&(ae&y)!==S){for(k+=L,ee=1<<(Y=Q-(K=K===0?B:K));Y+K<q&&!((ee-=ie[Y+K])<=0);)Y++,ee<<=1;if(oe+=1<<Y,r===1&&852<oe||r===2&&592<oe)return 1;l[S=ae&y]=B<<24|Y<<16|k-h|0}}ae!==0&&(l[k+ae]=Q-K<<24|64<<16|0),w.bits=B}return 0}},{"../utils/common":41}],51:[function(g,x,A){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(g,x,A){var m=g("../utils/common");function f(X){for(var re=X.length;0<=--re;)X[re]=0}var c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i=new Array(576),a=(f(i),new Array(60)),o=(f(a),new Array(512)),l=(f(o),new Array(256)),h=(f(l),new Array(29));f(h);var R,w,d,D=new Array(30);function S(X,re,ie,ge,_e){this.static_tree=X,this.extra_bits=re,this.extra_base=ie,this.elems=ge,this.max_length=_e,this.has_stree=X&&X.length}function y(X,re){this.dyn_tree=X,this.max_code=0,this.stat_desc=re}function k(X){return X<256?o[X]:o[256+(X>>>7)]}function b(X,re){X.pending_buf[X.pending++]=255&re,X.pending_buf[X.pending++]=re>>>8&255}function U(X,re,ie){X.bi_valid>16-ie?(X.bi_buf|=re<<X.bi_valid&65535,b(X,X.bi_buf),X.bi_buf=re>>16-X.bi_valid,X.bi_valid+=ie-16):(X.bi_buf|=re<<X.bi_valid&65535,X.bi_valid+=ie)}function z(X,re,ie){U(X,ie[2*re],ie[2*re+1])}function P(X,re){for(var ie=0;ie|=1&X,X>>>=1,ie<<=1,0<--re;);return ie>>>1}function H(X,re,ie){for(var ge,_e=new Array(16),ke=0,De=1;De<=15;De++)_e[De]=ke=ke+ie[De-1]<<1;for(ge=0;ge<=re;ge++){var Re=X[2*ge+1];Re!==0&&(X[2*ge]=P(_e[Re]++,Re))}}function Q(X){for(var re=0;re<286;re++)X.dyn_ltree[2*re]=0;for(re=0;re<30;re++)X.dyn_dtree[2*re]=0;for(re=0;re<19;re++)X.bl_tree[2*re]=0;X.dyn_ltree[512]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function J(X){8<X.bi_valid?b(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function L(X,re,ie,ge){var _e=2*re,ke=2*ie;return X[_e]<X[ke]||X[_e]===X[ke]&&ge[re]<=ge[ie]}function q(X,re,ie){for(var ge=X.heap[ie],_e=ie<<1;_e<=X.heap_len&&(_e<X.heap_len&&L(re,X.heap[_e+1],X.heap[_e],X.depth)&&_e++,!L(re,ge,X.heap[_e],X.depth));)X.heap[ie]=X.heap[_e],ie=_e,_e<<=1;X.heap[ie]=ge}function B(X,re,ie){var ge,_e,ke,De,Re=0;if(X.last_lit!==0)for(;ge=X.pending_buf[X.d_buf+2*Re]<<8|X.pending_buf[X.d_buf+2*Re+1],_e=X.pending_buf[X.l_buf+Re],Re++,ge==0?z(X,_e,re):(z(X,(ke=l[_e])+256+1,re),(De=c[ke])!==0&&U(X,_e-=h[ke],De),z(X,ke=k(--ge),ie),(De=u[ke])!==0&&U(X,ge-=D[ke],De)),Re<X.last_lit;);z(X,256,re)}function Y(X,re){var ie,ge,_e,ke=re.dyn_tree,De=re.stat_desc.static_tree,Re=re.stat_desc.has_stree,we=re.stat_desc.elems,Oe=-1;for(X.heap_len=0,X.heap_max=573,ie=0;ie<we;ie++)ke[2*ie]!==0?(X.heap[++X.heap_len]=Oe=ie,X.depth[ie]=0):ke[2*ie+1]=0;for(;X.heap_len<2;)ke[2*(_e=X.heap[++X.heap_len]=Oe<2?++Oe:0)]=1,X.depth[_e]=0,X.opt_len--,Re&&(X.static_len-=De[2*_e+1]);for(re.max_code=Oe,ie=X.heap_len>>1;1<=ie;ie--)q(X,ke,ie);for(_e=we;ie=X.heap[1],X.heap[1]=X.heap[X.heap_len--],q(X,ke,1),ge=X.heap[1],X.heap[--X.heap_max]=ie,X.heap[--X.heap_max]=ge,ke[2*_e]=ke[2*ie]+ke[2*ge],X.depth[_e]=(X.depth[ie]>=X.depth[ge]?X.depth[ie]:X.depth[ge])+1,ke[2*ie+1]=ke[2*ge+1]=_e,X.heap[1]=_e++,q(X,ke,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1];for(var Ae,Pe,Ue,Ne,mt,gt=X,Rt=re.dyn_tree,ps=re.max_code,hr=re.stat_desc.static_tree,fs=re.stat_desc.has_stree,St=re.stat_desc.extra_bits,Gt=re.stat_desc.extra_base,ot=re.stat_desc.max_length,Ht=0,Ye=0;Ye<=15;Ye++)gt.bl_count[Ye]=0;for(Rt[2*gt.heap[gt.heap_max]+1]=0,Ae=gt.heap_max+1;Ae<573;Ae++)ot<(Ye=Rt[2*Rt[2*(Pe=gt.heap[Ae])+1]+1]+1)&&(Ye=ot,Ht++),Rt[2*Pe+1]=Ye,ps<Pe||(gt.bl_count[Ye]++,Ne=0,Gt<=Pe&&(Ne=St[Pe-Gt]),mt=Rt[2*Pe],gt.opt_len+=mt*(Ye+Ne),fs&&(gt.static_len+=mt*(hr[2*Pe+1]+Ne)));if(Ht!==0){do for(Ye=ot-1;gt.bl_count[Ye]===0;)Ye--;while(gt.bl_count[Ye]--,gt.bl_count[Ye+1]+=2,gt.bl_count[ot]--,0<(Ht-=2));for(Ye=ot;Ye!==0;Ye--)for(Pe=gt.bl_count[Ye];Pe!==0;)ps<(Ue=gt.heap[--Ae])||(Rt[2*Ue+1]!==Ye&&(gt.opt_len+=(Ye-Rt[2*Ue+1])*Rt[2*Ue],Rt[2*Ue+1]=Ye),Pe--)}H(ke,Oe,X.bl_count)}function K(X,re,ie){var ge,_e,ke=-1,De=re[1],Re=0,we=7,Oe=4;for(De===0&&(we=138,Oe=3),re[2*(ie+1)+1]=65535,ge=0;ge<=ie;ge++)_e=De,De=re[2*(ge+1)+1],++Re<we&&_e===De||(Re<Oe?X.bl_tree[2*_e]+=Re:_e!==0?(_e!==ke&&X.bl_tree[2*_e]++,X.bl_tree[32]++):Re<=10?X.bl_tree[34]++:X.bl_tree[36]++,ke=_e,Oe=(Re=0)===De?(we=138,3):_e===De?(we=6,3):(we=7,4))}function ee(X,re,ie){var ge,_e,ke=-1,De=re[1],Re=0,we=7,Oe=4;for(De===0&&(we=138,Oe=3),ge=0;ge<=ie;ge++)if(_e=De,De=re[2*(ge+1)+1],!(++Re<we&&_e===De)){if(Re<Oe)for(;z(X,_e,X.bl_tree),--Re!=0;);else _e!==0?(_e!==ke&&(z(X,_e,X.bl_tree),Re--),z(X,16,X.bl_tree),U(X,Re-3,2)):Re<=10?(z(X,17,X.bl_tree),U(X,Re-3,3)):(z(X,18,X.bl_tree),U(X,Re-11,7));ke=_e,Oe=(Re=0)===De?(we=138,3):_e===De?(we=6,3):(we=7,4)}}f(D);var oe=!1;function ae(X,re,ie,ge){U(X,0+(ge?1:0),3),ge=re,re=ie,J(ie=X),b(ie,re),b(ie,~re),m.arraySet(ie.pending_buf,ie.window,ge,re,ie.pending),ie.pending+=re}A._tr_init=function(X){if(!oe){for(var re,ie,ge,_e,ke=new Array(16),De=ge=0;De<28;De++)for(h[De]=ge,re=0;re<1<<c[De];re++)l[ge++]=De;for(l[ge-1]=De,De=_e=0;De<16;De++)for(D[De]=_e,re=0;re<1<<u[De];re++)o[_e++]=De;for(_e>>=7;De<30;De++)for(D[De]=_e<<7,re=0;re<1<<u[De]-7;re++)o[256+_e++]=De;for(ie=0;ie<=15;ie++)ke[ie]=0;for(re=0;re<=143;)i[2*re+1]=8,re++,ke[8]++;for(;re<=255;)i[2*re+1]=9,re++,ke[9]++;for(;re<=279;)i[2*re+1]=7,re++,ke[7]++;for(;re<=287;)i[2*re+1]=8,re++,ke[8]++;for(H(i,287,ke),re=0;re<30;re++)a[2*re+1]=5,a[2*re]=P(re,5);R=new S(i,c,257,286,15),w=new S(a,u,0,30,15),d=new S(new Array(0),s,0,19,7),oe=!0}X.l_desc=new y(X.dyn_ltree,R),X.d_desc=new y(X.dyn_dtree,w),X.bl_desc=new y(X.bl_tree,d),X.bi_buf=0,X.bi_valid=0,Q(X)},A._tr_stored_block=ae,A._tr_flush_block=function(X,re,ie,ge){var _e,ke,De,Re=0;if(0<X.level?(X.strm.data_type===2&&(X.strm.data_type=(Ae=>{for(var Pe=4093624447,Ue=0;Ue<=31;Ue++,Pe>>>=1)if(1&Pe&&Ae.dyn_ltree[2*Ue]!==0)return 0;if(Ae.dyn_ltree[18]!==0||Ae.dyn_ltree[20]!==0||Ae.dyn_ltree[26]!==0)return 1;for(Ue=32;Ue<256;Ue++)if(Ae.dyn_ltree[2*Ue]!==0)return 1;return 0})(X)),Y(X,X.l_desc),Y(X,X.d_desc),Re=(Ae=>{var Pe;for(K(Ae,Ae.dyn_ltree,Ae.l_desc.max_code),K(Ae,Ae.dyn_dtree,Ae.d_desc.max_code),Y(Ae,Ae.bl_desc),Pe=18;3<=Pe&&Ae.bl_tree[2*r[Pe]+1]===0;Pe--);return Ae.opt_len+=3*(Pe+1)+5+5+4,Pe})(X),(ke=X.static_len+3+7>>>3)<=(_e=X.opt_len+3+7>>>3)&&(_e=ke)):_e=ke=ie+5,ie+4<=_e&&re!==-1)ae(X,re,ie,ge);else if(X.strategy===4||ke===_e)U(X,2+(ge?1:0),3),B(X,i,a);else{U(X,4+(ge?1:0),3);var we=X,Oe=(re=X.l_desc.max_code+1,ie=X.d_desc.max_code+1,Re+1);for(U(we,re-257,5),U(we,ie-1,5),U(we,Oe-4,4),De=0;De<Oe;De++)U(we,we.bl_tree[2*r[De]+1],3);ee(we,we.dyn_ltree,re-1),ee(we,we.dyn_dtree,ie-1),B(X,X.dyn_ltree,X.dyn_dtree)}Q(X),ge&&J(X)},A._tr_tally=function(X,re,ie){return X.pending_buf[X.d_buf+2*X.last_lit]=re>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&re,X.pending_buf[X.l_buf+X.last_lit]=255&ie,X.last_lit++,re===0?X.dyn_ltree[2*ie]++:(X.matches++,re--,X.dyn_ltree[2*(l[ie]+256+1)]++,X.dyn_dtree[2*k(re)]++),X.last_lit===X.lit_bufsize-1},A._tr_align=function(X){U(X,2,3),z(X,256,i),(X=X).bi_valid===16?(b(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}},{"../utils/common":41}],53:[function(g,x,A){x.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(g,x,A){(function(m){function f(d){delete l[d]}function c(d){if(h)setTimeout(c,0,d);else{var D=l[d];if(D){h=!0;try{var S=D.callback,y=D.args;switch(y.length){case 0:S();break;case 1:S(y[0]);break;case 2:S(y[0],y[1]);break;case 3:S(y[0],y[1],y[2]);break;default:S.apply(void 0,y)}}finally{f(d),h=!1}}}}function u(d){d.source===s&&typeof d.data=="string"&&d.data.indexOf(a)===0&&c(+d.data.slice(a.length))}var s,r,i,a,o,l,h,R,w;(s=typeof self>"u"?m===void 0?this:m:self).setImmediate||(o=1,h=!(l={}),R=s.document,m=(m=Object.getPrototypeOf&&Object.getPrototypeOf(s))&&m.setTimeout?m:s,w={}.toString.call(s.process)==="[object process]"?function(d){E.nextTick(function(){c(d)})}:(()=>{var d,D;if(s.postMessage&&!s.importScripts)return d=!0,D=s.onmessage,s.onmessage=function(){d=!1},s.postMessage("","*"),s.onmessage=D,d})()?(a="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",u,!1):s.attachEvent("onmessage",u),function(d){s.postMessage(a+d,"*")}):s.MessageChannel?((i=new MessageChannel).port1.onmessage=function(d){c(d.data)},function(d){i.port2.postMessage(d)}):R&&"onreadystatechange"in R.createElement("script")?(r=R.documentElement,function(d){var D=R.createElement("script");D.onreadystatechange=function(){c(d),D.onreadystatechange=null,r.removeChild(D),D=null},r.appendChild(D)}):function(d){setTimeout(c,0,d)},m.setImmediate=function(d){typeof d!="function"&&(d=new Function(""+d));for(var D=new Array(arguments.length-1),S=0;S<D.length;S++)D[S]=arguments[S+1];return l[o]={callback:d,args:D},w(o),o++},m.clearImmediate=f)}).call(this,_!==void 0?_:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}).call(this,C(115).Buffer,C(119).setImmediate,C(11),C(45))},function(te,j,C){C.d(j,"a",function(){return E});var O=C(1),T=C(0),_=function(x,A){var m=typeof Symbol=="function"&&x[Symbol.iterator];if(!m)return x;var f,c,u=m.call(x),s=[];try{for(;(A===void 0||0<A--)&&!(f=u.next()).done;)s.push(f.value)}catch(r){c={error:r}}finally{try{f&&!f.done&&(m=u.return)&&m.call(u)}finally{if(c)throw c.error}}return s},E=(g.prototype.getRealClientTimestamp=function(x){return this.serverOffsetTime+(x||Date.now())},g.prototype.initEngine=function(x,A,m){return this.econfMap.clear(),this.busMap.clear(),this.initHost(A),this.busMap.set(x,m),m={handle:x,appID:A,token:"",tokenExpireTime:0,convSid:"",clientMsgSeq:0,user:{},syncUserTask:new Set,dbUserMap:new Map,dbGroupMap:new Map,dbConvMap:new Map,msgExtraMap:new Map,msgRetrySendTasks:[],cloudSetting:{qps:{get_room_user_attrs:"5/30",send_msg:100,send_barrage_msg:34},qps_token:{max:50,step:5,t_itvl:100,p_itvl:100},req_to:{def:5e3,send_msg:1e4,room_life:8e3,login:0},retry:{login_max_itvl:-1,msg_max_timeout:3e4,msg_max_degree:3,msg_count:0,msg_itvl:150,room_msg_max_timeout:0,room_msg_max_degree:0},scale:{cb_msg_title_len:100,cb_msg_summary_len:500}},cryptoConfig:{},mailHBConfig:{user_info_seq:0,user_status_seq:0,c2c_msg_seq:0,conv_list_seq:0,group_list_seq:0,call_list_seq:0,c2c_statemsg_seq:0,extra_msg_list_seq:0,friend_list_seq:0,friend_apply_list_seq:0,black_list_seq:0,conv_pinned_list_seq:0,c2c_mute_max_seq:0,group_apply_list_seq:0,history_c2c_msg_seq:0,conv_mark_seq:0,subscribe_seq:0,fetch_c2c_msg_count:0,fetch_group_msg_count:0,fetch_room_msg_count:0,fetch_conv_list:0,fetch_group_list:0,usermail_hb_interval:1e4,msg_to:1e4,msg_itvl:3e4,list_to:1e4,list_itvl:3e4,reaction_brief_len:5,state_seq_reduce_num:-1,delete_all_msg_time:0,apply_expired_duration:0,group_tips:0,reply_msg_seq_count:100,remember_c2c_msg_seq:0,client_c2c_msg_seq:0}},this.econfMap.set(x,m),m},g.prototype.unInitEngine=function(x){(x=this.econfMap.get(x))&&(x.cloudTimer&&clearInterval(x.cloudTimer),x.cloudTimer=0,x.isNewDB=!1,x.isDBLoaded=!1,x.user={},x.syncUserTask.clear(),x.dbUserMap.clear(),x.dbConvMap.clear(),x.dbGroupMap.clear(),x.msgExtraMap.clear(),x.msgRetrySendTasks.length=0,x.sessionID=void 0,x.serverUserID=void 0,x.controls=void 0)},g.prototype.setHost=function(x){this.advancedConfig.geoFence.id=x,this.advancedConfig.geoFence.host=this.advancedConfig.geoFence.hostMap[x].host},g.prototype.fetchZGLogConfig=function(){var x=this.advancedConfig.geoFence;return[(x.host.detaillog||x.hostMap[1].host.detaillog)+"/zglog/zip",x.host.logreport||x.hostMap[1].host.logreport]},g.prototype.fetchZGLogWhitelistHost=function(){var x=this.advancedConfig.geoFence;return x.host.detaillog||x.hostMap[1].host.detaillog},g.prototype.startSyncRemoteConfig=function(x,A,m){var f=this,c=this.econfMap.get(A);return c.cloudTimer||(c.cloudTimer=setInterval(function(){c.token&&f.syncRemoteConfig(x,c)},36e5)),this.syncRemoteConfig(x,c,m)},g.prototype.syncRemoteConfig=function(x,A,m){return m={appid:A.appID,id_name:A.user.userID,product:"ZIM",files:["biz_conf"],param:{platform:"1",sdk_version:""+this.deviceInfo.sdk_ver},timestamp:Date.now(),biztype:0,deviceid:O.h,compress:!1,mode:"online",token:m||A.token},x.sendHttp({url:"/cloud-setting/get",method:"POST"},m,10).then(function(f){var c,u,s,r,i;return!!(f&&f.data&&f.data.biz_conf&&f.data.biz_conf.data)&&(i=(u=f.data.biz_conf.data).qps,c=u.req_to,u=u.retry,r=(s=_(String(i.send_msg).split("~"),2))[0],i.send_msg=1e3*Number(s[1])/Number(r),r=(s=_(String(i.send_barrage_msg).split("/"),2))[0],i.send_barrage_msg=Math.ceil(1e3*Number(s[1])/Number(r)),r=(s=_(i.get_room_user_attrs.split("/"),2))[0],i=s[1],T.h.get_user_attribute_qps=+r,T.h.get_user_attribute_interval=1e3*+i,c.def&&(c.def*=1e3),c.send_msg&&(c.send_msg*=1e3),c.room_life&&(c.room_life*=1e3),c.login&&(c.login*=1e3),u&&u.hasOwnProperty("msg_max_timeout")?(u.msg_max_timeout*=1e3,u.room_msg_max_timeout*=1e3,u.msg_count=A.cloudSetting.retry.msg_count,u.msg_itvl=A.cloudSetting.retry.msg_itvl):Object.assign(f.data.biz_conf.data.retry,A.cloudSetting.retry),Object.assign(A.cloudSetting,f.data.biz_conf.data),!0)})},g.prototype.onNetworkStatusChange=function(){var x,A,m=this,f={wifi:2,"2g":3,"3g":4,"4g":5,"5g":5,unknown:32};function c(u){return u.toLowerCase().replace("-","")}O.p?(O.p.getNetworkType({success:function(u){m.netType=c(u.networkType||"unknown"),m.deviceInfo.net_type=f[m.netType]||f.unknown}}),O.p.onNetworkStatusChange(function(u){m.netType=c(u.networkType||"unknown"),m.deviceInfo.net_type=f[m.netType]||f.unknown,m.emitNetworkChange(u.isConnected)})):((x=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&(this.netType=c(x.type||x.effectiveType||"unknown"),this.deviceInfo.net_type=f[this.netType]||f.unknown,x.addEventListener("change",function(){m.netType=c(x.type||x.effectiveType||"unknown"),m.deviceInfo.net_type=f[m.netType]||f.unknown})),A=function(){return m.emitNetworkChange(navigator.onLine)},window.addEventListener("online",A),window.addEventListener("offline",A))},g.prototype.emitNetworkChange=function(x){var A=this;this.busMap.forEach(function(m){return m.exec(T.m.INetworkChange,x,A.netType)})},g.prototype.initHost=function(x){var A,m=this,f={accesshub:"wss://accesshub-global"+(A=".cool"+["b","g","h"][x%3]+"cloud.com")+"/accesshub",logreport:"wss://weblogger-wss"+A+"/zglog/web",detaillog:"https://detaillog-global"+A,fileproxy:"https://access-zfpxy-global"+A};(x=(Object.keys(this.advancedConfig.geoFence.hostMap).forEach(function(c){var u="-geo-"+c+A;m.advancedConfig.geoFence.hostMap[c].host=c=="1"?f:{accesshub:"wss://accesshub"+u+"/accesshub",logreport:"wss://weblogger-wss"+u+"/zglog/web",detaillog:"https://detaillog"+u,fileproxy:"https://access-zfpxy"+u}}),this.advancedConfig.geoFence.id))&&(this.advancedConfig.geoFence.host=this.advancedConfig.geoFence.hostMap[x].host)},g);function g(x){this.econfMap=new Map,this.busMap=new Map,this.advancedConfig={zim_cross_platform:"",zim_product_source:"",geoFence:{reg:/(https?:\/\/)?([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,})((\/[a-zA-Z0-9#]+\/?)*)/,type:T.c.GeofencingType.None,areas:[],id:0,dispatch:{domain:"",host:""},host:{accesshub:"",logreport:"",detaillog:"",fileproxy:""},hostMap:{2:{relatives:[],host:{}},3:{relatives:[7],host:{}},4:{relatives:[7],host:{}},5:{relatives:[7],host:{}},6:{relatives:[7],host:{}},7:{relatives:[3,4,5,6,1],host:{}},1:{relatives:[7],host:{}}}}},this.streamID=-1,this.queryMsgSeq=0,this.serverOffsetTime=0,this.netType="",x=x.split(".").slice(0,3).reverse(),this.deviceInfo={sdk_ver:x.reduce(function(A,m,f){return A+ +m*Math.pow(100,f)},0),term_type:O.p?7:6,device_id:O.h,net_type:32},this.onNetworkStatusChange()}},function(te,j){},function(te,j,C){var O;te.exports=(te=C(5),O=te.lib.WordArray,te.enc.Base64={stringify:function(T){for(var _=T.words,E=T.sigBytes,g=this._map,x=(T.clamp(),[]),A=0;A<E;A+=3)for(var m=(_[A>>>2]>>>24-A%4*8&255)<<16|(_[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|_[A+2>>>2]>>>24-(A+2)%4*8&255,f=0;f<4&&A+.75*f<E;f++)x.push(g.charAt(m>>>6*(3-f)&63));var c=g.charAt(64);if(c)for(;x.length%4;)x.push(c);return x.join("")},parse:function(T){var _=T.length,E=this._map;if(!(g=this._reverseMap))for(var g=this._reverseMap=[],x=0;x<E.length;x++)g[E.charCodeAt(x)]=x;var A=E.charAt(64);return A&&(A=T.indexOf(A))!==-1&&(_=A),function(m,f,c){for(var u,s,r=[],i=0,a=0;a<f;a++)a%4&&(u=c[m.charCodeAt(a-1)]<<a%4*2,s=c[m.charCodeAt(a)]>>>6-a%4*2,r[i>>>2]|=(u|s)<<24-i%4*8,i++);return O.create(r,i)}(T,_,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},te.enc.Base64)},function(te,j,C){var O,T,_,E;te.exports=(te=C(5),E=(C=te).lib,O=E.WordArray,T=E.Hasher,_=[],E=C.algo.SHA1=T.extend({_doReset:function(){this._hash=new O.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,x){for(var A=this._hash.words,m=A[0],f=A[1],c=A[2],u=A[3],s=A[4],r=0;r<80;r++){r<16?_[r]=0|g[x+r]:(i=_[r-3]^_[r-8]^_[r-14]^_[r-16],_[r]=i<<1|i>>>31);var i=(m<<5|m>>>27)+s+_[r];i+=r<20?1518500249+(f&c|~f&u):r<40?1859775393+(f^c^u):r<60?(f&c|f&u|c&u)-1894007588:(f^c^u)-899497514,s=u,u=c,c=f<<30|f>>>2,f=m,m=i}A[0]=A[0]+m|0,A[1]=A[1]+f|0,A[2]=A[2]+c|0,A[3]=A[3]+u|0,A[4]=A[4]+s|0},_doFinalize:function(){var g=this._data,x=g.words,A=8*this._nDataBytes,m=8*g.sigBytes;return x[m>>>5]|=128<<24-m%32,x[14+(64+m>>>9<<4)]=Math.floor(A/4294967296),x[15+(64+m>>>9<<4)]=A,g.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var g=T.clone.call(this);return g._hash=this._hash.clone(),g}}),C.SHA1=T._createHelper(E),C.HmacSHA1=T._createHmacHelper(E),te.SHA1)},function(te,j,C){var O;te.exports=(te=C(5),C=te.lib.Base,O=te.enc.Utf8,void(te.algo.HMAC=C.extend({init:function(T,_){T=this._hasher=new T.init,typeof _=="string"&&(_=O.parse(_));for(var E=T.blockSize,g=4*E,x=(T=((_=_.sigBytes>g?T.finalize(_):_).clamp(),this._oKey=_.clone()),_=this._iKey=_.clone(),T.words),A=_.words,m=0;m<E;m++)x[m]^=1549556828,A[m]^=909522486;T.sigBytes=_.sigBytes=g,this.reset()},reset:function(){var T=this._hasher;T.reset(),T.update(this._iKey)},update:function(T){return this._hasher.update(T),this},finalize:function(T){var _=this._hasher;return T=_.finalize(T),_.reset(),_.finalize(this._oKey.clone().concat(T))}})))},function(te,j,C){var O,T,_,E,g,x,A,m,f,c,u,s;te.exports=(te=C(5),C(24),void(te.lib.Cipher||(C=(te=te).lib,O=C.Base,T=C.WordArray,_=C.BufferedBlockAlgorithm,(f=te.enc).Utf8,E=f.Base64,g=te.algo.EvpKDF,x=C.Cipher=_.extend({cfg:O.extend(),createEncryptor:function(r,i){return this.create(this._ENC_XFORM_MODE,r,i)},createDecryptor:function(r,i){return this.create(this._DEC_XFORM_MODE,r,i)},init:function(r,i,a){this.cfg=this.cfg.extend(a),this._xformMode=r,this._key=i,this.reset()},reset:function(){_.reset.call(this),this._doReset()},process:function(r){return this._append(r),this._process()},finalize:function(r){return r&&this._append(r),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(()=>{function r(i){return typeof i=="string"?s:c}return function(i){return{encrypt:function(a,o,l){return r(o).encrypt(i,a,o,l)},decrypt:function(a,o,l){return r(o).decrypt(i,a,o,l)}}}})()}),C.StreamCipher=x.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=te.mode={},A=C.BlockCipherMode=O.extend({createEncryptor:function(r,i){return this.Encryptor.create(r,i)},createDecryptor:function(r,i){return this.Decryptor.create(r,i)},init:function(r,i){this._cipher=r,this._iv=i}}),f=f.CBC=(()=>{var r=A.extend();function i(a,o,l){var h,R=this._iv;R?(h=R,this._iv=void 0):h=this._prevBlock;for(var w=0;w<l;w++)a[o+w]^=h[w]}return r.Encryptor=r.extend({processBlock:function(a,o){var l=this._cipher,h=l.blockSize;i.call(this,a,o,h),l.encryptBlock(a,o),this._prevBlock=a.slice(o,o+h)}}),r.Decryptor=r.extend({processBlock:function(a,o){var l=this._cipher,h=l.blockSize,R=a.slice(o,o+h);l.decryptBlock(a,o),i.call(this,a,o,h),this._prevBlock=R}}),r})(),u=(te.pad={}).Pkcs7={pad:function(r,i){for(var a=(i=4*i)-r.sigBytes%i,o=a<<24|a<<16|a<<8|a,l=[],h=0;h<a;h+=4)l.push(o);i=T.create(l,a),r.concat(i)},unpad:function(r){var i=255&r.words[r.sigBytes-1>>>2];r.sigBytes-=i}},C.BlockCipher=x.extend({cfg:x.cfg.extend({mode:f,padding:u}),reset:function(){x.reset.call(this);var r,i=(a=this.cfg).iv,a=a.mode;this._xformMode==this._ENC_XFORM_MODE?r=a.createEncryptor:(r=a.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==r?this._mode.init(this,i&&i.words):(this._mode=r.call(a,this,i&&i.words),this._mode.__creator=r)},_doProcessBlock:function(r,i){this._mode.processBlock(r,i)},_doFinalize:function(){var r,i=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(i.pad(this._data,this.blockSize),r=this._process(!0)):(r=this._process(!0),i.unpad(r)),r},blockSize:4}),m=C.CipherParams=O.extend({init:function(r){this.mixIn(r)},toString:function(r){return(r||this.formatter).stringify(this)}}),f=(te.format={}).OpenSSL={stringify:function(r){var i=r.ciphertext;return(r=(r=r.salt)?T.create([1398893684,1701076831]).concat(r).concat(i):i).toString(E)},parse:function(r){var i,a=(r=E.parse(r)).words;return a[0]==1398893684&&a[1]==1701076831&&(i=T.create(a.slice(2,4)),a.splice(0,4),r.sigBytes-=16),m.create({ciphertext:r,salt:i})}},c=C.SerializableCipher=O.extend({cfg:O.extend({format:f}),encrypt:function(r,i,a,o){o=this.cfg.extend(o),i=(l=r.createEncryptor(a,o)).finalize(i);var l=l.cfg;return m.create({ciphertext:i,key:a,iv:l.iv,algorithm:r,mode:l.mode,padding:l.padding,blockSize:r.blockSize,formatter:o.format})},decrypt:function(r,i,a,o){return o=this.cfg.extend(o),i=this._parse(i,o.format),r.createDecryptor(a,o).finalize(i.ciphertext)},_parse:function(r,i){return typeof r=="string"?i.parse(r,this):r}}),u=(te.kdf={}).OpenSSL={execute:function(r,i,a,o,l){return o=o||T.random(8),l=(l?g.create({keySize:i+a,hasher:l}):g.create({keySize:i+a})).compute(r,o),r=T.create(l.words.slice(i),4*a),l.sigBytes=4*i,m.create({key:l,iv:r,salt:o})}},s=C.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:u}),encrypt:function(r,i,a,o){return a=(o=this.cfg.extend(o)).kdf.execute(a,r.keySize,r.ivSize,o.salt,o.hasher),o.iv=a.iv,(r=c.encrypt.call(this,r,i,a.key,o)).mixIn(a),r},decrypt:function(r,i,a,o){return o=this.cfg.extend(o),i=this._parse(i,o.format),a=o.kdf.execute(a,r.keySize,r.ivSize,i.salt,o.hasher),o.iv=a.iv,c.decrypt.call(this,r,i,a.key,o)}}))))},function(te,j,C){var O={"./ZIMFileStoreBase":32,"./ZIMFileStoreBase.ts":32,"./ZIMFileStoreImpl":33,"./ZIMFileStoreImpl.ts":33,"./ZIMIDBImpl":34,"./ZIMIDBImpl.ts":34};function T(E){return E=_(E),C(E)}function _(E){if(C.o(O,E))return O[E];throw(E=new Error("Cannot find module '"+E+"'")).code="MODULE_NOT_FOUND",E}T.keys=function(){return Object.keys(O)},T.resolve=_,(te.exports=T).id=99},function(te,j,C){var O=j;function T(){O.util._configure(),O.Writer._configure(O.BufferWriter),O.Reader._configure(O.BufferReader)}O.build="minimal",O.Writer=C(35),O.BufferWriter=C(109),O.Reader=C(36),O.BufferReader=C(110),O.util=C(9),O.rpc=C(111),O.roots=C(113),O.configure=T,T()},function(te,j,C){te.exports=function(O,T){for(var _=new Array(arguments.length-1),E=0,g=2,x=!0;g<arguments.length;)_[E++]=arguments[g++];return new Promise(function(A,m){_[E]=function(f){if(x)if(x=!1,f)m(f);else{for(var c=new Array(arguments.length-1),u=0;u<c.length;)c[u++]=arguments[u];A.apply(null,c)}};try{O.apply(T||null,_)}catch(f){x&&(x=!1,m(f))}})}},function(te,j,C){j.length=function(g){var x=g.length;if(!x)return 0;for(var A=0;1<--x%4&&g.charAt(x)==="=";)++A;return Math.ceil(3*g.length)/4-A};for(var O=new Array(64),T=new Array(123),_=0;_<64;)T[O[_]=_<26?_+65:_<52?_+71:_<62?_-4:_-59|43]=_++;j.encode=function(g,x,A){for(var m,f=null,c=[],u=0,s=0;x<A;){var r=g[x++];switch(s){case 0:c[u++]=O[r>>2],m=(3&r)<<4,s=1;break;case 1:c[u++]=O[m|r>>4],m=(15&r)<<2,s=2;break;case 2:c[u++]=O[m|r>>6],c[u++]=O[63&r],s=0}8191<u&&((f=f||[]).push(String.fromCharCode.apply(String,c)),u=0)}return s&&(c[u++]=O[m],c[u++]=61,s===1)&&(c[u++]=61),f?(u&&f.push(String.fromCharCode.apply(String,c.slice(0,u))),f.join("")):String.fromCharCode.apply(String,c.slice(0,u))};var E="invalid encoding";j.decode=function(g,x,A){for(var m,f=A,c=0,u=0;u<g.length;){var s=g.charCodeAt(u++);if(s===61&&1<c)break;if((s=T[s])===void 0)throw Error(E);switch(c){case 0:m=s,c=1;break;case 1:x[A++]=m<<2|(48&s)>>4,m=s,c=2;break;case 2:x[A++]=(15&m)<<4|(60&s)>>2,m=s,c=3;break;case 3:x[A++]=(3&m)<<6|s,c=0}}if(c===1)throw Error(E);return A-f},j.test=function(g){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(g)}},function(te,j,C){function O(){this._listeners={}}(te.exports=O).prototype.on=function(T,_,E){return(this._listeners[T]||(this._listeners[T]=[])).push({fn:_,ctx:E||this}),this},O.prototype.off=function(T,_){if(T===void 0)this._listeners={};else if(_===void 0)this._listeners[T]=[];else for(var E=this._listeners[T],g=0;g<E.length;)E[g].fn===_?E.splice(g,1):++g;return this},O.prototype.emit=function(T){var _=this._listeners[T];if(_){for(var E=[],g=1;g<arguments.length;)E.push(arguments[g++]);for(g=0;g<_.length;)_[g].fn.apply(_[g++].ctx,E)}return this}},function(te,j,C){function O(x){function A(y,k,b,U){var z=k<0?1:0;(k=z?-k:k)===0?y(0<1/k?0:2147483648,b,U):isNaN(k)?y(2143289344,b,U):y(34028234663852886e22<k?(z<<31|2139095040)>>>0:k<11754943508222875e-54?(z<<31|Math.round(k/1401298464324817e-60))>>>0:(z<<31|(y=Math.floor(Math.log(k)/Math.LN2))+127<<23|8388607&Math.round(k*Math.pow(2,-y)*8388608))>>>0,b,U)}function m(y,k,b){return k=2*((y=y(k,b))>>31)+1,b=y>>>23&255,y&=8388607,b==255?y?NaN:1/0*k:b==0?1401298464324817e-60*k*y:k*Math.pow(2,b-150)*(8388608+y)}function f(y,k,b){r[0]=y,k[b]=i[0],k[b+1]=i[1],k[b+2]=i[2],k[b+3]=i[3]}function c(y,k,b){r[0]=y,k[b]=i[3],k[b+1]=i[2],k[b+2]=i[1],k[b+3]=i[0]}function u(y,k){return i[0]=y[k],i[1]=y[k+1],i[2]=y[k+2],i[3]=y[k+3],r[0]}function s(y,k){return i[3]=y[k],i[2]=y[k+1],i[1]=y[k+2],i[0]=y[k+3],r[0]}var r,i,a,o,l;function h(y,k,b,U,z,P){var H,Q,J=U<0?1:0;(U=J?-U:U)===0?(y(0,z,P+k),y(0<1/U?0:2147483648,z,P+b)):isNaN(U)?(y(0,z,P+k),y(2146959360,z,P+b)):17976931348623157e292<U?(y(0,z,P+k),y((J<<31|2146435072)>>>0,z,P+b)):U<22250738585072014e-324?(y((H=U/5e-324)>>>0,z,P+k),y((J<<31|H/4294967296)>>>0,z,P+b)):((Q=Math.floor(Math.log(U)/Math.LN2))===1024&&(Q=1023),y(4503599627370496*(H=U*Math.pow(2,-Q))>>>0,z,P+k),y((J<<31|Q+1023<<20|1048576*H&1048575)>>>0,z,P+b))}function R(y,k,b,U,z){return k=y(U,z+k),U=2*((y=y(U,z+b))>>31)+1,b=4294967296*(1048575&y)+k,(z=y>>>20&2047)==2047?b?NaN:1/0*U:z==0?5e-324*U*b:U*Math.pow(2,z-1075)*(b+4503599627370496)}function w(y,k,b){a[0]=y,k[b]=o[0],k[b+1]=o[1],k[b+2]=o[2],k[b+3]=o[3],k[b+4]=o[4],k[b+5]=o[5],k[b+6]=o[6],k[b+7]=o[7]}function d(y,k,b){a[0]=y,k[b]=o[7],k[b+1]=o[6],k[b+2]=o[5],k[b+3]=o[4],k[b+4]=o[3],k[b+5]=o[2],k[b+6]=o[1],k[b+7]=o[0]}function D(y,k){return o[0]=y[k],o[1]=y[k+1],o[2]=y[k+2],o[3]=y[k+3],o[4]=y[k+4],o[5]=y[k+5],o[6]=y[k+6],o[7]=y[k+7],a[0]}function S(y,k){return o[7]=y[k],o[6]=y[k+1],o[5]=y[k+2],o[4]=y[k+3],o[3]=y[k+4],o[2]=y[k+5],o[1]=y[k+6],o[0]=y[k+7],a[0]}return typeof Float32Array<"u"?(r=new Float32Array([-0]),l=(i=new Uint8Array(r.buffer))[3]===128,x.writeFloatLE=l?f:c,x.writeFloatBE=l?c:f,x.readFloatLE=l?u:s,x.readFloatBE=l?s:u):(x.writeFloatLE=A.bind(null,T),x.writeFloatBE=A.bind(null,_),x.readFloatLE=m.bind(null,E),x.readFloatBE=m.bind(null,g)),typeof Float64Array<"u"?(a=new Float64Array([-0]),l=(o=new Uint8Array(a.buffer))[7]===128,x.writeDoubleLE=l?w:d,x.writeDoubleBE=l?d:w,x.readDoubleLE=l?D:S,x.readDoubleBE=l?S:D):(x.writeDoubleLE=h.bind(null,T,0,4),x.writeDoubleBE=h.bind(null,_,4,0),x.readDoubleLE=R.bind(null,E,0,4),x.readDoubleBE=R.bind(null,g,4,0)),x}function T(x,A,m){A[m]=255&x,A[m+1]=x>>>8&255,A[m+2]=x>>>16&255,A[m+3]=x>>>24}function _(x,A,m){A[m]=x>>>24,A[m+1]=x>>>16&255,A[m+2]=x>>>8&255,A[m+3]=255&x}function E(x,A){return(x[A]|x[A+1]<<8|x[A+2]<<16|x[A+3]<<24)>>>0}function g(x,A){return(x[A]<<24|x[A+1]<<16|x[A+2]<<8|x[A+3])>>>0}te.exports=O(O)},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(te){}return null}module.exports=inquire},function(te,j,C){j.length=function(O){for(var T,_=0,E=0;E<O.length;++E)(T=O.charCodeAt(E))<128?_+=1:T<2048?_+=2:(64512&T)==55296&&(64512&O.charCodeAt(E+1))==56320?(++E,_+=4):_+=3;return _},j.read=function(O,T,_){if(_-T<1)return"";for(var E,g=null,x=[],A=0;T<_;)(E=O[T++])<128?x[A++]=E:191<E&&E<224?x[A++]=(31&E)<<6|63&O[T++]:239<E&&E<365?(E=((7&E)<<18|(63&O[T++])<<12|(63&O[T++])<<6|63&O[T++])-65536,x[A++]=55296+(E>>10),x[A++]=56320+(1023&E)):x[A++]=(15&E)<<12|(63&O[T++])<<6|63&O[T++],8191<A&&((g=g||[]).push(String.fromCharCode.apply(String,x)),A=0);return g?(A&&g.push(String.fromCharCode.apply(String,x.slice(0,A))),g.join("")):String.fromCharCode.apply(String,x.slice(0,A))},j.write=function(O,T,_){for(var E,g,x=_,A=0;A<O.length;++A)(E=O.charCodeAt(A))<128?T[_++]=E:(E<2048?T[_++]=E>>6|192:((64512&E)==55296&&(64512&(g=O.charCodeAt(A+1)))==56320?(++A,T[_++]=(E=65536+((1023&E)<<10)+(1023&g))>>18|240,T[_++]=E>>12&63|128):T[_++]=E>>12|224,T[_++]=E>>6&63|128),T[_++]=63&E|128);return _-x}},function(te,j,C){te.exports=function(O,T,_){var E=_||8192,g=E>>>1,x=null,A=E;return function(m){return m<1||g<m?O(m):(E<A+m&&(x=O(E),A=0),m=T.call(x,A,A+=m),7&A&&(A=1+(7|A)),m)}}},function(te,j,C){te.exports=T;var O=C(9);function T(g,x){this.lo=g>>>0,this.hi=x>>>0}var _=T.zero=new T(0,0),E=(_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1},T.zeroHash="\0\0\0\0\0\0\0\0",T.fromNumber=function(g){var x,A;return g===0?_:(A=(g=(x=g<0)?-g:g)>>>0,g=(g-A)/4294967296>>>0,x&&(g=~g>>>0,A=~A>>>0,4294967295<++A)&&(A=0,4294967295<++g)&&(g=0),new T(A,g))},T.from=function(g){if(typeof g=="number")return T.fromNumber(g);if(O.isString(g)){if(!O.Long)return T.fromNumber(parseInt(g,10));g=O.Long.fromString(g)}return g.low||g.high?new T(g.low>>>0,g.high>>>0):_},T.prototype.toNumber=function(g){var x;return!g&&this.hi>>>31?(g=1+~this.lo>>>0,x=~this.hi>>>0,-(g+4294967296*(x=g?x:x+1>>>0))):this.lo+4294967296*this.hi},T.prototype.toLong=function(g){return O.Long?new O.Long(0|this.lo,0|this.hi,!!g):{low:0|this.lo,high:0|this.hi,unsigned:!!g}},String.prototype.charCodeAt);T.fromHash=function(g){return g==="\0\0\0\0\0\0\0\0"?_:new T((E.call(g,0)|E.call(g,1)<<8|E.call(g,2)<<16|E.call(g,3)<<24)>>>0,(E.call(g,4)|E.call(g,5)<<8|E.call(g,6)<<16|E.call(g,7)<<24)>>>0)},T.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},T.prototype.zzEncode=function(){var g=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^g)>>>0,this.lo=(this.lo<<1^g)>>>0,this},T.prototype.zzDecode=function(){var g=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^g)>>>0,this.hi=(this.hi>>>1^g)>>>0,this},T.prototype.length=function(){var g=this.lo,x=(this.lo>>>28|this.hi<<4)>>>0,A=this.hi>>>24;return A==0?x==0?g<16384?g<128?1:2:g<2097152?3:4:x<16384?x<128?5:6:x<2097152?7:8:A<128?9:10}},function(te,j,C){te.exports=_;var O=C(35),T=((_.prototype=Object.create(O.prototype)).constructor=_,C(9));function _(){O.call(this)}function E(g,x,A){g.length<40?T.utf8.write(g,x,A):x.utf8Write?x.utf8Write(g,A):x.write(g,A)}_._configure=function(){_.alloc=T._Buffer_allocUnsafe,_.writeBytesBuffer=T.Buffer&&T.Buffer.prototype instanceof Uint8Array&&T.Buffer.prototype.set.name==="set"?function(g,x,A){x.set(g,A)}:function(g,x,A){if(g.copy)g.copy(x,A,0,g.length);else for(var m=0;m<g.length;)x[A++]=g[m++]}},_.prototype.bytes=function(g){var x=(g=T.isString(g)?T._Buffer_from(g,"base64"):g).length>>>0;return this.uint32(x),x&&this._push(_.writeBytesBuffer,x,g),this},_.prototype.string=function(g){var x=T.Buffer.byteLength(g);return this.uint32(x),x&&this._push(E,x,g),this},_._configure()},function(te,j,C){te.exports=_;var O=C(36),T=((_.prototype=Object.create(O.prototype)).constructor=_,C(9));function _(E){O.call(this,E)}_._configure=function(){T.Buffer&&(_.prototype._slice=T.Buffer.prototype.slice)},_.prototype.string=function(){var E=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+E,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+E,this.len))},_._configure()},function(te,j,C){j.Service=C(112)},function(te,j,C){te.exports=T;var O=C(9);function T(_,E,g){if(typeof _!="function")throw TypeError("rpcImpl must be a function");O.EventEmitter.call(this),this.rpcImpl=_,this.requestDelimited=!!E,this.responseDelimited=!!g}((T.prototype=Object.create(O.EventEmitter.prototype)).constructor=T).prototype.rpcCall=function _(E,g,x,A,m){if(!A)throw TypeError("request must be specified");var f=this;if(!m)return O.asPromise(_,f,E,g,x,A);if(f.rpcImpl)try{return f.rpcImpl(E,g[f.requestDelimited?"encodeDelimited":"encode"](A).finish(),function(c,u){if(c)return f.emit("error",c,E),m(c);if(u!==null){if(!(u instanceof x))try{u=x[f.responseDelimited?"decodeDelimited":"decode"](u)}catch(s){return f.emit("error",s,E),m(s)}return f.emit("data",u,E),m(null,u)}f.end(!0)})}catch(c){f.emit("error",c,E),setTimeout(function(){m(c)},0)}else setTimeout(function(){m(Error("already ended"))},0)},T.prototype.end=function(_){return this.rpcImpl&&(_||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(te,j,C){te.exports={}},function(te,j,C){var O={"./formdata":42,"./formdata.ts":42,"./zego.fileHandler":43,"./zego.fileHandler.ts":43,"./zego.storeHandler":44,"./zego.storeHandler.ts":44};function T(E){return E=_(E),C(E)}function _(E){if(C.o(O,E))return O[E];throw(E=new Error("Cannot find module '"+E+"'")).code="MODULE_NOT_FOUND",E}T.keys=function(){return Object.keys(O)},T.resolve=_,(te.exports=T).id=114},function(te,j,C){(function(O){var T=C(116),_=C(117),E=C(118);function g(){return A.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function x(L,q){if(g()<q)throw new RangeError("Invalid typed array length");return A.TYPED_ARRAY_SUPPORT?(L=new Uint8Array(q)).__proto__=A.prototype:(L=L===null?new A(q):L).length=q,L}function A(L,q,B){if(!(A.TYPED_ARRAY_SUPPORT||this instanceof A))return new A(L,q,B);if(typeof L!="number")return m(this,L,q,B);if(typeof q=="string")throw new Error("If encoding is specified then the first argument must be a string");return c(this,L)}function m(L,q,B,Y){if(typeof q=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&q instanceof ArrayBuffer){var K=L,ee=q,oe=B;if(ee.byteLength,oe<0||ee.byteLength<oe)throw new RangeError("'offset' is out of bounds");if(ee.byteLength<oe+(Y||0))throw new RangeError("'length' is out of bounds");return ee=oe===void 0&&Y===void 0?new Uint8Array(ee):Y===void 0?new Uint8Array(ee,oe):new Uint8Array(ee,oe,Y),A.TYPED_ARRAY_SUPPORT?(K=ee).__proto__=A.prototype:K=u(K,ee),K}if(typeof q!="string"){if(oe=L,Y=q,A.isBuffer(Y))return(oe=x(oe,ee=0|s(Y.length))).length!==0&&Y.copy(oe,0,0,ee),oe;if(Y){if(typeof ArrayBuffer<"u"&&Y.buffer instanceof ArrayBuffer||"length"in Y)return typeof Y.length!="number"||(ae=>ae!=ae)(Y.length)?x(oe,0):u(oe,Y);if(Y.type==="Buffer"&&E(Y.data))return u(oe,Y.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(K=L,Y=q,L=B,A.isEncoding(L=typeof L=="string"&&L!==""?L:"utf8"))return(Y=(K=x(K,q=0|r(Y,L))).write(Y,L))!==q?K.slice(0,Y):K;throw new TypeError('"encoding" must be a valid string encoding')}function f(L){if(typeof L!="number")throw new TypeError('"size" argument must be a number');if(L<0)throw new RangeError('"size" argument must not be negative')}function c(L,q){if(f(q),L=x(L,q<0?0:0|s(q)),!A.TYPED_ARRAY_SUPPORT)for(var B=0;B<q;++B)L[B]=0;return L}function u(L,q){var B=q.length<0?0:0|s(q.length);L=x(L,B);for(var Y=0;Y<B;Y+=1)L[Y]=255&q[Y];return L}function s(L){if(g()<=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|L}function r(L,q){if(A.isBuffer(L))return L.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(L)||L instanceof ArrayBuffer))return L.byteLength;var B=(L=typeof L!="string"?""+L:L).length;if(B===0)return 0;for(var Y=!1;;)switch(q){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":case void 0:return H(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*B;case"hex":return B>>>1;case"base64":return Q(L).length;default:if(Y)return H(L).length;q=(""+q).toLowerCase(),Y=!0}}function i(L,q,B){var Y,K=!1;if((q=q===void 0||q<0?0:q)>this.length||(B=B===void 0||B>this.length?this.length:B)<=0||(B>>>=0)<=(q>>>=0))return"";for(L=L||"utf8";;)switch(L){case"hex":var ee=q,oe=B,ae=this.length;(!oe||oe<0||ae<oe)&&(oe=ae);for(var X="",re=ee=!ee||ee<0?0:ee;re<oe;++re)X+=(Ne=>Ne<16?"0"+Ne.toString(16):Ne.toString(16))(this[re]);return X;case"utf8":case"utf-8":return w(this,q,B);case"ascii":ae=q;var ie=B,ge="";ie=Math.min(this.length,ie);for(var _e=ae;_e<ie;++_e)ge+=String.fromCharCode(127&this[_e]);return ge;case"latin1":case"binary":ee=q;var ke=B,De="";ke=Math.min(this.length,ke);for(var Re=ee;Re<ke;++Re)De+=String.fromCharCode(this[Re]);return De;case"base64":return we=this,Y=B,(Oe=q)===0&&Y===we.length?T.fromByteArray(we):T.fromByteArray(we.slice(Oe,Y));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var we=q,Oe=B,Ae=this.slice(we,Oe),Pe="",Ue=0;Ue<Ae.length;Ue+=2)Pe+=String.fromCharCode(Ae[Ue]+256*Ae[Ue+1]);return Pe;default:if(K)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),K=!0}}function a(L,q,B){var Y=L[q];L[q]=L[B],L[B]=Y}function o(L,q,B,Y,K){if(L.length===0)return-1;if(typeof B=="string"?(Y=B,B=0):2147483647<B?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,(B=(B=isNaN(B)?K?0:L.length-1:B)<0?L.length+B:B)>=L.length){if(K)return-1;B=L.length-1}else if(B<0){if(!K)return-1;B=0}if(typeof q=="string"&&(q=A.from(q,Y)),A.isBuffer(q))return q.length===0?-1:l(L,q,B,Y,K);if(typeof q=="number")return q&=255,A.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?(K?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(L,q,B):l(L,[q],B,Y,K);throw new TypeError("val must be string, number or Buffer")}function l(L,q,B,Y,K){var ee=1,oe=L.length,ae=q.length;if(Y!==void 0&&((Y=String(Y).toLowerCase())==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(L.length<2||q.length<2)return-1;oe/=ee=2,ae/=2,B/=2}function X(ke,De){return ee===1?ke[De]:ke.readUInt16BE(De*ee)}if(K)for(var re=-1,ie=B;ie<oe;ie++)if(X(L,ie)===X(q,re===-1?0:ie-re)){if(ie-(re=re===-1?ie:re)+1===ae)return re*ee}else re!==-1&&(ie-=ie-re),re=-1;else for(ie=B=oe<B+ae?oe-ae:B;0<=ie;ie--){for(var ge=!0,_e=0;_e<ae;_e++)if(X(L,ie+_e)!==X(q,_e)){ge=!1;break}if(ge)return ie}return-1}function h(L,q,B,Y){return J((K=>{for(var ee=[],oe=0;oe<K.length;++oe)ee.push(255&K.charCodeAt(oe));return ee})(q),L,B,Y)}function R(L,q,B,Y){return J(((K,ee)=>{for(var oe,ae,X=[],re=0;re<K.length&&!((ee-=2)<0);++re)ae=(oe=K.charCodeAt(re))>>8,X.push(oe%256),X.push(ae);return X})(q,L.length-B),L,B,Y)}function w(L,q,B){B=Math.min(L.length,B);for(var Y=[],K=q;K<B;){var ee,oe,ae,X,re=L[K],ie=null,ge=239<re?4:223<re?3:191<re?2:1;if(K+ge<=B)switch(ge){case 1:re<128&&(ie=re);break;case 2:(192&(ee=L[K+1]))==128&&127<(X=(31&re)<<6|63&ee)&&(ie=X);break;case 3:ee=L[K+1],oe=L[K+2],(192&ee)==128&&(192&oe)==128&&2047<(X=(15&re)<<12|(63&ee)<<6|63&oe)&&(X<55296||57343<X)&&(ie=X);break;case 4:ee=L[K+1],oe=L[K+2],ae=L[K+3],(192&ee)==128&&(192&oe)==128&&(192&ae)==128&&65535<(X=(15&re)<<18|(63&ee)<<12|(63&oe)<<6|63&ae)&&X<1114112&&(ie=X)}ie===null?(ie=65533,ge=1):65535<ie&&(Y.push((ie-=65536)>>>10&1023|55296),ie=56320|1023&ie),Y.push(ie),K+=ge}var _e=Y,ke=_e.length;if(ke<=d)return String.fromCharCode.apply(String,_e);for(var De="",Re=0;Re<ke;)De+=String.fromCharCode.apply(String,_e.slice(Re,Re+=d));return De}j.Buffer=A,j.SlowBuffer=function(L){return+L!=L&&(L=0),A.alloc(+L)},j.INSPECT_MAX_BYTES=50,A.TYPED_ARRAY_SUPPORT=O.TYPED_ARRAY_SUPPORT!==void 0?O.TYPED_ARRAY_SUPPORT:(()=>{try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},L.foo()===42&&typeof L.subarray=="function"&&L.subarray(1,1).byteLength===0}catch{return!1}})(),j.kMaxLength=g(),A.poolSize=8192,A._augment=function(L){return L.__proto__=A.prototype,L},A.from=function(L,q,B){return m(null,L,q,B)},A.TYPED_ARRAY_SUPPORT&&(A.prototype.__proto__=Uint8Array.prototype,A.__proto__=Uint8Array,typeof Symbol<"u")&&Symbol.species&&A[Symbol.species]===A&&Object.defineProperty(A,Symbol.species,{value:null,configurable:!0}),A.alloc=function(L,q,B){return Y=null,q=q,B=B,f(L=L),L<=0||q===void 0?x(Y,L):typeof B=="string"?x(Y,L).fill(q,B):x(Y,L).fill(q);var Y},A.allocUnsafe=function(L){return c(null,L)},A.allocUnsafeSlow=function(L){return c(null,L)},A.isBuffer=function(L){return!(L==null||!L._isBuffer)},A.compare=function(L,q){if(!A.isBuffer(L)||!A.isBuffer(q))throw new TypeError("Arguments must be Buffers");if(L===q)return 0;for(var B=L.length,Y=q.length,K=0,ee=Math.min(B,Y);K<ee;++K)if(L[K]!==q[K]){B=L[K],Y=q[K];break}return B<Y?-1:Y<B?1:0},A.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(L,q){if(!E(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return A.alloc(0);if(q===void 0)for(K=q=0;K<L.length;++K)q+=L[K].length;for(var B=A.allocUnsafe(q),Y=0,K=0;K<L.length;++K){var ee=L[K];if(!A.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(B,Y),Y+=ee.length}return B},A.byteLength=r,A.prototype._isBuffer=!0,A.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<L;q+=2)a(this,q,q+1);return this},A.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<L;q+=4)a(this,q,q+3),a(this,q+1,q+2);return this},A.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<L;q+=8)a(this,q,q+7),a(this,q+1,q+6),a(this,q+2,q+5),a(this,q+3,q+4);return this},A.prototype.toString=function(){var L=0|this.length;return L==0?"":arguments.length===0?w(this,0,L):i.apply(this,arguments)},A.prototype.equals=function(L){if(A.isBuffer(L))return this===L||A.compare(this,L)===0;throw new TypeError("Argument must be a Buffer")},A.prototype.inspect=function(){var L="",q=j.INSPECT_MAX_BYTES;return 0<this.length&&(L=this.toString("hex",0,q).match(/.{2}/g).join(" "),this.length>q)&&(L+=" ... "),"<Buffer "+L+">"},A.prototype.compare=function(L,q,B,Y,K){if(!A.isBuffer(L))throw new TypeError("Argument must be a Buffer");if(B===void 0&&(B=L?L.length:0),Y===void 0&&(Y=0),K===void 0&&(K=this.length),(q=q===void 0?0:q)<0||B>L.length||Y<0||K>this.length)throw new RangeError("out of range index");if(K<=Y&&B<=q)return 0;if(K<=Y)return-1;if(B<=q)return 1;if(this===L)return 0;for(var ee=(K>>>=0)-(Y>>>=0),oe=(B>>>=0)-(q>>>=0),ae=Math.min(ee,oe),X=this.slice(Y,K),re=L.slice(q,B),ie=0;ie<ae;++ie)if(X[ie]!==re[ie]){ee=X[ie],oe=re[ie];break}return ee<oe?-1:oe<ee?1:0},A.prototype.includes=function(L,q,B){return this.indexOf(L,q,B)!==-1},A.prototype.indexOf=function(L,q,B){return o(this,L,q,B,!0)},A.prototype.lastIndexOf=function(L,q,B){return o(this,L,q,B,!1)},A.prototype.write=function(L,q,B,Y){if(q===void 0)Y="utf8",B=this.length,q=0;else if(B===void 0&&typeof q=="string")Y=q,B=this.length,q=0;else{if(!isFinite(q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");q|=0,isFinite(B)?(B|=0,Y===void 0&&(Y="utf8")):(Y=B,B=void 0)}var K=this.length-q;if((B===void 0||K<B)&&(B=K),0<L.length&&(B<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y=Y||"utf8";for(var ee,oe,ae,X=!1;;)switch(Y){case"hex":var re=L,ie=q,ge=B,_e=(ie=Number(ie)||0,this.length-ie);if((!ge||_e<(ge=Number(ge)))&&(ge=_e),(_e=re.length)%2!=0)throw new TypeError("Invalid hex string");_e/2<ge&&(ge=_e/2);for(var ke=0;ke<ge;++ke){var De=parseInt(re.substr(2*ke,2),16);if(isNaN(De))return ke;this[ie+ke]=De}return ke;case"utf8":case"utf-8":return _e=q,ae=B,J(H(L,(oe=this).length-_e),oe,_e,ae);case"ascii":return h(this,L,q,B);case"latin1":case"binary":return h(this,L,q,B);case"base64":return oe=this,ae=q,ee=B,J(Q(L),oe,ae,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,L,q,B);default:if(X)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),X=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var d=4096;function D(L,q,B){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(B<L+q)throw new RangeError("Trying to access beyond buffer length")}function S(L,q,B,Y,K,ee){if(!A.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(K<q||q<ee)throw new RangeError('"value" argument is out of bounds');if(B+Y>L.length)throw new RangeError("Index out of range")}function y(L,q,B,Y){q<0&&(q=65535+q+1);for(var K=0,ee=Math.min(L.length-B,2);K<ee;++K)L[B+K]=(q&255<<8*(Y?K:1-K))>>>8*(Y?K:1-K)}function k(L,q,B,Y){q<0&&(q=4294967295+q+1);for(var K=0,ee=Math.min(L.length-B,4);K<ee;++K)L[B+K]=q>>>8*(Y?K:3-K)&255}function b(L,q,B,Y){if(B+Y>L.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function U(L,q,B,Y,K){return K||b(L,0,B,4),_.write(L,q,B,Y,23,4),B+4}function z(L,q,B,Y,K){return K||b(L,0,B,8),_.write(L,q,B,Y,52,8),B+8}A.prototype.slice=function(L,q){var B=this.length;if((L=~~L)<0?(L+=B)<0&&(L=0):B<L&&(L=B),(q=q===void 0?B:~~q)<0?(q+=B)<0&&(q=0):B<q&&(q=B),q<L&&(q=L),A.TYPED_ARRAY_SUPPORT)(K=this.subarray(L,q)).__proto__=A.prototype;else for(var Y=q-L,K=new A(Y,void 0),ee=0;ee<Y;++ee)K[ee]=this[ee+L];return K},A.prototype.readUIntLE=function(L,q,B){L|=0,q|=0,B||D(L,q,this.length);for(var Y=this[L],K=1,ee=0;++ee<q&&(K*=256);)Y+=this[L+ee]*K;return Y},A.prototype.readUIntBE=function(L,q,B){L|=0,q|=0,B||D(L,q,this.length);for(var Y=this[L+--q],K=1;0<q&&(K*=256);)Y+=this[L+--q]*K;return Y},A.prototype.readUInt8=function(L,q){return q||D(L,1,this.length),this[L]},A.prototype.readUInt16LE=function(L,q){return q||D(L,2,this.length),this[L]|this[L+1]<<8},A.prototype.readUInt16BE=function(L,q){return q||D(L,2,this.length),this[L]<<8|this[L+1]},A.prototype.readUInt32LE=function(L,q){return q||D(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},A.prototype.readUInt32BE=function(L,q){return q||D(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},A.prototype.readIntLE=function(L,q,B){L|=0,q|=0,B||D(L,q,this.length);for(var Y=this[L],K=1,ee=0;++ee<q&&(K*=256);)Y+=this[L+ee]*K;return(K*=128)<=Y&&(Y-=Math.pow(2,8*q)),Y},A.prototype.readIntBE=function(L,q,B){L|=0,q|=0,B||D(L,q,this.length);for(var Y=q,K=1,ee=this[L+--Y];0<Y&&(K*=256);)ee+=this[L+--Y]*K;return(K*=128)<=ee&&(ee-=Math.pow(2,8*q)),ee},A.prototype.readInt8=function(L,q){return q||D(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},A.prototype.readInt16LE=function(L,q){return q||D(L,2,this.length),32768&(q=this[L]|this[L+1]<<8)?4294901760|q:q},A.prototype.readInt16BE=function(L,q){return q||D(L,2,this.length),32768&(q=this[L+1]|this[L]<<8)?4294901760|q:q},A.prototype.readInt32LE=function(L,q){return q||D(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},A.prototype.readInt32BE=function(L,q){return q||D(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},A.prototype.readFloatLE=function(L,q){return q||D(L,4,this.length),_.read(this,L,!0,23,4)},A.prototype.readFloatBE=function(L,q){return q||D(L,4,this.length),_.read(this,L,!1,23,4)},A.prototype.readDoubleLE=function(L,q){return q||D(L,8,this.length),_.read(this,L,!0,52,8)},A.prototype.readDoubleBE=function(L,q){return q||D(L,8,this.length),_.read(this,L,!1,52,8)},A.prototype.writeUIntLE=function(L,q,B,Y){L=+L,q|=0,B|=0,Y||S(this,L,q,B,Math.pow(2,8*B)-1,0);var K=1,ee=0;for(this[q]=255&L;++ee<B&&(K*=256);)this[q+ee]=L/K&255;return q+B},A.prototype.writeUIntBE=function(L,q,B,Y){L=+L,q|=0,B|=0,Y||S(this,L,q,B,Math.pow(2,8*B)-1,0);var K=B-1,ee=1;for(this[q+K]=255&L;0<=--K&&(ee*=256);)this[q+K]=L/ee&255;return q+B},A.prototype.writeUInt8=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,1,255,0),A.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),this[q]=255&L,q+1},A.prototype.writeUInt16LE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,2,65535,0),A.TYPED_ARRAY_SUPPORT?(this[q]=255&L,this[q+1]=L>>>8):y(this,L,q,!0),q+2},A.prototype.writeUInt16BE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,2,65535,0),A.TYPED_ARRAY_SUPPORT?(this[q]=L>>>8,this[q+1]=255&L):y(this,L,q,!1),q+2},A.prototype.writeUInt32LE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,4,4294967295,0),A.TYPED_ARRAY_SUPPORT?(this[q+3]=L>>>24,this[q+2]=L>>>16,this[q+1]=L>>>8,this[q]=255&L):k(this,L,q,!0),q+4},A.prototype.writeUInt32BE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,4,4294967295,0),A.TYPED_ARRAY_SUPPORT?(this[q]=L>>>24,this[q+1]=L>>>16,this[q+2]=L>>>8,this[q+3]=255&L):k(this,L,q,!1),q+4},A.prototype.writeIntLE=function(L,q,B,Y){L=+L,q|=0,Y||S(this,L,q,B,(Y=Math.pow(2,8*B-1))-1,-Y);var K=0,ee=1,oe=0;for(this[q]=255&L;++K<B&&(ee*=256);)L<0&&oe===0&&this[q+K-1]!==0&&(oe=1),this[q+K]=(L/ee>>0)-oe&255;return q+B},A.prototype.writeIntBE=function(L,q,B,Y){L=+L,q|=0,Y||S(this,L,q,B,(Y=Math.pow(2,8*B-1))-1,-Y);var K=B-1,ee=1,oe=0;for(this[q+K]=255&L;0<=--K&&(ee*=256);)L<0&&oe===0&&this[q+K+1]!==0&&(oe=1),this[q+K]=(L/ee>>0)-oe&255;return q+B},A.prototype.writeInt8=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,1,127,-128),A.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),this[q]=255&(L=L<0?255+L+1:L),q+1},A.prototype.writeInt16LE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,2,32767,-32768),A.TYPED_ARRAY_SUPPORT?(this[q]=255&L,this[q+1]=L>>>8):y(this,L,q,!0),q+2},A.prototype.writeInt16BE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,2,32767,-32768),A.TYPED_ARRAY_SUPPORT?(this[q]=L>>>8,this[q+1]=255&L):y(this,L,q,!1),q+2},A.prototype.writeInt32LE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,4,2147483647,-2147483648),A.TYPED_ARRAY_SUPPORT?(this[q]=255&L,this[q+1]=L>>>8,this[q+2]=L>>>16,this[q+3]=L>>>24):k(this,L,q,!0),q+4},A.prototype.writeInt32BE=function(L,q,B){return L=+L,q|=0,B||S(this,L,q,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),A.TYPED_ARRAY_SUPPORT?(this[q]=L>>>24,this[q+1]=L>>>16,this[q+2]=L>>>8,this[q+3]=255&L):k(this,L,q,!1),q+4},A.prototype.writeFloatLE=function(L,q,B){return U(this,L,q,!0,B)},A.prototype.writeFloatBE=function(L,q,B){return U(this,L,q,!1,B)},A.prototype.writeDoubleLE=function(L,q,B){return z(this,L,q,!0,B)},A.prototype.writeDoubleBE=function(L,q,B){return z(this,L,q,!1,B)},A.prototype.copy=function(L,q,B,Y){if(B=B||0,Y||Y===0||(Y=this.length),q>=L.length&&(q=L.length),(Y=0<Y&&Y<B?B:Y)===B||L.length===0||this.length===0)return 0;if((q=q||0)<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("sourceStart out of bounds");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length);var K,ee=(Y=L.length-q<Y-B?L.length-q+B:Y)-B;if(this===L&&B<q&&q<Y)for(K=ee-1;0<=K;--K)L[K+q]=this[K+B];else if(ee<1e3||!A.TYPED_ARRAY_SUPPORT)for(K=0;K<ee;++K)L[K+q]=this[K+B];else Uint8Array.prototype.set.call(L,this.subarray(B,B+ee),q);return ee},A.prototype.fill=function(L,q,B,Y){if(typeof L=="string"){var K;if(typeof q=="string"?(Y=q,q=0,B=this.length):typeof B=="string"&&(Y=B,B=this.length),L.length===1&&(K=L.charCodeAt(0))<256&&(L=K),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!A.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y)}else typeof L=="number"&&(L&=255);if(q<0||this.length<q||this.length<B)throw new RangeError("Out of range index");if(!(B<=q))if(q>>>=0,B=B===void 0?this.length:B>>>0,typeof(L=L||0)=="number")for(ae=q;ae<B;++ae)this[ae]=L;else for(var ee=A.isBuffer(L)?L:H(new A(L,Y).toString()),oe=ee.length,ae=0;ae<B-q;++ae)this[ae+q]=ee[ae%oe];return this};var P=/[^+\/0-9A-Za-z-_]/g;function H(L,q){q=q||1/0;for(var B,Y=L.length,K=null,ee=[],oe=0;oe<Y;++oe){if(55295<(B=L.charCodeAt(oe))&&B<57344){if(!K){if(56319<B){-1<(q-=3)&&ee.push(239,191,189);continue}if(oe+1===Y){-1<(q-=3)&&ee.push(239,191,189);continue}K=B;continue}if(B<56320){-1<(q-=3)&&ee.push(239,191,189),K=B;continue}B=65536+(K-55296<<10|B-56320)}else K&&-1<(q-=3)&&ee.push(239,191,189);if(K=null,B<128){if(--q<0)break;ee.push(B)}else if(B<2048){if((q-=2)<0)break;ee.push(B>>6|192,63&B|128)}else if(B<65536){if((q-=3)<0)break;ee.push(B>>12|224,B>>6&63|128,63&B|128)}else{if(!(B<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;ee.push(B>>18|240,B>>12&63|128,B>>6&63|128,63&B|128)}}return ee}function Q(L){return T.toByteArray((q=>{var B;if((q=((B=q).trim?B.trim():B.replace(/^\s+|\s+$/g,"")).replace(P,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q})(L))}function J(L,q,B,Y){for(var K=0;K<Y&&!(K+B>=q.length||K>=L.length);++K)q[K+B]=L[K];return K}}).call(this,C(11))},function(te,j,C){j.byteLength=function(m){return 3*((m=A(m))[0]+(m=m[1]))/4-m},j.toByteArray=function(m){var f,c,u=(s=A(m))[0],s=s[1],r=new _(((o,l)=>3*(o+l)/4-l)(u,s)),i=0,a=0<s?u-4:u;for(c=0;c<a;c+=4)f=T[m.charCodeAt(c)]<<18|T[m.charCodeAt(c+1)]<<12|T[m.charCodeAt(c+2)]<<6|T[m.charCodeAt(c+3)],r[i++]=f>>16&255,r[i++]=f>>8&255,r[i++]=255&f;return s===2&&(f=T[m.charCodeAt(c)]<<2|T[m.charCodeAt(c+1)]>>4,r[i++]=255&f),s===1&&(f=T[m.charCodeAt(c)]<<10|T[m.charCodeAt(c+1)]<<4|T[m.charCodeAt(c+2)]>>2,r[i++]=f>>8&255,r[i++]=255&f),r},j.fromByteArray=function(m){for(var f,c=m.length,u=c%3,s=[],r=0,i=c-u;r<i;r+=16383)s.push(((a,o,l)=>{for(var h,R=[],w=o;w<l;w+=3)h=(a[w]<<16&16711680)+(a[w+1]<<8&65280)+(255&a[w+2]),R.push((d=>O[d>>18&63]+O[d>>12&63]+O[d>>6&63]+O[63&d])(h));return R.join("")})(m,r,i<r+16383?i:r+16383));return u==1?(f=m[c-1],s.push(O[f>>2]+O[f<<4&63]+"==")):u==2&&(f=(m[c-2]<<8)+m[c-1],s.push(O[f>>10]+O[f>>4&63]+O[f<<2&63]+"=")),s.join("")};for(var O=[],T=[],_=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,x=E.length;g<x;++g)O[g]=E[g],T[E.charCodeAt(g)]=g;function A(m){var f=m.length;if(0<f%4)throw new Error("Invalid string. Length must be a multiple of 4");return f=(m=(m=m.indexOf("="))===-1?f:m)===f?0:4-m%4,[m,f]}T[45]=62,T[95]=63},function(te,j){j.read=function(C,O,T,_,E){var g,x,A=8*E-_-1,m=(1<<A)-1,f=m>>1,c=-7,u=T?E-1:0,s=T?-1:1;for(E=C[O+u],u+=s,g=E&(1<<-c)-1,E>>=-c,c+=A;0<c;g=256*g+C[O+u],u+=s,c-=8);for(x=g&(1<<-c)-1,g>>=-c,c+=_;0<c;x=256*x+C[O+u],u+=s,c-=8);if(g===0)g=1-f;else{if(g===m)return x?NaN:1/0*(E?-1:1);x+=Math.pow(2,_),g-=f}return(E?-1:1)*x*Math.pow(2,g-_)},j.write=function(C,O,T,_,E,g){var x,A,m=8*g-E-1,f=(1<<m)-1,c=f>>1,u=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,s=_?0:g-1,r=_?1:-1;for(g=O<0||O===0&&1/O<0?1:0,O=Math.abs(O),isNaN(O)||O===1/0?(A=isNaN(O)?1:0,x=f):(x=Math.floor(Math.log(O)/Math.LN2),O*(_=Math.pow(2,-x))<1&&(x--,_*=2),2<=(O+=1<=x+c?u/_:u*Math.pow(2,1-c))*_&&(x++,_/=2),f<=x+c?(A=0,x=f):1<=x+c?(A=(O*_-1)*Math.pow(2,E),x+=c):(A=O*Math.pow(2,c-1)*Math.pow(2,E),x=0));8<=E;C[T+s]=255&A,s+=r,A/=256,E-=8);for(x=x<<E|A,m+=E;0<m;C[T+s]=255&x,s+=r,x/=256,m-=8);C[T+s-r]|=128*g}},function(te,j){var C={}.toString;te.exports=Array.isArray||function(O){return C.call(O)=="[object Array]"}},function(te,j,C){(function(O){var T=O!==void 0&&O||typeof self<"u"&&self||window,_=Function.prototype.apply;function E(g,x){this._id=g,this._clearFn=x}j.setTimeout=function(){return new E(_.call(setTimeout,T,arguments),clearTimeout)},j.setInterval=function(){return new E(_.call(setInterval,T,arguments),clearInterval)},j.clearTimeout=j.clearInterval=function(g){g&&g.close()},E.prototype.unref=E.prototype.ref=function(){},E.prototype.close=function(){this._clearFn.call(T,this._id)},j.enroll=function(g,x){clearTimeout(g._idleTimeoutId),g._idleTimeout=x},j.unenroll=function(g){clearTimeout(g._idleTimeoutId),g._idleTimeout=-1},j._unrefActive=j.active=function(g){clearTimeout(g._idleTimeoutId);var x=g._idleTimeout;0<=x&&(g._idleTimeoutId=setTimeout(function(){g._onTimeout&&g._onTimeout()},x))},C(120),j.setImmediate=typeof self<"u"&&self.setImmediate||O!==void 0&&O.setImmediate||this&&this.setImmediate,j.clearImmediate=typeof self<"u"&&self.clearImmediate||O!==void 0&&O.clearImmediate||this&&this.clearImmediate}).call(this,C(11))},function(te,j,C){(function(O,T){function _(r){delete A[r]}function E(r){if(m)setTimeout(E,0,r);else{var i=A[r];if(i){m=!0;try{var a=i,o=a.callback,l=a.args;switch(l.length){case 0:o();break;case 1:o(l[0]);break;case 2:o(l[0],l[1]);break;case 3:o(l[0],l[1],l[2]);break;default:o.apply(void 0,l)}}finally{_(r),m=!1}}}}var g,x,A,m,f,c,u,s;(g=typeof self>"u"?O===void 0?this:O:self).setImmediate||(x=1,m=!(A={}),f=g.document,O=(O=Object.getPrototypeOf&&Object.getPrototypeOf(g))&&O.setTimeout?O:g,{}.toString.call(g.process)==="[object process]"?c=function(r){T.nextTick(function(){E(r)})}:(()=>{var r,i;return g.postMessage&&!g.importScripts&&(r=!0,i=g.onmessage,g.onmessage=function(){r=!1},g.postMessage("","*"),g.onmessage=i,r)})()?function(){function r(a){a.source===g&&typeof a.data=="string"&&a.data.indexOf(i)===0&&E(+a.data.slice(i.length))}var i="setImmediate$"+Math.random()+"$";g.addEventListener?g.addEventListener("message",r,!1):g.attachEvent("onmessage",r),c=function(a){g.postMessage(i+a,"*")}}():c=g.MessageChannel?((s=new MessageChannel).port1.onmessage=function(r){E(r.data)},function(r){s.port2.postMessage(r)}):f&&"onreadystatechange"in f.createElement("script")?(u=f.documentElement,function(r){var i=f.createElement("script");i.onreadystatechange=function(){E(r),i.onreadystatechange=null,u.removeChild(i),i=null},u.appendChild(i)}):function(r){setTimeout(E,0,r)},O.setImmediate=function(r){typeof r!="function"&&(r=new Function(""+r));for(var i=new Array(arguments.length-1),a=0;a<i.length;a++)i[a]=arguments[a+1];return A[x]={callback:r,args:i},c(x),x++},O.clearImmediate=_)}).call(this,C(11),C(45))}])})}(zegoZimWeb$1)),zegoZimWeb$1.exports}var zegoZimWebExports=requireZegoZimWeb();const bg="/assets/bg-Dg3g1Suw.jpg";function App(){const[te,j]=reactExports.useState(null),[C,O]=reactExports.useState(null),[T,_]=reactExports.useState(""),[E,g]=reactExports.useState([]),[x,A]=reactExports.useState("Aditi"),[m,f]=reactExports.useState(!1),c=1419519790,u="04AAAAAGg1kL0ADM/Hy/QS5yItcDNm+wCwVFHzkUyh7s3+tHHEazJBVFJUSxG49RKUH/zMleY3kiGIeCnpopsyIxCf1pZAepbanfqRgP+34tgTMZYkhVMMg2kN2glP2K3fjMpIkFAxmBCD/VdXI2ntRuPGjuzWU7lydI3l71MVRS6n1jCm+8eHEIVd8a/Fne0zgiFlK2+8nYJsMdDYq492oN17knjSqyMwhZtrnRbtMS5adtFdTCX144KmomdVfrNdPHbuOQlo0NwB",s="04AAAAAGg1kPMADIogTSUZzvHlzG6tEgCy5Y8bhdT7aU/KU+nsJ9UPTTFAiRr/B9qjeY253XGUyHNDXywzdERsdwhwi2Vd/hfPvWH+/F5AFdjvy513xMzY381ZbTfEHUxCKq8BFYa94l+Ir05hC18jH+blUDJVQe3fBi8rmOB57F7msua8b5y/TeUnfO6yo/u8vy0SHjxpPliAUIZxbhM0IjTCbAk5kLGjZU0hQ2II1cmkWTFy9BKpKxi53prDZpNwBj7AoNat4GNf6AE=",r=reactExports.useRef(null);reactExports.useEffect(()=>{const l=zegoZimWebExports.ZIM.create(c);return j(l),l.on("error",(h,R)=>{console.error("ZIM Error:",R.code,R.message)}),l.on("connectionStateChanged",(h,{state:R,event:w})=>{console.log("Connection State Changed:",R,w)}),l.on("peerMessageReceived",(h,{messageList:R})=>{g(w=>[...w,...R])}),l.on("tokenWillExpire",(h,{second:R})=>{console.log("Token will expire in:",R);const w=x==="Aditi"?u:s;h.renewToken(w).then(()=>{console.log("Token renewed")}).catch(d=>{console.log("Token renew error:",d)})}),()=>{l.destroy()}},[]),reactExports.useEffect(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth"})},[E]);const i=async()=>{if(!te){console.log("ZIM instance not ready");return}const l={userID:x,userName:x==="Aditi"?"Aditi":"Shubham"},h=x==="Aditi"?u:s;try{await te.login(l,h),O(l),f(!0),g([]),console.log(" Logged in as",l.userName)}catch(R){console.error(" Login failed",R)}},a=()=>{if(console.log("Send button clicked"),!te){alert("Chat engine not initialized yet."),console.log("ZimInstance not ready");return}if(!m){alert("Please login first."),console.log("User not logged in");return}if(T.trim()===""){alert("Message cannot be empty."),console.log("Empty message, not sending");return}const l=x==="Aditi"?"Shubham":"Aditi";console.log("Sending message to:",l);const h=0,R={priority:1},w={type:1,message:T,extendedData:""};te.sendMessage(w,l,h,R).then(({message:d})=>{console.log("Message sent:",d),g(D=>[...D,d]),_("")}).catch(d=>{alert("Failed to send message. Check console for details."),console.error("Message send error:",d)})},o=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return jsxRuntimeExports.jsxs("div",{className:"p-[20px] w-full h-[100vh] flex items-center flex-col relative",style:{backgroundImage:`url(${bg})`,backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[jsxRuntimeExports.jsx("h1",{className:"text-white font-bold text-[30px]",children:"Real Time Chat App"}),!m&&te?jsxRuntimeExports.jsxs("div",{className:"w-[90%] max-w-[600px] h-[400px] overflow-auto p-[20px] backdrop-blur shadow-2xl bg-[#00000020] mt-[30px] rounded-xl flex flex-col items-center justify-center gap-[30px] border-2 border-gray-700",children:[jsxRuntimeExports.jsx("h1",{className:"text-white font-semibold text-[30px]",children:"Select User"}),jsxRuntimeExports.jsxs("select",{className:"px-[50px] rounded-xl py-[5px] bg-[#1f2525] text-white flex justify-start",onChange:l=>A(l.target.value),value:x,children:[jsxRuntimeExports.jsx("option",{value:"Aditi",children:"Aditi Gupta"}),jsxRuntimeExports.jsx("option",{value:"Shubham",children:"Shubham Kumar"})]}),jsxRuntimeExports.jsx("button",{className:"p-[10px] bg-white font-semibold cursor-pointer text-black rounded-lg w-[100px]",onClick:i,children:"Login"})]}):te===null?jsxRuntimeExports.jsx("p",{className:"text-white mt-10",children:"Initializing chat engine..."}):jsxRuntimeExports.jsxs("div",{className:"w-[90%] max-w-[800px] h-[600px] p-[20px] backdrop-blur shadow-2xl bg-[#00000020] mt-[30px] rounded-xl flex flex-col gap-[20px] border-2 border-gray-700 relative",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center mb-2",children:jsxRuntimeExports.jsxs("h2",{className:"text-white text-[20px]",children:[C==null?void 0:C.userName,jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:" chatting with "}),x==="Aditi"?"Shubham":"Aditi"]})}),jsxRuntimeExports.jsx("div",{className:"w-full h-[1px] bg-gray-800"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>g([]),className:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition",children:"Clear Chat History"})}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl w-full flex flex-col gap-[10px] items-center h-full overflow-y-auto pb-[80px]",children:[E.map((l,h)=>{const R=l.senderUserID===(C==null?void 0:C.userID);return jsxRuntimeExports.jsx("div",{className:`flex w-full ${R?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`px-[20px] py-[10px] shadow-lg text-white max-w-[70%]
                    ${R?"bg-[#0f1010] rounded-br-0 rounded-t-2xl rounded-bl-2xl":"bg-[#1c2124] rounded-bl-0 rounded-t-2xl rounded-br-2xl"}`,children:[jsxRuntimeExports.jsx("div",{children:l.message}),jsxRuntimeExports.jsx("div",{className:"text-[13px] text-gray-400",children:o(l.timestamp)})]})},h)}),jsxRuntimeExports.jsx("div",{ref:r})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[10px] w-full absolute bottom-3 left-0 px-[20px]",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"message",className:"rounded-2xl bg-gray-700 outline-none text-white px-[20px] py-[10px] placeholder-white w-full",onChange:l=>_(l.target.value),value:T,onKeyDown:l=>{l.key==="Enter"&&a()}}),jsxRuntimeExports.jsx("button",{className:"p-[10px] bg-white text-black rounded-2xl w-[100px] font-semibold",onClick:a,disabled:!m||T.trim()==="",children:"Send"})]})]})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
